(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.logicDataToUIData=function(t,n){var e=d.map(function(){return[]});return e[d.indexOf(l.TIMELINE_VIDEO_FX)]=t.timelineVideoFxTracks.map(function(t){var e=t.clips.map(function(t){return new f({raw:t,type:h(t.clipSubType),inPoint:t.inPoint,outPoint:t.outPoint})});return new p({type:l.TIMELINE_VIDEO_FX,clips:e,volume:t.volume,visible:t.show,raw:t})}),e[d.indexOf(l.STICKER)]=t.stickerTracks.map(function(t){var e=t.clips.map(function(t){return new f({raw:t,type:w.STICKER,inPoint:t.inPoint,outPoint:t.outPoint})});return new p({type:l.STICKER,clips:e,volume:t.volume,visible:t.show,raw:t})}),e[d.indexOf(l.TRIPLE)]=t.tripleTracks.map(function(t){var e=t.clips.map(function(t){return new f({raw:t,type:w.TRIPLE,inPoint:t.inPoint,outPoint:t.outPoint})});return new p({type:l.TRIPLE,clips:e,volume:t.volume,visible:t.show,raw:t})}),e[d.indexOf(l.CAPTION)]=t.captionTracks.map(function(t){var e=t.clips.map(function(t){return new f({raw:t,type:w.CAPTION,inPoint:t.inPoint,outPoint:t.outPoint})});return new p({type:l.CAPTION,clips:e,volume:t.volume,visible:t.show,raw:t})}),e[d.indexOf(l.MUSIC_CAPTION)]=t.musicCaptionTracks.map(function(t){var e=t.clips.map(function(t){return new f({raw:t,type:w.MUSIC_CAPTION,inPoint:t.inPoint,outPoint:t.outPoint})});return new p({type:l.MUSIC_CAPTION,clips:e,volume:t.volume,visible:t.show,raw:t})}),e[d.indexOf(l.AUDIO)]=t.audioTracks.map(function(t){var e=t.clips.map(function(t){return new f({raw:t,type:v.audio(t.isRecorder),orgDuration:t.orgDuration,inPoint:t.inPoint,outPoint:t.outPoint,trimIn:t.trimIn,trimOut:t.trimOut})});return new p({type:l.AUDIO,clips:e,volume:t.volume,visible:t.show,raw:t})}),e[d.indexOf(l.VIDEO)]=t.videoTracks.map(function(t,i){var e=t.clips.map(function(t,e){return new f({raw:t,type:v.video(t.videoType),orgDuration:t.orgDuration,inPoint:t.inPoint,outPoint:t.outPoint,trimIn:t.trimIn,trimOut:t.trimOut,hasTransition:!!n.$BSSdk.getVideoClipTransition(i,e)})});return new p({type:l.VIDEO,clips:e,volume:t.volume,visible:t.show,raw:t})}),e},e.refreshTrackData=e.TrackUI=e.DragClipParam=e.ClipUI=e.TrackOrder=e.TrackTypes=e.ClipTypes=void 0;var a=n(i(6)),m=n(i(8)),r=n(i(14)),g=i(40),_=n(i(49)),w={IMAGE:"IMAGE",VIDEO:"VIDEO",AUDIO:"AUDIO",CAPTION:"CAPTION",MUSIC_CAPTION:"MUSIC_CAPTION",FILTER:"FILTER",STICKER:"STICKER",TRIPLE:"TRIPLE",EFFECT:"EFFECT",RECORD_AUDIO:"RECORD_AUDIO",PARTICLE:"PARTICLE",TRANSITION:"TRANSITION",THEME:"THEME"};e.ClipTypes=w;var l={TIMELINE_VIDEO_FX:"TIMELINE_VIDEO_FX",STICKER:"STICKER",TRIPLE:"TRIPLE",CAPTION:"CAPTION",MUSIC_CAPTION:"MUSIC_CAPTION",AUDIO:"AUDIO",VIDEO:"VIDEO"},d=[(e.TrackTypes=l).TIMELINE_VIDEO_FX,l.TRIPLE,l.STICKER,l.CAPTION,l.MUSIC_CAPTION,l.AUDIO,l.VIDEO];e.TrackOrder=d;var f=function(){function v(t){var e=t.type,i=t.inPoint,n=t.outPoint,a=t.duration,r=t.trimIn,s=t.trimOut,o=t.orgDuration,c=t.raw,u=t.resource,l=t.hasTransition,d=t.isFreezeVideo;if((0,m.default)(this,v),!w[e])throw new Error("ClipType Error");if(this.raw=c,(this.type=e)!==w.IMAGE&&!d||o)this.trimIn=r||0,this.trimOut=s||a||o,this.inPoint=i||0,this.outPoint=n||a||o,this.orgDuration=o||a;else{var f=a||4e6,p=_.default.DEFAULT_IMAGE_ORG_DURATION/2,h=p+f;this.orgDuration=_.default.DEFAULT_IMAGE_ORG_DURATION,this.trimIn=r||p,this.trimOut=s||h,this.inPoint=i||0,this.outPoint=n||f}e!==w.IMAGE&&!d||(this.orgDuration=_.default.DEFAULT_IMAGE_ORG_DURATION),e===w.MUSIC_CAPTION&&(this.musicCaptionText=""),this.resource=u||{},this.uuid=(0,g.generateUUID)(),this.selected=!1,this.isDragging=!1,this.isLeftResizing=!1,this.isRightResizing=!1,this.acceptTransition=!1,this.acceptTransitionDrop=!1,this.hasTransition=l||!1,this.animOffsetX=0,this.clipWidth=0,this.isThemeTransition=!1,this.isFreezeVideo=d,this.nextClip={selected:!1,clipWidth:0},this.lastClip={selected:!1,clipWidth:0}}return(0,r.default)(v,[{key:"clone",value:function(){return new v(this)}},{key:"hasTrim",value:function(){return-1!==[w.AUDIO,w.RECORD_AUDIO,w.VIDEO,w.IMAGE].indexOf(this.type)}},{key:"getM3U8Url",value:function(){return this.raw?this.raw.m3u8Url:this.resource.m3u8_download_url||this.resource.m3u8_url}},{key:"getResourceUrl",value:function(){return this.raw?this.raw.path:this.resource.download_url||this.resource.package_url}},{key:"getResourceId",value:function(){return this.raw?this.raw.id:this.resource.resource_id||this.resource.material_id}},{key:"getPackageUrl",value:function(){return this.raw?this.raw.packageUrl:this.resource.package_url}},{key:"getPackageType",value:function(){return this.raw&&this.raw.packageType?this.raw.packageType:this.resource&&"number"==typeof this.resource.filter_type&&this.resource.package_url&&["png","mslut"].includes(this.resource.package_url.split(".").pop())?_.default.TIMELINE_VIDEO_FX_TYPE_LUT:this.resource&&this.resource.ctime?_.default.TIMELINE_VIDEO_FX_TYPE_PACKAGE:_.default.TIMELINE_VIDEO_FX_TYPE_BUILT_IN}},{key:"getMaterialType",value:function(){return this.raw?this.raw.materialType:this.resource.formatted_type||0}},{key:"getMaterialId",value:function(){return this.raw?this.raw.id:this.resource.material_id||this.getResourceId()}},{key:"getDisplayName",value:function(){return this.raw&&this.raw.displayName?this.raw.displayName:this.resource.name_zhCN||this.resource.title||this.resource.name||""}},{key:"getText",value:function(){return this.raw&&this.raw.text?this.raw.text:this.getDisplayName()}},{key:"getMusicCaptionText",value:function(){return this.raw&&this.raw.text?this.raw.text:""}},{key:"getVideoWidth",value:function(){return this.raw?this.raw.videoWidth||0:this.resource.video_width||0}},{key:"getVideoHeight",value:function(){return this.raw?this.raw.videoHeight:this.resource.video_height||0}},{key:"getOrgDuration",value:function(){return this.orgDuration||0}},{key:"getIsFreezeVideo",value:function(){return!!this.isFreezeVideo||!!this.raw&&this.raw.isFreezeVideo}},{key:"isRecordAudio",value:function(){return!!this.resource&&201===this.resource.subtype}}]),v}();e.ClipUI=f;e.DragClipParam=function t(e){var i=e.clip,n=e.left,a=e.top,r=e.element,s=e.mouseX,o=e.mouseY,c=e.dragMask,u=void 0!==c&&c;(0,m.default)(this,t),this.clip=i,this.left=n,this.top=a,this.element=r,this.mouseX=s,this.mouseY=o,this.dragMask=u};var p=function t(e){var i=e.type,n=e.clips,a=e.volume,r=e.visible,s=e.raw;(0,m.default)(this,t),this.raw=s,this.uuid=(0,g.generateUUID)(),this.type=i,this.clips=n,this.volume="number"==typeof a?a:1,this.visible=r,void 0===this.visible&&(this.visible=!0),this.activeTopTrack=!1,this.activeBottomTrack=!1,this.active=!1,this.clipOnTop=!1,this.clipOnBottom=!1,this.clipOnCenter=!1};e.TrackUI=p;var h=function(t){var e,i=(e={},(0,a.default)(e,_.default.FILTER_ORDINARY,w.FILTER),(0,a.default)(e,_.default.FILTER_LUT,w.FILTER),(0,a.default)(e,_.default.FILTER_COLOR,w.FILTER),(0,a.default)(e,_.default.FILTER_EFFECT,w.FILTER),(0,a.default)(e,_.default.FILTER_VISTA,w.FILTER),(0,a.default)(e,_.default.FILTER_BORDER,w.FILTER),(0,a.default)(e,_.default.FILTER_DOU,w.FILTER),(0,a.default)(e,_.default.FILTER_BILIBILI,w.FILTER),(0,a.default)(e,_.default.FILTER_BILIBILI_BIAN_KUANG,w.FILTER),(0,a.default)(e,_.default.PARTICLE_FILTER,w.PARTICLE),(0,a.default)(e,_.default.PARTICLE_GRAFFITI,w.PARTICLE),(0,a.default)(e,_.default.EFFECT_BLUR,w.EFFECT),(0,a.default)(e,_.default.EFFECT_MOSAIC,w.EFFECT),e)[t];return i||w.EFFECT},v={video:function(t){return 1===t?w.VIDEO:w.IMAGE},audio:function(t){return t?w.RECORD_AUDIO:w.AUDIO},caption:w.CAPTION,musicCaption:w.MUSIC_CAPTION,timelineVideoFx:h,sticker:w.STICKER};e.refreshTrackData=function(t,e,i,n,a){switch(e){case l.TIMELINE_VIDEO_FX:var r=n.clips.map(function(t){return new f({raw:t,type:h(t.clipSubType),inPoint:t.inPoint,outPoint:t.outPoint})});a.$set(t[d.indexOf(l.TIMELINE_VIDEO_FX)],i,new p({type:l.TIMELINE_VIDEO_FX,clips:r,volume:n.volume,visible:n.show,raw:n}));break;case l.STICKER:var s=n.clips.map(function(t){return new f({raw:t,type:w.STICKER,inPoint:t.inPoint,outPoint:t.outPoint})});a.$set(t[d.indexOf(l.STICKER)],i,new p({type:l.STICKER,clips:s,volume:n.volume,visible:n.show,raw:n}));break;case l.CAPTION:var o=n.clips.map(function(t){return new f({raw:t,type:w.CAPTION,inPoint:t.inPoint,outPoint:t.outPoint})});a.$set(t[d.indexOf(l.CAPTION)],i,new p({type:l.CAPTION,clips:o,volume:n.volume,visible:n.show,raw:n}));break;case l.AUDIO:var c=n.clips.map(function(t){return new f({raw:t,type:v.audio(t.isRecorder),orgDuration:t.orgDuration,inPoint:t.inPoint,outPoint:t.outPoint,trimIn:t.trimIn,trimOut:t.trimOut})});a.$set(t[d.indexOf(l.AUDIO)],i,new p({type:l.AUDIO,clips:c,volume:n.volume,visible:n.show,raw:n}));break;case l.VIDEO:var u=n.clips.map(function(t,e){return new f({raw:t,type:v.video(t.videoType),orgDuration:t.orgDuration,inPoint:t.inPoint,outPoint:t.outPoint,trimIn:t.trimIn,trimOut:t.trimOut,hasTransition:!!a.$BSSdk.getVideoClipTransition(i,e)})});a.$set(t[d.indexOf(l.VIDEO)],i,new p({type:l.VIDEO,clips:u,volume:n.volume,visible:n.show,raw:n}))}}},,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.setRuler=function(t){s=t},e.getRuler=function(){return s},e.framePerPx=o,e.pxPerFrame=c,e.getNowTimeByPx=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return parseInt(o()*(t+e)/r.default.SYSTEM*r.default.CONVERT)},e.getPxByNowTime=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;return t/r.default.CONVERT*r.default.SYSTEM/o()-e},e.getMaxGradeWidthByDuration=function(t){return t/r.default.CONVERT*r.default.SYSTEM/o(r.default.MAX_RULER)},e.frameToTimeString=function(t){return u(t/25,!0)},e.secToString=u,e.fixTimeNum=l,e.secondToFrame=d,e.frameToSecond=f,e.formatDateView=function(t){var e=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),a=t.getHours();a<10&&(a="0"+a);var r=t.getMinutes();r<10&&(r="0"+r);var s=t.getSeconds();s<10&&(s="0"+s);return"".concat(e,"-").concat(i,"-").concat(n," ").concat(a,":").concat(r,":").concat(s)},e.getWidthByDuration=function(t){var e=t/r.default.CONVERT;return c()*d(e)},e.getWidthByDuration2=function(t,e){var i=t/r.default.CONVERT;return e*d(i)},e.getFrameDurationByWidth=p,e.getSecondDurationByWidth=function(t){return f(p(t))},e.frameFromFormatData=function(t){var e=t.split(":");return d(60*e[0]*60+60*e[1]+ +e[2])+ +e[3]},e.RGBAToNvsColor=function(t){if(!t)return;var e=t.match(/(\d(\.\d+)?)+/g);return new NvsColor(parseInt(e[0])/255,parseInt(e[1])/255,parseInt(e[2])/255,parseInt(e[3])/1)},e.NvsColorToRGBA=function(t){if(!t)return"rgba(255,255,255,1)";var e=Math.round(255*t.r),i=Math.round(255*t.g),n=Math.round(255*t.b),a=t.a;return"rgba("+e+","+i+","+n+","+a+")"},e.RGBAToHex=function(t){if(""===t||null==t)return"";var e=t.match(/(\d(\.\d+)?)+/g),i=parseInt(e[0]),n=parseInt(e[1]),a=parseInt(e[2]);return"#"+parseInt(255*e[3]).toString(16)+((1<<24)+(i<<16)+(n<<8)+a).toString(16).slice(1)},e.ARGBHexToRGBA=function(t){return""!==t&&null!=t?"rgba("+parseInt("0x"+t.slice(3,5))+","+parseInt("0x"+t.slice(5,7))+","+parseInt("0x"+t.slice(7,9))+","+parseInt("0x"+t.slice(1,3))/255+")":""},e.isBossURL=function(t){return!!t&&(t.includes("clipboard.uat-boss.bilibili.co")||t.includes("uat-boss.hdslb.com")||t.includes("boss.hdslb.com"))},e.secureHTTPSData=function t(e){for(var i in e)e.hasOwnProperty(i)&&("object"===(0,a.default)(e[i])?t(e[i]):e[i]&&"string"==typeof e[i]&&e[i].startsWith("http://")&&(e[i]=e[i].replace("http://","https://")))};var a=n(i(35)),r=n(i(49)),s=r.default.DEFAULT_RULER;function o(t){void 0===t&&(t=s);var e=r.default.TimelineRules[t];return e.tipSpace/e.rulingSpace}function c(){var t=r.default.TimelineRules[s];return t.rulingSpace/t.tipSpace}function u(t){var e=parseInt(t),i=parseInt(e/60);return e%=60,"".concat(l(i),":").concat(l(e))}function l(t){return 10<=t?t:"0"+t}function d(t){return 25*t}function f(t){return t/25}function p(t){return o()*t}},,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.clipUIData=e.trackUIData=e.operations=e.MouseSourceTypes=e.EventKeys=e.OperationTypes=void 0;var a,r,s=n(i(6)),o=i(7),c={REVOKE:0,UNDO_REVOKE:1,CUT:2,SEPARATE:3,DELETE:4,FREEZE:5};e.OperationTypes=c;e.EventKeys={TRACKS_SCROLL_X:"TRACKS_SCROLL_X",CLIP_SELECTED:"CLIP_SELECTED",TRACK_GET_MOUSE:"TRACK_GET_MOUSE",TRACK_LOSE_MOUSE:"TRACK_LOSE_MOUSE",TRACK_VIEW_UDPATE:"TRACK_VIEW_UDPATE",TIMELINE_RULER_UPDATE:"TIMELINE_RULER_UPDATE",CLIP_RESIZE:"CLIP_RESIZE",TRANSITION_GET_MOUSE:"TRANSITION_GET_MOUSE",TRANSITION_LOSE_MOUSE:"TRANSITION_LOSE_MOUSE",CHANGE_TRACK_VOLUME:"CHANGE_TRACK_VOLUME",TRACK_VISIBLE_CHANGE:"TRACK_VISIBLE_CHANGE",THEME_SELECTED:"THEME_SELECTED",TRACK_MASK_GET_MOUSE:"TRACK_MASK_GET_MOUSE",TRACK_MASK_LOSE_MOUSE:"TRACK_MASK_LOSE_MOUSE"};e.MouseSourceTypes={TRACK_TOP:"TRACK_TOP",TRACK_CENTER:"TRACK_CENTER",TRACK_BOTTOM:"TRACK_BOTTOM",INIT_EMPTY:"INIT_EMPTY",TOP_EMPTY:"TOP_EMPTY",BOTTOM_EMPTY:"BOTTOM_EMPTY",THEME:"THEME"};var u=[{key:c.REVOKE,icon:"上一步",hint:"撤销"},{key:c.UNDO_REVOKE,icon:"下一步",hint:"恢复"},{key:c.CUT,icon:"剪辑",hint:"剪开片段"},{key:c.SEPARATE,icon:"分离",hint:"分离音轨"},{key:c.FREEZE,icon:"定格",hint:"定格视频"},{key:c.DELETE,icon:"操作栏删除",hint:"删除片段"}];e.operations=u;var l=(a={},(0,s.default)(a,o.TrackTypes.AUDIO,{icon:"轨道音乐",name:"音频"}),(0,s.default)(a,o.TrackTypes.CAPTION,{icon:"轨道字幕",name:"字幕"}),(0,s.default)(a,o.TrackTypes.MUSIC_CAPTION,{icon:"唱词字幕",name:"唱词字幕"}),(0,s.default)(a,o.TrackTypes.STICKER,{icon:"轨道贴纸",name:"贴纸"}),(0,s.default)(a,o.TrackTypes.TRIPLE,{icon:"三连",name:"一键三连"}),(0,s.default)(a,o.TrackTypes.TIMELINE_VIDEO_FX,{icon:"轨道效果",name:"效果"}),(0,s.default)(a,o.TrackTypes.VIDEO,{icon:"轨道视频",name:"视频"}),a);e.trackUIData=l;var d=(r={},(0,s.default)(r,o.ClipTypes.AUDIO,{color:"#2561a6",borderColor:"#4388FF",height:30}),(0,s.default)(r,o.ClipTypes.RECORD_AUDIO,{color:"#2561a6",borderColor:"#4388FF",height:30}),(0,s.default)(r,o.ClipTypes.CAPTION,{color:"#519D86",borderColor:"#56C4A3",height:30}),(0,s.default)(r,o.ClipTypes.MUSIC_CAPTION,{color:"#519D86",borderColor:"#56C4A3",height:30}),(0,s.default)(r,o.ClipTypes.STICKER,{color:"#CC6E21",borderColor:"#F28933",height:30}),(0,s.default)(r,o.ClipTypes.TRIPLE,{color:"#CC6E21",borderColor:"#F28933",height:30}),(0,s.default)(r,o.ClipTypes.FILTER,{color:"#3C227A",borderColor:"#9752DD",height:30}),(0,s.default)(r,o.ClipTypes.EFFECT,{color:"#8B6DCE",borderColor:"#B2A0E8",height:30}),(0,s.default)(r,o.ClipTypes.PARTICLE,{color:"#A1249B",borderColor:"#CE35C7",height:30}),(0,s.default)(r,o.ClipTypes.IMAGE,{color:"#000",borderColor:"#4388FF",height:50}),(0,s.default)(r,o.ClipTypes.VIDEO,{color:"#000",borderColor:"#4388FF",height:50}),r);e.clipUIData=d},,,,,,function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.createResource=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.project_id||delete e.project_id,t.next=3,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource",e));case 3:return i=t.sent,l(),t.abrupt("return",i);case 6:case"end":return t.stop()}})},e.bindResource=function(e,i){var n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource/bind",{resource_id:e,project_id:i}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}})},e.deleteResource=function(e){var i,n,a,r;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.resource_id,n=e.project_id,(a={resource_id:i,project_id:n}).project_id||delete a.project_id,t.next=5,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource/delete",a));case 5:return r=t.sent,n||(u.push(i),l()),t.abrupt("return",r);case 8:case"end":return t.stop()}})},e.deleteResources=function(e){var i,n,a,r,s;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.resource_ids,n=e.project_id,a={resource_ids:i,project_id:n},(r=new FormData).append("resource_ids",i),a.project_id&&r.append("project_id",n),t.next=7,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource/deletes",r));case 7:return s=t.sent,n||(u.concat(i),l()),t.abrupt("return",s);case 10:case"end":return t.stop()}})},e.transcodeResource=function(e){var i,n,a=arguments;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<a.length&&void 0!==a[1]?a[1]:1,t.next=3,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource/transcode",{resource_id:e,task_type:i}));case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}})},e.createRhythm=function(e,i){var n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/model/rhythm/create",{resource_id:e,transcode:i}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}})},e.fetchRhythmData=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/model/rhythm/data",{params:{resource_id:e}}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.updateRhythmData=function(e){var i,n,a,r,s;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.type,n=e.newData,a=e.resource_id,r=(0,c.getCookie)("bili_jct"),t.next=4,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/model/rhythm/edit?csrf=".concat(r,"&csrf_token=").concat(r),{data:n,edit_type:i,resource_id:a},{json:!0}));case 4:return s=t.sent,t.abrupt("return",s);case 6:case"end":return t.stop()}})},e.fetchResourceList=function(){var e,i,n=arguments;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},t.next=3,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/resources",{params:e}));case 3:return(i=t.sent).list&&Array.isArray(i.list)||(i.list=[]),i.list.forEach(function(t){t.download_url&&(t.download_url="")}),e.project_id||(i.list=(i.list||[]).filter(function(t){return!u.includes(t.resource_id)})),t.abrupt("return",i);case 8:case"end":return t.stop()}})},e.fetchResourceDetail=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/resource",{params:{resource_id:e}}));case 2:return(i=t.sent).download_url&&(i.download_url=""),t.abrupt("return",i);case 5:case"end":return t.stop()}})},e.fetchResourceSlices=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/resource/slices",{params:{resource_id:e}}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.fetchResourceThumbnails=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/resource/thumbnails",{params:{resource_id:e}}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.fetchResourceHighLights=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/rubick/task/highlight",{params:{resource_ids:e}}));case 2:return i=t.sent,t.abrupt("return",i||{resource_highlight:{}});case 4:case"end":return t.stop()}})},e.fetchResourceHighLightsState=function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/rubick/task/state",{params:{resource_ids:e,biz_id:2}}));case 2:return i=t.sent,t.abrupt("return",i||{task_state:{}});case 4:case"end":return t.stop()}})},e.fetchResourceEtagComplete=function(e,i,n){var a;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource/create/complete",{resource_id:e,etags:i,upload_id:n}));case 2:return a=t.sent,t.abrupt("return",a);case 4:case"end":return t.stop()}})},e.fetchResourceSpace=function(){var e;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/resource/space"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}})},e.checkResource=function(e,i){var n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.post("/studio/video-editor-interface/video-editor/resource/check",{title:e,type:i}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}})},e.fetchWillExpireLives=function(){var e;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(c.default.get("/studio/video-editor-interface/video-editor/resource/expire"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}})};var o=a(i(4)),r=a(i(67)),c=n(i(53)),s=a(i(105)),u=[],l=(0,s.default)(function(){r.default.dispatch("refreshResourceRemoteStore").catch(function(t){console.error("获取容量异常",t)})},200)},,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.fetchMaterialList=function(){var e,i,n=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},t.next=3,r.default.awrap(s.default.get("/studio/video-editor-interface/video-editor/materials",{params:e}));case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}})},e.fetchMaterialListV2=function(){var e,i,n,a=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<a.length&&void 0!==a[0]?a[0]:{},t.next=3,r.default.awrap(s.default.get("https://member.bilibili.com/x/web/bs/materials",{params:{type:e.type,category_id:e.subtype,pn:e.page,ps:e.page_size,ids:e.material_ids}}));case 3:return(i=t.sent).vals||(i.vals=[]),i.pager||(i.pager={pn:0,ps:0,total:0}),e.ext&&(n=e.ext.split(","),i.vals=i.vals.filter(function(t){return t.bs_file_url&&n.includes(t.bs_file_url.split(".").pop())})),t.abrupt("return",{materials:(0,o.default)(i.vals.map(function(t){return u({},t,{cover_url:t.bs_cover||t.cover||"",animation_cover:t.animation_cover||"",ctime:t.ctime,demo_url:t.bs_videopre_url,formatted_type:e.type,material_id:t.bs_hash,mtime:t.mtime,name:t.name,name_zhCN:t.name,package_url:t.bs_file_url,subtype:e.subtype,type:e.type,duration:1e3*(t.duration||0)})}),"material_id"),page:i.pager.pn,page_size:i.pager.ps,total:i.pager.total,cats:i.cats||[]});case 8:case"end":return t.stop()}})},e.fetchTripleMaterialIds=function(e){var i,n;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=[{id:0,material_id:"48216532-B42E-460D-9D58-6FDE7D1B63AB",cover:"https://s1.hdslb.com/bfs/templar/york-static/kNDVL0Gtjka6tBDx.gif",name_zhCN:"三连+关注",package_url:"https://s1.hdslb.com/bfs/templar/york-static/48216532-B42E-460D-9D58-6FDE7D1B63AB.animatedsticker",cover_url:"https://s1.hdslb.com/bfs/templar/york-static/1tQygw0FLUn9gvqV.png",duration:5e6,bs_hash:"48216532-B42E-460D-9D58-6FDE7D1B63AB",bgSize:"120%",type:2},{id:1,material_id:"FA87750D-F355-41B1-ADAD-5A834329F89E",bs_hash:"FA87750D-F355-41B1-ADAD-5A834329F89E",cover:"https://s1.hdslb.com/bfs/templar/york-static/1X26IFATfvb9I5Bw.gif",cover_url:"https://s1.hdslb.com/bfs/templar/york-static/S6OLe0ZecaOWmsAj.png",name_zhCN:"一键三连",package_url:"https://s1.hdslb.com/bfs/templar/york-static/FA87750D-F355-41B1-ADAD-5A834329F89E.animatedsticker",duration:5e6,bgSize:"120%",type:1},{id:2,material_id:"F977036E-1779-47EB-9209-970301EE6DAF",bs_hash:"F977036E-1779-47EB-9209-970301EE6DAF",cover:"https://s1.hdslb.com/bfs/templar/york-static/tCsOpSNPF7m7sUWM.gif",name_zhCN:"加关注",cover_url:"https://s1.hdslb.com/bfs/templar/york-static/YvJf9TtCtn93Z6JJ.png",package_url:"https://s1.hdslb.com/bfs/templar/york-static/F977036E-1779-47EB-9209-970301EE6DAF.animatedsticker",duration:5e6,bgSize:"70%",type:0}],n=[],e.forEach(function(e){var t=i.findIndex(function(t){return t.material_id===e});-1<t&&n.push(i[t])}),t.abrupt("return",n);case 4:case"end":return t.stop()}})},e.fetchMaterialIds=function(e){var i,n;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.default.get("https://member.bilibili.com/x/web/bs/materials/ids",{params:{ids:e}}));case 2:return i=(i=t.sent)||{},n=[],Object.keys(i).forEach(function(t){n.push({material_id:i[t].bs_hash,package_url:i[t].bs_file_url,formatted_type:i[t].type,name:i[t].name,name_zhCN:i[t].name,cover_url:i[t].cover})}),t.abrupt("return",n);case 7:case"end":return t.stop()}})},e.fetchMaterialMusicList=function(){var e,i,n=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:{},t.next=3,r.default.awrap(s.default.get("/studio/video-editor-interface/video-editor/material/musics",{params:e}));case 3:return i=t.sent,t.abrupt("return",i);case 5:case"end":return t.stop()}})};var a=n(i(6)),r=n(i(4)),s=n(i(53)),o=n(i(831));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={data:function(){return{pager:{page:1,pageSize:60,total:0}}},methods:{pageChange:function(t,e){for(this.pager.page=t,this.fetchList();e.parentElement;)e.scrollTop=0,e=e.parentElement},fetchTestCategory:function(t){var e=(t=t||[]).find(function(t){return"测试"===t.name});!this.tabs.find(function(t){return"测试"===t.name})&&e&&this.tabs.push({name:e.name,type:this.mainType,subType:e.id})}}}},,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.isMediaSupportFormat=function(t){var e=t.split("."),i=(e[e.length-1]||"").toLocaleLowerCase();return-1!==a.default.videoTypes.indexOf(i)||-1!==a.default.audioTypes.indexOf(i)||-1!==a.default.imageTypes.indexOf(i)},e.getMediaFormatType=function(t){if(void 0===t)return 0;var e=t.split("."),i=(e[e.length-1]||"").toLocaleLowerCase();return-1===a.default.videoTypes.indexOf(i)?-1===a.default.audioTypes.indexOf(i)?-1===a.default.imageTypes.indexOf(i)?-1:3:2:1},e.getMediaExtension=function(t){var e=t.split(".");return(e[e.length-1]||"").toLowerCase()},e.generateUUID=function(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},e.blobToBase64=function(t){return new Promise(function(e){var i=new FileReader;i.onload=function(){var t=i.result;e(t)},i.readAsDataURL(t)})},e.str2Uint8=function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,a=t.length;n<a;n++)i[n]=t.charCodeAt(n);return i},e.uint82str=function(t){return String.fromCharCode.apply(null,t)},e.secureURL=function(t){return t&&t.startsWith("http://")?t.replace("http:",location.protocol):t},e.dateFormat=function(t,e){var i={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var n in i)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?i[n]:("00"+i[n]).substr((""+i[n]).length)));return e},e.escapeHTML=function(t){return"string"!=typeof t?"":t.replace(s.escape,function(t){return r.escape[t]})},e.unescapeHTML=function(t){return"string"!=typeof t?"":t.replace(s.unescape,function(t){return r.unescape[t]})},e.waitForWebfonts=e.htmlEncode=e.scrollXTo=e.scrollTo=void 0;var a=n(i(49));e.scrollTo=function(a,t,e){var r,s=2<arguments.length&&void 0!==e?e:300,o=a.scrollTop,c=t-o;window.requestAnimationFrame(function t(e){var i=e-(r=r||e),n=Math.min(i/s,1);a.scrollTop=o+c*n,i<s&&window.requestAnimationFrame(t)})};e.scrollXTo=function(a,t,e){var r,s=2<arguments.length&&void 0!==e?e:300,o=a.scrollLeft,c=t-o;window.requestAnimationFrame(function t(e){var i=e-(r=r||e),n=Math.min(i/s,1);a.scrollLeft=o+c*n,i<s&&window.requestAnimationFrame(t)})};e.htmlEncode=function(t){var e=document.createElement("span");return e.appendChild(document.createTextNode(t)),e.innerHTML};e.waitForWebfonts=function(o){return new Promise(function(r){for(var s=0,t=0,e=o.length;t<e;++t)!function(t){var e=document.createElement("span");e.innerHTML="giItT1WQy@!-/#",e.style.position="absolute",e.style.left="-10000px",e.style.top="-10000px",e.style.fontSize="300px",e.style.fontFamily="sans-serif",e.style.fontVariant="normal",e.style.fontStyle="normal",e.style.fontWeight="normal",e.style.letterSpacing="0",document.body.appendChild(e);var i,n=e.offsetWidth;function a(){if(e&&e.offsetWidth!=n&&(++s,e.parentNode.removeChild(e),e=null),s>=o.length&&(i&&clearInterval(i),s==o.length))return r(null),!0}e.style.fontFamily=t,a()||(i=setInterval(a,50))}(o[t])})};var r={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"},unescape:{"&amp;":"&","&apos;":"'","&gt;":">","&lt;":"<","&quot;":'"'}},s={escape:RegExp("["+Object.keys(r.escape).join("")+"]","g"),unescape:RegExp("("+Object.keys(r.unescape).join("|")+")","g")}},,,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1121)),s=n(i(1122)),o=n(i(1123)),c=n(i(1124)),u=n(i(1125));function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var d=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},r.default,{},s.default,{},o.default,{},c.default,{},u.default,{WEB_UPLOAD_LOCAL_NAME:"bsUploadInfo"});e.default=d},,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.getCookie=h,e.default=void 0;var r=n(i(4)),a=n(i(6)),s=n(i(604)),o=n(i(1118)),c=n(i(830)),u=n(i(67)),l=n(i(609)),d=i(15);function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var p=s.default.create({baseURL:"https://api.bilibili.com",headers:{}});function h(t){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(t).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null}p.interceptors.request.use(function(t){return t.params||(t.params={}),t.params=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},t.params,{t:Date.now()}),t.withCredentials=!0,t.headers||(t.headers={}),t.data=t.data||{},t.json?(t.headers["content-type"]="application/json",delete t.json):t.data instanceof FormData?(t.data.append("csrf",h("bili_jct")),t.headers["Content-type"]="multipart/form-data"):(t.data.csrf=h("bili_jct"),t.data&&(t.data=o.default.stringify(t.data))),t},function(t){return Promise.reject(t)}),p.interceptors.response.use(function(t){var e=t.data;return 0===e.code?((0,d.secureHTTPSData)(e.data),e.data):-101===e.code?(window.location.href="https://passport.bilibili.com/login",Promise.reject(new Error("NOT_LOGIN"))):125200===e.code?Promise.reject(new Error("PROJECT_NOT_BELONG")):125107===e.code?Promise.reject({data:e.data,message:e.msg||e.message}):125301===e.code?Promise.reject(new Error("125301")):125206===e.code?Promise.reject(new Error("125206")):Promise.reject(new Error(e.msg||e.message))},function(t){console.error(t);var e=t.message,i=t.config.url;return i&&(null!=i.match(/jssz-boss/)?e="boss资源加载异常":null!=i.match(/api.bilibili.com/)?e="api接口请求异常":null!=i.match(/member.bilibili.com/)&&(e="member接口请求异常")),(0,l.default)({type:"error",text:e||"网络请求错误"}),Promise.reject(t)});var v={get:function(e,i){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(u.default.state.biliPreviewerMode&&c.default.match(e,"get"))return t.abrupt("return",c.default.get(e,i));t.next=4;break;case 4:return t.abrupt("return",p.get(e,i));case 5:case"end":return t.stop()}})},post:function(e,i,n){var a=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(u.default.state.biliPreviewerMode&&c.default.match(e,"post"))return t.abrupt("return",c.default.post.apply(c.default,a));t.next=4;break;case 4:return t.abrupt("return",p.post(e,i,n));case 5:case"end":return t.stop()}})}};e.default=v},,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(10)),r=n(i(47)),s=n(i(1116)),o=n(i(1117)),c=n(i(1213)),u=n(i(1214));r.default.use(a.default);var l=new a.default.Store({state:c.default,mutations:s.default,actions:o.default,getters:u.default});e.default=l},,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.upload=function(i,n){var a=0,r={},s=["progress","done","catch"].reduce(function(t,e){return r[e]=[],t[e]=function(t){return r[e].push(t),s},t},{});function o(t){var e=Array.prototype.slice.call(arguments);r[t].forEach(function(t){t.apply(null,e.slice(1))})}return function t(){var e=new XMLHttpRequest;e.open("PUT",n,!0);e.upload.onprogress=function(t){var e=t.loaded/t.total;o("progress",e)};e.onreadystatechange=function(){e.readyState===e.DONE&&(200<=e.status&&e.status<300?o("done"):3<a?o("catch",new Error("upload error")):(a+=1,t()))};e.send(i)}(),s},e.multipleFetch=function(l,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:5242880,i={},d=[],f=!1,p=!1,h=!1,v=0,m=20,n=1e3,a=["progress","done","catch"].reduce(function(t,e){return i[e]=[],t[e]=function(t){return i[e].push(t),a},t},{});function g(t){if(i[t]){"catch"===t&&(h=!0);var e=Array.prototype.slice.call(arguments);i[t].forEach(function(t){t.apply(null,e.slice(1))})}}function _(t){t.sort(function(t,e){return t.partNumber-e.partNumber});var e=t.map(function(t){return t.etag});T.default.sendCustomEvent("editor_boss_multiple_file_upload_success"),g("done",e.join(","))}function w(t){var e=d.indexOf(t);-1!==e&&d.splice(e,1)}function b(n){var a,r,s,o,c,u;return C.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(h)return t.abrupt("return");t.next=2;break;case 2:if(f)return t.abrupt("return");t.next=4;break;case 4:if(p)return t.abrupt("return");t.next=6;break;case 6:if(p=n.every(function(t){return!!t.etag}))return v=0,_(n),t.abrupt("return");t.next=11;break;case 11:if(a=n.find(function(t){return"waiting"===t.status})){t.next=14;break}return t.abrupt("return");case 14:return a.status="uploading",r=new AbortController,d.push(r),s={signal:r.signal,method:"PUT",body:a.buffer},o=new Request(a.uploadUrl,s),c=fetch(o),t.prev=20,t.next=23,C.default.awrap(c);case 23:u=t.sent,t.next=31;break;case 26:throw t.prev=26,t.t0=t.catch(20),w(r),a.status="waiting",t.t0;case 31:if(w(r),u.ok)return v=0,a.status="uploaded",a.etag=u.headers.get("etag"),a.loadedBufferSize=a.buffer.size,e=n,i=l.size,g("progress",e.reduce(function(t,e){return t+e.loadedBufferSize},0)/i),t.next=40,C.default.awrap(b(n));t.next=42;break;case 40:t.next=55;break;case 42:if(a.status="waiting",v<m)return t.next=46,C.default.awrap(y());t.next=51;break;case 46:return v+=1,t.next=49,C.default.awrap(b(n));case 49:t.next=55;break;case 51:if(n.some(function(t){return"uploading"===t.status}))return t.abrupt("return");t.next=53;break;case 53:g("catch",new Error("upload error")),u.text().then(function(t){T.default.sendCustomEvent("editor_boss_multiple_file_upload_error",{error:"Service Error",status:""+u.status,type:""+u.type,text:t||"empty"})}).catch(function(t){T.default.sendCustomEvent("editor_boss_multiple_file_upload_error",{error:t.message,status:"local",type:"catch",text:"empty"})});case 55:case"end":return t.stop()}var e,i},null,null,[[20,26]])}var e=function(t){for(var e=t.length,i=[],n=0;n<e;n++){var a=l.slice(n*r,(n+1)*r);i.push({partNumber:n+1,buffer:a,loadedBufferSize:0,etag:"",uploadUrl:t[n],retry:0,status:"waiting"})}return i}(t);if(e.length)for(var s=0;s<2;s++)c();else{var o=new Error("UploadUrls empty");g("catch",o),T.default.sendCustomEvent("editor_boss_multiple_file_upload_error",{error:o.message,status:"local",type:"catch",text:"empty"})}function c(){b(e).catch(function(t){if(!h&&!f)if(v<m)y().then(function(){v+=1,c()});else{if(e.some(function(t){return"uploading"===t.status}))return;g("catch",t),T.default.sendCustomEvent("editor_boss_multiple_file_upload_error",{error:t.message,status:"local",type:"catch",text:"empty"})}})}function y(t){var e=0<arguments.length&&void 0!==t?t:n;return new Promise(function(t){setTimeout(t,e)})}return a.cancel=function(){f=!0,T.default.sendCustomEvent("editor_boss_multiple_file_upload_abort"),d.forEach(function(t){t.abort()})},T.default.sendCustomEvent("editor_boss_multiple_file_upload_start"),a},e.bossM3U8TextReplace=function(i,e){var n,a,r;return C.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=i&&(i=i.replace("http://","https://")).replace("clipboard.uat-boss.bilibili.co","uat-boss.hdslb.com"),n=function(e){var i,n;return C.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C.default.awrap((0,s.fetchResourceSlices)(e));case 2:if(i=t.sent,n={},i&&i.list&&(n=i.list),Object.keys(n).length){t.next=12;break}return t.next=8,C.default.awrap((0,s.fetchResourceThumbnails)(e).catch(function(t){console.error(t)}));case 8:if(t.t0=t.sent,t.t0){t.next=11;break}t.t0={list:{}};case 11:n=t.t0.list;case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}})},/boss\.hdslb\.com/.test(i))return t.next=5,C.default.awrap(n(e));t.next=12;break;case 5:return a=t.sent,r=i.match(/#EXT-X-MEISHE-HOST:(.*)?\n/)[1],i=i.replace(r,"https://"),Object.keys(a).forEach(function(t){var e=a[t].replace("http://","").replace("https://","");i=i.replace(t,e)}),t.abrupt("return",i);case 12:return t.abrupt("return",i);case 13:case"end":return t.stop()}})};var C=n(i(4)),s=i(27),T=n(i(93))},function(t,e,i){"use strict";i.r(e);var n=i(760),a=i(223);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=n(i(47)),s=i(1285),o=[],c="@@clickoutsideContext",u=0;function l(i,n,a){return function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!(a&&a.context&&t.target&&e.target)||i.contains(t.target)||i.contains(e.target)||i===t.target||a.context.popperElm&&(a.context.popperElm.contains(t.target)||a.context.popperElm.contains(e.target))||(n.expression&&i[c].methodName&&a.context[i[c].methodName]?a.context[i[c].methodName]():i[c].bindingFn&&i[c].bindingFn())}}r.default.prototype.$isServer||(0,s.on)(document,"mousedown",function(t){return a=t}),r.default.prototype.$isServer||(0,s.on)(document,"mouseup",function(e){o.forEach(function(t){return t[c].documentHandler(e,a)})});var d={bind:function(t,e,i){o.push(t);var n=u++;t[c]={id:n,documentHandler:l(t,e,i),methodName:e.expression,bindingFn:e.value}},update:function(t,e,i){t[c].documentHandler=l(t,e,i),t[c].methodName=e.expression,t[c].bindingFn=e.value},unbind:function(t){for(var e=o.length,i=0;i<e;i++)if(o[i][c].id===t[c].id){o.splice(i,1);break}delete t[c]}};e.default=d},,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var n=i(721),a=i(197);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1248);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"d844cfdc",null);e.default=o.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rhythmFrameToTimeString=function(t){return a(t/25)},e.rhythmSecToString=a,e.calcSectionData=function(t,e){return t.map(function(t){return r(t,e)})},e.getCurSectionTime=r,e.searchInsert=function(t,e){var i,n=0,a=t.length-1;for(;n<=a;){if(i=Math.floor((n+a)/2),t[i]==e)return i;t[i]<e?n=i+1:t[i]>e&&(a=i-1)}return n},e.millisecToPx=function(t){return t/1e3*n.secondPx},e.MAX_AUDIO_DURATION=e.BOUNDARY=e.rulerTimeline=void 0;var n={rulingCount:5,rulingSpace:15,tipSpace:2.5,secondPx:150};e.rulerTimeline=n;e.BOUNDARY=100;function a(t){var e=Number(t).toFixed(1),i=parseInt(e/3600);e%=3600;var n=parseInt(e/60);return e%=60,i?"".concat(i,"h ").concat(n,"m ").concat(e,"s"):n?"".concat(n,"m ").concat(e,"s"):"".concat(e,"s")}function r(t,e){return[0<t-e?t-e:0,t+e]}e.MAX_AUDIO_DURATION=6e8},,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(67)),r={sendCustomEvent:function(t,e){var i=1<arguments.length&&void 0!==e?e:1;a.default.state.biliPreviewerMode?window.debugLog("[Event Send]",t,i):(window.reportMsgObj[t]=i,window.reportObserver&&window.reportObserver.forceCommit())},sendSentryError:function(t,e){var i="[".concat(e||"unknown_position","] ").concat(t||"unknown_error");window.Sentry&&!a.default.state.biliPreviewerMode?window.Sentry.captureMessage(i):console.log("[Sentry Event Send]",i)}};e.default=r},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.fetchProjectList=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.get("/studio/video-editor-interface/video-editor/projects",{params:e}));case 2:return(i=t.sent).projects=(i.projects||[]).filter(function(t){return!s.includes(t.project_id)}),t.abrupt("return",i);case 5:case"end":return t.stop()}})},e.fetchProjectDetail=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.get("/studio/video-editor-interface/video-editor/project",{params:{project_id:e}}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.createProject=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.post("/studio/video-editor-interface/video-editor/project",{title:e}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.updateProject=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.post("/studio/video-editor-interface/video-editor/project/update",e));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.deleteProject=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.post("/studio/video-editor-interface/video-editor/project/delete",{project_id:e}));case 2:return i=t.sent,s.push(e),t.abrupt("return",i);case 5:case"end":return t.stop()}})},e.copyProject=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.post("/studio/video-editor-interface/video-editor/project/copy",{project_id:e}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})},e.getProjectStatus=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.get("/studio/video-editor-interface/video-editor/live/status",{params:{project_id:e}}));case 2:return i=t.sent,t.abrupt("return",i);case 4:case"end":return t.stop()}})};var a=n(i(4)),r=n(i(53)),s=[]},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.createVideo=function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.post("/studio/video-editor-interface/video-editor/video",e));case 1:case"end":return t.stop()}})},e.retryVideo=function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.post("/studio/video-editor-interface/video-editor/video/retry",e));case 1:case"end":return t.stop()}})},e.deleteVideo=function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.post("/studio/video-editor-interface/video-editor/video/delete",{video_id:e}));case 1:case"end":return t.stop()}})},e.fetchVideoList=function(){var e,i=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<i.length&&void 0!==i[0]?i[0]:{},t.abrupt("return",s.default.get("/studio/video-editor-interface/video-editor/video/list",{params:e}));case 2:case"end":return t.stop()}})},e.renameVideo=function(){var e,i=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<i.length&&void 0!==i[0]?i[0]:{},t.abrupt("return",s.default.post("/studio/video-editor-interface/video-editor/video/update",c({},e)));case 2:case"end":return t.stop()}})},e.updateXML=function(e,i){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.post("/studio/video-editor-interface/video-editor/project/xml/upload",{project_id:e,size:i}));case 1:case"end":return t.stop()}})},e.updateXMLCallback=function(e,i,n){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.post("/studio/video-editor-interface/video-editor/project/xml/upload_success",{project_id:e,version:i,xml_size:n}));case 1:case"end":return t.stop()}})},e.uploadImage=function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.post("https://member.bilibili.com/x/vu/web/cover/up",{cover:e}));case 1:case"end":return t.stop()}})};var a=n(i(6)),r=n(i(4)),s=n(i(53));function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.getVideoList=function(e,i){var n,a,r;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(l.get(e));case 2:return n=t.sent.data,t.next=5,c.default.awrap((0,u.bossM3U8TextReplace)(n,i));case 5:return n=t.sent,a=[],r="",n.split("\n").forEach(function(t){t.startsWith("#EXT-X-MEISHE-HOST:")&&(r=t.replace("#EXT-X-MEISHE-HOST:","")),-1!==t.indexOf("clipboard")&&a.push(r+t)}),t.abrupt("return",a);case 10:case"end":return t.stop()}})},e.PreviewPlayer=e.AudioM3u8PreviewPlayer=e.M3u8PreviewPlayer=void 0;var s=n(i(8)),o=n(i(14)),c=n(i(4)),a=n(i(604)),u=i(69),l=a.default.create();var r=function(){function r(t,e){var i=this;(0,s.default)(this,r);var n=window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle,a=2*window.devicePixelRatio||2;this.width=Number(n.width.replace("px",""))*a,this.height=Number(n.height.replace("px",""))*a,t.width=this.width,t.height=this.height,this.canvas=t,this.context=this.canvas.getContext("2d"),this.context.imageSmoothingQuality="medium",this.playList=e,this.index=0,this.count=e.length,this.videos=[this.createVideo(),this.createVideo()],this.videos.forEach(function(t){t.addEventListener("ended",i.end.bind(i))}),this.videoIndex=0,this.videos[this.videoIndex].src=this.playList[this.index],this.initVideoSize=!1,this.destroyed=!1}return(0,o.default)(r,[{key:"createVideo",value:function(){if(!this.destroyed){var t=document.createElement("video");return t.muted=!0,t}}},{key:"play",value:function(){var e,i=this;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.destroyed)return t.abrupt("return");t.next=2;break;case 2:if((e=this.videos[this.videoIndex]).paused){t.next=5;break}return t.abrupt("return");case 5:e.play().catch(function(){}),this.loadNext(),this.playInterval=setInterval(function(){e.paused||(i.initVideoSize||"number"==typeof e.videoWidth&&0!==e.videoWidth)&&(i.initVideoSize||(i.videoH=i.height,i.videoW=e.videoWidth*(i.height/e.videoHeight),i.startX=(i.width-i.videoW)/2,i.initVideoSize=!0),i.context.drawImage(e,i.startX,0,i.videoW,i.videoH))},16);case 8:case"end":return t.stop()}},null,this)}},{key:"end",value:function(){this.destroyed||(clearInterval(this.playInterval),this.index=(this.index+1)%this.count,this.videoIndex=(this.videoIndex+1)%2,this.play())}},{key:"loadNext",value:function(){if(!this.destroyed){var t=this.videos[(this.videoIndex+1)%2];t.setAttribute("src",this.playList[(this.index+1)%this.count]),t.load()}}},{key:"destroy",value:function(){var e=this;this.destroyed=!0,clearInterval(this.playInterval),this.videos.forEach(function(t){t.pause(),t.removeAttribute("src"),t.removeEventListener("ended",e.end.bind(e)),t.load()}),this.videos=[]}}]),r}();e.M3u8PreviewPlayer=r;var d=function(){function i(t){var e=this;(0,s.default)(this,i),this.playList=t,this.index=0,this.count=t.length,this.audios=[this.createAudio(),this.createAudio()],this.audios.forEach(function(t){t.addEventListener("ended",e.end.bind(e))}),this.audioIndex=0,this.audios[this.audioIndex].src=this.playList[this.index],this.initAudioSize=!1,this.destroyed=!1}return(0,o.default)(i,[{key:"createAudio",value:function(){if(!this.destroyed){var t=document.createElement("audio");return t.volume=.5,t}}},{key:"play",value:function(){var e;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.destroyed)return t.abrupt("return");t.next=2;break;case 2:if((e=this.audios[this.audioIndex]).paused){t.next=5;break}return t.abrupt("return");case 5:e.play().catch(function(){}),this.loadNext();case 7:case"end":return t.stop()}},null,this)}},{key:"end",value:function(){this.destroyed||(this.index=(this.index+1)%this.count,this.audioIndex=(this.audioIndex+1)%2,this.play())}},{key:"loadNext",value:function(){if(!this.destroyed){var t=this.audios[(this.audioIndex+1)%2];t.setAttribute("src",this.playList[(this.index+1)%this.count]),t.load()}}},{key:"destroy",value:function(){var e=this;this.destroyed=!0,this.audios.forEach(function(t){t.pause(),t.removeAttribute("src"),t.removeEventListener("ended",e.end.bind(e)),t.load()}),this.audios=[]}}]),i}();e.AudioM3u8PreviewPlayer=d;var f=function(){function a(t,e){(0,s.default)(this,a);var i=window.getComputedStyle?window.getComputedStyle(t,null):t.currentStyle,n=2*window.devicePixelRatio||2;this.width=Number(i.width.replace("px",""))*n,this.height=Number(i.height.replace("px",""))*n,t.width=this.width,t.height=this.height,this.canvas=t,this.context=this.canvas.getContext("2d"),this.url=e}return(0,o.default)(a,[{key:"play",value:function(t){var e=this,i=0<arguments.length&&void 0!==t&&t;this.video=document.createElement("video"),this.video.src=this.url,this.video.setAttribute("loop","loop"),i||(this.video.muted=!0),this.video.oncanplay=function(){clearInterval(e.playInterval),e.video.play(),e.videoH=e.height,e.videoW=e.video.videoWidth*(e.height/e.video.videoHeight),e.startX=(e.width-e.videoW)/2,e.initVideoSize=!0,e.playInterval=setInterval(function(){e.context.drawImage(e.video,e.startX,0,e.videoW,e.videoH)},16)}}},{key:"destroy",value:function(){clearInterval(this.playInterval),this.video.pause(),this.video.removeAttribute("src"),this.video.load(),this.video=null}}]),a}();e.PreviewPlayer=f},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.Clip=e.Track=e.TimelineData=void 0;var a=n(i(8));e.TimelineData=function t(e,i){(0,a.default)(this,t),this.resWidth=e,this.resHeight=i,this.duration=0,this.videoSize="16:9",this.controlSpeed=1,this.theme=void 0,this.selectTrackIndex=-1,this.timelineVideoFxTracks=[],this.stickerTracks=[],this.tripleTracks=[],this.captionTracks=[],this.musicCaptionTracks=[],this.audioTracks=[],this.videoTracks=[]};e.Track=function t(e,i){(0,a.default)(this,t),this.type=e,this.index=i,this.show=!0,this.volume=1,this.clips=[],this.tips="",this.icon="",this.selected=!1};e.Clip=function t(e,i){(0,a.default)(this,t),this.id=-1,this.index=i,this.type=e,this.inPoint=-1,this.outPoint=-1,this.selected=!1,this.isDragging=!1,this.displayName=""}},,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{liveWindowPlaying:!1}},mounted:function(){this.$Bus.$on(this.$GLEventKey.onPlaybackEOF,this.setPause),this.$Bus.$on(this.$GLEventKey.onPlaybackStopped,this.setPause),this.$Bus.$on(this.$GLEventKey.onPlaybackTimelinePosition,this.setPlaying),this.$Bus.$on(this.$GLEventKey.onPlaybackSeek,this.setPause)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.onPlaybackEOF,this.setPause),this.$Bus.$off(this.$GLEventKey.onPlaybackStopped,this.setPause),this.$Bus.$off(this.$GLEventKey.onPlaybackTimelinePosition,this.setPlaying),this.$Bus.$off(this.$GLEventKey.onPlaybackSeek,this.setPause)},methods:{setPlaying:function(){this.liveWindowPlaying=!0},setPause:function(){this.liveWindowPlaying=!1},playLiveWindow:function(t){void 0===t&&(t=!this.liveWindowPlaying),t?(this.$store.state.currentTimelinePosition===this.$store.state.timelineDuration&&this.$BSSdk.seekTimeline(0,!0),this.$BSSdk.playContext().catch(function(t){console.error(t),console.error("播放出错")})):this.$BSSdk.stopContext()}}};e.default=n},function(t,e,i){"use strict";i.r(e);var n=i(747),a=i(286);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1307);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"15c1fbc6",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(7),s={data:function(){return{currentEditClip:this.$BSSdk.getCurrentEditClip()}},methods:{changeMusicTemplate:function(t){this.currentEditClip&&this.$Bus.$emit(this.$GLEventKey.APPLY_MUSIC_CAPTION,t)},handleChangeTemplate:function(e){var i=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.currentEditClip){t.next=2;break}return t.abrupt("return");case 2:if(this.cardDisabled)return t.abrupt("return");t.next=4;break;case 4:if(this.$Timeline.uiProcessLocked)return t.abrupt("return");t.next=6;break;case 6:if(this.currentEditClip.id=e.bs_hash,this.clipType===r.ClipTypes.CAPTION)return t.next=10,a.default.awrap(this.$BSSdk.doBatchProcess(function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.$BSSdk.applyCaptionStyle(i.currentEditClip,{packageUrl:e.package_url,displayName:e.name}));case 2:i.$BSSdk.setCaptionClipKeyFramesByClip(i.currentEditClip,i.currentEditClip),i.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}})}));t.next=13;break;case 10:this.$BSSdk.seekCurrentTimeline(),t.next=20;break;case 13:if(this.clipType!==r.ClipTypes.STICKER&&this.clipType!==r.ClipTypes.FILTER&&this.clipType!==r.ClipTypes.EFFECT){t.next=17;break}this.$Bus.$emit(this.$GLEventKey.CHANGE_TEMPLATE,e,this.clipType),t.next=20;break;case 17:if(this.clipType===r.ClipTypes.THEME)return t.next=20,a.default.awrap(this.applyTheme(e,!1));t.next=20;break;case 20:case"end":return t.stop()}},null,this)}},computed:{showSelectBorder:function(){return this.currentEditClip&&this.currentEditClip.id===this.card.bs_hash}}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(776),a=i(309);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1320);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"23eef278",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1321)).default;e.default=a},,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=void 0;var a=n(i(8)),r=n(i(14)),s=i(7),o=function(){function t(){(0,a.default)(this,t),this.themeId="",this.themeName="",this.volume=0,this.headDuration=0,this.tailDuration=0,this.headInPoint=0,this.tailInPoint=0,this.type=s.ClipTypes.THEME,this.selected=!1}return(0,r.default)(t,[{key:"updateTailInPoint",value:function(t){this.tailInPoint=t}},{key:"fromOrigin",value:function(t){return this.themeId=t.id,this.themeName=t.displayNamezhCN,this.volume=t.volumeValue,this.headDuration=t.titleWidth,this.headInPoint=t.titleInPoint,this.tailDuration=t.trailerWidth,this.tailInPoint=t.trailerInPoint,this.raw=t,this}}]),t}();e.Theme=o},,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1243)).default;e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.fetchTaskList=function(){var e,i=arguments;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<i.length&&void 0!==i[0]?i[0]:{},t.abrupt("return",r.default.get("/studio/video-editor-interface/video-editor/tasks",{params:e}));case 2:case"end":return t.stop()}})},e.deleteTask=function(e){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.default.post("/studio/video-editor-interface/video-editor/task/delete",{task_id:e}));case 1:case"end":return t.stop()}})},e.fetchTaskProcessCount=function(e){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",r.default.get("/studio/video-editor-interface/video-editor/task/processing/count",{params:{type:e}}));case 1:case"end":return t.stop()}})};var a=n(i(4)),r=n(i(53))},function(t,e,i){"use strict";i.r(e);var n=i(739),a=i(217);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1279);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7fb7ded0",null);e.default=o.exports},,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={methods:{dispatch:function(t,e,i){for(var n=this.$parent||this.$root,a=n.$options.componentName;n&&(!a||a!==t);)(n=n.$parent)&&(a=n.$options.componentName);n&&n.$emit.apply(n,[e].concat(i))},broadcast:function(t,e,i){(function e(i,n,a){this.$children.forEach(function(t){t.$options.componentName===i?t.$emit.apply(t,[n].concat(a)):e.apply(t,[i,n].concat([a]))})}).call(this,t,e,i)}}};e.default=n},function(t,e,i){"use strict";i.r(e);var n=i(144),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1106)),r=n(i(1115)),s={created:function(){var i=this;this.$store.dispatch("fetchCaptionFonts").then(function(t){var e=t[0];return i.$BSSdk.readAndSaveAsset(e.packageUrl)}).catch(function(t){console.error("字体文件列表拉取失败",t)}),this.$store.dispatch("refreshResourceRemoteStore").catch(function(t){console.error("获取容量异常",t)})},components:{Browser:a.default,CheckLiveExpire:r.default}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(146),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"Browser",created:function(){this.detectBrowser(),this.isEquipmentSupport=this.detectPCOS(),window.debugLog("你正在使用的是："+this.browser+" "+this.version+" on "+this.OS+"!"),window.debugLog("isSupportSharedArrayBuffer:",this.isSupportSharedArrayBuffer()?"yes":"no"),window.debugLog("isSupportWebAssembly:",this.isSupportWebAssembly()?"yes":"no"),window.debugLog("isSupportWebGL:",this.isSupportWebGL()?"yes":"no"),window.debugLog("isChrome:",this.isChrome()?"yes":"no"),window.debugLog("isFirefox:",this.isFirefox()?"yes":"no"),window.debugLog("isEdge:",this.isEdge()?"yes":"no"),window.debugLog("isIE:",this.isIE()?"yes":"no"),window.debugLog("isIE11:",this.isIE11()?"yes":"no"),window.debugLog("isOpera:",this.isOpera()?"yes":"no"),this.isElseBrowser()?(this.isBrowserSupport=!0,this.isOpera()?(this.setUpdateParams(3),this.compareChromeVersion()?(this.isBrowserVersionSupport=!0,this.isBrowserParamsSupport=this.isSupportSharedArrayBuffer()&&this.isSupportWebAssembly()&&this.isSupportWebGL()):this.isBrowserVersionSupport=!1):this.isFirefox()?"Chrome"===this.browser?(this.setUpdateParams(0),this.compareChromeVersion()?(this.isBrowserVersionSupport=!0,this.isBrowserParamsSupport=this.isSupportSharedArrayBuffer()&&this.isSupportWebAssembly()&&this.isSupportWebGL()):this.isBrowserVersionSupport=!1):this.isBrowserSupport=!1:(this.isEdge()||this.isIE()||this.isIE11()?this.setUpdateParams(4):this.setUpdateParams(0),this.compareChromeVersion()?(this.isBrowserVersionSupport=!0,this.isBrowserParamsSupport=this.isSupportSharedArrayBuffer()&&this.isSupportWebAssembly()&&this.isSupportWebGL()):this.isBrowserVersionSupport=!1)):this.isBrowserSupport=!1,window.debugLog("设备是否支持：",this.isEquipmentSupport),window.debugLog("浏览器是否支持：",this.isBrowserSupport),window.debugLog("浏览器版本是否支持：",this.isBrowserVersionSupport),window.debugLog("浏览器参数是否支持：",this.isBrowserParamsSupport),this.isEquipmentSupport&&this.isBrowserSupport&&this.isBrowserVersionSupport&&this.isBrowserParamsSupport&&this.$store.commit("updateBrowserCheck",!1)},data:function(){return{is360:!1,isEquipmentSupport:!1,isBrowserSupport:!1,isBrowserVersionSupport:!1,isBrowserParamsSupport:!0,isBrowserVersionIcon:"",isBrowserVersionTitle:"",isBrowserVersionSubTitle:"",isBrowserVersionUpdateUrl:"",isBrowserParamsUrl:"",paramsBrowser:[{id:0,message:"谷歌",subMessage:"Google",icon:i(606),updateUrl:"https://www.google.cn/chrome/browser/desktop/index.html",paramsUrl:i(607)},{id:1,message:"360极速版",icon:i(1110),subMessage:"360极速版",updateUrl:"https://browser.360.cn/ee/",paramsUrl:i(607)},{id:2,message:"火狐",icon:i(1111),subMessage:"Firefox",updateUrl:"https://www.firefox.com.cn/",paramsUrl:i(1112)},{id:3,message:"Opera",icon:i(827),subMessage:"Opera",updateUrl:"https://www.opera.com/zh-cn",paramsUrl:i(1113)},{id:4,message:"微软Edge",icon:i(828),subMessage:"Edge",updateUrl:"https://www.microsoft.com/en-us/windows/microsoft-edge",paramsUrl:i(607)}],recommendData:[{id:0,message:"谷歌Chrome",subMessage:"Google",icon:i(606),isShow:!0,updateUrl:"https://www.google.cn/chrome/browser/desktop/index.html"},{id:1,message:"微软Edge",subMessage:"Edge",icon:i(828),isShow:!0,updateUrl:"https://www.microsoft.com/en-us/windows/microsoft-edge"},{id:3,message:"Opera",icon:i(827),subMessage:"Opera",isShow:!0,updateUrl:"https://www.opera.com/zh-cn"}],dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],dataMobileOS:["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],browser:"An unknown browser",version:"an unknown version",OS:"an unknown OS"}},methods:{isSupportSharedArrayBuffer:function(){return"undefined"!=typeof SharedArrayBuffer},isSupportWebAssembly:function(){return!this.isIE()&&!this.isIE11()&&"undefined"!=typeof WebAssembly},isSupportWebGL:function(){if(this.isIE()||this.isIE11())return!1;try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}},isChrome:function(){return!(!window.chrome||!window.chrome.webstore&&!window.chrome.runtime)},isFirefox:function(){return"undefined"!=typeof InstallTrigger},isEdge:function(){return!!!document.documentMode&&!!window.StyleMedia},isOpera:function(){return!!window.opr&&!!window.opr.addons||!!window.opera||0<=navigator.userAgent.indexOf(" OPR/")},isIE:function(){var t=navigator.userAgent;return-1<t.indexOf("compatible")&&-1<t.indexOf("MSIE")},isIE11:function(){var t=navigator.userAgent;return-1<t.indexOf("Trident")&&-1<t.indexOf("rv:11.0")},isElseBrowser:function(){var t=navigator.userAgent.toLocaleLowerCase(),e=null,i=!0;return null!=t.match(/ubrowser/)?i=!(e="UC"):null!=t.match(/bidubrowser/)?i=!(e="百度"):null!=t.match(/metasr/)?i=!(e="搜狗"):null!=t.match(/tencenttraveler/)||null!=t.match(/qqbrowse/)?i=!(e="QQ"):null!=t.match(/maxthon/)?i=!(e="遨游"):null!=t.match(/chrome/)?(e="chrome",i=!0):null!=t.match(/safari/)&&(i=!(e="Safari")),console.log("is current Brower :",e),i},_mime:function(t,e){var i=navigator.mimeTypes;for(var n in i)if(i[n][t]===e)return!0;return!1},detectBrowser:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version"},detectPCOS:function(){for(var t=navigator.userAgent,e=!0,i=0;i<this.dataMobileOS.length;i++)if(0<t.indexOf(this.dataMobileOS[i])){this.OS=this.dataMobileOS[i],e=!1;break}return e&&(this.OS=this.searchString(this.dataOS)||"an unknown OS"),e},searchString:function(t){for(var e=0;e<t.length;e++){var i=t[e].string,n=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!==i.indexOf(t[e].subString))return t[e].identity}else if(n)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e){if("Chrome"!==this.versionSearchString)return parseFloat(t.substring(e+this.versionSearchString.length+1));var i=t.substring(e+this.versionSearchString.length+1).split(" ")[0];return console.log("Chrome browser complete version is ",i),i}},goRecommendUrl:function(t){window.open(this.recommendData[t].updateUrl)},toUpdate:function(t){window.open(t)},setUpdateParams:function(t){this.isBrowserVersionIcon=this.paramsBrowser[t].icon,this.isBrowserVersionTitle=this.paramsBrowser[t].message,this.isBrowserVersionSubTitle=this.paramsBrowser[t].subMessage,this.isBrowserVersionUpdateUrl=this.paramsBrowser[t].updateUrl,this.isBrowserParamsUrl=this.paramsBrowser[t].paramsUrl},compareChromeVersion:function(){return"Chrome"===this.browser&&(75<=this.version||this.version&&this.version.localeCompare&&0<=this.version.localeCompare("75.0.3770.142"))}}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(149),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(27),s={data:function(){return{visible:!1,expireTitles:[],options:[],notShowKey:"not-show-expire-again",hintedLiveKey:"hinted-live",lastWillExpireIdsKey:"last-will-expire-ids",expiredIdsKey:"expired-ids"}},mounted:function(){var t=this;this.checkExpire(),setInterval(function(){t.checkExpire()},5e3)},methods:{handleDialogHint:function(t){for(var e in this.expireTitles=[],t){var i=t[e];this.expireTitles.push(i.live_title)}5<this.expireTitles.length&&(this.expireTitles=this.expireTitles.slice(0,5),this.expireTitles.push("..."));var n=localStorage.getItem(this.hintedLiveKey)?JSON.parse(localStorage.getItem(this.hintedLiveKey)):[];for(var a in this.expireTitles){var r=this.expireTitles[a];if(-1===n.indexOf(r))return void(this.visible=!0)}},checkExpire:function(){var e,i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap((0,r.fetchWillExpireLives)());case 2:if(e=t.sent,i=e.live_expire_resources,this.handleExpireDataNotify(i),localStorage.getItem(this.notShowKey))return t.abrupt("return");t.next=7;break;case 7:this.handleDialogHint(i);case 8:case"end":return t.stop()}},null,this)},handleExpireDataNotify:function(t){var e=[];for(var i in t){var n=t[i];e.push.apply(e,n.resources)}var a,r,s=e.map(function(t){return t.resource_id}),o=localStorage.getItem(this.lastWillExpireIdsKey)?JSON.parse(localStorage.getItem(this.lastWillExpireIdsKey)):[],c=(a=s,r=[],o.forEach(function(t){-1===a.indexOf(t)&&r.push(t)}),r);c.length&&(this.$Bus.$emit(this.$GLEventKey.EXPIRED_IDS_NOTIFY,c),this.$Bus.$emit(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),this.mergeArrayToKey(c,this.expiredIdsKey)),localStorage.setItem(this.lastWillExpireIdsKey,JSON.stringify(s)),s.length&&this.$Bus.$emit(this.$GLEventKey.WILL_EXPIRE_IDS_NOTIFY,s)},mergeArrayToKey:function(t,e){var i=localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):[];i=Array.from(new Set(t.concat(i))),localStorage.setItem(e,JSON.stringify(i))},confirm:function(){this.options.length&&localStorage.setItem(this.notShowKey,!0),this.mergeArrayToKey(this.expireTitles,this.hintedLiveKey),this.visible=!1}}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(151),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"bs-messgae",data:function(){return{visible:!1,text:"",duration:2e3,type:"info",customClass:"",onClose:null,showClose:!1,closed:!1,timer:null,dangerouslyUseHTMLString:!1,verticalOffset:0}},computed:{},watch:{closed:function(t){t&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"==typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;0<this.duration?this.timer=setTimeout(function(){t.closed||t.close()},this.duration):this.close()}},mounted:function(){this.startTimer()}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(156),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1221)),r=n(i(855)),s={components:{HomeHeader:a.default,Project:r.default},mounted:function(){this.$LogReport.sendCustomEvent("home_show")}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(158),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=i(10);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var o={name:"home-header",components:{VideosUat:n(i(1223)).default},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,r.mapState)(["userInfo"])),methods:{showCreateProject:function(){this.$store.commit("showCreateProject",!0)},clickLogout:function(){var e=this;this.$LogReport.sendCustomEvent("editor_user_logout_click"),this.$api.auth.logoutV2().catch(function(t){console.error(t),e.$message({text:"登出失败",type:"error"})})},goCreateCenter:function(){this.$LogReport.sendCustomEvent("home_createhomepage_click"),window.open("//member.bilibili.com/v2#/home")},goUploadManager:function(){this.$LogReport.sendCustomEvent("home_uploadmanager_click"),window.open("//member.bilibili.com/v2?/upload-manager/article#/upload-manager/article")},goUpdateRecords:function(){window.open("https://www.bilibili.com/blackboard/activity-yunjianjiupdate.html")},goContactService:function(){window.open("https://service.bilibili.com/v2/chat/pc/index.html?sysNum=102d1b48515346ec8e9fb543b54ec454&groupId=5764e62b72924e8a9814b79cc62ae69c&robotFlag=36")}}};e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(160),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(95),s={data:function(){return{showDialog:!1,visible:!1,list:[]}},created:function(){var e=this;setTimeout(function(){var t=document.querySelector(".cover")&&-1!==document.querySelector(".cover").style.backgroundImage.indexOf("https://uat-")||e.$route.query.stable_show_videos;e.visible=t,e.visible&&e.reqData()},1e3)},methods:{reqData:function(){var e;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap((0,r.fetchVideoList)({page:1,page_size:100,order:"ctime"}));case 2:e=t.sent,this.list=e.videos;case 4:case"end":return t.stop()}},null,this)}}};e.default=s},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(164),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(4)),s=i(94),o=n(i(1226)),c=n(i(1228)),u=n(i(1230)),l=n(i(32)),d=n(i(1235)),f=n(i(105)),p=n(i(67));function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var m={mixins:[l.default],data:function(){return{projects:[],sortType:1,searchStr:"",isSearching:!1,loading:!1,size:"16:9",projectName:"未命名项目",showProductPage:p.default.getters.showProductPage}},components:{ProjectsSearchBox:o.default,ProjectCard:c.default,ProjectAddModal:u.default,ProjectAddCard:d.default},mounted:function(){this.fetchList()},watch:{sortType:function(){this.pager.page=1,this.fetchList()},searchStr:(0,f.default)(function(){this.pager.page=1,this.fetchList()},300)},methods:{handleAddProject:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(this.$api.projects.createProject(this.projectName));case 2:e=t.sent,i=e.project_id,sessionStorage.setItem(this.$GL.PROJECT_CREATE_SIZE,this.size),this.$LogReport.sendCustomEvent("home_project_create_confirm_click",{filename:this.projectName,size:this.size}),window.location.href="/studio/bs-editor/".concat(i);case 7:case"end":return t.stop()}},null,this)},copyProject:function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_project_copy_click"),t.next=3,r.default.awrap((0,s.copyProject)(e));case 3:document.body.click(),this.fetchList();case 5:case"end":return t.stop()}},null,this)},deleteProject:function(e){var i=this;this.$confirm("删除后无法恢复，确定要删除吗？",function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.awrap((0,s.deleteProject)(e));case 3:i.fetchList(),i.$LogReport.sendCustomEvent("home_project_user_delete_confirm_click"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i.$message({text:t.t0.message||"删除失败,请重试",type:"error"});case 10:case"end":return t.stop()}},null,null,[[0,7]])},function(){})},fetchList:function(){var e,i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e=this.searchStr||"",i=0===this.sortType?"ctime":"mtime",n={page:this.pager.page,page_size:this.pager.pageSize-1,order:i},e&&(n.title=e),t.next=7,r.default.awrap((0,s.fetchProjectList)(n));case 7:a=t.sent,this.pager.total=a.total,this.projects=(a.projects||[]).map(function(t){return v({},t,{selected:!1})}),this.searchStr?this.isSearching=!0:this.isSearching=!1,this.loading=!1;case 12:case"end":return t.stop()}},null,this)},openProject:function(t){location.href="/studio/bs-editor/".concat(t)}}};e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(166),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"projects-search-box",props:["value"],data:function(){return{inputValue:this.value}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(169),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(15),a={name:"project-card",props:{project:{type:Object,default:function(){return{}}}},mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},destroyed:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){this.$refs.cover.style.height=9*this.$refs.cover.getBoundingClientRect().width/16+"px"},formatProjectLastDateView:function(t){var e=new Date(t);return(0,n.formatDateView)(e)},openProject:function(){this.$LogReport.sendCustomEvent("home_project_user_click",{filename:this.project.title}),this.$emit("click")}}};e.default=a},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(172),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(1232)),s=n(i(1233)),o={name:"project-add-modal",data:function(){return{projectName:"未命名项目",size:"16:9",sizes:[{value:"16:9",bg:r.default},{value:"9:16",bg:s.default}]}},watch:{projectName:function(t){this.projectName=t.slice(0,20)}},methods:{closeCreateProjectModal:function(){this.$store.commit("showCreateProject",!1)},createProject:function(){var e,i,n=this;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n.projectName){t.next=3;break}return n.$message({text:"项目名字为空",type:"error"}),t.abrupt("return");case 3:return t.next=5,a.default.awrap(n.$api.projects.createProject(n.projectName));case 5:e=t.sent,i=e.project_id,sessionStorage.setItem(n.$GL.PROJECT_CREATE_SIZE,n.size),n.$LogReport.sendCustomEvent("home_project_create_confirm_click",{filename:n.projectName,size:n.size}),window.location.href="/studio/bs-editor/".concat(i),n.closeCreateProjectModal(),n.projectName="未命名项目";case 12:case"end":return t.stop()}}).catch(function(t){console.error(t),n.$message({text:t.message,type:"error"})})}}};e.default=o},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(175),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"projectAddCard",mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},destroyed:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){this.$refs.plus.style.height=9*this.$refs.plus.getBoundingClientRect().width/16+"px"}}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(180),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"NotFound"}},function(t,e,i){"use strict";i.r(e);var n=i(182),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n(i(4)),a=n(i(1241)),r=n(i(1252)),s=n(i(1462)),o=n(i(1503)),u=n(i(1520)),l=n(i(1530)),d=n(i(1531)),f=n(i(857)),p=i(872),h=i(94),v={components:{EditorHeader:a.default,Resources:r.default,Timeline:s.default,Monitor:u.default,Guide:d.default,Sidebar:f.default,Rhythm:o.default},data:function(){return{panels:p.panels,activePanel:"library"}},mixins:[l.default],created:function(){var e=this;this.setAudioOutputWay();var i,n,a,r,s,o={};this.initEvent(),this.$LogReport.sendCustomEvent("editor_show"),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.$globalLoading(!0,e.$GL.EDITOR_INIT_ING),i=Date.now(),e.$globalLoading(!0,e.$GL.EDITOR_START_FETCH_PROJECT),t.next=5,c.default.awrap(e.$store.dispatch("fetchProject"));case 5:return o.fetchProjectConsume=Date.now()-i,n=Date.now(),e.$globalLoading(!0,e.$GL.EDITOR_START_RUN_SDK),t.next=10,c.default.awrap(e.$BSSdk.run());case 10:return o.sdkInitConsume=Date.now()-n,a=Date.now(),e.$globalLoading(!0,e.$GL.EDITOR_START_FETCH_PROJECT_XML),t.next=15,c.default.awrap(e.$BSSdk.downloadXMLUrl(!0));case 15:if(r=t.sent)return e.$BSSdk.setXMLCache(r),e.$globalLoading(!0,e.$GL.EDITOR_START_PARSE_XML),t.next=21,c.default.awrap(e.$BSSdk.readTimelineDataFromXml());t.next=32;break;case 21:return s=t.sent,e.$store.state.biliPreviewerMode&&window.debugLog("工程项目json",s),e.$globalLoading(!0,e.$GL.EDITOR_START_DOWNLOAD_PROJECT_MATERIAL),t.next=26,c.default.awrap(e.$BSSdk.downloadAndEditRelatedAsset(s));case 26:return e.$globalLoading(!0,e.$GL.EDITOR_START_DRAW_PROJECT),t.next=29,c.default.awrap(e.$BSSdk.redrawSDK(s));case 29:e.$Bus.$emit(e.$GLEventKey.TIMELINE_LOGIC_DATA_READY,e.$BSSdk.timelineData),t.next=35;break;case 32:return e.$globalLoading(!0,e.$GL.EDITOR_START_CREATE_DRAW_PROJECT),t.next=35,c.default.awrap(e.$BSSdk.createVideoEmptyTrack());case 35:return e.$globalLoading(!0,e.$GL.EDITOR_START_CLEAR_QUEUE),t.next=38,c.default.awrap(e.$BSSdk.clearQueue());case 38:o.xmlRunConsume=Date.now()-a,r?e.$LogReport.sendCustomEvent("editor_sdk_edit_xml_init_consume",o):e.$LogReport.sendCustomEvent("editor_sdk_new_xml_init_consume",o),e.$globalLoading(!1),e.$GL.getSDKLowerMem()&&e.$message({text:"当前系统环境剪辑运行不畅，功能可能会卡顿，建议视频轨道不超过3条",type:"info",duration:8e3}),e.$Bus.$emit(e.$GLEventKey.EDITOR_READY_TO_WORK),e.$store.commit("updateSDKReadyToWork",!0),e.$BSSdk.seekCurrentTimeline();case 45:case"end":return t.stop()}}).catch(function(t){e.$globalLoading(!1),t.message&&-1!==t.message.indexOf("allocate memory")?"true"===localStorage.getItem(e.$GL.USE_LOWER_MEMORY_SDK_KEY)?e.$globalError(!0,"系统无法分配足够内存，无法运行<br>可尝试减少浏览器打开的窗口，重启浏览器后重新打开本页面"):(localStorage.setItem(e.$GL.USE_LOWER_MEMORY_SDK_KEY,"true"),e.$globalError(!0,"系统内存分配失败，正在加载低配版"),setTimeout(function(){location.reload()},1e3)):"PROJECT_NOT_BELONG"===t.message?e.$confirm("当前项目可能属于其它账号或者已被删除，故无法进入编辑状态，如属于其它账号，请点击切换账号",function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:window.location.href="//passport.bilibili.com/login?act=exit";case 1:case"end":return t.stop()}})},function(){location.href="/studio/bs-editor"},{showCancel:!0,confirmBtnText:"切换账号",cancelBtnText:"去首页",cancelFirst:!1,width:"320px"}):(e.$LogReport.sendSentryError(t.message,"INIT_PROJECT"),e.$globalError(!0,"编辑器加载失败，请重新刷新。"),e.$message({text:t.message||"编辑器加载失败，请重新刷新~",type:"error"}),console.error(t,t.stack))}),this.checkProjectStatus()},mounted:function(){this.enterCount=0,this.leaveCount=0,this.setViewSize()},destroyed:function(){this.offEvent()},methods:{setAudioOutputWay:function(){var t;88<((t=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./))?parseInt(t[2],10):0)&&localStorage.setItem("meishesdk-enable-audioworklet",!0)},setViewSize:function(){var n=this;this.$nextTick(function(){n.$store.state.uiSize.panelContentHeight=.5*(document.body.clientHeight-document.querySelector(".editor-header").clientHeight);var t=n.$store.state.uiSize.panelContentHeight,e=n.$refs.center.clientWidth,i=16*(t-40)/9;i+=140,n.$store.state.uiSize.monitorHeight=t,n.$store.state.uiSize.monitorWidth=i,n.$store.state.uiSize.resourcePanelWidth=e-i;n.$store.state.uiSize.resourcePanelWidth<600&&(n.$store.state.uiSize.resourcePanelWidth=600,n.$store.state.uiSize.monitorWidth=e-n.$store.state.uiSize.resourcePanelWidth),n.$refs.timeline.initView()})},initEvent:function(){window.addEventListener("resize",this.setViewSize),this.$Bus.$on(this.$GLEventKey.SWITCH_RESOURCE_PANEL,this.switchPanel)},offEvent:function(){window.removeEventListener("resize",this.setViewSize),this.$Bus.$off(this.$GLEventKey.SWITCH_RESOURCE_PANEL,this.switchPanel)},switchPanel:function(t){this.activePanel=t,this.$BSSdk.stopEditClip()},dragenter:function(t){t.preventDefault(),this.fileDrag=!0,this.$Bus.$emit(this.$GLEventKey.DRAG_ENTER_BODY)},dragleave:function(){this.fileDrag&&(this.$Bus.$emit(this.$GLEventKey.DRAG_LEAVE_BODY),this.fileDrag=!1)},drop:function(t){t.preventDefault(),this.fileDrag=!1,this.$Bus.$emit(this.$GLEventKey.DRAG_LEAVE_BODY)},checkProjectStatus:function(){var e,i;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$route.params.id,i="hinted-segment-lose-".concat(e),t.next=4,c.default.awrap((0,h.getProjectStatus)(e));case 4:if(20!==t.sent.state){t.next=10;break}if(localStorage.getItem(i))return t.abrupt("return");t.next=8;break;case 8:localStorage.setItem(i,!0),this.$confirm("该场直播素材有片段缺失，您可正常使用已有素材进行剪辑",function(){},function(){},{showCancel:!1,confirmBtnText:"知道啦"});case 10:case"end":return t.stop()}},null,this)}}};e.default=v},function(t,e,i){"use strict";i.r(e);var n=i(184),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var l=n(i(4)),a=n(i(6)),r=i(10),c=i(15),s=i(94),o=n(i(1242)),u=n(i(47)),d=n(i(1246)),f=i(7),p=n(i(1247));function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var m={mixins:[d.default],computed:v({},(0,r.mapState)(["userInfo","projectName"])),components:{CoverModal:p.default},data:function(){return{uploadLock:!1,nameEditing:!1,editProjectName:this.projectName,goBackURL:encodeURIComponent("".concat(window.location.protocol,"//").concat(window.location.hostname,"/studio/bs-editor")),autoSaveTimer:null,saveDate:0,projectCover:"",showCoverEdit:!1}},created:function(){var r=this;this.initEvents();this.autoSaveTimer=setInterval(function(){var e,i,n,a;localStorage.getItem("bs_editor_auto_save_tag")!==r.$store.state.autoSaveTag||r.$store.state.biliPreviewerMode?clearInterval(r.autoSaveTimer):!r.uploadLock&&r.$store.state.SDKReadyToWork&&!r.$store.getters.canRedo&&!r.$store.state.sdkAllLock&&55e3<=Date.now()-r.saveDate&&l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.$BSSdk.writeTimelineDataToXml(),e=r.$BSSdk.xmlClean(e),t.next=4,l.default.awrap(r.$store.dispatch("fetchProject"));case 4:return t.next=6,l.default.awrap(r.$BSSdk.downloadXMLUrl());case 6:if(i=t.sent,n=e!==r.$store.state.lastUploadXML,a=i!==e,n&&a)return t.next=12,l.default.awrap(r.saveProject(!1,!1));t.next=13;break;case 12:console.log("60秒自动保存");case 13:case"end":return t.stop()}}).catch(function(t){console.error(t)})},6e4)},destroyed:function(){this.offEvents(),this.autoSaveTimer&&(this.clearInterval(this.autoSaveTimer),this.autoSaveTimer=null)},methods:v({},(0,r.mapMutations)(["saveProjectInfo"]),{editCover:function(){this.showCoverEdit=!0},startNameEdit:function(){var t=this;this.$store.state.biliPreviewerMode?this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}):(this.nameEditing=!0,this.editProjectName=this.projectName,this.$nextTick(function(){t.$refs["project-name-input"].focus()}))},finishNameEdit:function(){var e;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.editProjectName){t.next=2;break}return t.abrupt("return",this.$message({type:"warning",text:"标题不能为空"}));case 2:return t.prev=2,t.next=5,l.default.awrap((0,s.updateProject)({project_id:this.$store.state.projectId,title:this.editProjectName}));case 5:e=t.sent,this.saveProjectInfo({projectId:e.project_id,projectName:e.title,projectXMLDownloadPath:e.xml_download_url,projectCoverPath:e.cover_path}),t.next=13;break;case 9:if(t.prev=9,t.t0=t.catch(2),this.editProjectName){t.next=13;break}return t.abrupt("return",this.$message({type:"error",text:t.t0.message||"更改失败，请稍后再试"}));case 13:this.nameEditing=!1;case 14:case"end":return t.stop()}},null,this,[[2,9]])},initEvents:function(){this.$Bus.$on(this.$GLEventKey.REQUIRE_SAVE_PROJECT,this.saveProject)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.REQUIRE_SAVE_PROJECT,this.saveProject)},createVideo:function(){var e=this;if(this.$store.state.biliPreviewerMode)this.$message({text:this.$GL.PREVIEWER_MODE_ERROR});else if(this.$store.state.sdkAllLock)this.$message({text:"渲染运行中，请重新操作"});else{var t=this.$store.state.timelineDuration,i=this.$BSSdk.getResourceClipAmount();if(this.$LogReport.sendCustomEvent("editor_project_submit_click"),t){if(t>7200*this.$GL.SECOND_CONVERT)return this.$LogReport.sendCustomEvent("editor_video_duration_tip_show"),void this.$message({text:"时长不可超过2小时",type:"error"});if(i){var n=this.$store.state.tripleStickerStatus,a=n.num,r=n.show;if(0<a&&r&&t<3e7)this.$message({text:"一键三连仅支持30s以上的视频",type:"error",duration:5e3});else if(!this.uploadLock){this.uploadLock=!0;var s,o=(this.$store.state.projectName||"成片")+"-"+(0,c.formatDateView)(new Date);l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.awrap(e.saveProject(!1,!0));case 2:if(t.sent){t.next=5;break}throw new Error("成片项目保存失败，请重新操作～");case 5:return e.$globalLoading(!0,e.$GL.VIDEO_CREATE_ING),t.next=8,l.default.awrap(e.$api.auth.uploadAuth());case 8:return t.next=10,l.default.awrap(e.$api.videos.createVideo({project_id:e.$store.state.projectId,title:o,cover_url:e.projectCover||e.$store.state.projectCoverPath}));case 10:if((s=t.sent).limit)return e.$globalLoading(!1),e.uploadLock=!1,e.showLimitVideoCreate(s),t.abrupt("return");t.next=16;break;case 16:e.goUploadArticle(s,o);case 17:case"end":return t.stop()}}).catch(function(t){e.uploadLock=!1,e.$globalLoading(!1),console.error(t),"您尚未完成实名认证，无法使用投稿!"===t.message?e.$confirm("您尚未完成实名认证，前往实名?",function(){window.open("https://passport.bilibili.com/site/site.html")},function(){}):e.$message({text:t.message||"提交失败，请重新操作",type:"error"})})}}else this.$message({text:"无自制内容，无法投稿噢。",type:"error"})}else this.$message({text:"空时长项目，无法投稿噢。",type:"error"})}},retryVideo:function(e){var i,n;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=(this.$store.state.projectName||"成片")+"-"+(0,c.formatDateView)(new Date),this.$globalLoading(!0,this.$GL.VIDEO_CREATE_ING),this.uploadLock=!0,t.next=6,l.default.awrap(this.$api.videos.retryVideo({project_id:this.$store.state.projectId,title:i,cover_url:this.projectCover||this.$store.state.projectCoverPath,task_id:e}));case 6:n=t.sent,this.goUploadArticle(n,i),t.next=16;break;case 10:t.prev=10,t.t0=t.catch(0),this.uploadLock=!1,this.$globalLoading(!1),console.error(t.t0),"您尚未完成实名认证，无法使用投稿!"===t.t0.message?this.$confirm("您尚未完成实名认证，前往实名?",function(){window.open("https://passport.bilibili.com/site/site.html")},function(){}):this.$message({text:t.t0.message||"提交失败，请重新操作",type:"error"});case 16:case"end":return t.stop()}},null,this,[[0,10]])},saveProject:function(){var s,o,c,u=this,e=arguments;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(s=!(0<e.length&&void 0!==e[0])||e[0],o=!(1<e.length&&void 0!==e[1])||e[1],this.$store.state.biliPreviewerMode)return this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}),t.abrupt("return");t.next=5;break;case 5:return c=this.$store.state.currentTimelinePosition,this.$LogReport.sendCustomEvent("editor_project_save_click"),t.abrupt("return",function(){var e,i,n,a,r;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(u.$store.state.sdkAllLock)return u.$message({text:"渲染运行中，请重新操作"}),t.abrupt("return");t.next=3;break;case 3:if(s&&u.$globalLoading(!0,u.$GL.PROJECT_SAVE_ING),s||o)return t.next=7,l.default.awrap(u.$BSSdk.waitEngineCoolDown());t.next=7;break;case 7:return u.$BSSdk.writeTimelineDataToXml(),u.$Bus.$emit(u.$GLEventKey.UPDATE_TRIPLE_STATUS),t.next=11,l.default.awrap(u.$BSSdk.uploadXML());case 11:if(e=t.sent,u.$store.state.lastUploadXML=e){t.next=15;break}throw new Error("xml上传出现问题");case 15:if(u.saveDate=Date.now(),u.$LogReport.sendCustomEvent("editor_project_save_success"),i={},o&&s&&!u.$store.state.projectCoverPath)return t.next=21,l.default.awrap(u.$BSSdk.grabImageFromTimeline(c));t.next=35;break;case 21:if(n=t.sent,a=n.imageDataUrl)return t.next=26,l.default.awrap(u.$BSSdk.transformCoverImage(a));t.next=34;break;case 26:return r=t.sent,t.next=29,l.default.awrap(u.$api.videos.uploadImage(r));case 29:return i=t.sent,t.next=32,l.default.awrap(u.$api.projects.updateProject({project_id:u.$store.state.projectId,title:u.$store.state.projectName,cover_path:i.url}));case 32:t.next=35;break;case 34:i={url:u.$store.state.projectCoverPath||""};case 35:if(u.$BSSdk.setXMLCache(e),s)return u.$globalLoading(!1),u.$message({text:"保存成功",type:"success"}),t.next=41,l.default.awrap(u.$BSSdk.saveQueue());t.next=41;break;case 41:return u.projectCover=i.url||"",t.abrupt("return",{projectName:u.$store.state.projectName,projectCover:i.url||""});case 43:case"end":return t.stop()}})}().catch(function(t){u.$LogReport.sendCustomEvent("editor_project_save_error",{error:t.message}),console.error(t),s&&(u.$message({text:t.message||"保存失败，重新操作",type:"error"}),u.$globalLoading(!1))}));case 8:case"end":return t.stop()}},null,this)},returnHome:function(){this.$store.state.biliPreviewerMode?this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}):(this.$LogReport.sendCustomEvent("editor_home_click"),this.saveProject(!0,!0).then(function(){setTimeout(function(){window.location.href="/studio/bs-editor"},500)}).catch(function(t){console.error(t)}))},clickLogout:function(){var e=this;this.$LogReport.sendCustomEvent("editor_user_logout_click"),this.$api.auth.logoutV2().catch(function(t){console.error(t),e.$message({text:"登出失败",type:"error"})})},goHelpCenter:function(){this.$LogReport.sendCustomEvent("editor_help_center_click"),window.open("https://www.bilibili.com/blackboard/help.html#bilibili%E4%BA%91%E5%89%AA%E8%BE%91?id=f54c00910d624648b26e0c9edc981cd4")},goCreateCenter:function(){this.$LogReport.sendCustomEvent("editor_createhomepage_click"),window.open("//member.bilibili.com/platform/home")},goUploadManager:function(){this.$LogReport.sendCustomEvent("editor_uploadmanager_click"),window.open("//member.bilibili.com/platform/upload-manager/article")},showLimitVideoCreate:function(t){var e=this,i=new(u.default.extend(o.default))({propsData:{initProgress:t.progress,taskId:t.latest_taskId}});i.$mount(),document.body.appendChild(i.$el),i.$on("close",function(){i.$destroy(),document.body.removeChild(i.$el)}),i.$on("retryVideo",function(){i.$destroy(),document.body.removeChild(i.$el),e.retryVideo(t.latest_taskId)}),i.$on("addVideo",function(){i.$destroy(),document.body.removeChild(i.$el),e.createVideo()})},goUploadArticle:function(t,e){var i=this;if(!t.upos_filename)throw new Error("成片输出异常，请重新操作～");var n=[],a=this.$store.state.allTracks[f.TrackOrder.indexOf(f.TrackTypes.AUDIO)],r=[],s=0;if(a.forEach(function(t){t.clips.forEach(function(t){var e=t.resource,i=e.duration,n=e.resource_id,a=e.title;s+=i/1e6,r.push({duration:i/1e6,resource_id:n,title:a})})}),this.$LogReport.sendCustomEvent("editor_track_audios_duration",{total:s,audios:r}),this.$store.state.tripleStickerStatus.show){var o=this.$store.state.allTracks[f.TrackOrder.indexOf(f.TrackTypes.TRIPLE)][0];o&&o.clips.forEach(function(t){var e=i.$BSSdk.CToV(t.raw.translationX,t.raw.translationY);n.push({progress:parseInt(t.inPoint/1e3),type:5,plat:1,data:JSON.stringify({duration:5e3,posX:+e.x.toFixed(1),posY:+e.y.toFixed(1),icon:"",type:t.resource.type})})})}var c={filename:t.upos_filename.split(".")[0].split("/").pop(),cover:t.video_info.cover_url,title:e,cid:t.upos_pre_upload_info.biz_id,command_dm:n};sessionStorage.setItem(this.$GL.WEB_UPLOAD_LOCAL_NAME,JSON.stringify(c)),this.$BSSdk.sleep(500).then(function(){i.uploadLock=!1,i.$LogReport.sendCustomEvent("editor_project_video_create",{edit_consume:Date.now()-i.$store.state.pageLoadTime}),i.$LogReport.sendCustomEvent("editor_submitted_video_duration",{video_duration:(i.$store.state.timelineDuration/1e6).toFixed(1)}),i.$LogReport.sendCustomEvent("editor_submitted_video_cut_level",i.$store.state.submitted_materials),location.href="/platform/upload/video/frame"})}})};e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(186),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(136)),r=i(137),s={name:"editor-create-waiting",data:function(){return{progress:this.initProgress,T:2e3,timer:null,destroy_status:!1}},props:["initProgress","taskId"],computed:{text:function(){return'该项目已有视频在合成中，当前合成进度为<span style="color: #4388ff;">'.concat(this.progress,"%</span>，是否取消该合成，重新投稿？")}},components:{VDialog:a.default},mounted:function(){var t=this;this.$LogReport.sendCustomEvent("editor_project_video_creating_show");var e=this.$refs["v-dialog"];e.onClose=function(){t.$LogReport.sendCustomEvent("editor_project_video_creating_wait_click"),t.$emit("close")},e.onOk=function(){t.$LogReport.sendCustomEvent("editor_project_resubmit_click"),t.$emit("retryVideo")},this.timer=setTimeout(this.pooling,this.T)},methods:{pooling:function(){var e=this;(0,r.fetchTaskList)({task_ids:this.taskId}).then(function(t){e.destroy_status||(console.log(e),t.list&&t.list[0]&&(t.list[0].state<=10?(e.progress=t.list[0].progress||0,e.timer=setTimeout(e.pooling,e.T)):e.$emit("addVideo")))}).catch(function(t){console.error(t)})}},beforeDestroy:function(){this.destroy_status=!0,clearInterval(this.timer)}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(188),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6));function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var s={name:"BsDialog",components:{BsButton:n(i(856)).default},data:function(){return{overflowInit:"",onClose:null,onOk:null}},props:{visible:{type:Boolean,default:!1},title:{type:String,default:""},text:String,width:{type:String},top:{type:String,default:"30vh"},mask:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!1},showClose:{type:Boolean,default:!0},customClass:{type:String,default:""},lockScroll:{type:Boolean,default:!0},bodyStyle:{default:function(){return{}}},showCancel:{default:!0},confirmBtnText:{default:"确定"},cancelBtnText:{default:"取消"},cancelFirst:{default:!1}},computed:{style:function(){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({width:this.width,top:this.top},this.bodyStyle)}},watch:{visible:function(t){this.visibleHandle(t)}},mounted:function(){this.overflowInit=document.body.style.overflow||"",this.visible&&this.visibleHandle(this.visible)},methods:{visibleHandle:function(t){t&&this.$emit("open"),this.lockScroll&&this.lockScrollHandle(t)},lockScrollHandle:function(t){var e=document.body;e.style.overflow=t?"hidden":this.overflowInit},close:function(){this.$emit("update:visible",!1),this.$emit("close"),this.onClose&&this.onClose()},ok:function(){this.$emit("ok"),this.onOk&&this.onOk()},maskHandle:function(){this.maskClosable&&this.close()},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},destroyed:function(){this.lockScroll&&this.lockScrollHandle(!1)}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(190),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{type:String,disabled:{default:!1}}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(194),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(4)),a=n(i(106)),r={components:{SeekBar:n(i(624)).default},mixins:[a.default],data:function(){return{liveWindowControlBarLock:!1,liveWindowPlaying:!1,ratio:16/9,visible:!1,width:800,height:607,top:0,titleHeight:22,controllerHeight:65,canvasBorderWidth:622,canvasBorderHeight:517,canvasWidth:"",canvasHeight:""}},mounted:function(){var t=this;this.visible=!0,this.$nextTick(function(){t.initView()})},computed:{_liveWindowPlaying_:function(){return!this.liveWindowControlBarLock&&this.liveWindowPlaying}},methods:{generateCover:function(){var e,i,n,a,r;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.$store.state.currentTimelinePosition,i={},t.next=4,s.default.awrap(this.$BSSdk.grabImageFromTimeline(e));case 4:if(n=t.sent,a=n.imageDataUrl)return t.next=9,s.default.awrap(this.$BSSdk.transformCoverImage(a));t.next=19;break;case 9:return r=t.sent,t.next=12,s.default.awrap(this.$api.videos.uploadImage(r));case 12:return i=t.sent,t.next=15,s.default.awrap(this.$api.projects.updateProject({project_id:this.$store.state.projectId,title:this.$store.state.projectName,cover_path:i.url}));case 15:this.$store.commit("updateCover",i.url),this.close(),t.next=21;break;case 19:i={url:this.$store.state.projectCoverPath||""},this.$message({text:"应用封面失败，请重试",type:"warning"});case 21:case"end":return t.stop()}},null,this)},initView:function(){var t=window.innerHeight;this.top=(t-this.height)/2,this.canvasBorderHeight=this.canvasBorderWidth/(16/9),this.calcCanvasSize(),this.$Bus.$emit(this.$GLEventKey.HIDE_EDIT_PANEL),this.initLiveWindow()},calcCanvasSize:function(){var t=this.$MonitorScreen.getRatioScreen({width:this.canvasBorderWidth,height:this.canvasBorderHeight},this.ratio);this.canvasWidth=t.width,this.canvasHeight=t.height},initLiveWindow:function(){this.$BSSdk.createLiveWindow("preview-live-window",this.$BSSdk.timeline),this.$store.state.useOtherLiveWindow=!0},close:function(){this.$BSSdk.createLiveWindow(),this.$store.state.useOtherLiveWindow=!1,this.$emit("close")}}};e.default=r},function(t,e,i){"use strict";i.r(e);var n=i(196),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:["width","outlineColor","ballColor","inlineColor"],components:{SeekBar:n(i(84)).default},methods:{seek:function(t){this.$BSSdk.seekTimeline(t,!0)}}};e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(198),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"seek-bar",props:{min:{type:Number,default:0},max:{type:Number,default:1},value:{type:Number,required:!0},height:{type:Number,default:10},width:{type:Number,default:100},step:{type:Number,default:0},inlineColor:{type:String,default:"#939393"},outlineColor:{type:String,default:"#000"},ballColor:{type:String,default:"#ffffff"}},data:function(){return{offsetX:0}},mounted:function(){this.initView()},watch:{value:function(t){if(this.step){var e=0;-1!==this.step.toString().indexOf(".")&&(e=this.step.toString().length-this.step.toString().indexOf(".")-1);var i=parseFloat(((this.offsetX+this.width)/this.width*(this.max-this.min)+this.min).toFixed(e));if((t=parseFloat(t.toFixed(e)))===i)return}this.initView()},min:function(){this.initView()},max:function(){this.initView()},step:function(){this.initView()},width:function(){this.initView()}},methods:{initView:function(){var t=this.$refs["seek-bar-wrap"].getBoundingClientRect().width;this.displayWidth=t||this.width,this.offsetX=(this.value-this.min)/(this.max-this.min)*this.width-this.width},startDrag:function(t){var a=this;t.preventDefault();var r=t.clientX,s=this.offsetX;document.onmousemove=function(t){var e=t.clientX-r,i=s+e;i<-a.width&&(i=-a.width),0<i&&(i=0),a.offsetX=i;var n=(a.offsetX+a.width)/a.width*(a.max-a.min)+a.min;a.$emit("input",n),a.$emit("seek",n)},document.onmouseup=function(){var t=(a.offsetX+a.width)/a.width*(a.max-a.min)+a.min;a.$emit("input",t),a.$emit("seek",t),a.$emit("seekend",t),document.onmousemove=document.onmouseup=null}},seekDirect:function(t){var e=this.$refs.outline.getBoundingClientRect().left,i=(t.clientX-e)/this.displayWidth*(this.max-this.min)+this.min;this.$emit("input",i),this.$emit("seek",i),this.$emit("seekend",i)}}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(204),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(857)),s=n(i(1254)),o=n(i(1303)),c=n(i(626)),u=n(i(1311)),l=n(i(866)),d=n(i(1330)),f=n(i(867)),p=n(i(1335)),h=n(i(868)),v=n(i(1338)),m=n(i(1340)),g=n(i(869)),_=n(i(870)),w=n(i(1353)),b=n(i(1400)),y=n(i(1426)),C=n(i(1455)),T=n(i(1459)),x={props:["active"],computed:{currentPanel:function(){return"".concat(this.active,"-panel")}},watch:(0,a.default)({},"$store.state.uiSize.resourcePanelWidth",function(){var t=this;this.$nextTick(function(){t.updateAllCardSize()})}),mounted:function(){this.updateAllCardSize()},methods:{updateCardSize:function(t,e,i,n){for(var a=this.$refs["panel-container"].getBoundingClientRect().width,r=Math.ceil(a/t),s=(a-10-(r+1)*n)/r;s<e;)a<10+(r+1)*n+e*r&&(s=(a-10-(--r+1)*n)/r);return i<s&&(s=i),s},updateAllCardSize:function(){this.$store.state.uiSize.cardWidth=this.updateCardSize(180,155,180,30),this.$store.state.uiSize.themeCardWidth=this.updateCardSize(230,230,300,30),this.$store.state.uiSize.squareCardSize=this.updateCardSize(120,100,130,30),this.$store.state.uiSize.squareThemeCardWidth=this.updateCardSize(140,150,190,30)}},components:{Sidebar:r.default,LibraryPanel:s.default,MusicPanel:o.default,CaptionPanel:c.default,MusicCaptionPanel:u.default,StickerPanel:l.default,TransitionPanel:d.default,EffectPanel:f.default,TriplePanel:_.default,BuiltinEffectPanel:m.default,ParticlePanel:p.default,FilterPanel:h.default,AudioRecordPanel:v.default,EditPanels:w.default,ParticleGraffitiModal:b.default,ThemePanel:g.default,QuickCutModal:y.default,MusicCaptionTextEditModal:T.default,MobileUploadQrCodeModal:C.default}};e.default=x},function(t,e,i){"use strict";i.r(e);var n=i(206),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:["panels","active"],data:function(){return{open:!0,key:""}},watch:{open:function(){this.$emit("resize")}},methods:{handleShow:function(){this.open=!0,localStorage.removeItem(this.key)},handleHide:function(){this.open=!1,localStorage.setItem(this.key,!1)},checkNav:function(){this.key="hide-nav-".concat(this.$store.state.userInfo.mid),localStorage.getItem(this.key)&&(this.open=!1)}},created:function(){this.checkNav()}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(209),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1255)),r=n(i(1288)),s=n(i(1296)),o=n(i(1298)),c=n(i(1300)),u={data:function(){return{tab:"project",tabs:[{key:"project",name:"项目资源"},{key:"my-lib",name:"我的库"}]}},components:{Project:r.default,MyLib:a.default,UploadPanel:s.default,DragZone:c.default,ManageResource:o.default},methods:{switchTab:function(t){this.$store.state.isManageResource||(this.tab=t.key)}},mounted:function(){this.$store.commit("initManageResource")}};e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(211),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1256)),r=n(i(1258)),s=n(i(1281)),o=n(i(1283)),c=n(i(71)),u=n(i(862)),l={components:{SearchBox:a.default,CategoryTab:r.default,DateTab:s.default,remoteStore:o.default,MultiUploadTypeDrop:u.default},mounted:function(){this.changeRemoteStorePosition(),window.addEventListener("resize",this.changeRemoteStorePosition),this.$store.state.quickCutGray&&this.$LogReport.sendCustomEvent("editor_quick_video_cut_show")},data:function(){return{tab:"category",searchStr:"",tabs:[{key:"category",name:"类型"},{key:"date",name:"添加日期"}],remoteStoreMarginTop:"",remoteStoreTop:"",remoteStoreLeft:"",openMultipleUploadType:!1}},directives:{Clickoutside:c.default},methods:{switchTab:function(t){"category"===(this.tab=t)?this.$LogReport.sendCustomEvent("editor_resource_user_type_click"):this.$LogReport.sendCustomEvent("editor_resource_user_date_click")},clickSearchBox:function(){this.$LogReport.sendCustomEvent("editor_resource_user_search_click")},changeRemoteStorePosition:function(){this.$refs["my-lib-wrapper"].getBoundingClientRect().width<630?(this.remoteStoreMarginTop="66px",this.remoteStoreTop="50px",this.remoteStoreLeft="0px"):(this.remoteStoreMarginTop="",this.remoteStoreTop="",this.remoteStoreLeft="")}},beforeDestroy:function(){window.removeEventListener("resize",this.changeRemoteStorePosition)}};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(213),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"projects-search-box",props:["value"],data:function(){return{inputValue:this.value}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(216),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(27),s=n(i(138)),o=n(i(32)),c=n(i(105)),u={mixins:[o.default],components:{ResourceCard:s.default},data:function(){return{tab:"0",tabs:[{key:"0",name:"全部"},{key:"1",name:"视频"},{key:"2",name:"音频"},{key:"3",name:"图片"}],list:[],loading:!1}},props:["searchStr"],watch:{searchStr:(0,c.default)(function(){this.pager.page=1,this.fetchList()},300)},created:function(){this.$Bus.$on(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},mounted:function(){this.fetchList()},methods:{categoryTabClick:function(t){this.tab=t,this.pager.page=1,this.fetchList()},fetchList:function(){var e,i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e={page:this.pager.page,page_size:this.pager.pageSize,title:this.searchStr||"",order:"ctime",sort:"desc"},"0"!==this.tab&&(e.type=this.tab),t.next=5,a.default.awrap((0,r.fetchResourceList)(e));case 5:i=t.sent,this.list=i.list||[],i.list&&i.list.length?this.$store.commit("setManagePanel",!0):this.$store.commit("setManagePanel",!1),this.pager.total=i.total,this.loading=!1;case 10:case"end":return t.stop()}},null,this)}}};e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(218),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1259)),s=n(i(1276)),o=n(i(1278)),c=i(40);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l={props:["card","inProject"],computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,i(10).mapState)(["highlightsMap"]),{type:function(){var t={1:"video-card",2:"audio-card",3:"image-card"}[this.card.type];return"image-card"!==t||-1===this.card.boss_path.toLowerCase().indexOf("gif")&&!this.card.duration?t:"video-card"},expireTime:function(){if(this.card.expired_time)return(0,c.dateFormat)(new Date(1e3*this.card.expired_time),"yyyy年MM月dd日 hh:mm:ss")+"到期"},highlightHint:function(){var t=this.highlightsMap[this.card.resource_id]&&this.highlightsMap[this.card.resource_id].length;return this.card.m3u8_download_url&&t}}),mounted:function(){var t=this.$refs.ellipsis;if(t.offsetWidth<t.scrollWidth){var e=t.textContent.replace(/\s/g,"");t.dataset.tail=e.slice(e.length-5)}},methods:{transcode:function(t){this.$emit("transcode",t)},del:function(t){this.$emit("del",t)}},components:{VideoCard:r.default,AudioCard:s.default,ImageCard:o.default}};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(220),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(96),s={components:{CardTemplate:n(i(625)).default},data:function(){return{videoList:null,player:null,showPreview:!1}},props:["card","inProject"],mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.stopPreview()},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview),this.stopPreview()},methods:{initVideoList:function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.videoList){t.next=4;break}return t.next=3,a.default.awrap((0,r.getVideoList)(this.card.m3u8_download_url,this.card.resource_id));case 3:this.videoList=t.sent;case 4:case"end":return t.stop()}},null,this)},startPreview:function(){var e;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.card.m3u8_download_url){t.next=2;break}return t.abrupt("return");case 2:if(e=this.$refs["video-canvas"],this.$Timeline.clipDragging)return t.abrupt("return");t.next=5;break;case 5:return this.player&&(this.player.destroy(),this.player=null),this.showPreview=!0,t.next=9,a.default.awrap(this.initVideoList());case 9:if(this.showPreview){t.next=11;break}return t.abrupt("return");case 11:this.player=new r.M3u8PreviewPlayer(e,this.videoList),this.player.play();case 13:case"end":return t.stop()}},null,this)},stopPreview:function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.card.m3u8_download_url){t.next=2;break}return t.abrupt("return");case 2:if(this.showPreview=!1,this.player){t.next=5;break}return t.abrupt("return");case 5:this.player.destroy(),this.player=null;case 7:case"end":return t.stop()}},null,this)}}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(222),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(4)),a=n(i(6)),s=i(15),r=i(40),o=i(7),c=n(i(70)),l=i(21),d=i(10),f=i(27);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var v={data:function(){return{videoList:null,player:null,showPreview:!1,hover:!1,clip:this.createClip(),useClipItem:!1,poolHighlightStateInterval:null}},watch:{isTransform:function(t){t&&this.startPooling()},ready:function(t){this.clip=this.createClip(),t&&this.clip.type===o.ClipTypes.VIDEO&&(this.fetchThumbs().catch(function(t){console.error(t)}),this.startHighLightStatePooling())}},props:["card","inProject"],components:{Clip:c.default},computed:h({},(0,d.mapState)(["uploads","thumbsMap","highlightsMap","isManageResource","selectedResource"]),{isSelected:function(){var e=this;return-1<this.selectedResource.findIndex(function(t){return t.resource_id===e.clip.resource.resource_id})},canTranscode:function(){return!this.card.cannot_transcode},isTransform:function(){return 0!==this.card.task_state&&!this.card.m3u8_download_url&&!this.isFailed},isFailed:function(){return 11===this.card.task_state||21===this.card.task_state},isUploading:function(){var e=this;return(0===this.card.task_state||80===this.card.state)&&-1!==this.uploads.findIndex(function(t){return t.id===e.card.resource_id})},uploadFailed:function(){var e=this;return(0===this.card.task_state||80===this.card.state)&&-1===this.uploads.findIndex(function(t){return t.id===e.card.resource_id})},uploadProgress:function(){var e=this;return this.isUploading?this.uploads.find(function(t){return t.id===e.card.resource_id}).progress:.3},ready:function(){return!!this.card.m3u8_download_url},bgImageStyle:function(){return this.clip.resource&&(this.clip.resource.cover_download_url||this.clip.resource.download_url)?"url(".concat(this.clip.resource.cover_download_url||this.clip.resource.download_url,")"):""},transCodeFailMessage:function(){return this.canTranscode?"转码失败":"资源有问题，无法转码"},willExpire:function(){return 2===this.card.state}}),mounted:function(){this.initEvents(),this.card.m3u8_download_url&&this.$BSSdk.readAndSaveAsset(this.card.m3u8_download_url),(this.isTransform||this.isUploading)&&this.startPooling(),this.clip.type===o.ClipTypes.VIDEO&&this.ready&&(this.fetchThumbs().catch(function(t){console.error(t)}),this.startHighLightStatePooling())},destroyed:function(){this.offEvents(),this.stopPooling()},methods:h({},(0,d.mapMutations)(["setThumbs","setHighLights","setSelectedResource"]),{initEvents:function(){this.$Bus.$on(this.$GLEventKey.WILL_EXPIRE_IDS_NOTIFY,this.handleExpiredIds)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.WILL_EXPIRE_IDS_NOTIFY,this.handleExpiredIds)},handleExpiredIds:function(t){-1!==t.indexOf(this.card.resource_id)&&(this.card.state=2)},addToTrack:function(){this.$Bus.$emit(this.$GLEventKey.CLIP_DIRECT_TO_TRACK,this.createClip())},fetchThumbs:function(){var e,i;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.clip.getResourceId(),this.thumbsMap[e])return this.thumbs=this.thumbsMap[e],t.abrupt("return");t.next=4;break;case 4:return t.next=6,u.default.awrap((0,f.fetchResourceThumbnails)(e));case 6:i=t.sent,this.setThumbs({id:e,thumbs:Object.keys(i.list).map(function(t){return i.list[t]}).sort()});case 8:case"end":return t.stop()}},null,this)},fetchHighLights:function(){var e,i;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.clip.getResourceId(),this.highlightsMap[e]&&this.highlightsMap[e].length)return this.highlights=this.highlightsMap[e]||[],t.abrupt("return");t.next=4;break;case 4:return t.next=6,u.default.awrap((0,f.fetchResourceHighLights)(e));case 6:i=t.sent,this.highlights=(i.resource_highlight[e]||[]).sort(),this.setHighLights({id:e,highlights:(i.resource_highlight[e]||[]).sort()});case 9:case"end":return t.stop()}},null,this)},removeFromProject:function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap((0,f.deleteResource)({project_id:this.$route.params.id,resource_id:this.card.resource_id}));case 2:case"end":return t.stop()}},null,this)},removeFromLib:function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap((0,f.deleteResource)({resource_id:this.card.resource_id}));case 2:case"end":return t.stop()}},null,this)},removeResourcesFromLib:function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap((0,f.deleteResources)({resource_ids:this.card.resource_id}));case 2:case"end":return t.stop()}},null,this)},removeResource:function(){var i=this;this.$store.state.biliPreviewerMode?this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}):this.inProject?this.ready?this.$confirm("删除后，该资源也会从轨道上移除哦",function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.default.awrap(i.removeFromProject());case 3:i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,i.card.resource_id),i.$Bus.$emit(i.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),i.isUploading&&i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_UPLOAD_TASK,i.card.resource_id),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i.$message({text:t.t0.message||"删除失败,请稍后重试"});case 11:case"end":return t.stop()}},null,null,[[0,8]])},function(){}):this.$confirm("确定删除该资源?",function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.default.awrap(i.removeFromProject());case 3:return t.next=5,u.default.awrap(i.removeFromLib());case 5:i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,i.card.resource_id),i.$Bus.$emit(i.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),i.isUploading&&i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_UPLOAD_TASK,i.card.resource_id),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),i.$message({text:t.t0.message||"删除失败,请稍后重试"});case 13:case"end":return t.stop()}},null,null,[[0,10]])},function(){}):this.$confirm("删除后无法恢复，确定删除吗？",function(){var e;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i.$LogReport.sendCustomEvent("editor_resource_user_delete_confirm_click"),t.next=4,u.default.awrap(i.removeFromLib());case 4:i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,i.card.resource_id),i.$Bus.$emit(i.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),i.isUploading&&i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_UPLOAD_TASK,i.card.resource_id),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),i.$LogReport.sendCustomEvent("editor_resource_user_delete_tip_show"),t.t0.data?(e=t.t0.data.map(function(t,e){return'<a target="_blank" href="/studio/bs-editor/'.concat(t.project_id,'" style="color: #4388ff">').concat(e+1,". ").concat((0,r.htmlEncode)(t.title),"</a>")}).join("<br>"),i.$confirm('<div style="margin-bottom:6px">该资源已在以下项目中使用，删除会导致这些项目的该资源同步消失，是否继续</div> '.concat(e),function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap(i.removeResourcesFromLib());case 2:i.$Bus.$emit(i.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,i.card.resource_id),i.$Bus.$emit(i.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH);case 4:case"end":return t.stop()}})},function(){},{confirmBtnText:"继续删除",cancelBtnText:"再等等",bodyStyle:{"text-align":"left"}})):i.$message({text:t.t0.message||"删除失败,请稍后重试"});case 13:case"end":return t.stop()}},null,null,[[0,9]])},function(){})},bindProject:function(){var e;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.biliPreviewerMode)return this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}),t.abrupt("return");t.next=3;break;case 3:return t.prev=3,this.$LogReport.sendCustomEvent("editor_resource_user_add_click"),e=this.$route.params.id,t.next=8,u.default.awrap((0,f.bindResource)(this.card.resource_id,e).catch(function(){}));case 8:this.$message({text:"已成功添加到项目资源",type:"success"}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),this.$message({text:"添加到项目资源失败，请稍后重试",type:"error"});case 14:case"end":return t.stop()}},null,this,[[3,11]])},startPooling:function(){var e=this;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.poolInterval)return t.abrupt("return");t.next=2;break;case 2:this.reqSelf().catch(function(){}),this.poolInterval=setInterval(function(){e.reqSelf().catch(function(){})},2e3);case 4:case"end":return t.stop()}},null,this)},stopPooling:function(){clearInterval(this.poolInterval),this.poolInterval=null},startHighLightStatePooling:function(){var e=this;this.poolHighlightStateInterval||(this.reqHighLightState().catch(function(t){console.error(t),e.stopHighLightStatePooling()}),this.poolInterval=setInterval(function(){e.reqHighLightState().catch(function(t){console.error(t),e.stopHighLightStatePooling()})},3e4))},stopHighLightStatePooling:function(){this.poolHighlightStateInterval&&clearInterval(this.poolHighlightStateInterval),this.poolHighlightStateInterval=null},reqSelf:function(){var e,i=this;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap((0,f.fetchResourceDetail)(this.card.resource_id));case 2:e=t.sent,Object.keys(e).forEach(function(t){i.card[t]=e[t]}),this.isTransform||this.isUploading||this.stopPooling();case 5:case"end":return t.stop()}},null,this)},reqHighLightState:function(){var e;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap((0,f.fetchResourceHighLightsState)(this.card.resource_id));case 2:if(e=t.sent,[0,1].includes(e.task_state[this.card.resource_id])){t.next=7;break}return this.stopHighLightStatePooling(),t.next=7,u.default.awrap(this.fetchHighLights());case 7:case"end":return t.stop()}},null,this)},reTranscode:function(){return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.biliPreviewerMode)return this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}),t.abrupt("return");t.next=3;break;case 3:if(this.inProject?this.$LogReport.sendCustomEvent("editor_resource_project_retranscode_click"):this.$LogReport.sendCustomEvent("editor_resource_user_retranscode_click"),this.card.task_type)return t.next=7,u.default.awrap((0,f.transcodeResource)(this.card.resource_id,this.card.task_type));t.next=9;break;case 7:t.next=11;break;case 9:return t.next=11,u.default.awrap((0,f.transcodeResource)(this.card.resource_id));case 11:this.startPooling();case 12:case"end":return t.stop()}},null,this)},createClip:function(){var t={1:o.ClipTypes.VIDEO,2:o.ClipTypes.AUDIO,3:o.ClipTypes.IMAGE}[this.card.type];return t===o.ClipTypes.IMAGE&&(-1===this.card.boss_path.toLowerCase().indexOf("gif")&&!this.card.duration||(t=o.ClipTypes.VIDEO)),new o.ClipUI({type:t,duration:this.card.duration||4e6,resource:this.card})},handleClick:function(){var e,i,n,a,r,s,o,c;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isManageResource){t.next=2;break}return t.abrupt("return");case 2:if(e=this.card,i=e.resource_id,n=e.task_state,a=e.state,!i){t.next=25;break}if(r=this.selectedResource,!(-1<(s=r.findIndex(function(t){return t.resource_id===i})))){t.next=10;break}r.splice(s,1),t.next=24;break;case 10:if(o={resource_id:i,task_state:n,state:a},this.inProject){t.next=23;break}return t.prev=12,t.next=15,u.default.awrap((0,f.fetchResourceDetail)(i));case 15:c=t.sent,o=h({},o,{is_bind_project:c.is_bind_project,project_name:c.project_name}),t.next=23;break;case 19:return t.prev=19,t.t0=t.catch(12),this.$message({text:t.t0.message||"删除失败,请稍后重试"}),t.abrupt("return");case 23:r.push(o);case 24:this.setSelectedResource(r);case 25:case"end":return t.stop()}},null,this,[[12,19]])},mousedown:function(i){var n=this;if(this.ready&&!this.isManageResource){i.preventDefault();var t=(0,s.getPxByNowTime)(this.clip.outPoint-this.clip.inPoint),e=function(t){function e(){document.removeEventListener("mousemove",e),n.$Bus.$emit(n.$GLEventKey.CLIP_DRAGGING,new o.DragClipParam({clip:n.createClip(),left:i.clientX-20,top:i.clientY-10,element:t,mouseX:i.clientX,mouseY:i.clientY}))}document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){n.useClipItem=!1,document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e)})};if(5e4<t&&this.clip.type===o.ClipTypes.VIDEO){var a=document.createElement("div");a.classList.add("clip-item-wrap");var r=document.body.clientWidth;a.style.width=r+"px",a.style.height=l.clipUIData[this.clip.type].height+"px",a.style.overflow="hidden",a.style.display="block",a.style.backgroundSize="auto 100%",a.style.backgroundImage=this.bgImageStyle,e(a)}else this.useClipItem=!0,this.$nextTick(function(){var t=n.$refs["clip-item"].$el.cloneNode(!0);t.style.display="block",e(t)})}},mouseenter:function(){this.hover=!0,this.$emit("mouseenter")},mouseleave:function(){this.hover=!1,this.$emit("mouseleave")},durationTime:function(t){return(0,s.secToString)(t)}})};e.default=v},function(t,e,i){"use strict";i.r(e);var n=i(224),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(7),r=n(i(1260)),s=n(i(1811)),o={components:{Clip:r.default,TransitionDrag:s.default},props:["clip"],computed:{componentId:function(){return this.clip.type!==a.ClipTypes.TRANSITION?"clip":"transition-drag"}}};e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(226),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=n(i(4)),a=n(i(6)),_=i(7),r=i(21),p=i(85),w=i(15),s=n(i(1261)),h=i(27),o=i(31),c=n(i(1264)),u=i(10),l=n(i(1266)),d=n(i(1267));function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function m(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var g={components:{TransitionInClip:s.default,ClipBg:c.default,KeyFrame:d.default},mixins:[l.default],props:{clip:{type:_.ClipUI}},data:function(){return{width:(0,w.getWidthByDuration)(this.clip.outPoint-this.clip.inPoint),left:(0,w.getWidthByDuration)(this.clip.inPoint),clipUIData:r.clipUIData,resizingDirect:0,rightHandlerHoverActive:!1,leftHandlerHoverActive:!1,isVideoClipDragging:!1,inPointOffsetX:0}},created:function(){this.clip.clipWidth=this.width},mounted:function(){var t=this;this.initEvents(),this.initResource(),this.clip.showSelf&&this.clip.showSelf(this.$refs["clip-item"]),this.clip.showSelf=null,this.clip.getEl=function(){return t.$el}},destroyed:function(){this.offEvents()},computed:m({},(0,u.mapState)(["resourceMap"]),{isTriple:function(){return this.clip.type===_.ClipTypes.TRIPLE},text:function(){return(this.clip.type===_.ClipTypes.CAPTION||this.clip.type===_.ClipTypes.MUSIC_CAPTION)&&this.clip.raw&&this.clip.raw.text?this.clip.raw.text:this.clip.getDisplayName()},showText:function(){return!this.isVideo&&!this.isImage&&!this.isSticker&&20<this.width},isSticker:function(){return this.clip.type===_.ClipTypes.STICKER||this.clip.type===_.ClipTypes.TRIPLE},isVideo:function(){return this.clip.type===_.ClipTypes.VIDEO},isImage:function(){return this.clip.type===_.ClipTypes.IMAGE},isAudio:function(){return this.clip.type===_.ClipTypes.AUDIO||this.clip.type===_.ClipTypes.RECORD_AUDIO},borderColor:function(){return this.clip.selected?this.clipUIData[this.clip.type].borderColor:"rgba(0, 0, 0, 0)"},bgColor:function(){if(this.clip.selected)return this.clipUIData[this.clip.type].color;var t=parseInt("0x"+this.clipUIData[this.clip.type].color.slice(1,3)),e=parseInt("0x"+this.clipUIData[this.clip.type].color.slice(3,5)),i=parseInt("0x"+this.clipUIData[this.clip.type].color.slice(5,7));return"rgba(".concat(t,", ").concat(e,", ").concat(i,", 0.7)")},height:function(){return this.clipUIData[this.clip.type].height},showClip:function(){return(this.clip.hasTransition||this.clip.acceptTransition)&&(this.isVideo||this.isImage)&&!this.isVideoClipDragging&&!this.clip.animOffsetX},showLeftHandler:function(){return(this.leftHandlerHoverActive||this.clip.isLeftResizing)&&!this.rightHandlerHoverActive},showRightHandler:function(){return(this.rightHandlerHoverActive||this.clip.isRightResizing)&&!this.leftHandlerHoverActive}}),watch:{"clip.inPoint":function(){this.updateDisplay()},"clip.outPoint":function(){this.updateDisplay()},width:function(){this.clip.clipWidth=this.width}},methods:m({},(0,u.mapMutations)(["setResource","setRhythmEntry","setRhythmData","setRhythmClip","updataCacheRhythmDataList"]),{initResource:function(){var e,i,n,a,r,s;return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object.keys(this.clip.resource).length)return this.isAudio&&this.renderWave(),t.abrupt("return");t.next=3;break;case 3:if(_.ClipTypes.STICKER===this.clip.type)return e=this.clip.getMaterialId(),t.next=7,f.default.awrap((0,o.fetchMaterialIds)(e));t.next=10;break;case 7:return i=t.sent,this.clip.resource=i[0]||{},t.abrupt("return");case 10:if(_.ClipTypes.TRIPLE===this.clip.type)return n=this.clip.getMaterialId(),t.next=14,f.default.awrap((0,o.fetchTripleMaterialIds)([n]));t.next=17;break;case 14:return a=t.sent,this.clip.resource=a[0]||{},t.abrupt("return");case 17:if(-1===[_.ClipTypes.VIDEO,_.ClipTypes.IMAGE,_.ClipTypes.AUDIO,_.ClipTypes.RECORD_AUDIO].indexOf(this.clip.type))return t.abrupt("return");t.next=19;break;case 19:if(r=this.clip.getResourceId(),!this.resourceMap[r]){t.next=24;break}this.clip.resource=this.resourceMap[r],t.next=29;break;case 24:return t.next=26,f.default.awrap((0,h.fetchResourceDetail)(r));case 26:s=t.sent,this.setResource({id:r,resource:s}),this.clip.resource=s;case 29:this.isAudio&&this.renderWave();case 30:case"end":return t.stop()}},null,this)},click:function(){this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,this.clip),this.clip.type===_.ClipTypes.AUDIO?this.fetchRhythmData():this.setRhythmEntry(!1)},fetchRhythmData:function(){var e,i,n,a,r,s,o,c,u,l,d;return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.clip.resource.resource_id,i=null,!(n=this.$store.state.cacheRhythmDataList[e])){t.next=8;break}i=n,this.setRhythmEntry(!0),t.next=23;break;case 8:return t.next=10,f.default.awrap((0,h.fetchRhythmData)(e));case 10:if(i=t.sent,r=(a=i).url,s=a.is_transcode,o=a.rubick_state,!r||s&&4!==o)return this.setRhythmEntry(!1),t.abrupt("return");t.next=15;break;case 15:this.setRhythmEntry(!0),c={ai_data:[],man_data:[]},l=(u=i).ai_data,d=u.man_data,l?c.ai_data=l.map(function(t){return(0,p.calcSectionData)(t.markers,100)}):l=[],d?c.man_data=d.map(function(t){return(0,p.calcSectionData)(t.markers,100)}):d=[],i.sectionData=c,i.ai_data=l,i.man_data=d;case 23:this.setRhythmData(i),this.setRhythmClip(this.clip),this.updataCacheRhythmDataList({resource_id:e,data:i});case 26:case"end":return t.stop()}},null,this)},initEvents:function(){this.$Bus.$on(r.EventKeys.TIMELINE_RULER_UPDATE,this.updateDisplayByRuler),this.$Bus.$on(this.$GLEventKey.CLIP_START_DRAGGING,this.clipStartDragging),this.$Bus.$on(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipStopDragging),this.$Bus.$on(this.$GLEventKey.RE_RENDER_AUDIO_WAVE,this.reRenderRhythm)},clipStartDragging:function(t){t.type!==_.ClipTypes.VIDEO&&t.type!==_.ClipTypes.IMAGE||(this.isVideoClipDragging=!0)},clipStopDragging:function(){this.isVideoClipDragging=!1},offEvents:function(){this.$Bus.$off(r.EventKeys.TIMELINE_RULER_UPDATE,this.updateDisplayByRuler),this.$Bus.$off(this.$GLEventKey.CLIP_START_DRAGGING,this.clipStartDragging),this.$Bus.$off(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipStopDragging),this.$Bus.$off(this.$GLEventKey.RE_RENDER_AUDIO_WAVE,this.reRenderRhythm)},updateDisplayByRuler:function(){this.updateDisplay(!0)},updateDisplay:function(t){var e=this,i=(0,w.getWidthByDuration)(this.clip.outPoint-this.clip.inPoint),n=this.width;this.width=i,this.left=(0,w.getWidthByDuration)(this.clip.inPoint),n!==i&&this.isAudio&&(t?(this.renderWaveTimeout&&clearTimeout(this.renderWaveTimeout),this.renderWaveTimeout=setTimeout(function(){e.renderWave(t),e.renderWaveTimeout=null},300)):this.renderWave(t))},mousedown:function(t){var e=this;t.preventDefault(),this.resizingDirect=0;var i=this.$refs["clip-item"].getBoundingClientRect();this.$Bus.$emit(r.EventKeys.CLIP_SELECTED,this.clip),this.$nextTick(function(){e.$Bus.$emit(e.$GLEventKey.CLIP_DRAGGING,new _.DragClipParam({clip:e.clip,left:i.left,top:i.top,element:e.$refs["clip-item"],mouseX:t.clientX,mouseY:t.clientY}))})},startResize:function(t,c){var u=this;if(!this.$Timeline.lockAllTracks&&!this.$Timeline.uiLockAllTracks){this.$Bus.$emit(this.$GLEventKey.LOCK_OPERATION_TRACKS,!0);var l=this.clip,d=l.raw.speed||1,f=t.clientX,p=0===c?l.inPoint:l.outPoint,h=0===c?l.trimIn:l.trimOut;0===c?(this.clip.isLeftResizing=!0,this.clip.isRightResizing=!1,this.clip.raw.keyFrameFromInPoint=p,this.clip.raw.keyFrameFromDuration=l.outPoint-l.inPoint):(this.clip.isRightResizing=!0,this.clip.isLeftResizing=!1),this.resizingDirect=c;var v=h,m=p,g=!0,e=function(t){if(g){g=!1,setTimeout(function(){g=!0},16);var e=t.clientX-f,i=(0,w.getNowTimeByPx)(e),n=p+i,a=h+i*d,r=l.orgDuration<2e5?l.orgDuration:2e5;if([function(){l.outPoint-n<r&&(n=m,a=v);var t=0;if(u.$Timeline.theme&&u.$Timeline.theme.headDuration&&(l.type===_.ClipTypes.VIDEO||l.type===_.ClipTypes.IMAGE)&&(t=u.$Timeline.theme.headDuration),n<t){var e=t-n;a+=e*d,n+=e}u.clip.hasTrim()&&a<0&&(n-=a/d,a-=a),l.inPoint=n,u.inPointOffsetX=(0,w.getPxByNowTime)(n-p),u.clip.hasTrim()&&(l.trimIn=a)},function(){n-l.inPoint<r&&(n=m,a=v),u.clip.hasTrim()&&a>l.orgDuration&&(n-=(a-l.orgDuration)/d,a=l.orgDuration),l.outPoint=n,u.clip.hasTrim()&&(l.trimOut=a)}][c](),v=a,m=n,(u.clip.type===_.ClipTypes.IMAGE||u.clip.type===_.ClipTypes.VIDEO)&&u.$Timeline.theme){var s=u.$Timeline.allTracks[u.$Timeline.trackOrder.indexOf(_.TrackTypes.VIDEO)],o=0;s.forEach(function(t){t.visible&&t.clips.forEach(function(t){t.outPoint>o&&(o=t.outPoint)})}),u.$store.state.themeDurationPredict=o+u.$Timeline.theme.tailDuration,u.$store.state.needThemeAnimate=!1}}};document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){u.$Bus.$emit(u.$GLEventKey.LOCK_OPERATION_TRACKS,!1),u.clip.isLeftResizing=!1,u.clip.isRightResizing=!1,document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t),u.$Bus.$emit(r.EventKeys.CLIP_RESIZE,l,c,function(){u.inPointOffsetX=0,u.$nextTick(function(){u.$store.state.themeDurationPredict=0,u.$store.state.needThemeAnimate=!0})})})}}})};e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(228),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(4)),a=i(21),s=n(i(859)),o=i(15),c={props:["clip","clipWidth"],components:{EditPosition:s.default},data:function(){return{transition:{},editDuration:0,right:0,width:0,bodyWidth:0,bodyRight:0,zIndex:2,transitionFocus:!1}},created:function(){this.$Bus.$on(this.$GLEventKey.CLIP_DRAGGING,this.hideEdit)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.CLIP_DRAGGING,this.hideEdit),this.clip.resizeTransitionClip=null},mounted:function(){this.resize(),this.clip.resizeTransitionClip=this.resize},watch:{editDuration:function(e){var i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.$Timeline.getClipPositionInfo(this.clip),n=i.trackIndex,a=i.clipIndex,this.transition=this.$BSSdk.getVideoClipTransition(n,a),t.next=4,r.default.awrap(this.$BSSdk.changeTransitionDuration(this.transition,1e6*e));case 4:return t.next=6,r.default.awrap(this.$BSSdk.saveQueue());case 6:this.resize();case 7:case"end":return t.stop()}},null,this)},clipWidth:function(){this.resize()}},methods:{resize:function(){var t=60,e=Math.min(this.clipWidth,this.clip.nextClip.clipWidth);.8*e<t&&(t=.8*e);var i=this.$Timeline.getClipPositionInfo(this.clip),n=i.trackIndex,a=i.clipIndex;this.transition=this.$BSSdk.getVideoClipTransition(n,a),this.transition&&(0,o.getWidthByDuration)(this.transition.duration)>t&&(t=(0,o.getWidthByDuration)(this.transition.duration));var r=-t/2-1;this.width=t+"px",this.right=r+"px";var s=24<t?24:t;this.bodyWidth=s+"px",this.bodyRight=-s/2-1+"px"},hideEdit:function(){this.$refs.popover&&this.$refs.popover.visible&&this.$refs.reference.click()},deleteTransition:function(){var e,i,n;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$Timeline.lockAllTracks)return t.abrupt("return");t.next=2;break;case 2:return e=this.$Timeline.getClipPositionInfo(this.clip),i=e.trackIndex,n=e.clipIndex,t.next=5,r.default.awrap(this.$BSSdk.removeVideoClipTransition(i,n));case 5:return t.next=7,r.default.awrap(this.$BSSdk.saveQueue());case 7:this.clip.hasTransition=!1,this.$refs.reference.click(),this.$LogReport.sendCustomEvent("editor_assets_delete_id",this.transition.desc),this.$Timeline.alignRaw();case 11:case"end":return t.stop()}},null,this)},toggleEdit:function(){if(!this.$Timeline.lockAllTracks&&this.clip.hasTransition){var t=this.$Timeline.getClipPositionInfo(this.clip),e=t.trackIndex,i=t.clipIndex;this.transition=this.$BSSdk.getVideoClipTransition(e,i),this.editDuration=this.transition.duration/1e6}},togglePopover:function(t){this.transitionFocus=t,this.zIndex=t?3:2},getMouse:function(){this.$Bus.$emit(a.EventKeys.TRANSITION_GET_MOUSE,this.clip)},loseMouse:function(){this.$Bus.$emit(a.EventKeys.TRANSITION_LOSE_MOUSE)}}};e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(230),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"sdk-edit-position",props:{prefix:String,value:Number,min:{type:Number,default:-1/0},max:{type:Number,default:1/0},disabled:Boolean,headWidth:{default:36},bodyWidth:{default:87},unit:{default:""}},data:function(){return{timer:null}},methods:{startIncrease:function(){var t=this;this.disabled||this.value>=this.max||(this.timer&&clearInterval(this.timer),this.$emit("input",this.value+1),this.timer=setInterval(function(){t.value>=t.max||t.$emit("input",t.value+1)},300))},startDecrease:function(){var t=this;this.disabled||this.value<=this.min||(this.timer&&clearInterval(this.timer),this.$emit("input",this.value-1),this.timer=setInterval(function(){t.value<=t.min||t.$emit("input",t.value-1)},300))},stopTimer:function(){this.timer&&clearInterval(this.timer),this.timer=null}}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(234),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,l=n(i(4)),r=n(i(6)),s=i(27),h=i(15),o=i(860),c=i(10),u=i(7),d=i(21),f=i(96);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var m={props:["clip","width","resizingDirect"],data:function(){return{pendingState:"pending",freezeBackgroundUrl:"",thumbs:[],highlights:[],displayHighlights:[],imgs:[],height:d.clipUIData[u.ClipTypes.VIDEO].height}},watch:(a={},(0,r.default)(a,"clip.trimIn",function(){this.requireRenderUpdate()}),(0,r.default)(a,"clip.trimOut",function(){this.requireRenderUpdate()}),(0,r.default)(a,"width",function(){this.requireRenderUpdate()}),(0,r.default)(a,"resizingDirect",function(){var i=this;this.imgs.forEach(function(t){var e=t.pos;t.posStyle=0===i.resizingDirect?"right: ".concat(i.width-e-i.height,"px;"):"left: ".concat(e,"px;")})}),(0,r.default)(a,"clip.raw",function(){this.clip.getIsFreezeVideo()&&this.setFreezeVideoBackground()}),(0,r.default)(a,"clip.resource",function(){var t=this;this.clip.getIsFreezeVideo()&&this.setFreezeVideoBackground(),this.fetchHighLights().then(function(){t.setHighLightPoint()}).catch(function(t){console.error(t)})}),(0,r.default)(a,"highlightsMap",function(t){if(!this.highlights||!this.highlights.length){var e=this.clip.getResourceId();this.highlights=t[e]||[],this.setHighLightPoint()}}),a),computed:v({},(0,c.mapState)(["thumbsMap","highlightsMap"]),{borderColor:function(){return d.clipUIData[this.clip.type].borderColor},bgImageStyle:function(){return this.freezeBackgroundUrl&&this.freezeBackgroundUrl!==this.pendingState?"url(".concat(this.freezeBackgroundUrl,")"):this.clip.resource&&this.clip.resource.cover_download_url?"url(".concat(this.clip.resource.cover_download_url,")"):""}}),mounted:function(){var e;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clip.type!==u.ClipTypes.VIDEO)return t.abrupt("return");t.next=2;break;case 2:if(this.clip.getIsFreezeVideo())return this.setFreezeVideoBackground(),t.abrupt("return");t.next=5;break;case 5:if(e=this.clip.getResourceId(),t.prev=6,!this.thumbsMap[e]){t.next=11;break}this.thumbs=this.thumbsMap[e],t.next=13;break;case 11:return t.next=13,l.default.awrap(this.fetchThumbs());case 13:this.setThumbsBg(),this.$nextTick(function(){(0,o.firstLoad)()}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(6),console.log(t.t0);case 20:return t.next=22,l.default.awrap(this.fetchHighLights().catch(function(t){console.error(t)}));case 22:this.setHighLightPoint();case 23:case"end":return t.stop()}},null,this,[[6,17]])},methods:v({},(0,c.mapMutations)(["setThumbs","setHighLights"]),{setFreezeVideoBackground:function(){var e,i,n,a,r,s,o,c,u=this;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object.keys(this.clip.resource).length){t.next=2;break}return t.abrupt("return");case 2:if(this.clip.raw){t.next=4;break}return t.abrupt("return");case 4:if(this.freezeBackgroundUrl)return t.abrupt("return");t.next=6;break;case 6:return this.freezeBackgroundUrl=this.pendingState,e=this.clip.resource,i=e.m3u8_download_url,n=e.resource_id,a=this.clip.raw.freezePoint/1e6,t.next=11,l.default.awrap((0,f.getVideoList)(i,n));case 11:r=t.sent,s=Math.floor(a/5),o=a%5,(c=document.createElement("video")).muted=!0,c.src=r[s],c.currentTime=o,c.crossOrigin="anonymous",c.onseeked=function(){var t=document.createElement("canvas");t.width=c.videoWidth,t.height=c.videoHeight,t.getContext("2d").drawImage(c,0,0,t.width,t.height),u.freezeBackgroundUrl=t.toDataURL()};case 20:case"end":return t.stop()}},null,this)},requireRenderUpdate:function(){var t=this;this.clip.type!==u.ClipTypes.VIDEO||this.clip.getIsFreezeVideo()||(null!==this.thumbsTimeout&&clearTimeout(this.thumbsTimeout),this.thumbsTimeout=setTimeout(function(){t.thumbsTimeout=null,t.setThumbsBg(),t.$nextTick(function(){(0,o.firstLoad)()})},400),this.setHighLightPoint())},fetchThumbs:function(){var e,i;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.clip.getResourceId(),this.thumbsMap[e])return this.thumbs=this.thumbsMap[e],t.abrupt("return");t.next=4;break;case 4:return t.next=6,l.default.awrap((0,s.fetchResourceThumbnails)(this.clip.getResourceId()));case 6:i=t.sent,this.thumbs=Object.keys(i.list||[]).map(function(t){return(i.list||[])[t]}).sort(),this.setThumbs({id:this.clip.getResourceId(),thumbs:this.thumbs});case 9:case"end":return t.stop()}},null,this)},fetchHighLights:function(){var e,i;return l.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clip.resource){t.next=2;break}return t.abrupt("return");case 2:if(e=this.clip.getResourceId(),this.highlightsMap[e]&&this.highlightsMap[e].length)return this.highlights=this.highlightsMap[e]||[],t.abrupt("return");t.next=6;break;case 6:return t.next=8,l.default.awrap((0,s.fetchResourceHighLights)(e));case 8:i=t.sent,this.highlights=(i.resource_highlight[e]||[]).sort(),this.setHighLights({id:e,highlights:(i.resource_highlight[e]||[]).sort()});case 11:case"end":return t.stop()}},null,this)},setThumbsBg:function(){function t(t){var e=(0,h.getSecondDurationByWidth)(c)*o*1e6,i=(t+.5)*e,n=u*e+i;if(s.clip.raw&&s.clip.raw.speedCurve){var a=s.clip.inPoint+i/o;n=s.$BSSdk.getVideoClipCurveTrimByTimelinePos(s.clip.raw,a)}var r=Math.round(n/l);return s.thumbs[r]}var s=this,o=(this.clip.raw||{}).speed||1,c=this.height,e=(0,h.getWidthByDuration)(this.clip.trimOut)/o,i=(0,h.getWidthByDuration)(this.clip.trimIn)/o,n=Math.ceil(e/c),u=Math.floor(i/c),a=n-u,r=-i%c,l=this.clip.orgDuration/this.thumbs.length;this.imgs=[];for(var d=0;d<a;d++){var f=r+d*c,p=0===this.resizingDirect?"right: ".concat(this.width-f-this.height,"px;"):"left: ".concat(f,"px;");this.imgs.push({pos:f,posStyle:p,url:t(d)})}},setHighLightPoint:function(){var i=this;if(Object.keys(this.clip.resource).length&&this.highlights&&this.highlights.length){var n=this.clip.trimIn||0,a=this.clip.trimOut||0,r=a-n;this.displayHighlights=[];this.highlights.forEach(function(t){var e=1e3*t;if(n<=e&&e<=a){if(i.clip.raw&&i.clip.raw.speedCurve)return i.displayHighlights.push({pos:i.$BSSdk.getVideoClipCurvePosByTrim(i.clip.raw,e)*i.width-2,toast:!1});i.displayHighlights.push({pos:(e-n)/r*i.width-2,toast:!1})}})}}})};e.default=m},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(237),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(24)),r=i(7),s=i(15),o={props:["clip","width","inPointOffsetX"],data:function(){return{inEditMode:!1,activeIndex:-1}},destroyed:function(){this.stopCheckActiveKeyframe()},watch:{keyFrameEditAble:function(t){if(t)return this.startCheckActiveKeyframe();this.stopCheckActiveKeyframe(),this.clearKeyFrameOperation()}},computed:{keyFrameEditAble:function(){return this.isKeyFrameSupportType&&this.isKeyFrameAttrReady&&this.isCurrentClipEditing},canFirstAddKeyFrame:function(){return this.keyFrameEditAble&&!this.clip.raw.keyFrames.length},isCurrentClipEditing:function(){return this.clip.selected&&this.$store.state.currentEditPanelData&&!this.$store.state.isContextPlaying},isKeyFrameSupportType:function(){return[r.ClipTypes.IMAGE,r.ClipTypes.STICKER,r.ClipTypes.VIDEO,r.ClipTypes.CAPTION].includes(this.clip.type)},hasKeyFrames:function(){return this.clip.raw&&this.clip.raw.keyFrames&&this.clip.raw.keyFrames.length},isKeyFrameAttrReady:function(){return this.clip.raw&&this.clip.raw.keyFrames},keyFrameTimes:function(){if(!this.isKeyFrameSupportType||!this.hasKeyFrames)return[];var t=this.clip.raw.keyFrames.map(function(t){return t.time});return(0,a.default)(new Set(t))},keyFramePositions:function(){var e=this;return this.keyFrameTimes.map(function(t){return t/(e.clip.outPoint-e.clip.inPoint)*e.width})}},methods:{seekKeyFrame:function(t){if(this.keyFrameEditAble){var e=this.keyFrameTimes[t]+this.clip.inPoint;this.$BSSdk.seekTimeline(e)}},showAddKeyFrame:function(){this.$store.commit("showAddKeyFrame")},showRemoveKeyFrame:function(){this.$store.commit("showRemoveKeyFrame")},clearKeyFrameOperation:function(){this.$store.commit("clearKeyFrameOperation")},setActiveIndex:function(t){this.activeIndex=t,this.showRemoveKeyFrame()},clearActiveIndex:function(){this.activeIndex=-1},checkKeyFrameActive:function(){var e=this;if(this.hasKeyFrames)for(var t=(0,s.getNowTimeByPx)(6),i=this.keyFrameTimes.map(function(t){return t+e.clip.inPoint}),n=this.$store.state.currentTimelinePosition,a=0;a<i.length;a++){var r=i[a];if(r-t<n&&n<r+t)return this.setActiveIndex(a),void(n!==r&&this.$BSSdk.seekTimeline(r,!0))}this.clearActiveIndex(),this.showAddKeyFrame()},startCheckActiveKeyframe:function(){var t=this;this.stopCheckActiveKeyframe(),this.checkKeyFrameActiveInterval=setInterval(function(){t.checkKeyFrameActive()},300)},stopCheckActiveKeyframe:function(){this.checkKeyFrameActiveInterval&&(clearInterval(this.checkKeyFrameActiveInterval),this.checkKeyFrameActiveInterval=null,this.clearActiveIndex())}}};e.default=o},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(244),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(96),s={components:{CardTemplate:n(i(625)).default},computed:{bgImg:function(){return 201===this.card.subtype?i(1277):i(861)}},props:["card","inProject"],data:function(){return{audioList:null,player:null,showPreview:!1}},mounted:function(){document.addEventListener("visibilitychange",this.stopPreview),this.stopPreview()},destroyed:function(){document.removeEventListener("visibilitychange",this.stopPreview),this.stopPreview()},methods:{initAudioList:function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.audioList){t.next=4;break}return t.next=3,a.default.awrap((0,r.getVideoList)(this.card.m3u8_download_url,this.card.resource_id));case 3:this.audioList=t.sent;case 4:case"end":return t.stop()}},null,this)},startPreview:function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.card.m3u8_download_url){t.next=2;break}return t.abrupt("return");case 2:if(this.$Timeline.clipDragging)return t.abrupt("return");t.next=4;break;case 4:return this.player&&(this.player.destroy(),this.player=null),this.showPreview=!0,t.next=8,a.default.awrap(this.initAudioList());case 8:if(this.showPreview){t.next=10;break}return t.abrupt("return");case 10:this.player=new r.AudioM3u8PreviewPlayer(this.audioList),this.player.play();case 12:case"end":return t.stop()}},null,this)},stopPreview:function(){this.card.m3u8_download_url&&(this.showPreview=!1,this.player&&(this.player.destroy(),this.player=null))}}};e.default=s},function(t,e,i){"use strict";i.r(e);var n=i(246),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={components:{CardTemplate:n(i(625)).default},props:["card","inProject"]};e.default=a},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(250),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(27),s=n(i(138)),o=i(40),c=n(i(32)),u=n(i(105)),l={components:{ResourceCard:s.default},mixins:[c.default],props:["searchStr"],data:function(){return{list:[],dateGroupList:[],loading:!1}},watch:{searchStr:(0,u.default)(function(){this.pager.page=1,this.fetchList()},300)},created:function(){this.$Bus.$on(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},mounted:function(){this.fetchList()},methods:{groupByDate:function(){var n=this;this.dateGroupList=[],this.list.forEach(function(t){var e=(0,o.dateFormat)(new Date(1e3*t.ctime),"yyyy-MM-dd"),i=n.dateGroupList.findIndex(function(t){return t.date===e});-1===i&&(n.dateGroupList.push({date:e,list:[]}),i=n.dateGroupList.length-1),n.dateGroupList[i].list.push(t)})},fetchList:function(){var e,i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e={page:this.pager.page,page_size:this.pager.pageSize,order:"ctime",sort:"desc",title:this.searchStr||""},t.next=4,a.default.awrap((0,r.fetchResourceList)(e));case 4:i=t.sent,this.list=i.list||[],i.list&&i.list.length?this.$store.commit("setManagePanel",!0):this.$store.commit("setManagePanel",!1),this.pager.total=i.total,this.groupByDate(),this.loading=!1;case 10:case"end":return t.stop()}},null,this)}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(253),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"remote-store",props:{top:String,left:String},computed:{positionTop:function(){return this.top?this.top:"10px"},positionLeft:function(){return this.left?this.left:"250px"},remoteStoreUsed:function(){return parseFloat((this.$store.state.usedRemoteStoreValue/1024/1024/1024).toFixed(2))},remoteStoreTotal:function(){return parseInt(this.$store.state.totalRemoteStoreValue/1024/1024/1024)},remoteStoreUsedPercentage:function(){return this.$store.state.totalRemoteStoreValue?this.$store.state.usedRemoteStoreValue/this.$store.state.totalRemoteStoreValue*100+"%":"0%"}}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(256),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"multi-upload-type-drop"}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(260),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(27),o=n(i(138)),c=n(i(32)),u=n(i(863)),l=n(i(71)),d=n(i(862)),f=i(10);function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var h={components:{ResourceCard:o.default,RecordModal:u.default,MultiUploadTypeDrop:d.default},mixins:[c.default],directives:{Clickoutside:l.default},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,f.mapState)(["isManageResource"])),data:function(){return{list:[],recordVisible:!1,loading:!1,openMultipleUploadType:!1}},created:function(){this.$Bus.$on(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},mounted:function(){this.fetchList(),this.$store.state.quickCutGray&&this.$LogReport.sendCustomEvent("editor_quick_video_cut_show")},methods:{showMobileUploadQRCode:function(){this.$store.commit("setShowMobileUploadQrCodeModal","project")},showAudioRecord:function(){this.$store.state.biliPreviewerMode?this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}):this.$store.state.sdkAllLock||(this.recordVisible=!0)},fetchList:function(){var e,i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e={page:this.pager.page,page_size:this.pager.pageSize,project_id:this.$route.params.id,order:"ctime",sort:"desc"},t.next=4,a.default.awrap((0,s.fetchResourceList)(e));case 4:i=t.sent,this.list=i.list||[],i.list&&i.list.length?this.$store.commit("setManagePanel",!0):this.$store.commit("setManagePanel",!1),this.pager.total=i.total,this.loading=!1;case 9:case"end":return t.stop()}},null,this)}}};e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(262),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(4)),a=n(i(1291)),o=i(40),r=i(15),c=n(i(106)),u=n(i(574)),l=i(69),d=i(27),f={mixins:[c.default,u.default],data:function(){return{visible:!1,videoOptions:[0],record:{state:"stop",sec:0},initVideoSeekBarValue:0,processing:!1,hasRecord:!1,blob:null,recordLimit:7200,topOffset:"5vh",transform:"translateX(-50%)",audioPlaying:!1,isUploading:!1}},created:function(){var i=this;this.$Bus.$emit(this.$GLEventKey.LOCK_OPERATION_TRACKS,!0),this.$Bus.$emit(this.$GLEventKey.LOCK_MONITOR_CONTROL,!0),this.$store.commit("setHotKeyLock",!0);!function(){if(689<document.body.clientHeight)i.topOffset=(document.body.clientHeight-689)/2+"px";else{i.topOffset="0px";var t=document.body.clientHeight/689,e=-(689-689*t)/2;i.transform="translateX(-50%) translateY(".concat(e,"px) scale(").concat(t,")")}}()},mounted:function(){var t=this;this.$LogReport.sendCustomEvent("editor_record_panel_show"),window.addEventListener("resize",this.stopAudioRecord),this.visible=!0,this.$nextTick(function(){t.initModal()})},destroyed:function(){var e=this;s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(e.$BSSdk.changeTimelineDuration());case 2:window.removeEventListener("resize",e.stopAudioRecord),e.seekMonitorTimeline(e.initVideoSeekBarValue),e.unbindLiveWindow(),e.$BSSdk.resumeAudioOutput(),e.$Bus.$emit(e.$GLEventKey.LOCK_OPERATION_TRACKS,!1),e.$Bus.$emit(e.$GLEventKey.LOCK_MONITOR_CONTROL,!1),e.$store.commit("setHotKeyLock",!1);case 9:case"end":return t.stop()}}).catch(function(t){console.error(t)})},watch:{videoOptions:{handler:function(){-1===this.videoOptions.indexOf(0)&&this.videoOptions.length&&this.videoOptions.splice(0,1),-1!==this.videoOptions.indexOf(1)?this.$BSSdk.muteAudioOutput():this.$BSSdk.resumeAudioOutput()},deep:!0}},methods:{seekMonitorTimeline:function(t){t<this.$store.state.timelineDuration&&this.$BSSdk.seekTimeline(t,!0)},initModal:function(){var e=this;s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(e.$BSSdk.changeEmptyTrackOutPoint(e.$store.state.timelineDuration+18e3*e.$GL.SECOND_CONVERT));case 2:e.bindLiveWindow(),e.initVideoSeekBarValue=e.$store.state.currentTimelinePosition;case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},bindLiveWindow:function(){var t=this,e=9*this.$refs["livewindow-container"].clientWidth/16;this.$refs["livewindow-container"].style.height=e+"px",this.$nextTick(function(){t.resizeLiveWindow(t.$refs["livewindow-container"],t.$refs.livewindow),t.$BSSdk.createLiveWindow("audio-record-livewindow",t.$BSSdk.timeline)})},unbindLiveWindow:function(){this.$BSSdk.createLiveWindow()},secToString:r.secToString,startAudioRecord:function(){var n=this;this.$store.state.sdkAllLock||(navigator.mediaDevices?(this.record.sec=0,this.$refs["audio-player"].clear(),this.seekMonitorTimeline(this.initVideoSeekBarValue),this.hasRecord=!1,this.processing=!0,navigator.mediaDevices.getUserMedia({audio:{sampleRate:44100,channelCount:2,volume:1}}).then(function(t){n.playVideo(),n.record.sec=0,n.record.state="recording",n.$BSSdk.beginAudioRecord(t);var e=+new Date,i=setInterval(function(){var t=(new Date-e)/1e3;t>n.recordLimit+.5&&(n.stopAudioRecord(),n.$message("录音时长达到上限，已停止录音")),"recording"===n.record.state?n.record.sec=t:clearInterval(i)},100)}).catch(function(t){n.processing=!1,console.error(t),n.$message({text:"未连接到录音设备",type:"warning"})})):this.$message("安全域限制，使用https"))},playVideo:function(){-1!==this.videoOptions.indexOf(0)&&(-1!==this.videoOptions.indexOf(1)?this.$BSSdk.muteAudioOutput():this.$BSSdk.resumeAudioOutput(),this.playLiveWindow(!0))},stopVideo:function(){this.playLiveWindow(!1)},deleteAudio:function(){var t=this;this.$confirm("删除后无法恢复，是否删除?",function(){t.hasRecord=!1,t.$refs["audio-player"].clear(),t.record.sec=0},function(){})},stopAudioRecord:function(){if(!this.$store.state.sdkAllLock){this.record.state="stop";var t=this.$BSSdk.stopAudioRecord(),e=t.blob,i=t.name;this.blob=e;var n=window.URL.createObjectURL(e);this.$refs["audio-player"]&&this.$refs["audio-player"].setAudio(n,i),this.hasRecord=!0,this.processing=!1,this.stopVideo()}},audioPlay:function(t){this.audioPlaying=!0,this.seekMonitorTimeline(this.initVideoSeekBarValue+1e6*t),this.playVideo()},audioPause:function(){this.audioPlaying=!1,this.stopVideo()},seekAudio:function(t){this.audioPlaying=!1,this.seekMonitorTimeline(this.initVideoSeekBarValue+1e6*t),this.stopVideo()},confirmClick:function(){var e,i,n,a,r=this;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.hasRecord){t.next=2;break}return t.abrupt("return",this.$message("请先进行录音"));case 2:if(this.isUploading)return t.abrupt("return");t.next=4;break;case 4:return t.prev=4,this.$globalLoading(!0,this.$GL.MUSIC_RECORD_UPLOAD_ING),this.$LogReport.sendCustomEvent("editor_record_upload_clicked"),this.isUploading=!0,e=this.blob,i=(0,o.getMediaFormatType)(e.name),n=(0,o.getMediaExtension)(e.name),t.next=13,s.default.awrap((0,d.createResource)({project_id:this.$route.params.id,type:i,name:e.name.toLowerCase(),size:e.size,resource_file_type:n,subtype:201}));case 13:a=t.sent,(0,l.multipleFetch)(e,a.upload_urls,a.per_size||5242880).progress(function(){}).done(function(e){return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap((0,d.fetchResourceEtagComplete)(a.resource_id,e,a.upload_id));case 2:return t.next=4,s.default.awrap((0,d.transcodeResource)(a.resource_id));case 4:return t.next=6,s.default.awrap((0,d.createRhythm)(a.resource_id,0).catch(function(t){console.error(t),r.$message({text:"生成音频踩点失败",type:"error"})}));case 6:r.$Bus.$emit(r.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),r.$LogReport.sendCustomEvent("editor_record_upload_success"),r.$message({text:"录音上传成功",type:"success"}),r.close(),setTimeout(function(){r.$globalLoading(!1),r.isUploading=!1},100);case 11:case"end":return t.stop()}})}).catch(function(){setTimeout(function(){r.$globalLoading(!1),r.isUploading=!1},100),r.$message({text:"录音上传失败，请重试",type:"error"})}),t.next=22;break;case 17:t.prev=17,t.t0=t.catch(4),this.$message({text:t.t0.message||"录音上传失败，请重试",type:"error"}),this.$globalLoading(!1),this.isUploading=!1;case 22:case"end":return t.stop()}},null,this,[[4,17]])},close:function(){this.processing&&this.$BSSdk.stopAudioRecord(),this.$emit("close")}},components:{AudioPlayer:a.default}};e.default=f},function(t,e,i){"use strict";i.r(e);var n=i(264),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(84)),s=i(15),o=n(i(1292)),c={data:function(){return{name:"",url:"",duration:0,seekBarValue:0,state:"pause"}},mounted:function(){window.addEventListener("resize",this.pause),this.$refs.audio.addEventListener("ended",this.ended)},destroyed:function(){window.removeEventListener("resize",this.pause)},methods:{setAudio:function(e,i){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.url=e,this.name=i,this.$refs.audio.src=e,t.next=6,a.default.awrap((0,o.default)(e));case 6:this.duration=t.sent,this.seekBarValue=0;case 8:case"end":return t.stop()}},null,this)},secToString:s.secToString,clear:function(){this.name="",this.url="",this.state="pause",this.$emit("pause"),this.$refs.audio.currentTime=0,this.seekBarValue=0,this.duration=1},ended:function(){this.state="pause",this.$emit("pause",this.seekBarValue)},play:function(){var t=this,e=this.$refs.audio;e.currentTime===this.duration&&(this.seekBarValue=0,e.currentTime=0),this.state="play",this.$emit("play",this.seekBarValue),e.play();var i=setInterval(function(){"pause"===t.state&&clearInterval(i),t.seekBarValue=e.currentTime},10)},seek:function(){this.$refs.audio.currentTime=this.seekBarValue,this.pause(),this.$emit("seek",this.seekBarValue)},pause:function(){var t=this.$refs.audio;this.state="pause",this.$emit("pause",this.seekBarValue),t.pause()}},components:{SeekBar:r.default}};e.default=c},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(269),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(10),o=i(27);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var l={data:function(){return{open:!1}},mounted:function(){this.$Bus.$on(this.$GLEventKey.REMOVE_RESOURCE_FROM_UPLOAD_TASK,this.removeTask)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.REMOVE_RESOURCE_FROM_UPLOAD_TASK,this.removeTask)},methods:u({},(0,s.mapMutations)(["deleteUploadTask","cancelUploadTask"]),{removeTask:function(e){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.cancelUploadTask(e),this.deleteUploadTask(e);case 2:case"end":return t.stop()}},null,this)},cancelTask:function(e){var i=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$confirm("确认取消该任务?",function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap((0,o.deleteResource)({project_id:i.$route.params.id,resource_id:e}).catch(function(){}));case 2:return t.next=4,a.default.awrap((0,o.deleteResource)({resource_id:e}).catch(function(){}));case 4:i.$Bus.$emit(i.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),i.cancelUploadTask(e),i.deleteUploadTask(e);case 7:case"end":return t.stop()}})},function(){});case 1:case"end":return t.stop()}},null,this)}}),computed:u({},(0,s.mapState)(["uploads","isManageResource"]),{uploadStatus:function(){if(!this.uploads.length)return"无上传任务";for(var t=0;t<this.uploads.length;t++)if(this.uploads[t].progress<1)return"上传中...";return"上传完毕"},uploadNum:function(){if(!this.uploads.length)return"";var t=this.uploads.reduce(function(t,e){return e.progress<1?t+1:t},0),e=this.uploads.length;return"已上传".concat(e-t,"个，共").concat(e,"个")}})};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(272),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(27),o=i(10);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var l={props:["tab"],methods:u({},(0,o.mapMutations)(["setManageStatus","initManageResource"]),{handleManageSource:function(){this.$LogReport.sendCustomEvent("editor_batch_management_click"),this.setManageStatus(!0)},handleDeleteSource:function(){var e,i,n=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$LogReport.sendCustomEvent("editor_batch_delete_click"),"project"===this.tab?this.$confirm('<div style="font-size: 18px;color:#fff;margin-bottom:16px">确认删除所选素材?</div><div style="color: #8F9196;">部分素材已添加到视频轨道中，删除后视频轨道中对应素材将被一同删除</div>',function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap((0,s.deleteResources)({project_id:n.$route.params.id,resource_ids:n.selectedResource.map(function(t){return t.resource_id})}).catch(function(){}));case 2:n.selectedResource.forEach(function(t){n.$Bus.$emit(n.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,t.resource_id)}),n.$Bus.$emit(n.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),n.initManageResource();case 5:case"end":return t.stop()}})},function(){}):(e=-1<this.selectedResource.findIndex(function(t){return t.is_bind_project}),i=e?"这些素材已被多个项目使用，删除会导致这些素材从项目中消失，是否继续":"删除后无法恢复，确定删除吗?",this.$confirm(i,function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap((0,s.deleteResources)({resource_ids:n.selectedResource.map(function(t){return t.resource_id})}).catch(function(){}));case 2:n.selectedResource.forEach(function(t){n.$Bus.$emit(n.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,t.resource_id),n.isUploading(t)&&n.$Bus.$emit(n.$GLEventKey.REMOVE_RESOURCE_FROM_UPLOAD_TASK,t.resource_id)}),n.$Bus.$emit(n.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),n.initManageResource();case 5:case"end":return t.stop()}})},function(){}));case 2:case"end":return t.stop()}},null,this)},cancelManageSource:function(){this.$LogReport.sendCustomEvent("editor_batch_delete_cancel"),this.initManageResource()},isUploading:function(e){return(0===e.task_state||80===e.state)&&-1!==this.uploads.findIndex(function(t){return t.id===e.resource_id})}}),computed:u({},(0,o.mapState)(["uploads","isManageResource","selectedResource","showManagePanel"]))};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(275),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["tab"],data:function(){return{draggingFile:!1,active:!1}},computed:{tip:function(){return this.active?"释放鼠标":"拖到这里"}},mounted:function(){this.$Bus.$on(this.$GLEventKey.DRAG_ENTER_BODY,this.show),this.$Bus.$on(this.$GLEventKey.DRAG_LEAVE_BODY,this.hide)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.DRAG_ENTER_BODY,this.show),this.$Bus.$off(this.$GLEventKey.DRAG_LEAVE_BODY,this.hide)},methods:{show:function(){this.draggingFile=!0},hide:function(){this.active=!1,this.draggingFile=!1},dragenter:function(){this.active=!0},dragleave:function(){this.active=!1},uploadDrop:function(t){t.stopPropagation(),t.preventDefault(),this.draggingFile=!1,this.$Bus.$emit(this.$GLEventKey.FILE_DRAG_UPLOAD,t.dataTransfer.files,this.tab)}}}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(279),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(31),s=n(i(1304)),o=i(7),c=n(i(32)),u={components:{Card:s.default},mixins:[c.default],data:function(){return{clipType:o.ClipTypes.AUDIO,tab:"节目音效",tabs:[{name:"节目音效",type:7,subType:1},{name:"字幕音效",type:7,subType:2},{name:"游戏音效",type:7,subType:3}],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){this.fetchList()},methods:{fetchList:function(){var e,i,n=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,a.default.awrap((0,r.fetchMaterialMusicList)({type:e.type,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[];case 6:case"end":return t.stop()}},null,this)}}};e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(281),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(7),r={props:["card","clipType"],components:{Clip:n(i(70)).default},data:function(){return{showPreview:!1,clip:this.createClip()}},mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.card.package_url&&this.$BSSdk.readAndSaveAsset(this.card.package_url)},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview)},methods:{createClip:function(){return new a.ClipUI({type:this.clipType,duration:1e3*this.card.duration,resource:this.card})},mousedown:function(t){var e=this;t.preventDefault();var i=this.$refs["clip-item"].$el.cloneNode(!0);i.style.display="block";function n(){document.removeEventListener("mousemove",n),e.$Bus.$emit(e.$GLEventKey.CLIP_DRAGGING,new a.DragClipParam({clip:e.createClip(),left:t.clientX-20,top:t.clientY-10,element:i,mouseX:t.clientX,mouseY:t.clientY}))}document.addEventListener("mousemove",n),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",n)})},startPreview:function(){if(!this.$Timeline.clipDragging){var t=this.$refs["audio-node"];t.volume=.1,t.src=this.card.package_url,t.play().then(function(){}).catch(function(){})}},stopPreview:function(){var t=this.$refs["audio-node"];t.pause(),t.removeAttribute("src"),t.load()}}};e.default=r},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(285),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(107)),c=a(i(1308)),u=i(7),l=a(i(32)),d={components:{Card:o.default,MusicCaptionCard:c.default},mixins:[l.default],props:{from:String},computed:{fromCaptionEdit:function(){return this.from===u.ClipTypes.CAPTION},fromMusicCaptionEdit:function(){return this.from===u.ClipTypes.MUSIC_CAPTION}},data:function(){return{clipType:u.ClipTypes.CAPTION,tab:"",mainType:0,tabs:[],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_text_click"),t.next=3,r.default.awrap(this.initTab());case 3:case"end":return t.stop()}},null,this)},methods:{initTab:function(){var e,i,n,a=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.fetchMaterialListV2({type:this.mainType}));case 2:e=t.sent,i=e.cats,n=[],i.forEach(function(t){a.fromMusicCaptionEdit||"批量字幕"===t.name||n.push({name:t.name,type:t.type,subType:t.id}),a.fromMusicCaptionEdit&&"批量字幕"===t.name&&n.push({name:t.name,type:t.type,subType:t.id})}),this.tabs=n,this.tab=this.tabs[0].name;case 8:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:e.type,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize,ext:"captionstyle"}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[],"批量字幕"===e.name&&this.$store.commit("setMusicCaptionResourceList",this.list),this.fetchTestCategory(i.cats);case 8:case"end":return t.stop()}},null,this)}}};e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(287),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(7),a=i(96),r=n(i(70)),o=n(i(108)),c={props:{card:{type:Object},clipType:String,backgroundSize:{default:"contain"},blurBg:{default:!1}},mixins:[o.default],components:{Clip:r.default},data:function(){return{showPreview:!1,clip:this.createClip(),hover:!1}},mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.card.package_url&&this.$BSSdk.readAndSaveAsset(this.card.package_url)},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview)},methods:{addToTrack:function(){this.$Bus.$emit(this.$GLEventKey.CLIP_DIRECT_TO_TRACK,this.createClip())},createClip:function(){return new s.ClipUI({type:this.clipType,duration:this.card.duration||1e7,resource:this.card})},mousedown:function(n){var a=this;if(!this.currentEditClip){n.preventDefault();var r=this.$refs["clip-item"].$el.cloneNode(!0);r.style.display="block";var e=function t(){document.removeEventListener("mousemove",t);var e=a.clip.type===s.ClipTypes.TRANSITION?2:20,i=a.clip.type===s.ClipTypes.TRANSITION?2:10;a.$Bus.$emit(a.$GLEventKey.CLIP_DRAGGING,new s.DragClipParam({clip:a.createClip(),left:n.clientX-e,top:n.clientY-i,element:r,mouseX:n.clientX,mouseY:n.clientY}))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e)})}},startPreview:function(){var t=this;this.hover=!0,this.$Timeline.clipDragging||this.$Timeline.draggingClip||(this.card.demo_url?(this.player&&(this.player.destroy(),this.player=null),this.showPreview=!0,this.$nextTick(function(){t.player=new a.PreviewPlayer(t.$refs["video-canvas"],t.card.demo_url),t.player.play()})):this.card.animation_cover&&(this.showPreview=!0))},stopPreview:function(){if(this.hover=!1,this.card.demo_url){if(!this.player)return;this.showPreview=!1,this.player.destroy(),this.player=null}else this.card.animation_cover&&(this.showPreview=!1)}},computed:{materialCover:function(){return this.showPreview&&!this.card.demo_url&&this.card.animation_cover?this.card.animation_cover:this.card.cover_url},isTransitionCard:function(){return this.clip.type===s.ClipTypes.TRANSITION}}};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(290),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(96),s=i(7),o=n(i(70)),c=n(i(108)),u={components:{Clip:o.default},props:{card:{type:Object},backgroundSize:{default:"contain"},clipType:String},mixins:[c.default],data:function(){return{showPreview:!1,clip:this.createClip()}},mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.card.package_url&&this.$BSSdk.readAndSaveAsset(this.card.package_url)},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview)},methods:{createClip:function(){return new s.ClipUI({type:this.clipType,duration:this.card.duration||1e7,resource:this.card})},mousedown:function(n){var a=this;if(!this.currentEditClip){n.preventDefault();var r=this.$refs["clip-item"].$el.cloneNode(!0);r.style.display="block";var e=function t(){document.removeEventListener("mousemove",t);var e=a.clip.type===s.ClipTypes.TRANSITION?2:20,i=a.clip.type===s.ClipTypes.TRANSITION?2:10;a.$Bus.$emit(a.$GLEventKey.CLIP_DRAGGING,new s.DragClipParam({clip:a.createClip(),left:n.clientX-e,top:n.clientY-i,element:r,mouseX:n.clientX,mouseY:n.clientY,dragMask:!0}))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e)})}},applyMusicCaption:function(e){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$Bus.$emit(this.$GLEventKey.APPLY_MUSIC_CAPTION,e);case 1:case"end":return t.stop()}},null,this)},startPreview:function(){var t=this;this.$Timeline.clipDragging||this.$Timeline.draggingClip||(this.card.demo_url?(this.player&&(this.player.destroy(),this.player=null),this.showPreview=!0,this.$nextTick(function(){t.player=new r.PreviewPlayer(t.$refs["video-canvas"],t.card.demo_url),t.player.play(!0)})):this.card.animation_cover&&(this.showPreview=!0))},stopPreview:function(){if(this.card.demo_url){if(!this.player)return;this.showPreview=!1,this.player.destroy(),this.player=null}else this.card.animation_cover&&(this.showPreview=!1)}},computed:{materialCover:function(){return this.showPreview&&!this.card.demo_url&&this.card.animation_cover?this.card.animation_cover:this.card.cover_url}}};e.default=u},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(294),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1312)),s=n(i(1316)),o=n(i(626)),c=n(i(1326)),u=i(7);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var d={computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,i(10).mapState)(["allTracks"]),{clips:function(){var t=this.allTracks[u.TrackOrder.indexOf(u.TrackTypes.MUSIC_CAPTION)];return t.length?t[0].clips:[]},tabs:function(){return this.clips&&this.clips.length?[{name:"内容"},{name:"样式"},{name:"花字"},{name:"模板"}]:[{name:"内容"}]}}),data:function(){return{tab:"内容",hasClip:!1}},mounted:function(){this.clips.length&&(this.hasClip=!0,this.setMusicCaptionEditData())},watch:{clips:function(){this.clips.length||(this.tab="内容",this.hasClip=!1),this.hasClip=!0},hasClip:function(t){var e=this;if(t){!function t(){if(e.clips[0]&&e.clips[0].raw)return e.setMusicCaptionEditData();setTimeout(function(){t()},200)}()}}},methods:{setMusicCaptionEditData:function(){var t=this.clips[0].raw;if(t){var e=this.$BSSdk,i=e.getCaptionClipFontFamily(t),n=e.getCaptionRendererId(t),a=e.getCaptionClipFontSize(t),r=e.getCaptionClipColor(t),s=e.getCaptionClipBold(t),o=e.getCaptionClipItalic(t),c=e.getCaptionClipTextAlign(t),u=e.getCaptionClipOutline(t),l=e.getCaptionClipOutlineColor(t),d=e.getCaptionClipOutlineWidth(t),f=e.getCaptionClipText(t),p=e.getCaptionClipShadow(t),h=e.getScale(t),v=Math.round(h*a);this.$EditPanelData.setCaption({bsFontId:i,rendererId:n,fontSize:a,color:r,shadow:p,bold:s,italic:o,align:c,outline:u,outlineColor:l,outlineWidth:d,text:f,scale:h,scaleMutiFontSize:v,defaultColor:t.defaultColor,defaultOutlineColor:t.defaultOutlineColor},{},!0)}}},components:{MusicCaptionContent:r.default,MusicCaptionStyle:s.default,CaptionTemplate:o.default,MusicCaptionRenderer:c.default}};e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(296),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=n(i(4)),s=n(i(6)),o=i(15),c=i(21),u=i(1313),l=i(40),d={data:function(){return{activeClip:{},canCheckPlayActive:!0}},props:["clips"],mounted:function(){this.setActiveClipFromOut(),this.initEvents()},destroyed:function(){this.offEvents()},watch:(a={},(0,s.default)(a,"$store.state.musicCaptionEditData",function(){this.setActiveClipFromOut()}),(0,s.default)(a,"$store.state.currentTimelinePosition",function(){var e=this;if(this.canCheckPlayActive&&(this.canCheckPlayActive=!1,setTimeout(function(){e.canCheckPlayActive=!0},300),this.$store.state.isContextPlaying)){var t=this.clips.find(function(t){return t.inPoint<=e.$store.state.currentTimelinePosition&&t.outPoint>=e.$store.state.currentTimelinePosition});if(t){var i=this.clips.indexOf(t);if(-1!==i){var n=this.$refs["item-".concat(i)][0].offsetTop-50;this.$refs.body.scrollTop!==n&&(0,l.scrollTo)(this.$refs.body,n,300)}}}}),a),computed:{},methods:{handleMouseDownStoped:function(){this.$refs["caption-input"]&&this.$refs["caption-input"].forEach(function(t){t.blur()})},initEvents:function(){this.$Bus.$on(this.$GLEventKey.MOUSEDOWN_STOPED,this.handleMouseDownStoped)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.MOUSEDOWN_STOPED,this.handleMouseDownStoped)},addFirstMusicCaption:function(){this.$Bus.$emit(this.$GLEventKey.APPLY_MUSIC_CAPTION)},secToString:o.secToString,addOneLine:function(){this.$LogReport.sendCustomEvent("batch-captions_content_bottom_add_line_click"),this.$Bus.$emit(this.$GLEventKey.ADD_MUSIC_CAPTION_TO_CURRENT_TIME)},setActiveClipFromOut:function(){if(this.activeClip!==this.$Timeline.selectedClip){if(Object.keys(this.activeClip).length){var t=this.clips.indexOf(this.activeClip);this.$refs["item-".concat(t)]&&this.$refs["item-".concat(t)][0].getElementsByClassName("input")[0].blur()}this.activeClip=this.$Timeline.selectedClip||{};var e=this.clips.indexOf(this.activeClip);if(-1!==e){var i=this.$refs["item-".concat(e)][0];(0,l.scrollTo)(this.$refs.body,i.offsetTop-50)}}},selectMusicCaptionClip:function(t){this.activeClip!==t&&(this.activeClip=t,this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,t),this.$Bus.$emit(c.EventKeys.CLIP_SELECTED,t))},inputCaptionText:function(e){var i,n,a=this;r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=a.activeClip.raw,t.next=4,r.default.awrap(i.setCaptionClipText(n,e.target.value));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})},clearAllMusicCaption:function(){this.$LogReport.sendCustomEvent("batch-captions_content_one-click_clear_click"),this.$Bus.$emit(this.$GLEventKey.CLEAR_ALL_MUSIC_CAPTION),this.activeClip=this.clips[0]},mergeFragmentsToTrack:function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$Bus.$emit(this.$GLEventKey.APPLY_MUSIC_LYRICS_TO_TRACK,e);case 1:case"end":return t.stop()}},null,this)},loadFromLyricFile:function(){var e;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("batch-captions_content_import_caption_click"),t.next=3,r.default.awrap((0,u.loadLyrics)());case 3:if((e=t.sent)&&e.length){t.next=6;break}return t.abrupt("return",this.$message({text:"请上传正确的字幕文件",type:"warning"}));case 6:return t.next=8,r.default.awrap(this.mergeFragmentsToTrack(e));case 8:case"end":return t.stop()}},null,this)},loadFromText:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$LogReport.sendCustomEvent("batch-captions_content_add_text_click"),this.$store.commit("setShowMusicCaptionTextEditModal",!0);case 2:case"end":return t.stop()}},null,this)}}};e.default=d},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(299),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(4)),a=n(i(6)),r=n(i(24)),s=i(10),c=n(i(627)),u=n(i(864)),l=n(i(865)),d=n(i(109)),f=n(i(110)),p=n(i(628));function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var v={components:{ColorSelect:c.default,TextAlign:u.default,BorderColorSelect:l.default,Translate:d.default,bccSwitch:f.default,captionFontSelect:p.default},data:function(){return{fontSizeList:(0,r.default)(new Array(200).keys()).map(function(t){return t+1}),fontStyle:[0,1,2]}},name:"caption-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["musicCaptionEditData","captionFonts"]),{_outline_:{get:function(){return!!this.musicCaptionEditData.outline},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{outline:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipOutline(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_outlineWidth_:{get:function(){return parseFloat(this.musicCaptionEditData.outlineWidth.toFixed(1))},set:function(e){var i,n=this;e=parseFloat(e.toFixed(1)),this.$EditPanelData.setCaption(this.musicCaptionEditData,{outlineWidth:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipOutlineWidth(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_bsFontId_:{get:function(){return this.musicCaptionEditData.bsFontId},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{bsFontId:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,n.$globalLoading(!0,n.$GL.FONT_DOWNLOAD_ING),t.next=4,o.default.awrap(i.setMusicCaptionClipFontFamily(e));case 4:i.drawMonitorEdit(),n.$globalLoading(!1);case 6:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_fontSize_:{get:function(){return this.musicCaptionEditData.scaleMutiFontSize},set:function(t){var e,i=this,n=this.musicCaptionEditData,a=n.scaleMutiFontSize,r=n.fontSize,s=t/a;this.$EditPanelData.setCaption(this.musicCaptionEditData,{scaleMutiFontSize:t,scale:t/r},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.$BSSdk,t.next=3,o.default.awrap(e.changeMusicCaptionClipOffsetScale(s));case 3:e.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_color_:{get:function(){return this.musicCaptionEditData.color},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{color:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipColor(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_outlineColor_:{get:function(){return this.musicCaptionEditData.outlineColor},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{outline:!0,outlineColor:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipOutlineColor(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_bold_:{get:function(){return this.musicCaptionEditData.bold},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{bold:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipBold(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_italic_:{get:function(){return this.musicCaptionEditData.italic},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{italic:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipItalic(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_shadow_:{get:function(){return this.musicCaptionEditData.shadow},set:function(e){var i,n=this;this.$EditPanelData.setCaption(this.musicCaptionEditData,{shadow:e},!0),o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,t.next=3,o.default.awrap(i.setMusicCaptionClipShadow(e));case 3:i.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}}),methods:{resetPosition:function(){return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(this.$BSSdk.changeMusicCaptionClipTranslateXY("bottom"));case 2:this.$BSSdk.drawMonitorEdit();case 3:case"end":return t.stop()}},null,this)}}};e.default=v},function(t,e,i){"use strict";i.r(e);var n=i(301),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(24)),r={props:["value","defaultColor"],directives:{Clickoutside:n(i(71)).default},watch:{value:function(t){this.currentColor=t}},data:function(){var t=["rgba(255,255,255,1)","rgba(0,0,0,1)","rgba(205,26,29,1)","rgba(255,110,0,1)","rgba(255,210,0,1)","rgba(130,185,0,1)","rgba(34,90,31,1)","rgba(90,255,160,1)","rgba(0,190,255,1)","rgba(0,50,119,1)","rgba(95,35,90,1)","rgba(170,90,150,1)","rgba(130,0,55,1)","rgba(255,110,160,1)","rgba(255,172,188,1)","rgba(255,239,104,1)","rgba(0,189,135,1)","rgba(0,70,85,1)","rgba(90,255,235,1)","rgba(124,210,255,1)","rgba(0,70,185,1)","rgba(40,0,160,1)","rgba(84,95,220,1)","rgba(135,155,255,1)","rgba(80,20,0,1)","rgba(137,47,27,1)","rgba(224,125,0,1)","rgba(115,150,0,1)","rgba(80,100,0,1)","rgba(50,60,0,1)","rgba(0,180,160,1)","rgba(0,90,150,1)","rgba(60,0,40,1)","rgba(144,50,90,1)","rgba(100,0,10,1)","rgba(255,140,105,1)","rgba(255,240,160,1)","rgba(135,200,160,1)","rgba(0,83,68,1)","rgba(0,50,30,1)","rgba(170,215,255,1)","rgba(80,155,255,1)","rgba(60,65,255,1)","rgba(55,35,115,1)","rgba(111,96,170,1)","rgba(155,149,201,1)","rgba(205,190,210,1)","rgba(168,141,128,1)","rgba(130,104,88,1)","rgba(65,47,31,1)","rgba(108,76,73,1)","rgba(157,144,135,1)","rgba(209,199,183,1)","rgba(124,133,119,1)","rgba(179,199,210,1)","rgba(200,200,200,1)","rgba(137,137,137,1)","rgba(83,83,83,1)"];return this.defaultColor&&(t.includes(this.defaultColor)&&t.splice(t.indexOf(this.defaultColor),1),t=[this.defaultColor].concat((0,a.default)(t))),{currentColor:this.value,colors:t,showMenu:!1}},methods:{toggleMenu:function(){this.selectDisabled||(this.showMenu=!this.showMenu)},handleClose:function(){this.showMenu=!1},select:function(t){this.currentColor=t,this.$emit("input",this.currentColor)}}};e.default=r},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(304),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["value"],data:function(){return{align:this.value,aligns:["left","center","right"]}},methods:{setAlign:function(t){this.align=t,this.$emit("input",t)}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(307),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(24)),r={props:["value","defaultColor"],data:function(){var t=["rgba(255,255,255,1)","rgba(0,0,0,1)","rgba(250,175,196,1)","rgba(251,114,153,1)","rgba(168,7,26,1)","rgba(245,34,45,1)","rgba(255,122,69,1)","rgba(255,145,0,1)","rgba(250,219,20,1)","rgba(82,196,26,1)","rgba(19,194,194,1)","rgba(64,169,255,1)","rgba(24,144,255,1)","rgba(90,98,199,1)","rgba(146,84,222,1)","rgba(89,89,89,1)"];return this.defaultColor&&(t.includes(this.defaultColor)&&t.splice(t.indexOf(this.defaultColor),1),t=[this.defaultColor].concat((0,a.default)(t))),{currentColor:this.value,colors:t}},methods:{select:function(t){this.currentColor=t,this.$emit("input",this.currentColor)}}};e.default=r},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(310),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"sdk-edit-translate",data:function(){return{list:[{value:1,key:"left-top"},{value:2,key:"top"},{value:3,key:"right-top"},{value:4,key:"left"},{value:5,key:"center"},{value:6,key:"right"},{value:7,key:"left-bottom"},{value:8,key:"bottom"},{value:9,key:"right-bottom"}],active:null}},methods:{translate:function(t){this.$emit("setTranslate",t.key),this.active=t.key}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(313),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6));i(1322);var r=i(1323),s="bcc-switch",o={name:"BccSwitch",props:{value:{type:[String,Number,Boolean],default:!1},name:{type:String},size:{validator:function(t){return(0,r.oneOf)(t,["small","medium","default"])},default:"default"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},trueValue:{type:[String,Number,Boolean],default:!0},falseValue:{type:[String,Number,Boolean],default:!1}},data:function(){return{currentValue:this.value}},watch:{value:function(t){this.currentValue=t}},computed:{wrpClasses:function(){var t;return["".concat(s),(t={},(0,a.default)(t,"".concat(s,"-checked"),this.currentValue===this.trueValue),(0,a.default)(t,"".concat(s,"-disabled"),this.disabled),(0,a.default)(t,"".concat(s,"-").concat(this.size),!!this.size),(0,a.default)(t,"".concat(s,"-loading"),this.loading),t)]}},methods:{toggle:function(t){if(t.preventDefault(),this.disabled||this.loading)return!1;var e=this.currentValue===this.trueValue?this.falseValue:this.trueValue;this.currentValue=e,this.$emit("input",e),this.$emit("on-change",e)}}};e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(315),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"caption-font-select",directives:{Clickoutside:n(i(71)).default},props:{captionFonts:{type:Array,default:function(){return[]}},value:{type:String}},data:function(){return{selectShow:!1}},watch:{selectShow:function(t){t&&setTimeout(function(){var t=document.querySelector(".option-item.selected");if(t){var e=t.offsetHeight+t.offsetTop-t.parentElement.scrollTop;e>t.parentElement.offsetHeight&&(t.parentElement.scrollTop=e-t.parentElement.offsetHeight)}},0)}},computed:{activeCaptionFont:function(){var e=this;return this.captionFonts.find(function(t){return t.bsFontId===e.value})}},methods:{closeShowSelect:function(){this.selectShow&&(this.selectShow=!1)},selectCaptionFont:function(t){this.$emit("input",t.bsFontId),this.closeShowSelect()}}};e.default=a},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(319),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=a(i(6)),o=n(i(31)),c=i(10);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l={data:function(){return{mainType:21,list:[],rendererId:"",active:0,tab:[]}},props:["clips"],mixins:[a(i(32)).default],computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,s.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,c.mapState)(["musicCaptionEditData"]),{_bsRenderer_:{get:function(){return this.musicCaptionEditData.rendererId},set:function(e){var i,n=this;r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk,n.$globalLoading(!0,n.$GL.FONT_DOWNLOAD_ING),t.next=4,r.default.awrap(i.setMusicCaptionClipRenderer(e));case 4:i.drawMonitorEdit(),n.$globalLoading(!1);case 6:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}}),methods:{selectCaptionRenderer:function(t,e){e!==this.active&&(this._bsRenderer_=t,this.active=e)},initTab:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(o.fetchMaterialListV2({type:this.mainType}));case 2:if(e=t.sent,(i=e.cats)[0]){t.next=6;break}return t.abrupt("return");case 6:return this.tab=i[0],t.next=9,r.default.awrap(this.fetchList());case 9:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(o.fetchMaterialListV2({type:this.mainType,subtype:this.tab.id,page:this.pager.page,page_size:this.pager.pageSize,ext:"captionrenderer"}));case 2:e=t.sent,this.pager.total=e.total,i=e.materials||[],1===this.pager.page&&i.unshift({name:"无"}),n=i.map(function(t){return{material_id:t.bs_hash,package_url:t.bs_file_url,formatted_type:t.type,name:t.name,name_zhCN:t.name,cover_url:t.cover}}),(a=this.clips[0].raw).rendererId&&(this.active=n.findIndex(function(t){return t.material_id===a.rendererId})),this.list=n;case 10:case"end":return t.stop()}},null,this)}},mounted:function(){this.initTab()}};e.default=l},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(323),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(107)),c=i(7),u=a(i(32)),l={components:{Card:o.default},mixins:[u.default],data:function(){return{clipType:c.ClipTypes.STICKER,tab:"",mainType:7,tabs:[],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_sticker_click"),t.next=3,r.default.awrap(this.initTab());case 3:case"end":return t.stop()}},null,this)},methods:{initTab:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.fetchMaterialListV2({type:this.mainType}));case 2:e=t.sent,i=e.cats,this.tabs=i.map(function(t){return{name:t.name,type:t.type,subType:t.id}}),this.tab=this.tabs[0].name;case 6:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:this.mainType,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize,ext:"animatedsticker"}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[],this.fetchTestCategory(i.cats);case 7:case"end":return t.stop()}},null,this)}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(326),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(107)),c=i(7),u=a(i(32)),l={components:{Card:o.default},mixins:[u.default],data:function(){return{clipType:c.ClipTypes.TRANSITION,tab:"",mainType:8,tabs:[],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_transition_click"),t.next=3,r.default.awrap(this.initTab());case 3:case"end":return t.stop()}},null,this)},methods:{initTab:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.fetchMaterialListV2({type:this.mainType}));case 2:e=t.sent,i=e.cats,this.tabs=i.map(function(t){return{name:t.name,type:t.type,subType:t.id}}),this.tab=this.tabs[0]?this.tabs[0].name:"";case 6:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:e.type,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize,ext:"videotransition"}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[],this.fetchTestCategory(i.cats);case 7:case"end":return t.stop()}},null,this)}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(329),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(1332)),c=i(7),u=a(i(32)),l={components:{Card:o.default},mixins:[u.default],data:function(){return{clipType:c.ClipTypes.EFFECT,tab:"",mainType:17,tabs:[],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_effect_click"),t.next=3,r.default.awrap(this.initTab());case 3:case"end":return t.stop()}},null,this)},methods:{initTab:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.fetchMaterialListV2({type:this.mainType}));case 2:e=t.sent,i=e.cats,this.tabs=i.map(function(t){return{name:t.name,type:t.type,subType:t.id}}),this.tab=this.tabs[0].name;case 6:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:this.mainType,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize,ext:"videofx"}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[];case 6:case"end":return t.stop()}},null,this)}}};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(331),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=i(7),a=n(i(70)),r=n(i(108)),o={props:{card:{type:Object},clipType:String,backgroundSize:{default:"contain"},blurBg:{default:!1}},mixins:[r.default],components:{Clip:a.default},data:function(){return{showPreview:!1,clip:this.createClip(),hover:!1}},mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.card.package_url&&this.$BSSdk.readAndSaveAsset(this.card.package_url)},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview)},methods:{addToTrack:function(){this.$Bus.$emit(this.$GLEventKey.CLIP_DIRECT_TO_TRACK,this.createClip())},createClip:function(){return new s.ClipUI({type:this.clipType,duration:this.card.duration||1e7,resource:this.card})},mousedown:function(n){var a=this;if(!this.currentEditClip){n.preventDefault();var r=this.$refs["clip-item"].$el.cloneNode(!0);r.style.display="block";var e=function t(){document.removeEventListener("mousemove",t);var e=a.clip.type===s.ClipTypes.TRANSITION?2:20,i=a.clip.type===s.ClipTypes.TRANSITION?2:10;a.$Bus.$emit(a.$GLEventKey.CLIP_DRAGGING,new s.DragClipParam({clip:a.createClip(),left:n.clientX-e,top:n.clientY-i,element:r,mouseX:n.clientX,mouseY:n.clientY}))};document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e)})}},startPreview:function(){this.hover=!0,this.showPreview=!0},stopPreview:function(){this.hover=!1,this.showPreview=!1}},computed:{materialCover:function(){return this.showPreview?this.card.cover:this.card.bs_cover||this.card.cover}}};e.default=o},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(335),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(107)),c=i(7),u=a(i(32)),l={components:{Card:o.default},mixins:[u.default],data:function(){return{clipType:c.ClipTypes.PARTICLE,tab:"所有粒子",mainType:16,tabs:[{name:"所有粒子",type:16,subType:1}],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){this.$LogReport.sendCustomEvent("editor_particle_click"),this.fetchList()},methods:{fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:e.type,page:this.pager.page,page_size:this.pager.pageSize,ext:"videofx"}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[],this.fetchTestCategory(i.cats);case 7:case"end":return t.stop()}},null,this)}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(338),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(107)),c=i(7),u=a(i(32)),l={components:{Card:o.default},mixins:[u.default],data:function(){return{clipType:c.ClipTypes.FILTER,tab:"",mainType:2,tabs:[],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_filter_click"),t.next=3,r.default.awrap(this.initTab());case 3:case"end":return t.stop()}},null,this)},methods:{initTab:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.fetchMaterialListV2({type:this.mainType}));case 2:e=t.sent,i=e.cats,this.tabs=i.map(function(t){return{name:t.name,type:t.type,subType:t.id}}),this.tab=this.tabs[0].name;case 6:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:e.type,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize,ext:"videofx,png"}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[],this.fetchTestCategory(i.cats);case 7:case"end":return t.stop()}},null,this)}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(341),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(27),s=n(i(138)),o=i(7),c=n(i(863)),u=n(i(32)),l={components:{Card:s.default,RecordModal:c.default},mixins:[u.default],data:function(){return{clipType:o.ClipTypes.AUDIO,tab:"录音文件",tabs:[{name:"录音文件",type:2,subType:201}],list:[],recordVisible:!1}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){this.fetchList(),this.$Bus.$on(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH,this.fetchList)},methods:{fetchList:function(){var e,i,n=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,a.default.awrap((0,r.fetchResourceList)({type:e.type,subtype:e.subType,page:this.pager.page,page_size:this.pager.pageSize}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.list||[];case 6:case"end":return t.stop()}},null,this)},showAudioRecord:function(){this.$store.state.biliPreviewerMode?this.$message({text:this.$GL.PREVIEWER_MODE_ERROR}):this.$store.state.sdkAllLock||(this.recordVisible=!0)}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(344),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1341)),r=i(7),s=n(i(32)),o={components:{BuiltInEffectCard:a.default},mixins:[s.default],data:function(){return{clipType:r.ClipTypes.EFFECT,tab:"所有蒙版",tabs:[{name:"所有蒙版"}],list:[{formatted_type:this.$GL.EFFECT_MOSAIC,name:"马赛克",cover_url:i(1343),package_url:this.$GL.MOSAIC_DESC,material_id:this.$GL.MOSAIC_DESC},{formatted_type:this.$GL.EFFECT_BLUR,name:"模糊",cover_url:i(1344),package_url:this.$GL.GAUSSIAN_BLUR_DESC,material_id:this.$GL.GAUSSIAN_BLUR_DESC},{formatted_type:this.$GL.EFFECT_MASK,name:"遮罩",cover_url:i(1345),package_url:this.$GL.MASK_DESC,material_id:this.$GL.MASK_DESC}]}},mounted:function(){this.$LogReport.sendCustomEvent("editor_builtin_effect_click")}};e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(346),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(7),r={props:["card","clipType"],components:{Clip:n(i(70)).default},data:function(){return{showPreview:!1,clip:this.createClip(),hover:!1}},methods:{addToTrack:function(){this.$Bus.$emit(this.$GLEventKey.CLIP_DIRECT_TO_TRACK,this.createClip())},createClip:function(){return new a.ClipUI({type:this.clipType,duration:this.card.duration||1e7,resource:this.card})},startPreview:function(){this.hover=!0},stopPreview:function(){this.hover=!1},mousedown:function(t){var e=this;t.preventDefault();var i=this.$refs["clip-item"].$el.cloneNode(!0);i.style.display="block";function n(){document.removeEventListener("mousemove",n),e.$Bus.$emit(e.$GLEventKey.CLIP_DRAGGING,new a.DragClipParam({clip:e.createClip(),left:t.clientX-20,top:t.clientY-10,element:i,mouseX:t.clientX,mouseY:t.clientY}))}document.addEventListener("mousemove",n),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",n)})}}};e.default=r},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(350),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(32)),c=a(i(1347)),u={mixins:[o.default],components:{Card:c.default},props:{from:String},data:function(){return{tab:"所有主题",mainType:0,tabs:[{name:"所有主题",type:10}],list:[]}},watch:{tab:function(){this.pager.page=1,this.fetchList()}},mounted:function(){this.$LogReport.sendCustomEvent("editor_theme_click"),this.fetchList()},methods:{fetchList:function(){var e,i,n=this;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=this.tabs.find(function(t){return t.name===n.tab}),t.next=3,r.default.awrap(s.fetchMaterialListV2({type:e.type,page:this.pager.page,page_size:this.pager.pageSize}));case 3:i=t.sent,this.pager.total=i.total,this.list=i.materials||[],this.fetchTestCategory(i.cats);case 7:case"end":return t.stop()}},null,this)}}};e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(352),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(4)),s=i(96),o=i(7),c=n(i(108)),u=i(10);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var d={props:{card:{type:Object},backgroundSize:{default:"contain"}},mixins:[c.default],data:function(){return{showPreview:!1,clipType:o.ClipTypes.THEME}},mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.card.package_url&&this.$BSSdk.readAndSaveAsset(this.card.package_url)},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview)},methods:{createClip:function(){return new o.ClipUI({type:this.clipType,duration:this.card.duration||1e7,resource:this.card})},mousedown:function(e){var i=this;if(!this.currentEditClip){e.preventDefault();var n=this.$refs.dragPreview.cloneNode();n.style.display="block";var a=function t(){document.removeEventListener("mousemove",t);i.$Bus.$emit(i.$GLEventKey.CLIP_DRAGGING,new o.DragClipParam({clip:i.createClip(),left:e.clientX-20,top:e.clientY-10,element:n,mouseX:e.clientX,mouseY:e.clientY,dragMask:!0}))};document.addEventListener("mousemove",a),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",a)})}},applyTheme:function(e){var i,n,a=arguments;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!(1<a.length&&void 0!==a[1])||a[1],this.$Timeline.uiProcessLocked=!0,this.$LogReport.sendCustomEvent("editor_theme_apply_click",e.bs_hash||e.material_id),!this.$BSSdk.canAddTheme()){t.next=17;break}if(n={materialId:e.material_id,packageUrl:e.package_url,displayName:e.name_zhCN},this.$BSSdk.getTheme()&&i)return t.next=8,r.default.awrap(this.$BSSdk.changeThemeVolume(1));t.next=8;break;case 8:return t.next=10,r.default.awrap(this.$BSSdk.addTheme(n));case 10:if(t.t0=!i,t.t0)return t.next=14,r.default.awrap(this.$BSSdk.changeThemeVolume(this.currentEditPanelData.volume));t.next=14;break;case 14:this.$BSSdk.saveQueue(),t.next=18;break;case 17:this.$message({text:"应用主题至少需要一个可见的视频轨道",type:"warning"});case 18:this.$Timeline.uiProcessLocked=!1;case 19:case"end":return t.stop()}},null,this)},startPreview:function(){var t=this;this.$Timeline.clipDragging||this.$Timeline.draggingClip||(this.card.demo_url?(this.player&&(this.player.destroy(),this.player=null),this.showPreview=!0,this.$nextTick(function(){t.player=new s.PreviewPlayer(t.$refs["video-canvas"],t.card.demo_url),t.player.play(!0)})):this.card.animation_cover&&(this.showPreview=!0))},stopPreview:function(){if(this.card.demo_url){if(!this.player)return;this.showPreview=!1,this.player.destroy(),this.player=null}else this.card.animation_cover&&(this.showPreview=!1)}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,u.mapState)(["currentEditPanelData"]),{materialCover:function(){return this.showPreview&&!this.card.demo_url&&this.card.animation_cover?this.card.animation_cover:this.card.cover_url}})};e.default=d},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(356),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=n(i(31)),o=a(i(1350)),c=i(7),u={components:{Card:o.default},props:["from"],data:function(){return{clipType:c.ClipTypes.STICKER,tab:"一键三连",tabs:[{name:"一键三连",type:1}],list:[]}},mounted:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("triple_sticker_click"),t.next=3,r.default.awrap(s.fetchTripleMaterialIds(["48216532-B42E-460D-9D58-6FDE7D1B63AB","FA87750D-F355-41B1-ADAD-5A834329F89E","F977036E-1779-47EB-9209-970301EE6DAF"]));case 3:this.list=t.sent;case 4:case"end":return t.stop()}},null,this)}};e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(358),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(7),a=n(i(70)),s=n(i(108)),o={props:{card:{type:Object},clipType:String,backgroundSize:{default:"contain"},blurBg:{default:!1},from:String},mixins:[s.default],components:{Clip:a.default},data:function(){return{showPreview:!1,clip:this.createClip(),hover:!1}},mounted:function(){window.addEventListener("visibilitychange",this.stopPreview),this.card.package_url&&this.$BSSdk.readAndSaveAsset(this.card.package_url)},destroyed:function(){window.removeEventListener("visibilitychange",this.stopPreview)},methods:{addToTrack:function(){this.$Bus.$emit(this.$GLEventKey.APPLY_TRIPLE_STICKER,this.card)},createClip:function(){return new r.ClipUI({type:this.clipType,duration:this.card.duration||1e7,resource:this.card})},mousedown:function(e){var i=this;if(!this.currentEditClip&&!this.cardDisabled){e.preventDefault();var n=this.$refs["clip-item"].$el.cloneNode(!0);n.style.display="block";var a=function t(){document.removeEventListener("mousemove",t);i.$Bus.$emit(i.$GLEventKey.CLIP_DRAGGING,new r.DragClipParam({clip:i.createClip(),left:e.clientX-20,top:e.clientY-10,element:n,mouseX:e.clientX,mouseY:e.clientY,dragMask:!0}))};document.addEventListener("mousemove",a),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",a)})}},startPreview:function(){this.hover=!0},stopPreview:function(){this.hover=!1}},computed:{isTemplate:function(){return"template"===this.from},cardDisabled:function(){if(this.$store.state.ratio<=1)return!0;var t=this.$store.state.tripleStickerStatus,e=t.followAndTriple,i=t.follow,n=t.triple,a=t.num;return(!this.isTemplate||1!==a)&&(0===this.card.id?e||i||n:1===this.card.id?e||n:2===this.card.id?e||i:void 0)}}};e.default=o},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(362),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var T=n(i(4)),a=n(i(1354)),r=n(i(1357)),s=n(i(1359)),o=n(i(1382)),c=n(i(1384)),u=n(i(1388)),l=n(i(1390)),d=n(i(1392)),f=n(i(1394)),p=n(i(1396)),h=i(872),v=i(7),m=n(i(1398)),g={components:{StickerEdit:a.default,VideoEdit:s.default,AudioEdit:o.default,CaptionEdit:c.default,EffectEdit:u.default,ParticleEdit:l.default,FilterEdit:d.default,ThemeEdit:f.default,BuiltinEffectEdit:p.default,TripleEdit:r.default},mixins:[m.default],data:function(){return{show:!1,defEditType:h.EditPanelTypes.VIDEO,editClip:null}},computed:{currentPanel:function(){return this.editClip?this.editClip.type===v.ClipTypes.EFFECT&&"builtin"===this.editClip.raw.packageType?"".concat(h.EditPanelTypes.BUILTIN_EFFECT,"-edit"):"".concat(h.clipToEditMap[this.editClip.type],"-edit"):"".concat(this.defEditType,"-edit")}},mounted:function(){this.initEvents()},destroyed:function(){this.offEvents()},methods:{initEvents:function(){this.$Bus.$on(this.$GLEventKey.HIDE_EDIT_PANEL,this.hideEditPanel),this.$Bus.$on(this.$GLEventKey.SHOW_EDIT_PANEL,this.clipSelected)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.SHOW_EDIT_PANEL),this.$Bus.$off(this.$GLEventKey.HIDE_EDIT_PANEL),this.$Bus.$off(this.$GLEventKey.MUSIC_CAPTION_CLIP_SELECTED)},seekClip:function(t){if(t.raw instanceof this.$BSSdk.timelineDataTemplate.Theme||this.$BSSdk.calculateClipInTimelinePosition(t.raw,this.$store.state.currentTimelinePosition))this.$BSSdk.seekCurrentTimeline();else{var e,i=t.raw.outPoint-t.raw.inPoint;e=i>=2*this.$GL.SECOND_CONVERT?t.raw.inPoint+this.$GL.SECOND_CONVERT:t.raw.inPoint+.5*i,this.$BSSdk.seekTimeline(e,!0)}},clipSelected:function(t){var e=this;if(t&&t.type&&t.raw&&t.raw!==this.$BSSdk.getCurrentEditClip()&&(this.hideEditPanel(),!this.$store.state.sdkAllLock)){if(this.$BSSdk.setCurrentEditClip(t.raw),this.seekClip(t),this.show=!1,t.type===v.ClipTypes.MUSIC_CAPTION)return this.musicCaptionClipSelected(t);var i=this.getEditPrefix(t);this["".concat(i,"SetEditPanelData")](t).then(function(){e.$BSSdk.drawMonitorEdit(),e.editClip=t,e.show=!0,e.initKeyFrameContext()}).catch(function(t){console.error(t)})}},getEditPrefix:function(t){return t.type===v.ClipTypes.EFFECT&&"builtin"===t.raw.packageType?"builtinEffect":h.clipToEditMap[t.type]},musicCaptionClipSelected:function(t){var e=this;t&&t.type&&t.raw&&(this.$store.state.sdkAllLock||(this.$Bus.$emit(this.$GLEventKey.SWITCH_RESOURCE_PANEL,"music-caption"),this.$BSSdk.setCurrentEditClip(t.raw),this.seekClip(t),this.musicCaptionSetEditPanelData(t).then(function(){e.$BSSdk.drawMonitorEdit(),e.editClip=t}).catch(function(t){console.error(t)})))},hideEditPanel:function(){this.editClip=null,this.show=!1,this.$BSSdk.setCurrentEditClip(null),this.$store.commit("updateCurrentEditPanelData",null),this.$BSSdk.clearMonitorEdit(),this.clearKeyFrameContext()},videoSetEditPanelData:function(e){var i,n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.$BSSdk,n=e.raw,a=i.getVideoClipScale(n)||0,r=i.getVideoClipXYPosition(n),s=i.getVideoClipOpacity(n)||0,o=i.getVideoClipSpeed(n),c=i.getVideoClipBgBlur(n),u=i.getVideoClipCartoonFilter(n),l=i.getVideoClipDegree(n),d=i.getVideoClipBrightness(n),f=i.getVideoClipContrast(n),p=i.getVideoClipSaturation(n),h=i.getVideoClipSharpen(n),v=i.getVideoClipVolume(n),m=i.getVideoClipFadeInTime(n),g=i.getVideoClipFadeOutTime(n),_=i.getImageMotionEnabled(n),w=i.getImageMotionMode(n),b=i.getVideoClipBackgroundResourceId(n),y=i.getVideoClipSpeedCurve(n),C=n.speedCurveName,this.$EditPanelData.setVideo({scale:parseFloat(a.toFixed(2)),centerX:parseFloat(r.x.toFixed(2)),centerY:parseFloat(r.y.toFixed(2)),opacity:parseFloat(s.toFixed(2)),speed:parseFloat(o.toFixed(2)),bgBlur:!!c,filter:u,brightness:d,contrast:f,saturation:p,degree:l,sharpness:h,volume:v,volumeFadeIn:m,volumeFadeOut:g,videoType:n.videoType,isFreezeVideo:n.isFreezeVideo,displayName:n.displayName,noAudio:n.noAudio,enableMotion:_,motionMode:w,backgroundResourceId:b,speedCurve:y,speedCurveName:C});case 22:case"end":return t.stop()}},null,this)},audioSetEditPanelData:function(e){var i,n,a,r,s,o,c;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.$BSSdk,n=e.raw,a=i.getAudioClipSpeed(n),r=i.getAudioClipFx(n),s=i.getAudioClipVolume(n),o=i.getAudioClipFadeInTime(n),c=i.getAudioClipFadeOutTime(n),this.$EditPanelData.setAudio({speed:a,fx:r,volume:s,volumeFadeIn:o,volumeFadeOut:c});case 8:case"end":return t.stop()}},null,this)},stickerSetEditPanelData:function(){return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$EditPanelData.setSticker({});case 1:case"end":return t.stop()}},null,this)},tripleSetEditPanelData:function(){return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.$EditPanelData.setSticker({});case 1:case"end":return t.stop()}},null,this)},musicCaptionSetEditPanelData:function(e){var i,n,a,r,s,o,c,u,l,d,f,p,h,v,m,g;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,n=this.$BSSdk,a=n.getCaptionClipFontFamily(i),r=n.getCaptionRendererId(i),s=n.getCaptionClipFontSize(i),o=n.getCaptionClipColor(i),c=n.getCaptionClipBold(i),u=n.getCaptionClipItalic(i),l=n.getCaptionClipTextAlign(i),d=n.getCaptionClipOutline(i),f=n.getCaptionClipOutlineColor(i),p=n.getCaptionClipOutlineWidth(i),h=n.getCaptionClipText(i),v=n.getCaptionClipShadow(i),m=n.getScale(i),g=Math.round(m*s),this.$EditPanelData.setCaption({bsFontId:a,rendererId:r,fontSize:s,color:o,shadow:v,bold:c,italic:u,align:l,outline:d,outlineColor:f,outlineWidth:p,text:h,scale:m,scaleMutiFontSize:g,defaultColor:i.defaultColor,defaultOutlineColor:i.defaultOutlineColor},{},!0);case 17:case"end":return t.stop()}},null,this)},captionSetEditPanelData:function(e){var i,n,a,r,s,o,c,u,l,d,f,p,h,v,m,g;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,n=this.$BSSdk,a=n.getCaptionClipFontFamily(i),r=n.getCaptionRendererId(i),s=n.getCaptionClipFontSize(i),o=n.getCaptionClipColor(i),c=n.getCaptionClipBold(i),u=n.getCaptionClipItalic(i),l=n.getCaptionClipTextAlign(i),d=n.getCaptionClipOutline(i),f=n.getCaptionClipOutlineColor(i),p=n.getCaptionClipOutlineWidth(i),h=n.getCaptionClipText(i),v=n.getCaptionClipShadow(i),m=n.getScale(i),g=Math.round(m*s),this.$EditPanelData.setCaption({bsFontId:a,rendererId:r,fontSize:s,color:o,shadow:v,bold:c,italic:u,align:l,outline:d,outlineColor:f,outlineWidth:p,text:h,defaultColor:i.defaultColor,defaultOutlineColor:i.defaultOutlineColor,scale:m,scaleMutiFontSize:g});case 17:case"end":return t.stop()}},null,this)},builtinEffectSetEditPanelData:function(e){var i,n;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,n=this.$BSSdk.getTimelineVideoFxClipIntensity(i),this.$EditPanelData.setEffect({intensity:n,desc:i.desc,shape:i.shape,isInverseRegion:i.isInverseRegion});case 3:case"end":return t.stop()}},null,this)},filterSetEditPanelData:function(e){var i,n;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,n=this.$BSSdk.getTimelineVideoFxClipIntensity(i),this.$EditPanelData.setFilter({intensity:n});case 3:case"end":return t.stop()}},null,this)},particleSetEditPanelData:function(e){var i,n,a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,n=this.$BSSdk.getParticleRateGainStrength(i),a=this.$BSSdk.getParticleSizeGainStrength(i),r=i.clipSubType,this.$EditPanelData.setParticle({rateGain:n,sizeGain:a,particleType:r});case 5:case"end":return t.stop()}},null,this)},effectSetEditPanelData:function(e){var i,n;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,n=this.$BSSdk.getTimelineVideoFxClipIntensity(i),this.$EditPanelData.setFilter({intensity:n});case 3:case"end":return t.stop()}},null,this)},themeSetEditPanelData:function(e){var i,n,a,r,s;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=e.raw,a=n=null,this.$BSSdk.getThemeTitleCaption()&&(r=this.$BSSdk.getThemeTitleCaption(),n={color:r.color,defaultColor:r.defaultColor,text:r.text,bsFontId:r.bsFontId,fontFamily:r.fontFamily,fontSize:r.fontSize}),this.$BSSdk.getThemeTrailerCaption()&&(s=this.$BSSdk.getThemeTrailerCaption(),a={color:s.color,defaultColor:s.defaultColor,text:s.text,bsFontId:s.bsFontId,fontFamily:s.fontFamily,fontSize:s.fontSize}),this.$EditPanelData.setTheme({titleCaption:n,trailerCaption:a,volume:i.volumeValue,editTip:e.editTip});case 6:case"end":return t.stop()}},null,this)}}};e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(364),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(10),o=n(i(871)),c=n(i(109)),u=n(i(866));function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var d={data:function(){return{tabs:[{name:"贴纸设置"},{name:"贴纸模板"}],tab:"贴纸设置"}},name:"sticker-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData"]),{isKeyFrameMode:function(){return this.$Timeline.selectedClip&&this.$Timeline.selectedClip.raw&&this.$Timeline.selectedClip.raw.keyFrames&&this.$Timeline.selectedClip.raw.keyFrames.length}}),components:{sdkEditRotation:o.default,sdkEditTranslate:c.default,StickerTemplate:u.default},methods:{clearStickerKeyFrames:function(){var i=this;this.$confirm("退出关键帧模式将会清除已经设置的关键帧动画，是否退出",function(){var e;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=i.$BSSdk.getCurrentEditClip()).keyFrames=[],i.$BSSdk.removeStickerAllKeyFramesFromRaw(e),i.$BSSdk.seekCurrentTimeline(),i.$MonitorScreen.drawStickerClip(e),t.next=7,a.default.awrap(i.$BSSdk.saveQueue());case 7:case"end":return t.stop()}})},function(){},{showCancel:!0,confirmBtnText:"是",cancelBtnText:"否",width:"320px"})},setRotation:function(e){var i,n=this;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,a.default.awrap(n.$BSSdk.changeStickerClipRotation(i,e));case 3:n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setTranslate:function(e){var i,n=this;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,a.default.awrap(n.$BSSdk.changeStickerClipTranslateXY(i,e));case 3:n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}};e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(366),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"sdk-edit-rotation",data:function(){return{rotations:[{title:"向左90°",value:"to-left-90",className:"leftRotation",icon:"左转"},{title:"向右90°",value:"to-right-90",className:"rightRotation",icon:"右转"},{title:"水平翻转",value:"horizontal",className:"horizontalFlip",icon:"水平翻转"},{title:"竖直翻转",value:"vertical",className:"verticalFlip",icon:"垂直翻转"}]}}}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(370),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(10),o=n(i(109)),c=n(i(870));function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l={data:function(){return{tabs:[{name:"贴纸设置"},{name:"贴纸模板"}],tab:"贴纸设置"}},name:"sticker-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData"])),components:{sdkEditTranslate:o.default,StickerTemplate:c.default},methods:{setTranslate:function(e){var i,n=this;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,a.default.awrap(n.$BSSdk.changeStickerClipTranslateXY(i,e));case 3:n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(373),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(4)),a=n(i(6)),r=i(10),o=n(i(110)),c=n(i(871)),u=n(i(859)),l=n(i(1360)),d=n(i(1362)),f=n(i(1366));function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var h={data:function(){var t={basic:"基本设置",zoom:"变焦",effect:"效果",color:"校色",audio:"音频",background:"背景",speedChange:"变速"},e=[{name:t.basic},{name:t.effect},{name:t.color}];2===this.$store.state.currentEditPanelData.videoType&&e.splice(1,0,{name:t.zoom});var i=(this.$store.state.currentEditPanelData.displayName||"").split(".").pop(),n=this.$store.state.currentEditPanelData;return 1!==n.videoType||this.$GL.imageTypes.includes(i)||n.noAudio||n.isFreezeVideo||e.push({name:t.audio}),1!==n.videoType||n.isFreezeVideo||e.splice(1,0,{name:t.speedChange}),e.push({name:t.background}),{tabNames:t,tabs:e,filters:[{value:this.$GL.CARTOON_TYPE_NULL,title:"原图",className:"raw"},{value:this.$GL.CARTOON_TYPE_RAW,title:"漫画书",className:"cartoon"},{value:this.$GL.CARTOON_TYPE_INK_PAINTING,title:"水墨",className:"inkpainting"},{value:this.$GL.CARTOON_TYPE_MONO_CHROME,title:"单色",className:"monochrome"}],tab:t.basic,defaultSpeed:1,defaultScale:1,defaultBgBlur:!1,defaultOpacity:1,defaultBrightness:1,defaultContrast:1,defaultSaturation:1,defaultDegree:0,defaultSharpness:0,defaultVolume:1,defaultVolumeFadeIn:0,defaultVolumeFadeOut:0}},name:"video-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,r.mapState)(["currentEditPanelData"]),{isKeyFrameMode:function(){return this.$Timeline.selectedClip&&this.$Timeline.selectedClip.raw&&this.$Timeline.selectedClip.raw.keyFrames&&this.$Timeline.selectedClip.raw.keyFrames.length},_scale_:{get:function(){return this.currentEditPanelData.scale},set:function(t){this.setScale(t)}},_bgBlur_:{get:function(){return this.currentEditPanelData.bgBlur},set:function(t){this.setBgBlur(t)}},_opacity_:{get:function(){return this.currentEditPanelData.opacity},set:function(t){this.setOpacity(t)}},_centerX_:{get:function(){return this.currentEditPanelData.centerX},set:function(t){this.setCenterX(t)}},_centerY_:{get:function(){return this.currentEditPanelData.centerY},set:function(t){this.setCenterY(t)}},_filter_:{get:function(){return this.currentEditPanelData.filter},set:function(e){var i,n=this;this.$EditPanelData.setVideo(this.currentEditPanelData,{filter:e}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipCartoonFilter(i,e));case 3:n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_brightness_:{get:function(){return parseFloat(this.currentEditPanelData.brightness.toFixed(1))},set:function(t){this.setBrightness(t)}},_contrast_:{get:function(){return parseFloat(this.currentEditPanelData.contrast.toFixed(1))},set:function(t){this.setContrast(t)}},_saturation_:{get:function(){return parseFloat(this.currentEditPanelData.saturation.toFixed(1))},set:function(t){this.setSaturation(t)}},_degree_:{get:function(){return parseFloat(this.currentEditPanelData.degree.toFixed(2))},set:function(t){this.setDegree(t)}},_sharpness_:{get:function(){return parseFloat(this.currentEditPanelData.sharpness.toFixed(2))},set:function(t){this.setSharpness(t)}},_volume_:{get:function(){return parseFloat(this.currentEditPanelData.volume.toFixed(1))},set:function(t){this.setVolume(t)}},_volumeFadeIn_:{get:function(){return parseFloat((this.currentEditPanelData.volumeFadeIn/this.$GL.SECOND_CONVERT).toFixed(1))},set:function(t){this.setVolumeFadeIn(t)}},_volumeFadeOut_:{get:function(){return parseFloat((this.currentEditPanelData.volumeFadeOut/this.$GL.SECOND_CONVERT).toFixed(1))},set:function(t){this.setVolumeFadeOut(t)}},_imageMotion_:{get:function(){return this.currentEditPanelData.enableMotion?this.currentEditPanelData.motionMode:-1},set:function(t){this.setImageMotion(t)}}}),components:{bccSwitch:o.default,sdkEditRotation:c.default,sdkEditPosition:u.default,sdkEditImageMotion:l.default,BackgroundEdit:d.default,SpeedController:f.default},methods:{clearVideoKeyFrames:function(){var i=this;this.$confirm("退出关键帧模式将会清除已经设置的关键帧动画，是否退出",function(){var e;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=i.$BSSdk.getCurrentEditClip()).keyFrames=[],i.$BSSdk.removeVideoAllKeyFramesFromRaw(e),i.$BSSdk.seekCurrentTimeline(),i.$MonitorScreen.drawVideoClip(e),t.next=7,s.default.awrap(i.$BSSdk.saveQueue());case 7:case"end":return t.stop()}})},function(){},{showCancel:!0,confirmBtnText:"是",cancelBtnText:"否",width:"320px"})},setImageMotion:function(e){var i=this,n=this.$BSSdk.getCurrentEditClip();return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(-1===e)return t.next=3,s.default.awrap(i.$BSSdk.setImageMotionEnabled(n,!1));t.next=6;break;case 3:i.$EditPanelData.setVideo(i.currentEditPanelData,{enableMotion:!1}),t.next=11;break;case 6:return t.next=8,s.default.awrap(i.$BSSdk.setImageMotionEnabled(n,!0));case 8:return t.next=10,s.default.awrap(i.$BSSdk.setImageMotionMode(n,e));case 10:i.$EditPanelData.setVideo(i.currentEditPanelData,{enableMotion:!0,motionMode:e});case 11:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setRotation:function(e){var i=this,n=this.$BSSdk.getCurrentEditClip();return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(i.$BSSdk.changeVideoClipRotation(n,e));case 2:i.$BSSdk.drawMonitorEdit();case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setScale:function(t,e){var i,n=this,a=parseFloat(t.toFixed(2));return a<=.1&&(a=.1),this.$EditPanelData.setVideo(this.currentEditPanelData,{scale:a}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipScale(i,a));case 3:e||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setBgBlur:function(t){this.$EditPanelData.setVideo(this.currentEditPanelData,{bgBlur:t});var e=this.$BSSdk.getCurrentEditClip();return this.$BSSdk.changeVideoClipBgBlur(e,t).catch(function(t){console.error(t)})},setOpacity:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(2));return this.$EditPanelData.setVideo(this.currentEditPanelData,{opacity:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipOpacity(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setCenterX:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(1));return this.$EditPanelData.setVideo(this.currentEditPanelData,{centerX:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipXYPosition(i,new window.NvsPointF(n.currentEditPanelData.centerX,n.currentEditPanelData.centerY)));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setCenterY:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(1));return this.$EditPanelData.setVideo(this.currentEditPanelData,{centerY:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipXYPosition(i,new window.NvsPointF(n.currentEditPanelData.centerX,n.currentEditPanelData.centerY)));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setBrightness:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(1));return this.$EditPanelData.setVideo(this.currentEditPanelData,{brightness:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipBrightness(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setContrast:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(1));return this.$EditPanelData.setVideo(this.currentEditPanelData,{contrast:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipContrast(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setSaturation:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(1));return this.$EditPanelData.setVideo(this.currentEditPanelData,{saturation:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipSaturation(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setDegree:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(2));return this.$EditPanelData.setVideo(this.currentEditPanelData,{degree:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipDegree(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setSharpness:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(2));return this.$EditPanelData.setVideo(this.currentEditPanelData,{sharpness:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.changeVideoClipSharpen(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setVolume:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseFloat(t.toFixed(1));return this.$EditPanelData.setVideo(this.currentEditPanelData,{volume:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.setVideoClipVolume(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setVolumeFadeIn:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseInt(t*this.$GL.SECOND_CONVERT);return this.$EditPanelData.setVideo(this.currentEditPanelData,{volumeFadeIn:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.setVideoClipFadeInTime(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setVolumeFadeOut:function(t,e){var i,n=this,a=1<arguments.length&&void 0!==e&&e,r=parseInt(t*this.$GL.SECOND_CONVERT);return this.$EditPanelData.setVideo(this.currentEditPanelData,{volumeFadeOut:r}),s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(n.$BSSdk.setVideoClipFadeOutTime(i,r));case 3:a||n.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},resetBase:function(){var e,i,n,a,r=this;s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=r.$BSSdk.getCurrentEditClip(),t.next=3,s.default.awrap(r.$BSSdk.waitEngineCoolDown());case 3:return t.next=5,s.default.awrap(r.setScale(r.defaultScale,!0));case 5:return t.next=7,s.default.awrap(r.setBgBlur(r.defaultBgBlur));case 7:return t.next=9,s.default.awrap(r.setOpacity(r.defaultOpacity,!0));case 9:return t.next=11,s.default.awrap(r.$BSSdk.resetVideoClipRotation(e));case 11:return i=r.$MonitorScreen.getScreenInfo(),n=i.screenCenterX,a=i.screenCenterY,t.next=14,s.default.awrap(r.setCenterX(n,!0));case 14:return t.next=16,s.default.awrap(r.setCenterY(a,!0));case 16:return t.next=18,s.default.awrap(r.setImageMotion(-1));case 18:r.$BSSdk.drawMonitorEdit();case 19:case"end":return t.stop()}}).catch(function(t){console.error(t)})},resetColorCorrection:function(){var e=this;s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(e.$BSSdk.waitEngineCoolDown());case 2:return t.next=4,s.default.awrap(e.setBrightness(e.defaultBrightness,!0));case 4:return t.next=6,s.default.awrap(e.setContrast(e.defaultContrast,!0));case 6:return t.next=8,s.default.awrap(e.setSaturation(e.defaultSaturation,!0));case 8:return t.next=10,s.default.awrap(e.setDegree(e.defaultDegree,!0));case 10:return t.next=12,s.default.awrap(e.setSharpness(e.defaultSharpness,!0));case 12:e.$BSSdk.drawMonitorEdit();case 13:case"end":return t.stop()}}).catch(function(t){console.error(t)})},resetAudio:function(){var e=this;s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(e.$BSSdk.waitEngineCoolDown());case 2:return t.next=4,s.default.awrap(e.setVolume(e.defaultVolume,!0));case 4:return t.next=6,s.default.awrap(e.setVolumeFadeIn(e.defaultVolumeFadeIn,!0));case 6:return t.next=8,s.default.awrap(e.setVolumeFadeOut(e.defaultVolumeFadeOut,!0));case 8:e.$BSSdk.drawMonitorEdit();case 9:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}};e.default=h},function(t,e,i){"use strict";i.r(e);var n=i(375),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["value"],data:function(){return{options:[{val:-1,icon:"变焦无",text:"无"},{val:0,icon:"变焦推近",text:"推近"},{val:1,icon:"变焦拉远",text:"拉远"}]}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(378),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),s=n(i(4)),r=n(i(1363)),o=i(31),c=i(10);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l={components:{BgCard:r.default},mounted:function(){var e;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap((0,o.fetchMaterialListV2)({type:18,page:1,page_size:100}));case 2:e=t.sent,this.colorCards=e.materials.slice(0,30),this.imageCards=e.materials.slice(30);case 5:case"end":return t.stop()}},null,this)},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,c.mapState)(["currentEditPanelData"]),{_backgroundResourceId_:{get:function(){return this.currentEditPanelData.backgroundResourceId}}}),data:function(){return{tab:"color",imageCards:[],colorCards:[],tabs:[{key:"color",name:"纯色背景"},{key:"image",name:"图片背景"}]}},methods:{setBackground:function(e){var i=this;e&&this.$LogReport.sendCustomEvent("editor_video_background_apply_click");var n,a,r=this.$BSSdk.getCurrentEditClip();return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=5;break}return i.$EditPanelData.setVideo(i.currentEditPanelData,{backgroundResourceId:null}),t.next=4,s.default.awrap(i.$BSSdk.changeVideoClipBackground(r));case 4:return t.abrupt("return",t.sent);case 5:return n=e.bs_file_url,a=e.bs_hash,i.$EditPanelData.setVideo(i.currentEditPanelData,{backgroundResourceId:a}),t.next=10,s.default.awrap(i.$BSSdk.changeVideoClipBackground(r,n,a));case 10:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(380),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["card","active"]}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(384),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(4)),a=n(i(6)),r=i(629),s=i(10),l=i(21),d=i(7),o=n(i(1367)),c=n(i(1377));function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var p={components:{CurveCard:o.default,CurveEdit:c.default},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData"]),{_speed_:{get:function(){return parseFloat(this.currentEditPanelData.speed.toFixed(2))},set:function(t){this.setSpeed(t)}},_speedCurveName_:function(){return this.currentEditPanelData.speedCurveName}}),data:function(){return{tab:"",showGiveUpCurve:!1,tabs:[{key:"line",name:"常规变速"},{key:"curve",name:"曲线变速"}],curveEditing:!1,currentDataPoints:[],list:[null,{name:"自定义",curve:"(0.0,1.0)(0.25,1.0)(0.5,1.0)(0.75,1.0)(1.0,1.0)"},{name:"高光时光",curve:"(0.0,1.0)(0.05,1.0)(0.4,5.5)(0.45,0.5)(0.55,0.5)(0.6,5.5)(0.95,1.0)(1.0,1.0)"},{name:"子弹时间",curve:"(0.0,5.2)(0.4,5.2)(0.5,0.5)(0.6,5.2)(1.0,5.2)"},{name:"蒙太奇",curve:"(0.0,0.9)(0.08333333,0.9)(0.5,6.8)(0.66666667,0.3)(0.83333333,1.0)(1.0,1.0)"},{name:"跳切",curve:"(0.0,0.6)(0.4,0.6)(0.5,5.2)(0.6,0.6)(1.0,0.6)"},{name:"闪进",curve:"(0.0,5.2)(0.41666667,5.2)(0.58333333,1.0)(1.0,1.0)"},{name:"闪出",curve:"(0.0,1.0)(0.41666667,1.0)(0.58333333,5.2)(1.0,5.2)"}]}},mounted:function(){this.tab=this.initTab()},methods:{updateCurrentDataPoints:function(t){this.currentDataPoints=(0,r.cloneDeep)(t)},giveUpCurveSpeed:function(){this.$LogReport.sendCustomEvent("editor_video_give_up_curve_click"),this.applyCurveObject(null)},switchTab:function(t){"line"===t&&this._speedCurveName_?this.showGiveUpCurve=!0:this.showGiveUpCurve=!1,this.$LogReport.sendCustomEvent("editor_video_speed_change_click",t)},initTab:function(){return this.currentEditPanelData.speedCurve||1===this.currentEditPanelData.speed?"curve":"line"},curveStringToPoints:function(t){return(t.match(/(\(.*?\))/g)||[]).map(function(t){var e=t.match(/\((.*?),(.*?)\)/);return{x:parseFloat(e[1]),y:parseFloat(e[2])}})},getCompleteCurve:function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i-1],a=t[i+1],r=t[i];e.push(r),n?e.push({x:r.x-.3*(r.x-n.x),y:r.y}):e.push({x:r.x-1,y:r.y}),a?e.push({x:r.x+.3*(a.x-r.x),y:r.y}):e.push({x:r.x+1,y:r.y})}return e.map(function(t){return"(".concat(t.x.toFixed(3),",").concat(t.y,")")}).join("")},startEditCurve:function(){var t=this,e=this.$BSSdk.getCurrentEditClip();if(e.speedCurveName){var i,n;this.currentDataPoints=(i=e,n=t.$BSSdk.getVideoClipSpeedCurve(i),t.curveStringToPoints(n).reduce(function(t,e,i){return i%3==0&&t.push(e),t},[])),this.curveEditing=!0}},applyCurve:function(e,i){var n,a,r,s,o;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.$BSSdk.getCurrentEditClip(),t.next=3,u.default.awrap(this.$BSSdk.changeVideoClipCurveSpeed(n,{curve:e,name:i}));case 3:return this.$EditPanelData.setVideo(this.currentEditPanelData,{speedCurve:e,speedCurveName:i}),this.$BSSdk.drawMonitorEdit(),a=this.$BSSdk.getVideoClipIndexInfo(n),r=a.trackIndex,s=this.$BSSdk.getVideoTrack(r),o=this.$BSSdk.getVideoClipSpeed(n),this.$EditPanelData.setVideo(this.currentEditPanelData,{speed:o}),this.$Bus.$emit(this.$GLEventKey.REQUIRE_TRACK_REFRESH,d.TrackTypes.VIDEO,s.index,s),this.$Bus.$emit(l.EventKeys.CLIP_SELECTED,n),t.next=13,u.default.awrap(this.$BSSdk.saveQueue());case 13:case"end":return t.stop()}},null,this)},applyCurveObject:function(e){var i=this;if(e&&e.name===this._speedCurveName_)return this.startEditCurve();e&&this.$LogReport.sendCustomEvent("editor_video_curve_speed_apply_click"),e||(this.showGiveUpCurve=!1);var n,a,r,s=this.$BSSdk.getCurrentEditClip();return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(1!==s.speed)return t.next=3,u.default.awrap(i.$BSSdk.changeVideoClipSpeed(s,{targetSpeed:1,seek:!1}));t.next=4;break;case 3:i.$EditPanelData.setVideo(i.currentEditPanelData,{speed:1});case 4:return n=e?e.curve:"",a=e?e.name:"",r=i.getCompleteCurve(i.curveStringToPoints(n)),t.next=9,u.default.awrap(i.applyCurve(r,a));case 9:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setSpeed:function(e,t){var i,n,a,r=this,s=parseFloat(e.toFixed(2));if(s<=.1&&(s=.1),this.$EditPanelData.setVideo(this.currentEditPanelData,{speed:s}),t){var o;o=1<=s&&s<2?1:2<=s&&s<4?2:4<=s&&s<6?3:6<=s&&s<=8?4:0,this.$LogReport.sendCustomEvent("editor_resource_speed_seek",o);var c=this.$BSSdk.getCurrentEditClip();return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap(r.$BSSdk.changeVideoClipSpeed(c,{targetSpeed:e}));case 2:return r.$BSSdk.drawMonitorEdit(),i=r.$BSSdk.getVideoClipIndexInfo(c),n=i.trackIndex,a=r.$BSSdk.getVideoTrack(n),r.$Bus.$emit(r.$GLEventKey.REQUIRE_TRACK_REFRESH,d.TrackTypes.VIDEO,a.index,a),r.$Bus.$emit(l.EventKeys.CLIP_SELECTED,c),t.next=9,u.default.awrap(r.$BSSdk.saveQueue());case 9:case"end":return t.stop()}}).catch(function(t){console.error(t)})}return Promise.resolve()}}};e.default=p},function(t,e,i){"use strict";i.r(e);var n=i(386),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["curve","active"]}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(389),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(4)),a=n(i(6)),r=i(629),c=n(i(1378)),s={props:["dataPoints"],data:function(){return{width:350,height:140,background:null,curveProgress:0,dataStartX:0,dataEndX:0,isModifyingTimePos:!1}},mounted:function(){var t=this.dataPoints.length;this.dataStartX=this.dataPoints[0].x,this.dataEndX=this.dataPoints[t-1].x,this.initCanvas(),this.alignDurationWidthTimelinePosition()},computed:{drawPoints:function(){var e=this;return this.dataPoints.map(function(t){return e.dataPointToDrawPoint(t)})},activeDataPoint:function(){var i=this.curveProgress*this.width,n=null,a=1/0;if(this.drawPoints.forEach(function(t){var e=Math.abs(t.x-i);e<a&&(a=e,n=t)}),n)return 8<Math.abs(n.x-i)?null:n.origin}},watch:(0,a.default)({},"$store.state.currentTimelinePosition",function(){this.isModifyingTimePos||this.alignDurationWidthTimelinePosition()}),methods:{applyInitialCurve:function(){var i,n=this;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.$BSSdk.getCurrentEditClip(),this.$parent.updateCurrentDataPoints(this.initialDataPoints),this.$nextTick(function(){var e;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n.updateCurve(),e=n.$parent.getCompleteCurve(n.dataPoints),t.next=4,o.default.awrap(n.$BSSdk.waitEngineCoolDown());case 4:return t.next=6,o.default.awrap(n.$parent.applyCurve(e,i.speedCurveName));case 6:return t.next=8,o.default.awrap(n.$BSSdk.seekTimeline(i.inPoint,!0));case 8:case"end":return t.stop()}})});case 3:case"end":return t.stop()}},null,this)},reviewBeforeByDataPoint:function(e){var i,n,a,r,s;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.$BSSdk.getCurrentEditClip(),(n=this.dataPoints.indexOf(e)-1)<0&&(n=0),a=this.drawPoints[n].x/this.width,r=i.trimIn+(i.trimOut-i.trimIn)*a,s=this.$BSSdk.getVideoClipTimelinePosByTrim(i,r),this.$BSSdk.seekTimeline(s,!0),t.next=9,o.default.awrap(this.$BSSdk.waitEngineCoolDown());case 9:this.$Bus.$emit(this.$GLEventKey.PAUSE_OR_PLAY,!0);case 10:case"end":return t.stop()}},null,this)},applyCurveAndReview:function(e){var i,n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.$BSSdk.getCurrentEditClip(),n=this.$parent.getCompleteCurve(this.dataPoints),t.next=4,o.default.awrap(this.$BSSdk.waitEngineCoolDown());case 4:return t.next=6,o.default.awrap(this.$parent.applyCurve(n,i.speedCurveName));case 6:e&&this.reviewBeforeByDataPoint(e);case 7:case"end":return t.stop()}},null,this)},alignDurationWidthTimelinePosition:function(){var t=this.$BSSdk.getCurrentEditClip(),e=(this.$BSSdk.getVideoClipCurveTrimByTimelinePos(t,this.$store.state.currentTimelinePosition)-t.trimIn)/(t.trimOut-t.trimIn);this.setCurveProgressPure(e),t.outPoint-this.$store.state.currentTimelinePosition<1e5&&this.$BSSdk.seekTimeline(t.inPoint)},setCurveProgress:function(t){this.curveProgress=t;var e=this.$BSSdk.getCurrentEditClip(),i=e.trimIn+(e.trimOut-e.trimIn)*this.curveProgress,n=this.$BSSdk.getVideoClipTimelinePosByTrim(e,i);this.$BSSdk.seekTimeline(n,!0)},setCurveProgressPure:function(t){this.curveProgress=t},canvasMousedown:function(t){var i=this;this.isModifyingTimePos=!0;function n(t){var e=t.clientX-a;e<=0||e>=i.width||i.setCurveProgress(e/i.width)}var a=this.$refs["edit-canvas"].getBoundingClientRect().left;n(t);function r(t){n(t)}document.addEventListener("mousemove",r),document.addEventListener("mouseup",function t(e){i.isModifyingTimePos=!1,n(e),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",t)})},addPoint:function(){for(var t,e,i,n=this.width*this.curveProgress,a=1;a<this.drawPoints.length;a++)if(this.drawPoints[a-1].x<n&&this.drawPoints[a].x>n){t=this.drawPoints[a-1],e=this.drawPoints[a],i=a;break}var r=c.default.getY(100,[t.x,t.y,t.x+(e.x-t.x)/3,t.y,t.x+(e.x-t.x)/3*2,e.y,e.x,e.y],n),s=this.drawPointToDataPoint({x:n,y:r});this.dataPoints.splice(i,0,s),this.updateCurve(),this.applyCurveAndReview()},deletePoint:function(){var t=this.activeDataPoint,e=this.dataPoints.indexOf(t);-1!==e&&(this.dataPoints.splice(e,1),this.updateCurve(),this.applyCurveAndReview())},dataPointToDrawPoint:function(t){return{x:(t.x-this.dataStartX)/(this.dataEndX-this.dataStartX)*this.width,y:1<=t.y?.5*(1-(t.y-1)/7)*this.height:.5*this.height+(1-t.y)/.9*.5*this.height,origin:t}},drawPointToDataPoint:function(t){var e=t.x,i=t.y;return{x:e/this.width*(this.dataEndX-this.dataStartX)+this.dataStartX,y:i<=.5*this.height?8-i/(.5*this.height)*7:1-(i-.5*this.height)/(.5*this.height)*.9}},mousedown:function(t,l){var d=this;this.isModifyingTimePos=!0,t.preventDefault();var f=t.clientX,p=t.clientY,h=l.x,v=l.y,m=this.drawPoints.indexOf(l);this.setCurveProgress(h/this.width);function i(t){var e=t.clientX-f,i=t.clientY-p,n=h+e,a=v+i,r=d.drawPoints[m-1],s=d.drawPoints[m+1],o=d.drawPointToDataPoint({x:n,y:a}),c=o.x,u=o.y;!(r&&n-r.x<10)&&!(s&&s.x-n<10)&&0<n&&n<d.width&&0!==h&&h!==d.width&&(l.origin.x=c,d.setCurveProgress(n/d.width)),0<a&&a<d.height&&(l.origin.y=u),d.updateCurve()}document.addEventListener("mousemove",i),document.addEventListener("mouseup",function t(e){e.clientX===f&&e.clientY===p||d.applyCurveAndReview(l.origin),d.isModifyingTimePos=!1,document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",t)})},initCanvas:function(){this.background=this.drawBackground(),this.initialDataPoints=(0,r.cloneDeep)(this.dataPoints),this.updateCurve()},updateCurve:function(){var t=this.$refs["edit-canvas"].getContext("2d");t.clearRect(0,0,this.width,this.height),t.drawImage(this.background,0,0),this.drawCurve(t)},drawCurve:function(t){t.strokeStyle="#4388FF",t.lineWidth=2,t.beginPath(),t.moveTo(this.drawPoints[0].x,this.drawPoints[0].y);for(var e=0;e<this.drawPoints.length;e++){var i=this.drawPoints[e];if(0!==e){var n=this.drawPoints[e-1];t.bezierCurveTo(n.x+(i.x-n.x)/3,n.y,n.x+(i.x-n.x)/3*2,i.y,i.x,i.y)}}t.stroke()},drawBackground:function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height;var e=t.getContext("2d"),i="#444";e.strokeStyle=i,e.strokeRect(0,0,this.width,this.height);function n(t,e,i,n,a){var r=3<arguments.length&&void 0!==n?n:"#fff",s=4<arguments.length&&void 0!==a?a:[];t.strokeStyle=r,t.beginPath(),t.setLineDash(s),t.moveTo(e[0],e[1]),t.lineTo(i[0],i[1]),t.stroke()}var a=[4,2];return n(e,[0,.25*this.height],[this.width,.25*this.height],i,a),n(e,[35,.5*this.height],[this.width,.5*this.height],i,[]),n(e,[0,.75*this.height],[this.width,.75*this.height],i,a),e.fillStyle="#969BB3",e.font="12px sans-serif",e.textBaseline="middle",e.fillText("8x",10,12),e.fillText("1x",10,.5*this.height),e.fillText("0.1x",10,this.height-12),t}}};e.default=s},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(394),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n(i(4)),a=n(i(6)),r=i(10),u=i(7),l=i(21);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var o={data:function(){return{tabs:[{name:"参数设置"},{name:"变声"}],tab:"参数设置",fxs:[{value:this.$GL.AUDIO_FX_RAW,title:"原声",className:"raw"},{value:this.$GL.AUDIO_FX_FAST_CARTOON,title:"礼堂",className:"litang"},{value:this.$GL.AUDIO_FX_AUDIO_REVERB,title:"混响",className:"hunxiang"},{value:this.$GL.AUDIO_FX_AUDIO_WAHWAH,title:"电子",className:"dianzi"},{value:this.$GL.AUDIO_FX_FEMALE_VOICE,title:"女声",className:"nvsheng"},{value:this.$GL.AUDIO_FX_MALE_VOICE,title:"男生",className:"nansheng"},{value:this.$GL.AUDIO_FX_CARTOON_VOICE,title:"卡通",className:"katong"},{value:this.$GL.AUDIO_FX_AUDIO_ECHO,title:"回响",className:"huisheng"},{value:this.$GL.AUDIO_FX_MONSTER_VOICE,title:"怪兽",className:"guaishou"}],defaultSpeed:1,defaultVolume:1,defaultVolumeFadeIn:0,defaultVolumeFadeOut:0}},created:function(){},name:"audio-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,r.mapState)(["currentEditPanelData"]),{_fx_:{get:function(){return this.currentEditPanelData.fx},set:function(t){var e,i=this,n=t;this.$EditPanelData.setAudio(this.currentEditPanelData,{fx:n}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.$BSSdk.getCurrentEditClip(),t.next=3,c.default.awrap(i.$BSSdk.changeAudioClipFx(e,n));case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_speed_:{get:function(){return parseFloat(this.currentEditPanelData.speed.toFixed(2))},set:function(t){this.setSpeed(t)}},_volume_:{get:function(){return parseFloat(this.currentEditPanelData.volume.toFixed(1))},set:function(t){this.setVolume(t)}},_volumeFadeIn_:{get:function(){return parseFloat((this.currentEditPanelData.volumeFadeIn/this.$GL.SECOND_CONVERT).toFixed(1))},set:function(t){this.setVolumeFadeIn(t)}},_volumeFadeOut_:{get:function(){return parseFloat((this.currentEditPanelData.volumeFadeOut/this.$GL.SECOND_CONVERT).toFixed(1))},set:function(t){this.setVolumeFadeOut(t)}}}),methods:{setSpeed:function(e,t){var i,n,a,r=this,s=parseFloat(e.toFixed(2));if(s<=.25&&(s=.25),this.$EditPanelData.setAudio(this.currentEditPanelData,{speed:s}),t){var o=this.$BSSdk.getCurrentEditClip();return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(r.$BSSdk.changeAudioClipSpeed(o,{targetSpeed:e}));case 2:return r.$BSSdk.drawMonitorEdit(),i=r.$BSSdk.getAudioClipIndexInfo(o),n=i.trackIndex,a=r.$BSSdk.getAudioTrack(n),r.$Bus.$emit(r.$GLEventKey.REQUIRE_TRACK_REFRESH,u.TrackTypes.AUDIO,a.index,a),t.next=8,c.default.awrap(r.$BSSdk.saveQueue());case 8:r.$Bus.$emit(l.EventKeys.CLIP_SELECTED,o);case 9:case"end":return t.stop()}}).catch(function(t){console.error(t)})}return Promise.resolve()},setVolumeFadeOut:function(t){var e,i=this,n=parseInt(t*this.$GL.SECOND_CONVERT);return this.$EditPanelData.setAudio(this.currentEditPanelData,{volumeFadeOut:n}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.$BSSdk.getCurrentEditClip(),t.next=3,c.default.awrap(i.$BSSdk.setAudioClipFadeOutTime(e,n));case 3:i.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setVolumeFadeIn:function(t){var e,i=this,n=parseInt(t*this.$GL.SECOND_CONVERT);return this.$EditPanelData.setAudio(this.currentEditPanelData,{volumeFadeIn:n}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.$BSSdk.getCurrentEditClip(),t.next=3,c.default.awrap(i.$BSSdk.setAudioClipFadeInTime(e,n));case 3:i.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},setVolume:function(t){var e,i=this,n=parseFloat(t.toFixed(1));return this.$EditPanelData.setAudio(this.currentEditPanelData,{volume:n}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=i.$BSSdk.getCurrentEditClip(),t.next=3,c.default.awrap(i.$BSSdk.setAudioClipVolume(e,n));case 3:i.$BSSdk.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},resetAudio:function(){var e=this;c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(e.$BSSdk.waitEngineCoolDown());case 2:return t.next=4,c.default.awrap(e.setSpeed(e.defaultSpeed,!0));case 4:return t.next=6,c.default.awrap(e.setVolume(e.defaultVolume));case 6:return t.next=8,c.default.awrap(e.setVolumeFadeIn(e.defaultVolumeFadeIn));case 8:return t.next=10,c.default.awrap(e.setVolumeFadeOut(e.defaultVolumeFadeOut));case 10:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}};e.default=o},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(397),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n(i(4)),a=n(i(6)),r=n(i(24)),s=i(10),o=n(i(627)),u=n(i(864)),l=n(i(865)),d=n(i(109)),f=n(i(110)),p=n(i(628)),h=n(i(626)),v=n(i(1385));function m(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var g={components:{ColorSelect:o.default,TextAlign:u.default,BorderColorSelect:l.default,Translate:d.default,bccSwitch:f.default,captionFontSelect:p.default,CaptionTemplate:h.default,CaptionRenderer:v.default},data:function(){return{tabs:[{name:"字幕设置"},{name:"花字"},{name:"字幕模板"}],subTabs:[{name:"样式"}],tab:"字幕设置",subTab:"样式",fontSizeList:(0,r.default)(new Array(200).keys()).map(function(t){return t+1}),fontStyle:[0,1,2]}},name:"caption-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?m(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):m(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData","captionFonts"]),{isKeyFrameMode:function(){return this.$Timeline.selectedClip&&this.$Timeline.selectedClip.raw&&this.$Timeline.selectedClip.raw.keyFrames&&this.$Timeline.selectedClip.raw.keyFrames.length},_outline_:{get:function(){return!!this.currentEditPanelData.outline},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{outline:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipOutline(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_outlineWidth_:{get:function(){return parseFloat(this.currentEditPanelData.outlineWidth.toFixed(1))},set:function(e){var i,n,a=this;e=parseFloat(e.toFixed(1)),this.$EditPanelData.setCaption(this.currentEditPanelData,{outlineWidth:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipOutlineWidth(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_bsFontId_:{get:function(){return this.currentEditPanelData.bsFontId},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{bsFontId:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),a.$globalLoading(!0,a.$GL.FONT_DOWNLOAD_ING),t.next=5,c.default.awrap(i.setCaptionClipFontFamily(n,e));case 5:i.drawMonitorEdit(),a.$globalLoading(!1);case 7:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_text_:{get:function(){return this.currentEditPanelData.text},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{text:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipText(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_fontSize_:{get:function(){return this.currentEditPanelData.scaleMutiFontSize},set:function(t){var e,i,n=this,a=this.currentEditPanelData,r=a.scaleMutiFontSize,s=a.fontSize,o=t/r;this.$EditPanelData.setCaption(this.currentEditPanelData,{scaleMutiFontSize:t,scale:t/s}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=n.$BSSdk,i=e.getCurrentEditClip(),t.next=4,c.default.awrap(e.changeCaptionClipOffsetScale(i,o));case 4:e.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_color_:{get:function(){return this.currentEditPanelData.color},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{color:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipColor(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_outlineColor_:{get:function(){return this.currentEditPanelData.outlineColor},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{outline:!0,outlineColor:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipOutlineColor(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_align_:{get:function(){return this.currentEditPanelData.align},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{align:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipTextAlign(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_bold_:{get:function(){return this.currentEditPanelData.bold},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{bold:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipBold(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_italic_:{get:function(){return this.currentEditPanelData.italic},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{italic:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipItalic(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}},_shadow_:{get:function(){return this.currentEditPanelData.shadow},set:function(e){var i,n,a=this;this.$EditPanelData.setCaption(this.currentEditPanelData,{shadow:e}),c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.setCaptionClipShadow(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}}),methods:{clearCaptionKeyFrames:function(){var i=this;this.$LogReport.sendCustomEvent("editor_keyframe_quit_click"),this.$confirm("退出关键帧模式将会清除已经设置的关键帧动画，是否退出",function(){var e;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return(e=i.$BSSdk.getCurrentEditClip()).keyFrames=[],i.$BSSdk.removeCaptionAllKeyFramesFromRaw(e),i.$BSSdk.seekCurrentTimeline(),i.$MonitorScreen.drawCaptionClip(e),t.next=7,c.default.awrap(i.$BSSdk.saveQueue());case 7:case"end":return t.stop()}})},function(){},{showCancel:!0,confirmBtnText:"是",cancelBtnText:"否",width:"320px"})},setTranslate:function(e){var i,n,a=this;c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),t.next=4,c.default.awrap(i.changeCaptionClipTranslateXY(n,e));case 4:i.drawMonitorEdit();case 5:case"end":return t.stop()}}).catch(function(t){console.error(t)})},captionInputBlur:function(){this.$BSSdk.saveQueue().catch(function(t){console.error(t)})}}};e.default=g},function(t,e,i){"use strict";i.r(e);var n=i(399),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),s=a(i(6)),o=n(i(31)),c=i(10);function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l={mixins:[a(i(32)).default],data:function(){return{mainType:21,list:[],rendererId:"",active:0,tab:[]}},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,s.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,c.mapState)(["currentEditPanelData"]),{_bsRenderer_:{get:function(){return this.currentEditPanelData.rendererId},set:function(e){var i,n,a=this;r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=a.$BSSdk,n=i.getCurrentEditClip(),a.$globalLoading(!0,a.$GL.FONT_DOWNLOAD_ING),t.next=5,r.default.awrap(i.setCaptionRenderer(n,e));case 5:return t.next=7,r.default.awrap(i.setCaptionClipKeyFramesByClip(n,n));case 7:i.drawMonitorEdit(),a.$globalLoading(!1);case 9:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}}),methods:{selectCaptionRenderer:function(t,e){e!==this.active&&(this._bsRenderer_=t,this.active=e)},initTab:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(o.fetchMaterialListV2({type:this.mainType}));case 2:if(e=t.sent,(i=e.cats)[0]){t.next=6;break}return t.abrupt("return");case 6:this.tab=i[0],this.fetchList();case 8:case"end":return t.stop()}},null,this)},fetchList:function(){var e,i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(o.fetchMaterialListV2({type:this.mainType,subtype:this.tab.id,page:this.pager.page,page_size:this.pager.pageSize,ext:"captionrenderer"}));case 2:e=t.sent,this.pager.total=e.total,i=e.materials||[],1===this.pager.page&&i.unshift({name:"无"}),n=i.map(function(t){return{material_id:t.bs_hash,package_url:t.bs_file_url,formatted_type:t.type,name:t.name,name_zhCN:t.name,cover_url:t.cover}}),(a=this.$BSSdk.getCurrentEditClip())&&a.rendererId&&(this.active=n.findIndex(function(t){return t.material_id===a.rendererId})),this.list=n;case 10:case"end":return t.stop()}},null,this)}},mounted:function(){this.initTab()}};e.default=l},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(403),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(10);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var c={data:function(){return{tabs:[{name:"特效编辑"},{name:"模板"}],tab:"特效编辑"}},name:"filter-edit",components:{EffectTemplate:n(i(867)).default},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData"]),{_intensity_:{get:function(){return parseFloat(this.currentEditPanelData.intensity.toFixed(1))},set:function(e){var i=this.$BSSdk,n=i.getCurrentEditClip();e=parseFloat(e.toFixed(1)),this.$EditPanelData.setEffect(this.currentEditPanelData,{intensity:e}),a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.changeFilterStrength(n,e));case 2:i.drawMonitorEdit();case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}})};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(406),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6));function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var s={data:function(){return{tabs:[{name:"粒子编辑"}],tab:"粒子编辑"}},name:"particle-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,i(10).mapState)(["currentEditPanelData"]),{showGraffitiSet:function(){return this.currentEditPanelData.particleType===this.$GL.PARTICLE_GRAFFITI},_rateGain_:{get:function(){return parseFloat(this.currentEditPanelData.rateGain.toFixed(1))},set:function(t){t=parseFloat(t.toFixed(1)),this.$EditPanelData.setParticle(this.currentEditPanelData,{rateGain:t});var e=this.$BSSdk;e.changeParticleEmitterRateGain(e.getCurrentEditClip(),t).catch(function(t){console.error(t)})}},_sizeGain_:{get:function(){return parseFloat(this.currentEditPanelData.sizeGain.toFixed(1))},set:function(t){t=parseFloat(t.toFixed(1)),this.$EditPanelData.setParticle(this.currentEditPanelData,{sizeGain:t});var e=this.$BSSdk;e.changeParticleEmitterSizeGain(e.getCurrentEditClip(),t).catch(function(t){console.error(t)})}},__rateGain__:function(){return 10*parseFloat(this.currentEditPanelData.rateGain.toFixed(1))},__sizeGain__:function(){return 10*parseFloat(this.currentEditPanelData.sizeGain.toFixed(1))}})};e.default=s},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(409),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(10);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var c={data:function(){return{tabs:[{name:"滤镜编辑"},{name:"模板"}],tab:"滤镜编辑"}},name:"filter-edit",components:{FilterTemplate:n(i(868)).default},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData"]),{_intensity_:{get:function(){return parseFloat(this.currentEditPanelData.intensity.toFixed(1))},set:function(e){var i=this.$BSSdk,n=i.getCurrentEditClip();e=parseFloat(e.toFixed(1)),this.$EditPanelData.setEffect(this.currentEditPanelData,{intensity:e}),a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.changeFilterStrength(n,e));case 2:i.drawMonitorEdit();case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)})}}})};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(412),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=n(i(24)),o=n(i(628)),c=n(i(627)),u=i(10),l=n(i(869));function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var p={name:"theme-edit",components:{captionFontSelect:o.default,ColorSelect:c.default,ThemeTemplate:l.default},data:function(){return{tabs:[{name:"主题设置"},{name:"主题模板"}],tab:"主题设置",fontSizeList:(0,s.default)(new Array(100).keys()).map(function(t){return t+1}),themeCaptions:[],selectedCaptionShow:""}},created:function(){var t=this.currentEditPanelData;t.titleCaption&&this.themeCaptions.push({key:"titleCaption",value:"片头字幕设置"}),t.trailerCaption&&this.themeCaptions.push({key:"trailerCaption",value:"片尾字幕设置"}),this.themeCaptions.length&&(this.selectedCaptionShow=this.themeCaptions[0].key),"tail"===t.editTip&&t.trailerCaption&&(this.selectedCaptionShow="trailerCaption"),this.initEvents()},destroyed:function(){this.offEvents()},computed:f({},(0,u.mapState)(["currentEditPanelData","captionFonts"]),{_titleCaptionFontSize_:{get:function(){var t=this.currentEditPanelData;return t.titleCaption?t.titleCaption.fontSize:0},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTitleCaptionFontSize(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{titleCaption:f({},t.titleCaption,{fontSize:e})})}},_titleCaptionBsFontId_:{get:function(){var t=this.currentEditPanelData;return t.titleCaption?t.titleCaption.bsFontId:""},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTitleCaptionFontFamily(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{titleCaption:f({},t.titleCaption,{bsFontId:e})})}},_titleCaptionText_:{get:function(){var t=this.currentEditPanelData;return t.titleCaption?t.titleCaption.text:""},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTitleCaptionText(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{titleCaption:f({},t.titleCaption,{text:e})})}},_titleCaptionColor_:{get:function(){var t=this.currentEditPanelData;return t.titleCaption?t.titleCaption.color:""},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTitleCaptionColor(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{titleCaption:f({},t.titleCaption,{color:e})})}},_trailerCaptionFontSize_:{get:function(){var t=this.currentEditPanelData;return t.trailerCaption?t.trailerCaption.fontSize:0},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTrailerCaptionFontSize(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{trailerCaption:f({},t.trailerCaption,{fontSize:e})})}},_trailerCaptionBsFontId_:{get:function(){var t=this.currentEditPanelData;return t.trailerCaption?t.trailerCaption.bsFontId:""},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTrailerCaptionFontFamily(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{trailerCaption:f({},t.trailerCaption,{bsFontId:e})})}},_trailerCaptionText_:{get:function(){var t=this.currentEditPanelData;return t.trailerCaption?t.trailerCaption.text:""},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTrailerCaptionText(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{trailerCaption:f({},t.trailerCaption,{text:e})})}},_trailerCaptionColor_:{get:function(){var t=this.currentEditPanelData;return t.trailerCaption?t.trailerCaption.color:""},set:function(e){var t=this.currentEditPanelData,i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.setThemeTrailerCaptionColor(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{trailerCaption:f({},t.trailerCaption,{color:e})})}},_themeVolume_:{get:function(){var t=this.currentEditPanelData;return parseFloat(t.volume.toFixed(1))||0},set:function(t){this.setVolume(t),this.$Bus.$emit(this.$GLEventKey.THEME_VOLUME_UPDATE,t)}}}),methods:{themeCaptionInputBlur:function(){this.$BSSdk.saveQueue().catch(function(t){console.error(t)})},initEvents:function(){this.$Bus.$on(this.$GLEventKey.THEME_VOLUME_UPDATE,this.setVolume)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.THEME_VOLUME_UPDATE,this.setVolume)},setVolume:function(e){var i=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.changeThemeVolume(e));case 2:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setTheme(this.currentEditPanelData,{volume:e})}}};e.default=p},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(415),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(6)),s=i(10),o=n(i(109)),c=n(i(110));function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l={data:function(){return{tabs:[{name:"效果编辑"}],tab:"效果编辑"}},name:"builtin-effect-edit",computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,s.mapState)(["currentEditPanelData"]),{showMask:function(){return this.currentEditPanelData.desc===this.$GL.MASK_DESC},_intensity_:{get:function(){return this.currentEditPanelData.desc===this.$GL.MOSAIC_DESC?parseFloat(this.currentEditPanelData.intensity.toFixed(3)):parseFloat(this.currentEditPanelData.intensity.toFixed(1))},set:function(e){var i=this.$BSSdk,n=i.getCurrentEditClip();this.currentEditPanelData.desc===this.$GL.MOSAIC_DESC?(e=parseFloat(e.toFixed(3)),a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.changeMosaicStrength(n,e));case 2:i.drawMonitorEdit();case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)})):(e=parseFloat(e.toFixed(1)),a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.changeGaussianBlurStrength(n,e));case 2:i.drawMonitorEdit();case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)})),this.$EditPanelData.setEffect(this.currentEditPanelData,{intensity:e})}},__intensity__:function(){return this.currentEditPanelData.desc===this.$GL.MOSAIC_DESC?1e3*this._intensity_:this._intensity_},_max_:function(){return this.currentEditPanelData.desc===this.$GL.MOSAIC_DESC?.02:1},_step_:function(){return this.currentEditPanelData.desc===this.$GL.MOSAIC_DESC?.001:.1},_maskInverseRegion_:{get:function(){return this.currentEditPanelData.isInverseRegion},set:function(e){var i=this.$BSSdk,n=i.getCurrentEditClip();a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.inverseMask(n,e));case 2:i.drawMonitorEdit();case 3:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setEffect(this.currentEditPanelData,{isInverseRegion:e})}}}),components:{sdkEditTranslate:o.default,bccSwitch:c.default},methods:{setTranslate:function(e){var i,n=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.getCurrentEditClip(),t.next=3,a.default.awrap(n.translateEffectTimelineVideoFxClip(i,e));case 3:n.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)})},maskChangeShape:function(e){var i,n=this.$BSSdk;a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.getCurrentEditClip(),t.next=3,a.default.awrap(n.changeMaskShape(i,e));case 3:n.drawMonitorEdit();case 4:case"end":return t.stop()}}).catch(function(t){console.error(t)}),this.$EditPanelData.setEffect(this.currentEditPanelData,{shape:e})}}};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(418),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=i(7),s={watch:(0,a.default)({},"$store.state.currentTimelinePosition",function(){if(this.$BSSdk.getCurrentEditClip()){var t,e=this.$Timeline.selectedClip;if(e&&(t=e.type,-1!==[r.ClipTypes.STICKER,r.ClipTypes.VIDEO,r.ClipTypes.IMAGE,r.ClipTypes.CAPTION].indexOf(t))&&e.raw.keyFrames&&e.raw.keyFrames.length&&!this.$store.state.isContextPlaying)e.type===r.ClipTypes.STICKER&&this.$MonitorScreen.drawStickerClip(e.raw),e.type!==r.ClipTypes.VIDEO&&e.type!==r.ClipTypes.IMAGE||this.$MonitorScreen.drawVideoClip(e.raw),e.type===r.ClipTypes.CAPTION&&this.$MonitorScreen.drawCaptionClip(e.raw)}}),methods:{showAddKeyFrame:function(){this.$store.commit("showAddKeyFrame")},showRemoveKeyFrame:function(){this.$store.commit("showRemoveKeyFrame")},clearKeyFrameOperation:function(){this.$store.commit("clearKeyFrameOperation")},initKeyFrameEvents:function(){this.$Bus.$on(this.$GLEventKey.ADD_KEY_FRAME,this.addKeyFrame),this.$Bus.$on(this.$GLEventKey.REMOVE_KEY_FRAME,this.removeKeyFrame)},clearKeyFrameEvents:function(){this.$Bus.$off(this.$GLEventKey.ADD_KEY_FRAME,this.addKeyFrame),this.$Bus.$off(this.$GLEventKey.REMOVE_KEY_FRAME,this.removeKeyFrame)},initKeyFrameContext:function(){-1!==[r.ClipTypes.STICKER,r.ClipTypes.VIDEO,r.ClipTypes.IMAGE,r.ClipTypes.CAPTION].indexOf(this.$Timeline.selectedClip.type)&&this.initKeyFrameEvents()},clearKeyFrameContext:function(){this.clearKeyFrameOperation(),this.clearKeyFrameEvents()},addKeyFrame:function(){var t=this.$Timeline.selectedClip,e=this.$store.state.currentTimelinePosition-t.inPoint;t.type===r.ClipTypes.STICKER&&(this.$BSSdk.startSetStickerKeyFrame(t.raw,e),this.$BSSdk.recordStickerAllKeyFrameAtTime(t.raw,e),this.$MonitorScreen.drawStickerClip(t.raw)),t.type===r.ClipTypes.CAPTION&&(this.$BSSdk.startSetCaptionKeyFrame(t.raw,e),this.$BSSdk.recordCaptionAllKeyFrameAtTime(t.raw,e),this.$MonitorScreen.drawCaptionClip(t.raw)),t.type!==r.ClipTypes.VIDEO&&t.type!==r.ClipTypes.IMAGE||(this.$BSSdk.recordVideoAllKeyFrameAtTime(t.raw,e),this.$MonitorScreen.drawVideoClip(t.raw)),this.$BSSdk.saveQueue()},removeKeyFrame:function(){var t=this.$Timeline.selectedClip,e=this.$store.state.currentTimelinePosition-t.inPoint;t.type===r.ClipTypes.STICKER&&(this.$BSSdk.removeStickerAllKeyFrameAtTime(t.raw,e),this.$MonitorScreen.drawStickerClip(t.raw)),t.type===r.ClipTypes.CAPTION&&(this.$BSSdk.removeCaptionAllKeyFrameAtTime(t.raw,e),this.$MonitorScreen.drawCaptionClip(t.raw)),t.type!==r.ClipTypes.VIDEO&&t.type!==r.ClipTypes.IMAGE||(this.$BSSdk.removeVideoAllKeyFrameAtTime(t.raw,e),this.$MonitorScreen.drawVideoClip(t.raw)),this.$BSSdk.saveQueue()}}};e.default=s},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(421),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(4)),a=n(i(106)),s=n(i(574)),o=n(i(33)),c={name:"particle-graffit-modal",data:function(){return{visible:!1,start:!1,hasParticleGraffiti:!1,movePointX:0,movePointY:0,startInPoint:0,startTime:0,timelineVideoFxClip:null,$timelineVideoFxClip:null}},mixins:[s.default,a.default],created:function(){this.$Bus.$emit(this.$GLEventKey.LOCK_OPERATION_TRACKS,!0),this.$Bus.$emit(this.$GLEventKey.LOCK_MONITOR_CONTROL,!0),this.$store.commit("setHotKeyLock",!0),document.addEventListener("mouseup",this.onParticleMouseUp)},mounted:function(){var t=this;this.visible=!0,this.timelineVideoFxClip=this.$BSSdk.getCurrentEditClip(),this.$timelineVideoFxClip=(0,o.default)(this.timelineVideoFxClip),this.$nextTick(function(){t.resizeLiveWindow(t.$refs["live-window-container"],t.$refs["live-window"]),t.$BSSdk.createLiveWindow("particle-graffitl-live-window",t.$BSSdk.timeline)}),this.timer=setInterval(function(){t.start&&t.drawParticleGraffiti().catch(function(){})},80)},methods:{confirmClick:function(e){var i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e?this.timelineVideoFxClip:this.$timelineVideoFxClip,n=this.$BSSdk.getTimelineVideoFxClipIndexInfo(this.timelineVideoFxClip),a=this.$BSSdk.getTimelineVideoFxTrack(n.trackIndex),t.next=5,r.default.awrap(this.$BSSdk.removeTimelineVideoFxClip(a,n.clipIndex,!1));case 5:return t.next=7,r.default.awrap(this.$BSSdk.addTimelineVideoFxClip(a,{inPoint:i.inPoint,outPoint:i.outPoint,packageType:i.packageType,packageUrl:i.packageUrl,materialType:i.clipSubType,displayName:i.displayName,materialId:i.id,desc:i.desc},i));case 7:this.$Bus.$emit(this.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.$BSSdk.timelineData),this.$store.commit("changeShowParticleGraffitiModal",!1);case 9:case"end":return t.stop()}},null,this)},onParticleMousedown:function(e){var i,n;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.$BSSdk,t.next=3,r.default.awrap(i.waitEngineCoolDown());case 3:return i.seekCurrentTimeline(),this.startInPoint=this.$store.state.currentTimelinePosition,this.startTime=Date.now()/1e3*this.$GL.SECOND_CONVERT,n=this.$store.state.timelineDuration+18e3*this.$GL.SECOND_CONVERT,t.next=9,r.default.awrap(i.changeEmptyTrackOutPoint(n));case 9:if(this.startInPoint>=n)return t.abrupt("return");t.next=11;break;case 11:return this.movePointX=e.offsetX,this.movePointY=e.offsetY,t.next=15,r.default.awrap(i.startParticleGraffiti(this.timelineVideoFxClip,this.startInPoint,n,this.movePointX,this.movePointY));case 15:this.start=!0;case 16:case"end":return t.stop()}},null,this)},onParticleMousemove:function(t){this.start&&(this.movePointX=t.offsetX,this.movePointY=t.offsetY)},onParticleMouseUp:function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.start){t.next=2;break}return t.abrupt("return");case 2:if(this.start=!1,this.hasParticleGraffiti){t.next=5;break}return t.abrupt("return");case 5:return this.hasParticleGraffiti=!1,this.drawParticleGraffiti(),t.next=9,r.default.awrap(this.$BSSdk.stopParticleGraffiti(this.timelineVideoFxClip,this.$store.state.currentTimelinePosition+1/this.$GL.FRAME*this.$GL.SECOND_CONVERT));case 9:case"end":return t.stop()}},null,this)},drawParticleGraffiti:function(){var e;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=Date.now()/1e3*this.$GL.SECOND_CONVERT-this.startTime,this.hasParticleGraffiti=!0,this.$store.state.timelineDuration<this.startInPoint+e)return e=this.$store.state.timelineDuration-this.startInPoint,this.$BSSdk.setParticleGraffitiCurvePoint(this.timelineVideoFxClip,this.movePointX,this.movePointY,e/this.$GL.SECOND_CONVERT),this.$BSSdk.seekTimeline(this.startInPoint+e),t.next=8,r.default.awrap(this.onParticleMouseUp());t.next=10;break;case 8:t.next=12;break;case 10:this.$BSSdk.setParticleGraffitiCurvePoint(this.timelineVideoFxClip,this.movePointX,this.movePointY,e/this.$GL.SECOND_CONVERT),this.$BSSdk.seekTimeline(this.startInPoint+e);case 12:case"end":return t.stop()}},null,this)}},beforeDestroy:function(){this.$BSSdk.createLiveWindow(),clearInterval(this.timer),this.$Bus.$emit(this.$GLEventKey.LOCK_OPERATION_TRACKS,!1),this.$Bus.$emit(this.$GLEventKey.LOCK_MONITOR_CONTROL,!1),this.$store.commit("setHotKeyLock",!1),document.removeEventListener("mouseup",this.onParticleMouseUp)}};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(424),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=n(i(4)),a=n(i(877)),f=n(i(1427)),r={name:"quick-cut-modal",data:function(){return{visible:!1,boxTop:"50%",transform:"translate(-50%, -50%)",processing:!0,processingError:!1,processingMessage:"等待加载中",videoCodec:"",audioCodec:"",videoDuration:0,videoRatio:0,videoWidth:0,videoHeight:0,VIDEO_H264_CODEC:"h264",AUDIO_AAC_CODEC:"aac",video1:null,flvPlayer:null,video1Ready:!1,video1Playing:!1,video2:null,videoCurrentTime:0,videoShowAreaWidth:960,scaleVideoShowAreaWidth:0,videoShowAreaHeight:540,O_VIDEO_RATIO:16/9,scaleVideoShowAreaHeight:0,videoShowAreaCanvasCtx:null,videoThumbnailCanvasCtx:null,drawThumbnailTargetNumber:0,drawOldVideo1ThumbnailTargetNumber:-1,drawOldVideo1ThumbnailTargetImages:[],PER_THUMBNAIL_H_PX:45,PER_THUMBNAIL_W_PX:80,THUMBNAIL_NUMBER:11,ORIGIN_WIDTH:880,FIRST_FRAGMENT_S:.1,LIMIT_CUT_DURATION_SECOND:3,cutStart:0,cutEnd:0,outputFile:null,leftDragStart:!1,leftDragOffsetLeft:0,leftDragDOM:null,rightDragStart:!1,rightDragOffsetLeft:0,rightDragDOM:null,dragStartPoint:0,uploadCutDebug:this.$route.query.quick_cut_debug,supportPreview:!0,fileExt:"",unSupportPreviewThumbnails:[]}},created:function(){this.$store.commit("setHotKeyLock",!0),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragMoveEnd),(window.innerWidth<=1200||window.innerHeight<=870)&&(this.THUMBNAIL_NUMBER=7,this.ORIGIN_WIDTH=this.PER_THUMBNAIL_W_PX*this.THUMBNAIL_NUMBER,this.videoShowAreaHeight=360,this.videoShowAreaWidth=640,this.videoShowAreaHeight+244>=window.innerHeight&&(this.boxTop=0,this.transform="translateX(-50%)"))},computed:{selectedVideoDuration:function(){return this.parseTime(this.cutEnd-this.cutStart)},selectedVideoInPoint:function(){return this.parseTime(this.cutStart)},selectedVideoOutPoint:function(){return this.parseTime(this.cutEnd)},videoProgressLeft:function(){return this.videoDuration?this.videoCurrentTime/this.videoDuration*this.ORIGIN_WIDTH:0}},mounted:function(){var l=this;(0,a.default)("space",this.hotKeyListener),this.visible=!0,this.$nextTick(function(){var e,i,n,a,r,s,o,c,u;d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(l.fileExt=(l.$store.state.quickCutFile.name.split(".").pop()||"").toLowerCase(),l.processingMessage="视频文件格式检查中",!f.default.isSupported()&&l.isFLV())throw new Error("flv环境不支持");t.next=4;break;case 4:return t.next=6,d.default.awrap(l.$BSSdk.ffmpegMediaInfoCheckVideo(l.$store.state.quickCutFile));case 6:if(e=t.sent,console.log("视频检查结果",e),l.processingMessage="加载视频中",l.processingError=!1,e.err_type)throw new Error("视频文件打开失败");t.next=12;break;case 12:for(i=e.streams,n=e.format,l.videoDuration=n.duration,l.cutStart=0,l.cutEnd=l.videoDuration,r=!(a=!0),s=void 0,t.prev=20,o=i[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)"video"===(u=c.value).codec_type&&(l.videoCodec=u.codec_name,l.videoHeight=u.height,l.videoWidth=u.width,l.videoRatio=l.videoWidth/l.videoHeight),"audio"===u.codec_type&&(l.audioCodec=u.codec_name);t.next=28;break;case 24:t.prev=24,t.t0=t.catch(20),r=!0,s=t.t0;case 28:t.prev=28,t.prev=29,a||null==o.return||o.return();case 31:if(t.prev=31,r)throw s;t.next=34;break;case 34:return t.finish(31);case 35:return t.finish(28);case 36:if(l.$LogReport.sendCustomEvent("editor_quick_video_cut_import",{filename:l.$store.state.quickCutFile.name,filetimelength:l.videoDuration,filesize:Math.ceil(l.$store.state.quickCutFile.size/1048576),file_muxer:l.fileExt,file_v_codec:l.videoCodec,file_a_codec:l.audioCodec}),l.videoDuration){t.next=39;break}throw new Error("视频时长异常");case 39:if(l.videoCodec){t.next=41;break}throw new Error("未识别视频轨编码");case 41:l.videoCodec===l.VIDEO_H264_CODEC&&(l.isFLV()||l.isMP4())?(l.supportPreview=!0,l.isFLV()?l.initUnSupportPreviewThumbnail().catch(function(t){l.$LogReport.sendCustomEvent("editor_quick_video_cut_image_seek_error",{file_muxer:l.fileExt,file_v_codec:l.videoCodec,file_a_codec:l.audioCodec}),console.error(t),l.$message({type:"error",text:"截图生成异常"})}):l.initVideo2(),l.initVideo1()):(l.initUnSupportPreviewThumbnail().catch(function(t){l.$LogReport.sendCustomEvent("editor_quick_video_cut_image_seek_error",{file_muxer:l.fileExt,file_v_codec:l.videoCodec,file_a_codec:l.audioCodec}),console.error(t),l.$message({type:"error",text:"截图生成异常"})}),l.supportPreview=!1,l.processing=!1,l.processingMessage="");case 42:case"end":return t.stop()}},null,null,[[20,24,28,36],[29,,31,35]]).catch(function(t){l.processingError=!0,l.processingMessage=t.message,console.error(t)})})},methods:{parseTime:function(t){var e=Math.floor(t/3600),i=Math.floor((t-60*e*60)/60),n=Math.floor(t-60*e*60-60*i);return"".concat(e<10?"0"+e:""+e,":").concat(i<10?"0"+i:""+i,":").concat(n<10?"0"+n:""+n)},hotKeyListener:function(t,e){if(t.preventDefault(),!this.processing&&!this.processingError&&"space"===e.key){if(this.rightDragStart||this.leftDragStart)return;this.playVideo()}},close:function(){this.$BSSdk.flushFFmpegWorker(),this.$store.commit("setShowQuickCutModal",!1)},cancel:function(){this.$LogReport.sendCustomEvent("editor_quick_video_cancel_click"),this.close()},isFLV:function(){return"flv"===this.fileExt},isMP4:function(){return"mp4"===this.fileExt},getOutFileExt:function(){return this.fileExt},initVideo1:function(){var e=this,t=this.videoShowAreaWidth,i=this.videoShowAreaHeight;this.O_VIDEO_RATIO>this.videoRatio?t=this.videoShowAreaHeight*this.videoRatio:i=this.videoShowAreaWidth/this.videoRatio,this.scaleVideoShowAreaHeight=i,this.scaleVideoShowAreaWidth=t;var n=document.getElementById("video-show-area");if(n.setAttribute("crossorigin","anonymous"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),n.style.height=i+"px",n.style.width=t+"px",n.height=i*(window.devicePixelRatio||1),n.width=t*(window.devicePixelRatio||1),this.isFLV()){var a=f.default.createPlayer({type:"flv",url:URL.createObjectURL(this.$store.state.quickCutFile)},{lazyLoad:!1});a.attachMediaElement(n),a.load(),a.on(f.default.Events.MEDIA_INFO,function(){setTimeout(function(){e.processing=!1,e.video1Ready=!0},500)}),a.on(f.default.Events.ERROR,function(t){console.error(t)}),this.flvPlayer=a}else n.src=URL.createObjectURL(this.$store.state.quickCutFile),n.onloadeddata=function(){e.processing=!1,e.video1Ready=!0};(this.video1=n).ontimeupdate=function(t){e.videoCurrentTime=t.target.currentTime,e.video1Playing||e.drawVideo1ThumbnailArea()},n.onended=function(){e.video1Playing=!1,e.seek(e.cutStart)}},initVideo2:function(){var t=this,e=document.getElementById("video-thumbnail");e.style.height=this.PER_THUMBNAIL_H_PX+"px",e.style.width=this.ORIGIN_WIDTH+"px",e.height=this.PER_THUMBNAIL_H_PX*(window.devicePixelRatio||1),e.width=this.ORIGIN_WIDTH*(window.devicePixelRatio||1),this.videoThumbnailCanvasCtx=e.getContext("2d");var i=document.createElement("video");i.setAttribute("crossorigin","anonymous"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),i.src=URL.createObjectURL(this.$store.state.quickCutFile),i.onloadeddata=function(){i.currentTime+=t.FIRST_FRAGMENT_S},i.ontimeupdate=function(){t.drawVideo2ThumbnailArea()},this.video2=i},pauseVideo:function(){this.video1Playing&&this.video1&&(this.video1Playing=!1,this.isFLV()?this.flvPlayer.pause():this.video1.pause())},playVideo:function(){var e=this;this.video1Ready&&this.supportPreview&&(this.video1Playing?this.pauseVideo():(this.video1Playing=!0,this.isFLV()?this.flvPlayer.play().catch(function(t){e.video1Playing=!1,e.$message({type:"error",text:"视频播放异常"}),console.error(t)}):this.video1.play().catch(function(t){e.video1Playing=!1,e.$message({type:"error",text:"视频播放异常"}),console.error(t)}),this.startPlayVideoFrame()))},startPlayVideoFrame:function(){var t=this;if(this.video1Playing&&this.video1){if(this.isFLV()?this.videoCurrentTime=this.flvPlayer.currentTime:this.videoCurrentTime=this.video1.currentTime,this.drawVideo1ThumbnailArea(),this.videoCurrentTime>=this.cutEnd)return this.pauseVideo(),void this.seek(this.cutStart);window.requestAnimationFrame(function(){return t.startPlayVideoFrame()})}},drawVideo1ThumbnailArea:function(){if(this.video1&&this.videoThumbnailCanvasCtx&&!this.isFLV()){var t=0,e=this.PER_THUMBNAIL_W_PX,i=0,n=this.PER_THUMBNAIL_H_PX,a=this.videoDuration/this.THUMBNAIL_NUMBER,r=Math.floor(this.videoCurrentTime/a),s=this.PER_THUMBNAIL_W_PX/this.videoRatio,o=this.PER_THUMBNAIL_H_PX*this.videoRatio;this.O_VIDEO_RATIO>this.videoRatio?(t=this.PER_THUMBNAIL_W_PX/2-o/2,e=o):(i=this.PER_THUMBNAIL_H_PX/2-s/2,n=s),this.videoThumbnailCanvasCtx.drawImage(this.video1,0,0,this.videoWidth,this.videoHeight,(t+this.PER_THUMBNAIL_W_PX*r)*(window.devicePixelRatio||1),i*(window.devicePixelRatio||1),e*(window.devicePixelRatio||1),n*(window.devicePixelRatio||1)),r!==this.drawOldVideo1ThumbnailTargetNumber&&(-1!==this.drawOldVideo1ThumbnailTargetNumber&&this.drawOldVideo1ThumbnailTargetImages[this.drawOldVideo1ThumbnailTargetNumber]&&this.videoThumbnailCanvasCtx.putImageData(this.drawOldVideo1ThumbnailTargetImages[this.drawOldVideo1ThumbnailTargetNumber],(t+this.PER_THUMBNAIL_W_PX*this.drawOldVideo1ThumbnailTargetNumber)*(window.devicePixelRatio||1),i*(window.devicePixelRatio||1)),this.drawOldVideo1ThumbnailTargetNumber=r)}},drawVideo2ThumbnailArea:function(){if(this.videoThumbnailCanvasCtx&&!(this.drawThumbnailTargetNumber>=this.THUMBNAIL_NUMBER)){var t=0,e=this.PER_THUMBNAIL_W_PX,i=0,n=this.PER_THUMBNAIL_H_PX,a=this.PER_THUMBNAIL_W_PX/this.videoRatio,r=this.PER_THUMBNAIL_H_PX*this.videoRatio;this.O_VIDEO_RATIO>this.videoRatio?(t=this.PER_THUMBNAIL_W_PX/2-r/2,e=r):(i=this.PER_THUMBNAIL_H_PX/2-a/2,n=a),this.videoThumbnailCanvasCtx.drawImage(this.video2,0,0,this.videoWidth,this.videoHeight,(t+this.PER_THUMBNAIL_W_PX*this.drawThumbnailTargetNumber)*(window.devicePixelRatio||1),i*(window.devicePixelRatio||1),e*(window.devicePixelRatio||1),n*(window.devicePixelRatio||1)),this.drawOldVideo1ThumbnailTargetImages.push(this.videoThumbnailCanvasCtx.getImageData((t+this.PER_THUMBNAIL_W_PX*this.drawThumbnailTargetNumber)*(window.devicePixelRatio||1),i*(window.devicePixelRatio||1),e*(window.devicePixelRatio||1),n*(window.devicePixelRatio||1))),this.video2.currentTime+=this.videoDuration/this.THUMBNAIL_NUMBER,this.drawThumbnailTargetNumber+=1}},initUnSupportPreviewThumbnail:function(){var e,i,c=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=new Array(this.THUMBNAIL_NUMBER).fill(1).map(function(t,e){return c.videoDuration/c.THUMBNAIL_NUMBER*e+c.videoDuration/c.THUMBNAIL_NUMBER/2}),i=document.getElementById("video-thumbnail"),this.videoThumbnailCanvasCtx=i.getContext("2d"),i.style.height=this.PER_THUMBNAIL_H_PX+"px",i.style.width=this.ORIGIN_WIDTH+"px",i.height=this.PER_THUMBNAIL_H_PX*(window.devicePixelRatio||1),i.width=this.ORIGIN_WIDTH*(window.devicePixelRatio||1),t.next=9,d.default.awrap(this.$BSSdk.ffmpegMediaInfoSeekImage(this.$store.state.quickCutFile,e,function(t,s){if(!(s>=c.THUMBNAIL_NUMBER)){var o=new Image;o.onload=function(){var t=0,e=c.PER_THUMBNAIL_W_PX,i=0,n=c.PER_THUMBNAIL_H_PX,a=c.PER_THUMBNAIL_W_PX/c.videoRatio,r=c.PER_THUMBNAIL_H_PX*c.videoRatio;c.O_VIDEO_RATIO>c.videoRatio?(t=c.PER_THUMBNAIL_W_PX/2-r/2,e=r):(i=c.PER_THUMBNAIL_H_PX/2-a/2,n=a),c.videoThumbnailCanvasCtx.drawImage(o,0,0,c.videoWidth,c.videoHeight,(t+c.PER_THUMBNAIL_W_PX*s)*(window.devicePixelRatio||1),i*(window.devicePixelRatio||1),e*(window.devicePixelRatio||1),n*(window.devicePixelRatio||1))},o.src=URL.createObjectURL(t)}}));case 9:this.unSupportPreviewThumbnails=t.sent;case 10:case"end":return t.stop()}},null,this)},clickSeekVideo:function(t){if(this.supportPreview&&this.video1Ready){var e=t.offsetX/t.target.offsetWidth*this.videoDuration;e<=this.cutStart?this.seek(this.cutStart):e>=this.cutEnd?this.seek(this.cutStart):this.seek(t.offsetX/t.target.offsetWidth*this.videoDuration)}},seek:function(t){this.video1Ready&&this.video1&&this.supportPreview&&(this.isFLV()?this.flvPlayer.currentTime=t:this.video1.currentTime=t,this.videoCurrentTime=t)},confirmSize:function(){var e=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){e.$confirm("当前选择区间过大，可能会出现运行错误，是否继续裁剪？",function(){t(!0)},function(){t(!1)})}));case 1:case"end":return t.stop()}})},cut:function(){var o=this;this.processing||this.processingError||(this.$LogReport.sendCustomEvent("editor_quick_video_cut_finish_click"),this.pauseVideo(),this.processing=!0,this.processingMessage="裁剪进行中",this.$nextTick(function(){var e,i,n,a,r,s;d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=o.$store.state.quickCutFile.name.split(".").shift()+"_"+o.selectedVideoInPoint+"_"+o.selectedVideoOutPoint,i=e+"."+o.getOutFileExt(),0!==o.cutStart||o.cutEnd!==o.videoDuration){t.next=6;break}o.outputFile=o.$store.state.quickCutFile,t.next=22;break;case 6:if(n=o.cutEnd-o.cutStart,a=o.$store.state.quickCutFile.size/o.videoDuration,r=n*a,console.log("裁剪预估大小",r),1932735283.2<=r)return t.next=13,d.default.awrap(o.confirmSize());t.next=16;break;case 13:if(t.sent){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,d.default.awrap(o.$BSSdk.ffmpegQuickCutVideo(o.$store.state.quickCutFile,o.cutStart,n));case 18:if((s=t.sent).buffer&&s.buffer.size)throw new Error("文件格式不支持，无效裁剪");t.next=21;break;case 21:o.outputFile=new File([s.buffer],i);case 22:case"end":return t.stop()}}).then(function(){o.processing=!1,o.processingMessage="",o.uploadCutDebug||o.uploadFile()}).catch(function(t){o.processing=!1,o.processingMessage="",o.$message({type:"error",text:"裁剪错误:"+(/RangError:/.test(t.message)?"裁剪区间选择过大":t.message)}),console.error(t)})}))},downloadFile:function(){if(!this.processing&&!this.processingError&&this.outputFile){var t=this.outputFile,e=document.createElement("a");e.download=t.name,e.href=URL.createObjectURL(t),e.click()}},uploadFile:function(){this.processing||this.processingError||this.outputFile&&(this.$Bus.$emit(this.$GLEventKey.FILE_DRAG_UPLOAD,[this.outputFile],this.$store.state.quickCutFileFrom),this.close())},setStartDragLeft:function(t){this.processing||this.processingError||(this.dragStartPoint=t.pageX,this.leftDragOffsetLeft=t.target.offsetLeft,this.leftDragDOM=t.target,this.leftDragStart=!0,this.video1&&this.pauseVideo())},setStartDragRight:function(t){this.processing||this.processingError||(this.dragStartPoint=t.pageX,this.rightDragOffsetLeft=t.target.offsetLeft,this.rightDragDOM=t.target,this.rightDragStart=!0,this.video1&&this.pauseVideo())},dragMove:function(t){if(!this.processing&&!this.processingError){if(this.leftDragStart){var e=t.pageX-this.dragStartPoint,i=this.leftDragOffsetLeft+e,n=this.ORIGIN_WIDTH,a=this.leftDragDOM.offsetWidth;i<=-a&&(i=-a),n<=i&&(i=n);var r=(i+a)/n*this.videoDuration;if(r+this.LIMIT_CUT_DURATION_SECOND>=this.cutEnd)return;this.leftDragDOM.style.left=i+"px",this.$refs["video-thumbnail-select-border"].style.left=i+"px",this.cutStart=r,this.seek(this.cutStart)}if(this.rightDragStart){var s=t.pageX-this.dragStartPoint,o=this.rightDragOffsetLeft+s,c=this.ORIGIN_WIDTH,u=this.rightDragDOM.offsetWidth,l=c-o-u;l<=-u&&(l=-u),c<=l&&(l=c);var d=(c-(l+u))/c*this.videoDuration;if(d<=this.cutStart+this.LIMIT_CUT_DURATION_SECOND)return;this.rightDragDOM.style.right=l+"px",this.$refs["video-thumbnail-select-border"].style.right=l+"px",this.cutEnd=d,this.seek(this.cutStart)}}},dragMoveEnd:function(){this.leftDragStart=!1,this.rightDragStart=!1}},beforeDestroy:function(){a.default.unbind("space",this.hotKeyListener),this.$store.commit("setQuickCutFile",{file:null,from:""}),this.$store.commit("setHotKeyLock",!1),this.video1&&(this.isFLV()?(this.video1.ontimeupdate=function(){},this.flvPlayer.pause(),this.flvPlayer.destroy()):(this.video1.ontimeupdate=function(){},this.video1.pause()),this.video1=null),this.video2&&(this.video2.ontimeupdate=function(){},this.video2.pause(),this.video2=null),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragMoveEnd)}};e.default=r},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(427),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"mobileUploadQRCodeModal",data:function(){return{visible:!1,qrCodeUrl:"",qrCodeTimeOut:!1,accessToken:""}},created:function(){this.$LogReport.sendCustomEvent("editor_phone_upload_click")},mounted:function(){this.visible=!0,this.refreshQrCode(!0)},methods:{closeQrCode:function(){this.$store.commit("setShowMobileUploadQrCodeModal","")},setQrCode:function(){"project"===this.$store.state.showMobileUploadQrCodeModal?this.qrCodeUrl="https://".concat(window.location.hostname,"/york/bs-h5-upload?project_id=").concat(this.$store.state.projectId,"&token=").concat(this.accessToken):this.qrCodeUrl="https://".concat(window.location.hostname,"/york/bs-h5-upload?token=").concat(this.accessToken),console.log(this.qrCodeUrl)},refreshQrCode:function(t){var i=this;return 0<arguments.length&&void 0!==t&&t||this.$LogReport.sendCustomEvent("editor_qr_code refresh_click"),this.$api.mobile.generateMobileAccessToken().then(function(t){var e=t.expire_at_sec;setTimeout(function(){i.qrCodeTimeOut=!0},1e3*(e-parseInt(Date.now()/1e3))),i.accessToken=t.token,i.setQrCode(),i.qrCodeTimeOut=!1}).catch(function(t){i.$message({text:"二维码生成失败，请重试",type:"error"}),console.error(t)})}},components:{QRCode:n(i(1456)).default}};e.default=a},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(430),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{visible:!1,text:"",options:[1],step:1,lineList:[]}},mounted:function(){this.visible=!0},computed:{textLines:function(){return this.text.split("\n")}},methods:{deleteLine:function(t){this.lineList.splice(t,1),this.lineList.length||this.clearText()},inputText:function(t){t.preventDefault(),this.text=t.target.value.replace(/^\n/,"").replace(/\n+/g,"\n"),t.target.value=this.text},scrollShadow:function(t){this.$refs.input.scrollTop=t.target.scrollTop},scrollInput:function(t){this.$refs.shadow.scrollTop=t.target.scrollTop},getSelected:function(){var t=this.$refs.input;return window.getSelection?null!=t.selectionStart&&null!=t.selectionEnd?t.value.substring(t.selectionStart,t.selectionEnd):"":document.selection.createRange().text},autoSplitLines:function(){var t=this.getSelected()||this.text,e=t.replace(/(^\s*)|(\s*$)/g,"");e=(e=(e=e.replace(/(^[,，;；:：。.、]*)|([,，;；:：。.、]*$)/g,"")).replace(/[,，;；:：。.、]/g,"\n")).replace(/\n+/g,"\n"),this.text=this.text.replace(t,e)},clearText:function(){this.text="",this.step=1},nextStep:function(){if(!this.text.replace("s",""))return this.$message({type:"warning",text:"文本不能为空"});var e=!(this.step=2);this.options.length&&(e=!0),this.text=this.text.replace(/\n$/,""),this.lineList=this.textLines.map(function(t){return{text:t,hasGap:e}})},cancel:function(){this.$store.commit("setShowMusicCaptionTextEditModal",!1)},generateTextCaption:function(){this.$Bus.$emit(this.$GLEventKey.APPLY_TEXT_CAPTIONS_TO_TRACK,this.lineList),this.$store.commit("setShowMusicCaptionTextEditModal",!1)}}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(434),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i(4)),r=a(i(6)),s=a(i(1463)),c=i(21),u=a(i(1468)),l=a(i(1470)),d=a(i(1476)),f=a(i(1488)),p=a(i(1491)),h=a(i(1492)),v=a(i(1493)),m=a(i(1494)),g=a(i(1495)),_=a(i(1496)),w=a(i(1497)),b=a(i(1498)),y=n(i(15)),C=i(7),T=i(10),x=i(860),E=a(i(47)),k=i(113),S=a(i(1500));function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var O={data:function(){return{trackOrder:C.TrackOrder,highlight:C.TrackOrder.map(function(){return{top:!1,bottom:!1}}),clipDragging:!1,timelineWidth:0,ruler:(0,y.getRuler)(),scrollX:0,leftPanelWidth:0,selectedClip:null,lockAllTracks:!1,uiLockAllTracks:!1,uiProcessLocked:!1}},mixins:[p.default,h.default,v.default,m.default,g.default,_.default,w.default],components:{OperationBar:s.default,Ruler:u.default,TrackHeads:l.default,TrackBodys:d.default,TrackEmpty:f.default,SeekLine:b.default,DragTrackMask:S.default},created:function(){E.default.prototype.$Timeline=this},mounted:function(){this.initEvents(),this.initView(),this.startQueryOperation()},destroyed:function(){this.offEvents(),this.stopQueryOperation()},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,T.mapState)(["currentTimelinePosition","timelineDuration","allTracks"]),{isTracksEmpty:function(){return 0===this.allTracks.reduce(function(t,e){return t+e.length},0)},isLocked:function(){return this.lockAllTracks||this.uiLockAllTracks||this.uiProcessLocked}}),watch:{isTracksEmpty:function(t){var e=this;t?(this.$refs["track-bodys"].$el.scrollLeft=0,this.initView()):this.$nextTick(function(){e.lazyLoadInited||((0,x.lazyLoad)(e.$refs["track-bodys"].$el,1e3),e.lazyLoadInited=!0)})}},methods:{handleLogicDataReady:function(t){this.selectedClip=null,this.setOperationState(c.OperationTypes.CUT,this.canCutClip()),this.setOperationState(c.OperationTypes.SEPARATE,this.canSeparate()),this.setOperationState(c.OperationTypes.REVOKE,this.$store.getters.canUndo),this.setOperationState(c.OperationTypes.UNDO_REVOKE,this.$store.getters.canRedo),this.setOperationState(c.OperationTypes.DELETE,!1);var e=(0,C.logicDataToUIData)(t,this);this.$store.commit("updateUITracks",e),this.setTheme(),this.$refs["op-bar"].initTimelineScale(),this.alignRaw(),this.updateTripleStatus()},setTheme:function(){var t=this.$BSSdk.getTheme();this.theme=t?(new k.Theme).fromOrigin(t):null},trackRefresh:function(t,e,i){(0,C.refreshTrackData)(this.allTracks,t,e,i,this),this.setTheme(),this.alignRaw()},setOperationState:function(t,e){this.$refs["op-bar"].setOperationState(t,e)},rulerUpdate:function(){this.ruler=(0,y.getRuler)()},clickSeek:function(t){if(!(t.clientY>document.body.clientHeight-20)){var e=t.clientX-this.leftPanelWidth;0<=e&&e<=this.timelineWidth&&(this.$refs["seek-line"].seekBuyOffsetX(e),this.$refs["seek-line"].startSeek(t))}},initView:function(){var t=this,e=this.$refs.right.getBoundingClientRect();this.leftPanelWidth=e.left,this.timelineWidth=e.width,this.$nextTick(function(){t.$Bus.$emit(c.EventKeys.TRACK_VIEW_UDPATE)})},initEvents:function(){this.$Bus.$on(this.$GLEventKey.CHANGE_TEMPLATE,this.changeTemplate),this.$Bus.$on(c.EventKeys.CLIP_RESIZE,this.handleClipResize),this.$Bus.$on(c.EventKeys.TIMELINE_RULER_UPDATE,this.rulerUpdate),this.$Bus.$on(c.EventKeys.CLIP_SELECTED,this.updateClipSelect),this.$Bus.$on(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$on(this.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.handleLogicDataReady),this.$Bus.$on(this.$GLEventKey.REQUIRE_TRACK_REFRESH,this.trackRefresh),this.$Bus.$on(this.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,this.removeResourceFromTrack),this.$Bus.$on(this.$GLEventKey.EXPIRED_IDS_NOTIFY,this.handleResourceExpire),this.$Bus.$on(this.$GLEventKey.DELETE_CLIP,this.handleClipDelete),this.$Bus.$on(c.EventKeys.CHANGE_TRACK_VOLUME,this._changeTrackVolume),this.$Bus.$on(c.EventKeys.TRACK_VISIBLE_CHANGE,this._changeTrackVisible),this.$Bus.$on(this.$GLEventKey.PASTE_CLIP,this.handleClipPaste),this.$Bus.$on(this.$GLEventKey.COPY_CLIP,this.handleClipCopy),this.$Bus.$on(this.$GLEventKey.LOCK_OPERATION_TRACKS,this.lockOperationTracks),this.$Bus.$on(this.$GLEventKey.UNDO_OPERATION,this.undoOperation),this.$Bus.$on(this.$GLEventKey.REDO_OPERATION,this.redoOperation),this.$Bus.$on(this.$GLEventKey.CLIP_DIRECT_TO_TRACK,this.clipDirectToTrack),this.$Bus.$on(this.$GLEventKey.SHOW_RHYTHM_PANEL,this.updataRhythmEditData)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.CHANGE_TEMPLATE,this.changeTemplate),this.$Bus.$off(c.EventKeys.CLIP_RESIZE,this.handleClipResize),this.$Bus.$off(c.EventKeys.TIMELINE_RULER_UPDATE,this.rulerUpdate),this.$Bus.$off(c.EventKeys.CLIP_SELECTED,this.updateClipSelect),this.$Bus.$off(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$off(this.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.handleLogicDataReady),this.$Bus.$off(this.$GLEventKey.REQUIRE_TRACK_REFRESH,this.trackRefresh),this.$Bus.$off(this.$GLEventKey.REMOVE_RESOURCE_FROM_TRACK,this.removeResourceFromTrack),this.$Bus.$off(this.$GLEventKey.EXPIRED_IDS_NOTIFY,this.handleResourceExpire),this.$Bus.$off(this.$GLEventKey.DELETE_CLIP,this.handleClipDelete),this.$Bus.$off(c.EventKeys.CHANGE_TRACK_VOLUME,this._changeTrackVolume),this.$Bus.$off(c.EventKeys.TRACK_VISIBLE_CHANGE,this._changeTrackVisible),this.$Bus.$off(this.$GLEventKey.PASTE_CLIP,this.handleClipPaste),this.$Bus.$off(this.$GLEventKey.COPY_CLIP,this.handleClipCopy),this.$Bus.$off(this.$GLEventKey.LOCK_OPERATION_TRACKS,this.lockOperationTracks),this.$Bus.$off(this.$GLEventKey.UNDO_OPERATION,this.undoOperation),this.$Bus.$off(this.$GLEventKey.REDO_OPERATION,this.redoOperation),this.$Bus.$off(this.$GLEventKey.CLIP_DIRECT_TO_TRACK,this.clipDirectToTrack),this.$Bus.$off(this.$GLEventKey.SHOW_RHYTHM_PANEL,this.updataRhythmEditData)},handleResourceExpire:function(e){return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.length){t.next=2;break}return t.abrupt("return");case 2:this.$message({text:"有素材过期，过期素材会从轨道移除",type:"error"}),this.removeResourceListFromTrack(e);case 4:case"end":return t.stop()}},null,this)},removeResourceListFromTrack:function(e){var r,i,n,a,s=this;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:r=!1,i=function(e){var i,n,a;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],s.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.getResourceId()===e&&i.push(t)})})}),!i.length){t.next=12;break}n=0;case 4:if(n<i.length)return a=i[n],t.next=8,o.default.awrap(s.deleteClip(a));t.next=11;break;case 8:n++,t.next=4;break;case 11:r=!0;case 12:s.clipboardClip&&s.clipboardClip.getResourceId()===e&&(s.clipboardClip=null),s.$BSSdk.clearQueue(e);case 14:case"end":return t.stop()}})},t.t0=o.default.keys(e);case 3:if((t.t1=t.t0()).done){t.next=10;break}return n=t.t1.value,a=e[n],t.next=8,o.default.awrap(i(a));case 8:t.next=3;break;case 10:r&&setTimeout(function(){s.$Bus.$emit(s.$GLEventKey.REQUIRE_SAVE_PROJECT,!1)},1e3);case 11:case"end":return t.stop()}})},removeResourceFromTrack:function(e){return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(this.removeResourceListFromTrack([e]));case 2:case"end":return t.stop()}},null,this)},updateClipSelect:function(t){this.theme&&(this.theme.selected=!1);var e=t;e instanceof C.ClipUI||(this.alignRaw(),this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.raw===e&&(e=t)})})})),this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.selected=!1})})}),e.selected=!0,this.selectedClip=e,this.setOperationState(c.OperationTypes.DELETE,!0)},bodyScroll:function(){var t=this.$refs["track-bodys"].$el,e=t.scrollTop,i=t.scrollLeft;this.lastScrollTop!==e&&(this.$refs["track-heads"].setTranslateY(-e),this.lastScrollTop=e),this.lastScrollLeft!==i&&(this.scrollX=i,this.$Bus.$emit(c.EventKeys.TRACKS_SCROLL_X,this.scrollX),this.lastScrollLeft=i)},rulerMouseWheel:function(t){var e,i=this.$store.state.minRuler,n=this.$store.state.maxRuler,a=y.getPxByNowTime(100);t.deltaY<0?(e=y.getRuler()-1)<i&&(e=i):n<(e=y.getRuler()+1)&&(e=n),y.setRuler(e);var r=t.clientX-this.leftPanelWidth,s=y.getPxByNowTime(100);if(a===s){if(e!==i)return;return 1e3<this.scrollX?this.scrollX-=200:500<this.scrollX?this.scrollX-=100:100<this.scrollX?this.scrollX-=50:10<this.scrollX?this.scrollX-=10:this.scrollX=0,void(this.$refs["track-bodys"].$el.scrollLeft=this.scrollX)}var o=(r+this.$refs["track-bodys"].$el.scrollLeft)*(s/a)-r;this.scrollX=o,this.scrollX<=0&&(this.scrollX=0),this.$refs["track-bodys"].$el.scrollLeft=this.scrollX,this.$Bus.$emit(c.EventKeys.TIMELINE_RULER_UPDATE,y.getRuler())}}};e.default=O},function(t,e,i){"use strict";i.r(e);var n=i(436),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),c=i(21),r=n(i(84)),u=i(15),s=n(i(1464)),o=n(i(1466));function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var d={components:{SeekBar:r.default,ShortcutBoard:s.default},mixins:[o.default],data:function(){return{operations:c.operations.map(function(t){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},t,{active:!1})}),timelineScale:(0,u.getRuler)(),timelineScaleInited:!1}},created:function(){this.$Bus.$on(c.EventKeys.TIMELINE_RULER_UPDATE,this.setTimelineScale)},destroyed:function(){this.$Bus.$off(c.EventKeys.TIMELINE_RULER_UPDATE,this.setTimelineScale)},methods:{clickRhythm:function(){this.$Bus.$emit(this.$GLEventKey.SHOW_RHYTHM_PANEL),this.$LogReport.sendCustomEvent("editor_audio_music_beat_click")},clickAddKeyframe:function(){this.$Bus.$emit(this.$GLEventKey.ADD_KEY_FRAME),this.$LogReport.sendCustomEvent("editor_keyframe_add_click")},clickDeleteKeyframe:function(){this.$Bus.$emit(this.$GLEventKey.REMOVE_KEY_FRAME),this.$LogReport.sendCustomEvent("editor_keyframe_delete_click")},setTimelineScale:function(t){this.timelineScale=t},addRuler:function(){var t=this.$store.state.maxRuler;this.timelineScale>=t||(this.timelineScale++,this.timelineScale>t&&(this.timelineScale=t),this.seekTimelineScale(this.timelineScale))},reduceRuler:function(){var t=this.$store.state.minRuler;this.timelineScale<=t||(this.timelineScale--,this.timelineScale<t&&(this.timelineScale=t),this.seekTimelineScale(this.timelineScale))},seekTimelineScale:function(t){var e=this;this.timelineScale=t;var i=Math.round(this.timelineScale);i!==(0,u.getRuler)()&&((0,u.setRuler)(i),this.$Bus.$emit(c.EventKeys.TIMELINE_RULER_UPDATE,i)),this.reportTimeout&&clearTimeout(this.reportTimeout),this.reportTimeout=setTimeout(function(){e.$LogReport.sendCustomEvent("editor_timeline_seekbar_seek",(0,u.getRuler)()),e.reportTimeout=null},200)},setOperationState:function(e,i){this.operations.forEach(function(t){t.key===e&&(t.active=i)})},itemMousedown:function(t,e){t.active&&(t.key===c.OperationTypes.DELETE&&(e.preventDefault(),e.stopPropagation()),this.$emit("operate",t.key))},initTimelineScale:function(){this.timelineScaleInited||(this.handlerAutoShrink(),this.timelineScaleInited=!0)},handlerAutoShrink:function(){var t=this;this.$LogReport.sendCustomEvent("editor_timeline_range_click");var e,i=(e=0,t.$Timeline.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.outPoint>e&&(e=t.outPoint)})})}),t.$Timeline.theme&&t.$store.state.themeDuration&&t.$store.state.themeDuration>e?t.$store.state.themeDuration:e);if(i){var n=this.$Timeline,a=this.$store.state.minRuler,r=this.$store.state.maxRuler,s=a;(0,u.setRuler)(s);for(var o=(0,u.getNowTimeByPx)(n.timelineWidth);i<=o&&s<=r&&!(r<++s);)(0,u.setRuler)(s),o=(0,u.getNowTimeByPx)(n.timelineWidth);--s<a&&(s=a),(0,u.setRuler)(s),this.$Bus.$emit(c.EventKeys.TIMELINE_RULER_UPDATE,(0,u.getRuler)()),n.$refs["track-bodys"].$el.scrollLeft=0}}}};e.default=d},function(t,e,i){"use strict";i.r(e);var n=i(438),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[["预览/暂停","Space"],["回退/前进","←/→"],["跳到开始","Home"],["跳到结束","End"],["片段复制","Ctrl+C"],["片段粘贴","Ctrl+V"],["保存","Ctrl+S"],["撤销","Ctrl+Z"],["恢复","Ctrl+Shift+Z"],["删除","Delete or Backspace"]],a={data:function(){return{shortcutList:n}}};e.default=a},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(442),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(4)),p=n(i(15)),s=i(21),o=i(40),c={props:["width"],data:function(){return{height:0,scrollX:0}},created:function(){this.initEvents()},mounted:function(){var e=this;r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap((0,o.waitForWebfonts)(["xx-bin-Regular"]));case 2:e.initView();case 3:case"end":return t.stop()}})},destroyed:function(){this.offEvents()},methods:{initEvents:function(){this.$Bus.$on(s.EventKeys.TIMELINE_RULER_UPDATE,this.render),this.$Bus.$on(s.EventKeys.TRACKS_SCROLL_X,this.updateScrollX),this.$Bus.$on(s.EventKeys.TRACK_VIEW_UDPATE,this.initView)},offEvents:function(){this.$Bus.$on(s.EventKeys.TIMELINE_RULER_UPDATE,this.render),this.$Bus.$off(s.EventKeys.TRACKS_SCROLL_X,this.updateScrollX),this.$Bus.$off(s.EventKeys.TRACK_VIEW_UDPATE,this.initView)},updateScrollX:function(t){this.scrollX=t,this.render()},initView:function(){var t=this.$refs["ruler-canvas"],e=t.getBoundingClientRect();this.height=e.height,t.width=this.width,t.height=this.height,this.context=this.ctx=t.getContext("2d"),this.render()},render:function(){this.ruler=p.getRuler();var t=this.$GL.TimelineRules[this.ruler].rulingCount,e=this.$GL.TimelineRules[this.ruler].rulingSpace,i=this.$GL.TimelineRules[this.ruler].tipSpace,n=this.width/e+1,a=this.ctx;a.clearRect(0,0,this.width,this.height),a.strokeStyle="#fff",a.lineWidth=1,a.font="12px xx-bin-Regular",a.fillStyle="#CFCFCF";for(var r=0,s=p.getFrameDurationByWidth(this.scrollX)/i,o=Math.ceil(s),c=p.getWidthByDuration((o-s)*i/this.$GL.SYSTEM*this.$GL.CONVERT),u=0;u<=n;u++){a.beginPath();var l=e*u+c,d=this.height-6;if((r=o+u)%t==0){d=this.height-12;var f=p.frameToTimeString(r*i);a.fillText(f,l-16,28,63)}a.strokeStyle=r%(2*t)==0?"#fff":"#767676",a.moveTo(l+.5,this.height),a.lineTo(l+.5,d),a.moveTo(l,this.height),a.closePath(),a.stroke()}}}};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(445),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1471)),r=n(i(1473)),s=i(21),o=i(7),c={props:["allTracks","clipDragging","theme"],data:function(){return{TrackOrder:o.TrackOrder,TrackTypes:o.TrackTypes}},components:{TrackHead:a.default,ThemeTrackHead:r.default},methods:{setTranslateY:function(t){this.$refs["track-heads-content"].style.transform="translateY(".concat(t,"px)")},getMouse:function(t){this.clipDragging&&this.$Bus.$emit(s.EventKeys.TRACK_GET_MOUSE,"TOP"===t?s.MouseSourceTypes.TOP_EMPTY:s.MouseSourceTypes.BOTTOM_EMPTY)},loseMouse:function(){this.$Bus.$emit(s.EventKeys.TRACK_LOSE_MOUSE)}}};e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(447),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(84)),r=i(7),s=i(21),o={props:{track:{type:r.TrackUI}},data:function(){return{trackUIData:s.trackUIData,cacheAvailable:!1}},watch:{"track.volume":function(t){this.cacheAvailable=!1,this.$Bus.$emit(s.EventKeys.CHANGE_TRACK_VOLUME,this.track,t)}},mounted:function(){this.initEvents()},destroyed:function(){this.offEvents()},methods:{hideTrack:function(){this.$Timeline.isLocked||(this.track.visible=!1,this.$LogReport.sendCustomEvent("editor_track_hide_click"),this.$Bus.$emit(s.EventKeys.TRACK_VISIBLE_CHANGE,this.track,!1))},showTrack:function(){this.$Timeline.isLocked||(this.track.visible=!0,this.$LogReport.sendCustomEvent("editor_track_show_click"),this.$Bus.$emit(s.EventKeys.TRACK_VISIBLE_CHANGE,this.track,!0))},forbidVolume:function(){var t=this;this.lastVolume=this.track.volume,this.track.volume=0,this.$nextTick(function(){t.cacheAvailable=!0})},restoreVolume:function(){this.cacheAvailable&&(this.track.volume=this.lastVolume)},handleClipDragging:function(){this.clipDragging=!0},clipDraggingStoped:function(){this.clipDragging=!1},initEvents:function(){this.$Bus.$on(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$on(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$off(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging)},getMouse:function(t){if(this.clipDragging){var e=+new Date;(!this.lastGetWrapperStyleTime||e>this.lastGetWrapperStyleTime+200)&&(this.wrapperStyle=this.$refs.wrapper.getBoundingClientRect(),this.lastGetWrapperStyleTime=e);var i=s.MouseSourceTypes.TRACK_TOP;if(i=t.clientY<this.wrapperStyle.top?s.MouseSourceTypes.TRACK_TOP:t.clientY>this.wrapperStyle.bottom?s.MouseSourceTypes.TRACK_BOTTOM:s.MouseSourceTypes.TRACK_CENTER,!this.track.visible){var n=(this.wrapperStyle.bottom+this.wrapperStyle.top)/2;i=t.clientY<n?s.MouseSourceTypes.TRACK_TOP:s.MouseSourceTypes.TRACK_BOTTOM}this.$Bus.$emit(s.EventKeys.TRACK_GET_MOUSE,i,this.track,this.$refs.wrapper)}},loseMouse:function(){this.$Bus.$emit(s.EventKeys.TRACK_LOSE_MOUSE)},addMusicCaption:function(){this.track.visible&&this.$Bus.$emit(this.$GLEventKey.ADD_MUSIC_CAPTION_TO_CURRENT_TIME)}},computed:{isAudio:function(){return this.track.type===r.TrackTypes.RECORD_AUDIO||this.track.type===r.TrackTypes.AUDIO},isTriple:function(){return this.track.type===r.TrackTypes.TRIPLE},isVideo:function(){return this.track.type===r.TrackTypes.VIDEO},isMusicCaption:function(){return this.track.type===r.TrackTypes.MUSIC_CAPTION}},components:{SeekBar:a.default}};e.default=o},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(450),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(84)),s=i(113),o=i(21),c={props:{theme:{type:s.Theme}},data:function(){return{trackUIData:o.trackUIData,cacheAvailable:!1}},computed:{volume:{get:function(){return this.theme.volume},set:function(e){var i=this;this.theme.volume=e,this.cacheAvailable=!1,a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(i.$BSSdk.changeThemeVolume(e));case 2:i.$Bus.$emit(i.$GLEventKey.THEME_VOLUME_UPDATE,e);case 3:case"end":return t.stop()}})}}},mounted:function(){this.initEvents()},destroyed:function(){this.offEvents()},methods:{forbidVolume:function(){var t=this;this.lastVolume=this.volume,this.volume=0,this.$nextTick(function(){t.cacheAvailable=!0})},restoreVolume:function(){this.cacheAvailable&&(this.volume=this.lastVolume)},handleClipDragging:function(){this.clipDragging=!0},clipDraggingStoped:function(){this.clipDragging=!1},setThemeVolume:function(t){this.theme.volume=t},initEvents:function(){this.$Bus.$on(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$on(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$on(this.$GLEventKey.THEME_VOLUME_UPDATE,this.setThemeVolume)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$off(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$off(this.$GLEventKey.THEME_VOLUME_UPDATE,this.setThemeVolume)},getMouse:function(){if(this.clipDragging){var t=o.MouseSourceTypes.TRACK_BOTTOM;this.$Bus.$emit(o.EventKeys.TRACK_GET_MOUSE,t,this.theme,this.$refs.wrapper)}},loseMouse:function(){this.$Bus.$emit(o.EventKeys.TRACK_LOSE_MOUSE)}},components:{SeekBar:r.default}};e.default=c},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(454),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1477)),s=n(i(1479)),o=n(i(1483)),c=i(21),u=i(10),l=i(15),d=i(7);function f(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var p={props:["allTracks","clipDragging","highlight","theme"],data:function(){return{scrollX:0,spaceWidth:0,TrackOrder:d.TrackOrder,TrackTypes:d.TrackTypes}},components:{TrackBody:r.default,ThemeTrackBody:s.default,ThemeVideoCover:o.default},mounted:function(){this.initEvents(),this.startSpaceLoop()},destroyed:function(){this.offEvents(),this.stopSpaceLoop()},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?f(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):f(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,u.mapState)(["timelineDuration"])),methods:{setSpaceWidth:function(){var t=this.$refs["track-bodys"].clientWidth,e=(0,l.getMaxGradeWidthByDuration)(this.timelineDuration);this.spaceWidth=t+e},startSpaceLoop:function(){var t=this;this.spaceLoopInterval=setInterval(function(){t.setSpaceWidth()},500)},stopSpaceLoop:function(){clearInterval(this.spaceLoopInterval)},tracksScrollXListener:function(t){this.scrollX=t},initEvents:function(){this.$Bus.$on(c.EventKeys.TRACKS_SCROLL_X,this.tracksScrollXListener)},offEvents:function(){this.$Bus.$off(c.EventKeys.TRACKS_SCROLL_X,this.tracksScrollXListener)},getMouse:function(t){this.clipDragging&&this.$Bus.$emit(c.EventKeys.TRACK_GET_MOUSE,"TOP"===t?c.MouseSourceTypes.TOP_EMPTY:c.MouseSourceTypes.BOTTOM_EMPTY)},loseMouse:function(){this.$Bus.$emit(c.EventKeys.TRACK_LOSE_MOUSE)}}};e.default=p},function(t,e,i){"use strict";i.r(e);var n=i(456),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(21),u=i(7),r=n(i(70)),s=i(40),l=i(15),o={components:{ClipItem:r.default},props:{track:{type:u.TrackUI},scrollX:scrollX},data:function(){return{translateX:this.scrollX,showGap:!1,gapLeft:0,gapRight:0,activeTrackWidth:0}},mounted:function(){this.initEvents(),this.track.showSelf=this.showSelf,this.updateTrackActiveDisplay()},watch:{maxOutPoint:function(){this.updateTrackActiveDisplay()}},computed:{isAudio:function(){return this.track.type===u.TrackTypes.RECORD_AUDIO||this.track.type===u.TrackTypes.AUDIO},isVideo:function(){return this.track.type===u.TrackTypes.VIDEO},maxOutPoint:function(){return this.track.clips.reduce(function(t,e){return e.outPoint>t&&(t=e.outPoint),t},0)}},methods:{updateTrackActiveDisplay:function(){if(!this.isVideo)return 0;this.activeTrackWidth=(0,l.getPxByNowTime)(this.maxOutPoint)},trackGapInactive:function(t){this.showGap&&(t&&t.target===this.$refs.gap||(this.showGap=!1,this.$Bus.$emit(this.$GLEventKey.TRACK_GAP_INACTIVE)))},deleteGap:function(){this.showGap&&this.$Bus.$emit(this.$GLEventKey.TRACK_GAP_DELETE)},gapHandler:function(t){var e=this;if(!this.$Timeline.isLocked){var i=t.clientX-this.$Timeline.leftPanelWidth;if(0<=i&&i<=this.$Timeline.timelineWidth){for(var n=(0,l.getNowTimeByPx)(i,this.$Timeline.scrollX),a=this.track.clips,r=[],s=0;s<a.length;s++){var o=a[s];0===s&&(this.$Timeline.theme&&this.$Timeline.theme.headDuration&&o.inPoint>this.$Timeline.theme.headDuration&&this.track.type===u.TrackTypes.VIDEO?r.push([this.$Timeline.theme.headDuration,o.inPoint]):0<o.inPoint&&r.push([0,o.inPoint])),0<s&&o.inPoint>a[s-1].outPoint&&r.push([a[s-1].outPoint,o.inPoint])}var c=r.find(function(t){return t[0]<n&&t[1]>n});c&&(this.showGap=!0,this.gapLeft=(0,l.getPxByNowTime)(c[0]),this.gapRight=(0,l.getPxByNowTime)(c[1]),this.$Bus.$emit(this.$GLEventKey.TRACK_GAP_ACTIVE,{gap:c,track:this.track,hide:function(){e.showGap=!1}}))}}},showSelf:function(){var t=this.$Timeline.$refs["track-bodys"].$el,e=t.getBoundingClientRect(),i=this.$refs["track-body"].getBoundingClientRect(),n=0;(i.bottom>e.bottom||i.top<e.top)&&(n=(e.bottom+e.top)/2-(i.bottom+i.top)/2),(0,s.scrollTo)(t,t.scrollTop-n)},handleClipDragging:function(){this.clipDragging=!0},clipDraggingStoped:function(){this.clipDragging=!1},getMouse:function(t){if(this.clipDragging){var e=+new Date;(!this.lastGetWrapperStyleTime||e>this.lastGetWrapperStyleTime+200)&&(this.wrapperStyle=this.$refs["clips-wrapper"].getBoundingClientRect(),this.lastGetWrapperStyleTime=e);var i=a.MouseSourceTypes.TRACK_TOP;if(i=t.clientY<this.wrapperStyle.top?a.MouseSourceTypes.TRACK_TOP:t.clientY>this.wrapperStyle.bottom?a.MouseSourceTypes.TRACK_BOTTOM:a.MouseSourceTypes.TRACK_CENTER,!this.track.visible){var n=(this.wrapperStyle.bottom+this.wrapperStyle.top)/2;i=t.clientY<n?a.MouseSourceTypes.TRACK_TOP:a.MouseSourceTypes.TRACK_BOTTOM}this.$Bus.$emit(a.EventKeys.TRACK_GET_MOUSE,i,this.track,this.$refs.bg)}},loseMouse:function(){this.$Bus.$emit(a.EventKeys.TRACK_LOSE_MOUSE)},initEvents:function(){this.$Bus.$on(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$on(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$on(a.EventKeys.TRACKS_SCROLL_X,this.tracksScrollXListener),this.$Bus.$on(this.$GLEventKey.MOUSEDOWN_STOPED,this.trackGapInactive),this.$Bus.$on(a.EventKeys.TIMELINE_RULER_UPDATE,this.trackGapInactive),this.$Bus.$on(a.EventKeys.TIMELINE_RULER_UPDATE,this.updateTrackActiveDisplay),document.body.addEventListener("mousedown",this.trackGapInactive)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$off(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$off(a.EventKeys.TRACKS_SCROLL_X,this.tracksScrollXListener),this.$Bus.$off(this.$GLEventKey.MOUSEDOWN_STOPED,this.trackGapInactive),this.$Bus.$off(a.EventKeys.TIMELINE_RULER_UPDATE,this.trackGapInactive),this.$Bus.$off(a.EventKeys.TIMELINE_RULER_UPDATE,this.updateTrackActiveDisplay),document.body.removeEventListener("mousedown",this.trackGapInactive)},tracksScrollXListener:function(t){this.translateX=t}},destroyed:function(){this.offEvents()}};e.default=o},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(459),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(21),r=i(40),s=i(113),o=n(i(1480)),c={props:{theme:{type:s.Theme},scrollX:scrollX},components:{ThemeClip:o.default},data:function(){return{translateX:this.scrollX}},mounted:function(){this.initEvents(),this.theme.showSelf=this.showSelf},methods:{showSelf:function(){var t=this.$Timeline.$refs["track-bodys"].$el,e=t.getBoundingClientRect(),i=this.$refs["theme-track-body"].getBoundingClientRect(),n=0;(i.bottom>e.bottom||i.top<e.top)&&(n=(e.bottom+e.top)/2-(i.bottom+i.top)/2),(0,r.scrollTo)(t,t.scrollTop-n)},handleClipDragging:function(){this.clipDragging=!0},clipDraggingStoped:function(){this.clipDragging=!1},getMouse:function(){if(this.clipDragging){var t=a.MouseSourceTypes.THEME;this.$Bus.$emit(a.EventKeys.TRACK_GET_MOUSE,t,this.theme,this.$refs.bg)}},loseMouse:function(){this.$Bus.$emit(a.EventKeys.TRACK_LOSE_MOUSE)},initEvents:function(){this.$Bus.$on(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$on(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$on(a.EventKeys.TRACKS_SCROLL_X,this.tracksScrollXListener)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipDraggingStoped),this.$Bus.$off(this.$GLEventKey.CLIP_DRAGGING,this.handleClipDragging),this.$Bus.$off(a.EventKeys.TRACKS_SCROLL_X,this.tracksScrollXListener)},tracksScrollXListener:function(t){this.translateX=t}},destroyed:function(){this.offEvents()}};e.default=c},function(t,e,i){"use strict";i.r(e);var n=i(461),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(15),a=i(21),r={components:{},props:{theme:{type:i(113).Theme}},data:function(){return{width:(0,n.getWidthByDuration)(this.$store.state.themeDuration),widthPredict:0}},watch:{"$store.state.themeDuration":function(){this.width=(0,n.getWidthByDuration)(this.$store.state.themeDuration)},"$store.state.themeDurationPredict":function(){this.$store.state.themeDurationPredict?this.$store.state.needThemeAnimate&&(this.$refs["theme-clip"].style.transition="width 0.15s ease-in"):this.$refs["theme-clip"].style.transition="",this.widthPredict=(0,n.getWidthByDuration)(this.$store.state.themeDurationPredict)}},mounted:function(){this.initEvents()},destroyed:function(){this.offEvents()},methods:{click:function(){this.theme.editTip="head",this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,this.theme)},initEvents:function(){this.$Bus.$on(a.EventKeys.TIMELINE_RULER_UPDATE,this.updateDisplay)},offEvents:function(){this.$Bus.$off(a.EventKeys.TIMELINE_RULER_UPDATE,this.updateDisplay)},updateDisplay:function(){this.width=(0,n.getWidthByDuration)(this.$store.state.themeDuration)},mousedown:function(){this.theme.selected=!0,this.$Bus.$emit(a.EventKeys.THEME_SELECTED)}}};e.default=r},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(465),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=n(i(6)),s=i(113),o=i(15),c=i(21),u=n(i(1484)),l={props:{theme:s.Theme},components:{ThemeCoverClip:u.default},data:function(){return{headWidth:0,tailWidth:0,headLeft:0,tailLeft:0,tailLeftPredict:0,isClipDragging:!1}},created:function(){this.initEvents()},mounted:function(){this.headWidth=(0,o.getPxByNowTime)(this.theme.headDuration),this.tailWidth=(0,o.getPxByNowTime)(this.theme.tailDuration),this.headLeft=(0,o.getPxByNowTime)(this.theme.headInPoint),this.tailLeft=(0,o.getPxByNowTime)(this.theme.tailInPoint)},watch:(a={},(0,r.default)(a,"$store.state.themeDurationPredict",function(){if(!this.$store.state.themeDurationPredict)return this.tailLeftPredict=0,void(this.$refs.tail&&(this.$refs.tail.$el.style.transition=""));this.$store.state.needThemeAnimate&&this.$refs.tail&&(this.$refs.tail.$el.style.transition="left 0.15s ease-in"),this.tailLeftPredict=(0,o.getPxByNowTime)(this.$store.state.themeDurationPredict-this.theme.tailDuration)}),(0,r.default)(a,"theme",{handler:function(){this.headWidth=(0,o.getPxByNowTime)(this.theme.headDuration),this.tailWidth=(0,o.getPxByNowTime)(this.theme.tailDuration),this.headLeft=(0,o.getPxByNowTime)(this.theme.headInPoint),this.tailLeft=(0,o.getPxByNowTime)(this.theme.tailInPoint)},deep:!0}),a),destroyed:function(){this.offEvents()},methods:{click:function(t){this.theme.editTip=t,this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,this.theme)},initEvents:function(){this.$Bus.$on(c.EventKeys.TIMELINE_RULER_UPDATE,this.updateDisplay),this.$Bus.$on(this.$GLEventKey.CLIP_START_DRAGGING,this.clipStartDragging),this.$Bus.$on(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipStopDragging)},offEvents:function(){this.$Bus.$off(c.EventKeys.TIMELINE_RULER_UPDATE,this.updateDisplay),this.$Bus.$off(this.$GLEventKey.CLIP_START_DRAGGING,this.clipStartDragging),this.$Bus.$off(this.$GLEventKey.CLIP_STOP_DRAGGING,this.clipStopDragging)},clipStartDragging:function(){this.isClipDragging=!0},clipStopDragging:function(){this.isClipDragging=!1},updateDisplay:function(){this.headWidth=(0,o.getPxByNowTime)(this.theme.headDuration),this.tailWidth=(0,o.getPxByNowTime)(this.theme.tailDuration),this.headLeft=(0,o.getPxByNowTime)(this.theme.headInPoint),this.tailLeft=(0,o.getPxByNowTime)(this.theme.tailInPoint)},mousedown:function(){this.theme.selected=!0,this.$Bus.$emit(c.EventKeys.THEME_SELECTED)}}};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(467),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{width:Number,left:Number,selected:Boolean,name:String}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(472),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(21),a={props:["clipDragging"],methods:{getMouse:function(){this.clipDragging&&this.$Bus.$emit(n.EventKeys.TRACK_GET_MOUSE,n.MouseSourceTypes.INIT_EMPTY)},loseMouse:function(){this.$Bus.$emit(n.EventKeys.TRACK_LOSE_MOUSE)}}};e.default=a},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(475),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=i(15),s=i(21);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var c={props:["width"],data:function(){return{offsetX:0,scrollX:0}},mounted:function(){this.initEvents()},destroyed:function(){this.offEvents()},computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,i(10).mapState)(["currentTimelinePosition","timelineDuration"])),watch:{currentTimelinePosition:function(){this.setOffsetX((0,r.getPxByNowTime)(this.currentTimelinePosition,this.scrollX))}},methods:{initEvents:function(){this.$Bus.$on(s.EventKeys.TRACKS_SCROLL_X,this.updateScrollX),this.$Bus.$on(s.EventKeys.TIMELINE_RULER_UPDATE,this.updateTimelineRuler)},offEvents:function(){this.$Bus.$on(s.EventKeys.TRACKS_SCROLL_X,this.updateScrollX),this.$Bus.$off(s.EventKeys.TIMELINE_RULER_UPDATE,this.updateTimelineRuler)},updateScrollX:function(t){this.scrollX=t,this.setOffsetX((0,r.getPxByNowTime)(this.currentTimelinePosition,t))},updateTimelineRuler:function(){this.setOffsetX((0,r.getPxByNowTime)(this.currentTimelinePosition,this.scrollX))},setOffsetX:function(t){this.offsetX=t},seekBuyOffsetX:function(t){var e=(0,r.getNowTimeByPx)(t,this.scrollX);e>this.timelineDuration&&(e=this.timelineDuration,t=(0,r.getPxByNowTime)(e,this.scrollX)),this.setOffsetX(t),this.$BSSdk.seekTimeline(e,!0)},startSeek:function(t){function e(t){var e=a+t.clientX-n;e<=0?i.seekBuyOffsetX(0):e>=i.width?i.seekBuyOffsetX(i.width):i.seekBuyOffsetX(a+t.clientX-n)}var i=this,n=t.clientX,a=this.offsetX;document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mousemove",e),document.removeEventListener("mouseup",t)})}}};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(478),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(21),a={data:function(){return{isDragging:!1,active:!1}},computed:{tip:function(){return this.active?"释放鼠标":"拖到这里"}},mounted:function(){this.$Bus.$on(this.$GLEventKey.START_DRAGGING_MUSICCAPTION_OR_THEME,this.show),this.$Bus.$on(this.$GLEventKey.END_DRAGGING_MUSICCAPTION_OR_THEME,this.hide)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.START_DRAGGING_MUSICCAPTION_OR_THEME,this.show),this.$Bus.$off(this.$GLEventKey.END_DRAGGING_MUSICCAPTION_OR_THEME,this.hide)},methods:{show:function(){this.isDragging=!0},hide:function(){this.active=!1,this.isDragging=!1},dragenter:function(t){t.preventDefault(),this.active=!0,this.$Bus.$emit(n.EventKeys.TRACK_MASK_GET_MOUSE,!0)},dragleave:function(t){t.preventDefault(),this.active=!1,this.$Bus.$emit(n.EventKeys.TRACK_MASK_LOSE_MOUSE,!1)}}};e.default=a},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(482),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1504)),s=n(i(1506)),o=n(i(1509)),c=n(i(1511)),u=n(i(1513)),l=i(85),d=n(i(1515)),f=n(i(1517)),p=i(10);function h(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?h(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):h(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var m={components:{Ruler:r.default,Wave:s.default,AudioPlayer:d.default,Operate:o.default,SeekLine:f.default,DotLine:c.default,OperateDot:u.default},computed:v({},(0,p.mapState)(["rhythmClip","rhythmData","rhythmEditObj"]),{removedBoundaryDuration:function(){return this.rhythmClip.orgDuration/1e3-l.BOUNDARY}}),data:function(){return{containerWidth:1200,width:0,visible:!1,offsetLeft:0,mdFaired:!1}},methods:v({},(0,p.mapMutations)(["updateRhythmEditData","initRhythmEditData"]),{mousedown:function(t){var i=this;t.stopPropagation(),this.mdFaired=!0;function e(t){i.updateRhythmEditData({isPlaying:!1});var e=t.clientX-n;i.$refs.rhythmPanel.scrollTo(-e,0)}var n=t.clientX+this.$refs.rhythmPanel.scrollLeft;document.addEventListener("mousemove",e),document.addEventListener("mouseup",function t(){document.removeEventListener("mouseup",t),document.removeEventListener("mousemove",e)})},hideDotEditPanel:function(){this.mdFaired?this.mdFaired=!1:this.updateRhythmEditData({showDotEdit:!1,showDot:!0})},hidePanel:function(){this.visible=!1,this.initRhythmEditData(),this.$store.commit("setHotKeyLock",!1)},translateXSmooth:function(t){this.$refs.rhythmPanel&&this.$refs.rhythmPanel.scrollTo({top:0,left:t,behavior:"smooth"})},translateX:function(t){var e=l.rulerTimeline.secondPx*t;this.$refs.rhythmPanel.scrollTo(e,0)},handleScroll:function(){var t=this.$refs.rhythmPanel;t&&(this.updateRhythmEditData({scrollLeft:t.scrollLeft}),this.validateCanDot(t.scrollLeft))},validateCanDot:function(t){var e=1e3*(t=t||this.rhythmEditObj.scrollLeft)/l.rulerTimeline.secondPx,i=this.rhythmEditObj.sectionData.findIndex(function(t){return t[0]<=e&&t[1]>=e}),n=!0,a=!1;e<l.BOUNDARY||e>this.rhythmClip.orgDuration/1e3-l.BOUNDARY?a=!(n=!1):n=-1===i,this.updateRhythmEditData({selectedIdx:i,canDot:n,isBoundary:a})},showPanel:function(){var t=this,e=this.rhythmClip,i=e.orgDuration,n=e.raw,a=l.rulerTimeline.secondPx;this.visible=!0,this.width=i*a/1e6;var r=(this.$store.state.currentTimelinePosition-n.inPoint)/1e6;r=r<=1?0:r,this.$nextTick(function(){t.calcContainerWidth(),t.validateCanDot(r*a),t.updateRhythmEditData({showDot:!0}),t.translateX(r)}),this.$store.commit("setHotKeyLock",!0)},initEvents:function(){this.$Bus.$on(this.$GLEventKey.SHOW_RHYTHM_PANEL,this.showPanel),this.$Bus.$on(this.$GLEventKey.HIDE_EDIT_PANEL,this.hideRhythmEntry)},offEvents:function(){this.$Bus.$off(this.$GLEventKey.SHOW_RHYTHM_PANEL,this.showPanel),this.$Bus.$off(this.$GLEventKey.HIDE_EDIT_PANEL,this.hideRhythmEntry)},hideRhythmEntry:function(){this.$store.commit("setRhythmEntry",!1)},calcContainerWidth:function(){if(this.$refs.rhythm){var t=this.$refs.rhythm.getBoundingClientRect().width;this.containerWidth=t,this.offsetLeft=t/2}}}),mounted:function(){this.initEvents(),window.addEventListener("resize",this.calcContainerWidth)},destroyed:function(){this.offEvents(),window.removeEventListener("resize",this.calcContainerWidth)}};e.default=m},function(t,e,i){"use strict";i.r(e);var n=i(484),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=i(10),w=i(85);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var o={props:["width","offsetLeft","canvasWidth"],computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,r.mapState)(["rhythmClip","rhythmEditObj"])),watch:{canvasWidth:function(){this.initRuler()},"rhythmEditObj.scrollLeft":function(){this.render()}},data:function(){return{height:40,context:null,maxCount:0}},mounted:function(){this.initRuler()},methods:{initRuler:function(){var t=this.$refs.ruler;t.height=this.height,t.width=this.canvasWidth,this.context=t.getContext("2d"),this.maxCount=(this.width-2*this.offsetLeft)/w.rulerTimeline.rulingSpace,this.render()},render:function(){var t=this.rhythmEditObj.scrollLeft-this.offsetLeft,e=w.rulerTimeline.rulingCount,i=w.rulerTimeline.rulingSpace,n=w.rulerTimeline.tipSpace,a=this.canvasWidth,r=this.context;r.clearRect(0,0,this.canvasWidth,this.height),r.strokeStyle="#fff",r.lineWidth=1,r.font="12px xx-bin-Regular",r.fillStyle="#CFCFCF",r.textAlign="center",r.beginPath();var s=a/i,o=0,c=t*n/i,u=c/n,l=Math.ceil(c/n),d=(l-u)*i,f=0,p=s;l<0&&(f=Math.abs(l));var h=this.maxCount-l;h<0&&(p+=h);for(var v=f;v<p;v++){var m=this.height-6,g=i*v+d;if((o=l+v)%e==0){m=this.height-12;var _=(0,w.rhythmFrameToTimeString)(o*n);r.fillText(_,g,14,63)}r.strokeStyle=o%e==0?"#fff":"#767676",r.beginPath(),r.moveTo(g,this.height),r.lineTo(g,m),r.moveTo(g,this.height),r.closePath(),r.stroke()}}}};e.default=o},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(487),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=i(10),s=n(i(1507));function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var c={computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,r.mapState)(["rhythmClip"])),props:["width"],mixins:[s.default],data:function(){return{clip:null}},created:function(){this.clip=this.rhythmClip,this.renderWave()}};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(490),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(4)),l=n(i(24)),a=n(i(6)),r=n(i(110)),s=i(10),d=i(85),o=i(27);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var p={components:{bccSwitch:r.default},computed:f({},(0,s.mapState)(["rhythmEditObj","rhythmData","rhythmClip"]),{enableAuto:function(){return this.rhythmClip.orgDuration<d.MAX_AUDIO_DURATION}}),data:function(){return{btns:[{name:"节拍",type:2},{name:"重拍",type:3}]}},methods:f({},(0,s.mapMutations)(["updateRhythmEditData","setRhythmData"]),{hidePanel:function(){this.updateRhythmEditData({showDot:!1})},showPanel:function(){this.updateRhythmEditData({showDot:!0})},handleDot:function(t){t.stopPropagation(),this.rhythmEditObj.isBoundary||(this.rhythmEditObj.canDot?this.handleAddDot():this.handleDelete())},changeType:function(t){this.$LogReport.sendCustomEvent("editor_beat_type_click"),this.updateRhythmEditData({data:this.rhythmData.ai_data[t-2].markers,type:t,sectionData:this.rhythmData.sectionData.ai_data[t-2],selectedIdx:-1,operateIdx:-1}),this.$emit("validateCanDot")},handleDelete:function(){var t=this.rhythmEditObj,e=t.data,i=t.sectionData,n=t.selectedIdx,a=(0,l.default)(e),r=(0,l.default)(i);a.splice(n,1),r.splice(n,1),this.updateRhythmEditData({data:a,sectionData:r,selectedIdx:-1,canDot:!0})},handleAddDot:function(){var t=this.rhythmEditObj,e=t.canDot,i=t.scrollLeft,n=t.data,a=t.sectionData;if(e){var r=(0,l.default)(n),s=(0,l.default)(a),o=+(1e3*i/d.rulerTimeline.secondPx).toFixed(3),c=(0,d.searchInsert)(n,o);r.splice(c,0,o),s.splice(c,0,(0,d.getCurSectionTime)(o,100)),this.updateRhythmEditData({selectedIdx:c,canDot:!1,data:r,sectionData:s})}},fetchRhythmAiData:function(){var e,i,n,a;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u.default.awrap((0,o.fetchRhythmData)(this.rhythmClip.resource.resource_id));case 2:return e=t.sent,i=f({},this.rhythmData),n=[],(a=e.ai_data)&&(n.ai_data=a.map(function(t){return(0,d.calcSectionData)(t.markers,100)}),i.ai_data=a,i.sectionData=n,this.setRhythmData(i)),t.abrupt("return",a);case 8:case"end":return t.stop()}},null,this)},changeAuto:function(e){var i,n,a,r,s,o,c;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$LogReport.sendCustomEvent("editor_automatic_beat_click"),i=this.rhythmData,n=i.ai_data,a=i.man_data,r=i.sectionData,s=this.rhythmEditObj.type,o=[],c=[],!e){t.next=21;break}if(n.length){t.next=10;break}return t.next=9,u.default.awrap(this.fetchRhythmAiData());case 9:n=t.sent;case 10:if(!n){t.next=16;break}1===s&&(s=3),o=n[s-2].markers,c=r.ai_data[s-2],t.next=19;break;case 16:return this.$message({text:"踩点计算中，请稍后再试",type:"warning"}),this.updateRhythmEditData({auto:!1}),t.abrupt("return");case 19:t.next=23;break;case 21:o=a[0]?a[0].markers:[],c=r.man_data[0]||[];case 23:this.updateRhythmEditData({data:o,auto:e,type:s,sectionData:c,selectedIdx:-1,operateIdx:-1}),this.$emit("validateCanDot");case 25:case"end":return t.stop()}},null,this)}})};e.default=p},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(493),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=i(85);function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var o={computed:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},(0,i(10).mapState)(["rhythmEditObj"]),{isOperatting:function(){var e=this;return function(t){return e.rhythmEditObj.showDotEdit&&t===e.rhythmEditObj.operateIdx}}}),methods:{getValue:function(t){var e=this.rhythmEditObj,i=e.selectedIdx,n=e.operateIdx;return this.isOperatting(t)?n+1:t===i?t+1:""},sacleFontSize:function(t){return t===this.rhythmEditObj.selectedIdx&&98<t},millisecToPx:function(t){return(0,r.millisecToPx)(t)},selectCur:function(t,e,i){i&&i.stopPropagation(),this.$emit("translateXSmooth",(0,r.millisecToPx)(t),t,e),this.$store.commit("updateRhythmEditData",{operateIdx:e,showDotEdit:!0,showDot:!1})}}};e.default=o},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(496),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(24)),a=n(i(6)),o=i(85),r=i(10);function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function u(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var l={props:["duration"],data:function(){return{scrollX:0,forwardTime:0,btns:[{name:"音乐踩点-左箭头",type:"backward",disabled:!1},{name:"音乐踩点-右箭头",type:"forward",disabled:!1},{name:"音乐踩点-白色删除",type:"delete",disabled:!1}],applyBtns:[{name:"向后应用",type:"back"},{name:"应用全部",type:"all"}]}},watch:{"rhythmEditObj.operateIdx":function(t){this.initDot(t)}},computed:u({},(0,r.mapState)(["rhythmEditObj"]),{moveDirection:function(){return this.forwardTime<0?"提前":"延后"},sacleFontSize:function(){return 98<this.rhythmEditObj.operateIdx}}),methods:u({},(0,r.mapMutations)(["updateRhythmEditData"]),{hidePanel:function(){this.updateRhythmEditData({showDotEdit:!1}),this.scrollX=0,this.forwardTime=0},initDot:function(t){var e=this.rhythmEditObj,i=e.scrollLeft,n=e.data;this.forwardTime=0,this.scrollX=i,this.checkBtnStatus(n[t],t)},checkBtnStatus:function(t,e){var i=this.rhythmEditObj.sectionData;if(0<e){var n=i[e-1][1];this.btns[0].disabled=t-50<=n}else this.btns[0].disabled=t-50<=0;if(this.rhythmEditObj.operateIdx<i.length-1){var a=i[e+1][0];this.btns[1].disabled=a<=t+50}else t+50>=this.duration?this.btns[1].disabled=!0:this.btns[1].disabled=!1},handleBackward:function(){this.btns[0].disabled||this.handleMoveDot(-50)},handleForward:function(){this.btns[1].disabled||this.handleMoveDot(50)},handleMoveDot:function(t){var e=this.rhythmEditObj,i=e.data,n=e.sectionData,a=e.operateIdx,r=i[a]+t,s=r/1e3*o.rulerTimeline.secondPx;i.splice(a,1,r),n.splice(a,1,(0,o.getCurSectionTime)(r,100)),this.scrollX=s,this.updateRhythmEditData({data:i,sectionData:n}),this.checkBtnStatus(r,a),this.forwardTime+=t,this.$emit("translate",r/1e3)},handleDelete:function(){var t=this.rhythmEditObj,e=t.data,i=t.sectionData,n=t.operateIdx,a=(0,s.default)(e),r=(0,s.default)(i);a.splice(n,1),r.splice(n,1),this.hidePanel(),this.updateRhythmEditData({showDotEdit:!1,showDot:!0,data:a,sectionData:r,selectedIdx:-1,operateIdx:-1,canDot:!0})},handleApplyAll:function(){var n=this;if(this.forwardTime){var a=this.rhythmEditObj.operateIdx,e=(0,s.default)(this.rhythmEditObj.data),r=[];e.forEach(function(t,e){var i=t+n.forwardTime;e!==a?i<n.duration&&i>=o.BOUNDARY&&r.push(t+n.forwardTime):r.push(t)});var t=r.findIndex(function(t){return t===e[a]}),i=(0,o.calcSectionData)(r,100);this.updateRhythmEditData({data:r,sectionData:i,operateIdx:t,selectedIdx:t}),this.forwardTime=0,this.checkBtnStatus(r[this.rhythmEditObj.operateIdx],this.rhythmEditObj.operateIdx)}},handleBackAll:function(){var i=this;if(this.forwardTime){var t=this.rhythmEditObj.operateIdx,e=this.rhythmEditObj.data.slice(t+1),n=this.rhythmEditObj.data.slice(0,t+1);e.forEach(function(t){var e=t+i.forwardTime;e<i.duration&&n.push(e)});var a=(0,o.calcSectionData)(n,100);this.updateRhythmEditData({data:n,sectionData:a}),this.forwardTime=0,this.checkBtnStatus(n[this.rhythmEditObj.operateIdx],t)}},handleBtn:function(t,e){switch(e.stopPropagation(),this.updateRhythmEditData({isPlaying:!1}),t){case"backward":this.handleBackward();break;case"forward":this.handleForward();break;case"delete":this.handleDelete();break;case"all":this.handleApplyAll();break;case"back":this.handleBackAll()}}})};e.default=l},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(499),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=n(i(4)),l=n(i(24)),a=n(i(6)),r=i(85),d=i(27),s=i(10);function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function f(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var c={props:["data","duration","scrollLeft"],computed:f({},(0,s.mapState)(["rhythmEditObj","rhythmData","rhythmClip"])),watch:{"rhythmEditObj.isPlaying":function(t){t||this.pause(),this.btns[1].show=t,this.btns[2].show=!t}},data:function(){return{rate:1,rates:[{key:1,name:1},{key:.75,name:.75},{key:.5,name:.5}],btns:[{icon:"音乐踩点-取消",type:"cancel",show:!0},{icon:"音乐踩点-暂停",type:"pause",show:!1},{icon:"音乐踩点-播放",type:"play",show:!0},{icon:"音乐踩点-完成",type:"save",show:!0}],audio:null,palyStatus:!1}},methods:f({},(0,s.mapMutations)(["setRhythmWaveData","setRhythmData","updateRhythmEditData","updataCacheRhythmDataList"]),{handleClick:function(t,e){switch(e.stopPropagation(),t){case"play":return this.play();case"pause":return this.pause();case"cancel":return this.cancel();case"save":return this.save()}},setAudio:function(){var t=this,e=this.$refs.audio;(this.audio=e).src=this.data.url,e.addEventListener("ended",function(){t.pause()})},changeRate:function(t){this.$LogReport.sendCustomEvent("editor_listening_speed_type_click"),this.audio.playbackRate=t},pause:function(){this.audio.pause(),this.updateRhythmEditData({isPlaying:!1})},play:function(){this.updateRhythmEditData({isPlaying:!0}),this.audio.currentTime=this.scrollLeft/r.rulerTimeline.secondPx,this.audio.play(),window.requestAnimationFrame(this.step)},step:function(){var t=this.audio.currentTime;1e6*t<this.duration&&this.rhythmEditObj.isPlaying&&(this.$emit("translateX",t),window.requestAnimationFrame(this.step))},cancel:function(){this.$LogReport.sendCustomEvent("editor_music_beat_cancel_click"),this.audio.pause(),this.$emit("close")},save:function(){var e,i,n,a,r,s,o,c;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$LogReport.sendCustomEvent("editor_music_beat_apply_click"),e=this.rhythmEditObj,i=e.type,n=e.data,a=e.auto,r=e.sectionData,s=this.rhythmClip.resource.resource_id,o=[],c=f({},this.rhythmData),a?[2,3].includes(i)&&((o=(0,l.default)(this.rhythmData.ai_data))[i-2]={markers:n},c.ai_data[i-2]={markers:n},c.sectionData.ai_data[i-2]=r):(i=1,o[0]={markers:n},c.man_data[0]={markers:n},c.sectionData.man_data[0]=r),c.edit_type=i,t.next=9,u.default.awrap((0,d.updateRhythmData)({type:String(i),newData:o,resource_id:String(s)}));case 9:this.setRhythmData(c),this.setRhythmWaveData({data:n,resource_id:s}),this.$Bus.$emit(this.$GLEventKey.RE_RENDER_AUDIO_WAVE,s),this.updataCacheRhythmDataList({resource_id:s,data:c}),this.$emit("close");case 14:case"end":return t.stop()}},null,this)}}),mounted:function(){this.setAudio()}};e.default=c},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(502),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={}},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(506),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1521)),r=n(i(624)),s=n(i(1527)),o={data:function(){return{}},components:{ControlBar:a.default,SeekBar:r.default,LiveWindow:s.default}};e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(508),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(106)),s=n(i(71)),o=n(i(84)),c=n(i(1522)),u=i(7),l={name:"live-window-ctrl",mixins:[r.default],components:{seekBar:o.default,PreviewModal:c.default},data:function(){return{sizes:[{title:"1:2",value:.5},{title:"2:1",value:2},{title:"1:1",value:1},{title:"4:3",value:4/3},{title:"3:4",value:.75},{title:"16:9",value:16/9},{title:"9:16",value:9/16}],showSelectSize:!1,showSelectSpeed:!1,liveWindowControlBarLock:!1,showPreviewDialog:!1}},computed:{sizeView:function(){var e=this,t=this.sizes.find(function(t){return t.value===e.$store.state.ratio});return t?t.title:"16:9"},_speed_:{get:function(){return parseFloat(this.$store.state.timelineSpeed.toFixed(1))},set:function(t){if(!this.$store.state.sdkAllLock){var e=parseFloat(t.toFixed(1));e<0&&(e=.1),this.$store.commit("updateTimelineSpeed",e),this.$BSSdk.changeTimelineSpeed(t).catch(function(t){console.error(t)})}}},_liveWindowPlaying_:function(){return!this.liveWindowControlBarLock&&this.liveWindowPlaying}},created:function(){this.$Bus.$on(this.$GLEventKey.GO_FORWARD_FRAME,this.forward5frame),this.$Bus.$on(this.$GLEventKey.GO_BACKWARD_FRAME,this.back5frame),this.$Bus.$on(this.$GLEventKey.GO_START_FRAME,this.backStart),this.$Bus.$on(this.$GLEventKey.GO_END_FRAME,this.forwardEnd),this.$Bus.$on(this.$GLEventKey.PAUSE_OR_PLAY,this.playLiveWindow),this.$Bus.$on(this.$GLEventKey.LOCK_MONITOR_CONTROL,this.lockMonitorControl),window.addEventListener("visibilitychange",this.pausePlayWindow)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.GO_FORWARD_FRAME,this.forward5frame),this.$Bus.$off(this.$GLEventKey.GO_BACKWARD_FRAME,this.back5frame),this.$Bus.$off(this.$GLEventKey.GO_START_FRAME,this.backStart),this.$Bus.$off(this.$GLEventKey.GO_END_FRAME,this.forwardEnd),this.$Bus.$off(this.$GLEventKey.PAUSE_OR_PLAY,this.playLiveWindow),this.$Bus.$off(this.$GLEventKey.LOCK_MONITOR_CONTROL,this.lockMonitorControl),window.removeEventListener("visibilitychange",this.pausePlayWindow)},methods:{startShowPreviewDialog:function(){this.$LogReport.sendCustomEvent("editor_big_screen_preview_click"),this.showPreviewDialog=!0},clickShowSelectSize:function(){this.$store.state.sdkAllLock||(this.showSelectSize=!this.showSelectSize)},clickShowSelectSpeed:function(){this.$store.state.sdkAllLock||(this.showSelectSpeed=!this.showSelectSpeed)},pausePlayWindow:function(){this.playLiveWindow(!1)},forward5frame:function(){var t=this.$store.state.currentTimelinePosition;this.$BSSdk.seekTimeline(t+1/this.$GL.FRAME*5*this.$GL.SECOND_CONVERT,!0)},forwardEnd:function(){this.$BSSdk.seekTimeline(this.$store.state.timelineDuration,!0)},backStart:function(){this.$BSSdk.seekTimeline(0,!0)},back5frame:function(){var t=this.$store.state.currentTimelinePosition;this.$BSSdk.seekTimeline(t-1/this.$GL.FRAME*5*this.$GL.SECOND_CONVERT,!0)},selectRatio:function(t){var n=this;if(!this.$store.state.sdkAllLock){this.$LogReport.sendCustomEvent("editor_frame_size_click");var e=this.$store.state.tripleStickerStatus.num;-1<["1:2","3:4","9:16","1:1"].indexOf(t)&&e?this.$confirm("指令一键三连目前仅在横屏展示，采用当前画幅会自动删除已设置的一键三连。",function(){var i=n.$store.state.allTracks[u.TrackOrder.indexOf(u.TrackTypes.TRIPLE)][0];i.clips.forEach(function(t,e){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(n.$BSSdk.removeStickerClip(i.raw,e,!0,!1,!0));case 2:case"end":return t.stop()}})}),n.$store.state.allTracks.splice(u.TrackOrder.indexOf(u.TrackTypes.TRIPLE),1),n.$Timeline.alignRaw(),n.$Bus.$emit(n.$GLEventKey.UPDATE_TRIPLE_STATUS),n.$BSSdk.changeVideoSize(t).catch(function(t){console.error(t)})},function(){}):this.$BSSdk.changeVideoSize(t).catch(function(t){console.error(t)})}},closeShowSelectSize:function(){this.showSelectSize=!1},closeShowSelectSpeed:function(){this.showSelectSpeed=!1},lockMonitorControl:function(t){this.liveWindowControlBarLock=t}},directives:{Clickoutside:s.default},watch:{showSelectSpeed:function(t){if(t)this.$LogReport.sendCustomEvent("editor_livewindow_speed_click");else{var e=0;e=this._speed_<=.5?0:.5<this._speed_&&this._speed_<=1?1:1<this._speed_&&this._speed_<=1.5?2:3,this.$LogReport.sendCustomEvent("editor_livewindow_speed_seek",e)}},liveWindowPlaying:function(t){if(!t){var e=this.$BSSdk.getCurrentEditClip();if(!e)return;this.$BSSdk.calculateClipInTimelinePosition(e,this.$store.state.currentTimelinePosition)&&this.$BSSdk.drawMonitorEdit()}}}};e.default=l},function(t,e,i){"use strict";i.r(e);var n=i(510),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1523)),s=n(i(624)),o={components:{PreviewModalControlBar:r.default,SeekBar:s.default},data:function(){return{visible:!1,width:1e3,height:700,top:0,titleHeight:60,controllerHeight:65,canvasBorderWidth:1e3,canvasBorderHeight:562,canvasWidth:"",canvasHeight:""}},watch:(0,a.default)({},"$store.state.ratio",function(){this.hideLiveWindow=!0,this.$BSSdk.stopContext(),this.calcCanvasSize()}),mounted:function(){var t=this;this.visible=!0,this.$nextTick(function(){t.initView()})},methods:{initView:function(){var t=window.innerHeight,e=window.innerWidth;this.canvasBorderHeight=this.canvasBorderWidth/(16/9),this.height=this.titleHeight+this.canvasBorderHeight+this.controllerHeight,e>=this.width&&t>=this.height?this.top=(t-this.height)/2:(this.height=t,this.width=16*(this.height-this.titleHeight-this.controllerHeight)/9,(e<this.width||t<this.height)&&(this.width=e,this.height=9*this.width/16+this.titleHeight+this.controllerHeight),this.canvasBorderWidth=this.width,this.canvasBorderHeight=this.canvasBorderWidth/(16/9)),this.calcCanvasSize(),this.$Bus.$emit(this.$GLEventKey.HIDE_EDIT_PANEL),this.initLiveWindow()},calcCanvasSize:function(){var t=this.$MonitorScreen.getRatioScreen({width:this.canvasBorderWidth,height:this.canvasBorderHeight},this.$store.state.ratio);this.canvasWidth=t.width,this.canvasHeight=t.height},initLiveWindow:function(){this.$BSSdk.createLiveWindow("preview-live-window",this.$BSSdk.timeline),this.$store.state.useOtherLiveWindow=!0},close:function(){this.$BSSdk.createLiveWindow(),this.$store.state.useOtherLiveWindow=!1,this.$emit("close")}}};e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(512),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(106)),r=n(i(71)),s=n(i(84)),o={name:"live-window-ctrl",mixins:[a.default],components:{seekBar:s.default},data:function(){return{sizes:[{title:"2:1",value:2},{title:"1:2",value:.5},{title:"4:3",value:4/3},{title:"3:4",value:.75},{title:"1:1",value:1},{title:"16:9",value:16/9},{title:"9:16",value:9/16}],showSelectSize:!1,showSelectSpeed:!1,liveWindowControlBarLock:!1,previewDialog:{show:!0,callback:function(){}}}},computed:{sizeView:function(){var e=this,t=this.sizes.find(function(t){return t.value===e.$store.state.ratio});return t?t.title:"16:9"},_speed_:{get:function(){return parseFloat(this.$store.state.timelineSpeed.toFixed(1))},set:function(t){if(!this.$store.state.sdkAllLock){var e=parseFloat(t.toFixed(1));e<0&&(e=.1),this.$store.commit("updateTimelineSpeed",e),this.$BSSdk.changeTimelineSpeed(t).catch(function(t){console.error(t)})}}},_liveWindowPlaying_:function(){return!this.liveWindowControlBarLock&&this.liveWindowPlaying}},created:function(){this.$Bus.$on(this.$GLEventKey.GO_FORWARD_FRAME,this.forward5frame),this.$Bus.$on(this.$GLEventKey.GO_BACKWARD_FRAME,this.back5frame),this.$Bus.$on(this.$GLEventKey.GO_START_FRAME,this.backStart),this.$Bus.$on(this.$GLEventKey.GO_END_FRAME,this.forwardEnd),this.$Bus.$on(this.$GLEventKey.PAUSE_OR_PLAY,this.playLiveWindow),this.$Bus.$on(this.$GLEventKey.LOCK_MONITOR_CONTROL,this.lockMonitorControl),window.addEventListener("visibilitychange",this.pausePlayWindow)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.GO_FORWARD_FRAME,this.forward5frame),this.$Bus.$off(this.$GLEventKey.GO_BACKWARD_FRAME,this.back5frame),this.$Bus.$off(this.$GLEventKey.GO_START_FRAME,this.backStart),this.$Bus.$off(this.$GLEventKey.GO_END_FRAME,this.forwardEnd),this.$Bus.$off(this.$GLEventKey.PAUSE_OR_PLAY,this.playLiveWindow),this.$Bus.$off(this.$GLEventKey.LOCK_MONITOR_CONTROL,this.lockMonitorControl),window.removeEventListener("visibilitychange",this.pausePlayWindow)},methods:{clickShowSelectSize:function(){this.$store.state.sdkAllLock||(this.showSelectSize=!this.showSelectSize)},clickShowSelectSpeed:function(){this.$store.state.sdkAllLock||(this.showSelectSpeed=!this.showSelectSpeed)},pausePlayWindow:function(){this.playLiveWindow(!1)},forward5frame:function(){var t=this.$store.state.currentTimelinePosition;this.$BSSdk.seekTimeline(t+1/this.$GL.FRAME*5*this.$GL.SECOND_CONVERT,!0)},forwardEnd:function(){this.$BSSdk.seekTimeline(this.$store.state.timelineDuration,!0)},backStart:function(){this.$BSSdk.seekTimeline(0,!0)},back5frame:function(){var t=this.$store.state.currentTimelinePosition;this.$BSSdk.seekTimeline(t-1/this.$GL.FRAME*5*this.$GL.SECOND_CONVERT,!0)},selectRatio:function(t){this.$store.state.sdkAllLock||(this.$LogReport.sendCustomEvent("editor_frame_size_click"),this.$BSSdk.changeVideoSize(t).catch(function(t){console.error(t)}))},closeShowSelectSize:function(){this.showSelectSize=!1},closeShowSelectSpeed:function(){this.showSelectSpeed=!1},lockMonitorControl:function(t){this.liveWindowControlBarLock=t}},directives:{Clickoutside:r.default},watch:{showSelectSpeed:function(t){if(t)this.$LogReport.sendCustomEvent("editor_livewindow_speed_click");else{var e=0;e=this._speed_<=.5?0:.5<this._speed_&&this._speed_<=1?1:1<this._speed_&&this._speed_<=1.5?2:3,this.$LogReport.sendCustomEvent("editor_livewindow_speed_seek",e)}},liveWindowPlaying:function(t){if(!t){var e=this.$BSSdk.getCurrentEditClip();if(!e)return;this.$BSSdk.calculateClipInTimelinePosition(e,this.$store.state.currentTimelinePosition)&&this.$BSSdk.drawMonitorEdit()}}}};e.default=o},function(t,e,i){},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(517),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a,r=n(i(6)),s={name:"live-window",mixins:[n(i(574)).default],data:function(){return{canvasId:this.$GL.LIVE_WINDOW_CANVAS_ID,hideLiveWindow:!1}},mounted:function(){var t=this;this.$nextTick(function(){t.resizeLiveWindow(t.$refs["live-window-container"],t.$refs["live-window"]),t.resetWorkflow()})},watch:(a={},(0,r.default)(a,"$store.state.ratio",function(){var t=this;this.hideLiveWindow=!0,this.$BSSdk.stopContext(),this.resizeLiveWindow(this.$refs["live-window-container"],this.$refs["live-window"]),this.resetWorkflow(),setTimeout(function(){t.hideLiveWindow=!1,t.$BSSdk.seekCurrentTimeline()},1e3)}),(0,r.default)(a,"$store.state.uiSize.monitorWidth",function(){var t=this;this.$nextTick(function(){t.resizeFlow()})}),(0,r.default)(a,"$store.state.uiSize.monitorHeight",function(){var t=this;this.$nextTick(function(){t.resizeFlow()})}),a),methods:{resizeFlow:function(){this.$BSSdk.stopContext(),this.resizeLiveWindow(this.$refs["live-window-container"],this.$refs["live-window"]),this.resetWorkflow()},resetWorkflow:function(){var t=this,e=this.$refs["live-window-container"],i=e.clientHeight,n=e.clientWidth,a=this.$refs["monitor-layer"],r=this.$MonitorScreen.getRatioScreen({width:n,height:i},this.$store.state.ratio);a.style.width=r.width+"px",a.style.height=r.height+"px",this.$nextTick(function(){t.$MonitorScreen.initStage("monitor-layer")})}}};e.default=s},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(521),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1532)),r={data:function(){return{guides:a.default,stepIndex:0,finished:!1,shouldGuide:!1}},created:function(){window.addEventListener("resize",this.renderGuide),this.$Bus.$on(this.$GLEventKey.EDITOR_READY_TO_WORK,this.checkGuide)},destroyed:function(){window.removeEventListener("resize",this.renderGuide),this.$Bus.$off(this.$GLEventKey.EDITOR_READY_TO_WORK,this.checkGuide)},computed:{step:function(){return this.guides[this.stepIndex]},hasNext:function(){return this.guides.length>this.stepIndex+1},showGuide:function(){return!this.finished&&this.shouldGuide}},methods:{checkGuide:function(){var t=this;this.key="guide-finished-".concat(this.$store.state.userInfo.mid),localStorage.getItem(this.key)||(this.shouldGuide=!0,this.$LogReport.sendCustomEvent("editor_guide_show"),this.$nextTick(function(){t.stepIndex=0,t.renderGuide()}))},finishGuide:function(){this.finished=!0,localStorage.setItem(this.key,!0)},drawDashLine:function(t,e,i,n,a,r){for(var s=void 0===r?5:r,o=n-e,c=a-i,u=Math.floor(Math.sqrt(o*o+c*c)/s),l=0;l<u;l++)l%2==0?t.moveTo(e+o/u*l,i+c/u*l):t.lineTo(e+o/u*l,i+c/u*l);t.stroke()},nextStep:function(){this.stepIndex++,this.renderGuide()},renderGuide:function(){if(this.showGuide){var t=this.guides[this.stepIndex];t.initPos();var e=this.$refs["guide-canvas"],i=document.body.clientWidth,n=document.body.clientHeight;e.width=i,e.height=n;var a=e.getContext("2d");a.fillStyle="rgba(0,0,0,0.5)",a.fillRect(0,0,i,n),a.fillStyle="rgba(0,0,0,0.1)",a.clearRect(t.left,t.top,t.right-t.left,t.bottom-t.top),a.fillRect(t.left,t.top,t.right-t.left,t.bottom-t.top),a.strokeStyle="#4388FF",a.lineWidth=2,this.drawDashLine(a,t.left,t.top,t.right,t.top),this.drawDashLine(a,t.right,t.top,t.right,t.bottom),this.drawDashLine(a,t.right,t.bottom,t.left,t.bottom),this.drawDashLine(a,t.left,t.bottom,t.left,t.top)}}}};e.default=r},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(525),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(4)),s=i(95),o=n(i(1536)),c=n(i(1538)),u=n(i(32)),l=n(i(1540)),d=n(i(105)),f=n(i(67));function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var v={mixins:[u.default],data:function(){return{products:[],sortType:1,searchStr:"",isSearching:!1,loading:!1,size:"16:9",projectName:"未命名项目",selectedVideo:null}},components:{PreviewVideo:l.default,ProductsSearchBox:o.default,ProductCard:c.default},mounted:function(){this.$LogReport.sendCustomEvent("home_user_works_click"),this.fetchList()},beforeRouteEnter:function(t,e,i){f.default.getters.showProductPage?i():i("/")},watch:{sortType:function(){this.pager.page=1,this.fetchList()},searchStr:(0,d.default)(function(){this.pager.page=1,this.fetchList()},300)},methods:{deleteProduct:function(e){var i=this;this.$LogReport.sendCustomEvent("home_works_delete_click"),this.$confirm("删除后无法恢复，确定要删除吗？",function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,r.default.awrap((0,s.deleteVideo)(e));case 3:return t.next=5,r.default.awrap(i.fetchList());case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),i.$message({text:t.t0.message||"删除失败,请重试",type:"error"});case 10:case"end":return t.stop()}},null,null,[[0,7]])},function(){})},renameProduct:function(i){var n=this;this.$LogReport.sendCustomEvent("home_works_rename_click"),this.$prompt("重命名",function(e){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n.$LogReport.sendCustomEvent("home_works_rename_confirm_click"),t.next=4,r.default.awrap((0,s.renameVideo)({video_id:i.video_id,video_title:e.toString()}));case 4:return t.next=6,r.default.awrap(n.fetchList());case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n.$message({text:t.t0.message||"重命名失败,请重试",type:"error"});case 11:case"end":return t.stop()}},null,null,[[0,8]])},function(){n.$LogReport.sendCustomEvent("home_works_rename_cancel_click")},{inputValue:i.title})},fetchList:function(){var e,i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.loading=!0,e=this.searchStr||"",i=0===this.sortType?"ctime":"mtime",n={page:this.pager.page,page_size:this.pager.pageSize,order:i},e&&(n.title=e),t.next=7,r.default.awrap((0,s.fetchVideoList)(n));case 7:a=t.sent,this.pager.total=a.total,this.products=(a.videos||[]).map(function(t){return h({},t,{selected:!1})}),this.searchStr?this.isSearching=!0:this.isSearching=!1,this.loading=!1;case 12:case"end":return t.stop()}},null,this)},previewVideo:function(t){this.selectedVideo=h({},t)}}};e.default=v},function(t,e,i){"use strict";i.r(e);var n=i(527),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"projects-search-box",props:["value"],data:function(){return{inputValue:this.value}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(530),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(15),a={name:"product-card",props:{product:{type:Object,default:function(){return{}}}},mounted:function(){this.resize(),window.addEventListener("resize",this.resize)},destroyed:function(){window.removeEventListener("resize",this.resize)},methods:{resize:function(){this.$refs.cover.style.height=9*this.$refs.cover.getBoundingClientRect().width/16+"px"},formatProductLastDateView:function(t){var e=new Date(t);return(0,n.formatDateView)(e)},openProduct:function(){this.$LogReport.sendCustomEvent("home_works_preview_click"),this.$emit("click")},downloadLog:function(){this.$LogReport.sendCustomEvent("home_works_download_click")},functionButtonLog:function(){this.$LogReport.sendCustomEvent("home_works_function_click")}}};e.default=a},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(533),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={data:function(){return{show:!1}},mounted:function(){this.show=!0,this.$nextTick(function(){var t="#app > div.home-wrap > div > div > div.preview-video.bs-dialog__wrap.bs-dialog__wrap-mask > div",e=document.querySelector(t).style;e.padding="18px 0px 0px 0px",e.borderBottomLeftRadius="0px",e.borderBottomRightRadius="0px";var i=document.querySelector("#app > div.home-wrap > div > div > div.preview-video.bs-dialog__wrap.bs-dialog__wrap-mask > div > div.bs-dialog__body").style;i.paddingBottom="0",i.lineHeight="0"})},beforeDestroy:function(){this.show=!1,document.removeEventListener("click",this.clickOutsideHide)},props:{video:{type:Object,default:function(){return null}}},methods:{listenHide:function(){document.addEventListener("click",this.clickOutsideHide)},clickOutsideHide:function(t){document.querySelector("#app > div.home-wrap > div > div > div.preview-video.bs-dialog__wrap.bs-dialog__wrap-mask > div").contains(t.target)||this.cancelPreview()},cancelPreview:function(){this.show=!1}}};e.default=n},function(t,e,i){},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(537),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"bs-icon",props:{name:String}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(540),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:["itemValue","value","disabled"],data:function(){return{selfModel:!1}},computed:{model:{get:function(){return void 0!==this.value?this.value:this.selfModel},set:function(t){void 0!==this.value?this.$emit("input",t):this.selfModel=t}},isChecked:function(){return"boolean"==typeof this.value?this.value:!!(this.value&&this.itemValue&&"indexOf"in this.value)&&-1<this.value.indexOf(this.itemValue)}}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(543),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"BsPagination",props:{theme:{default:"dark"},current:{type:Number,default:1},total:{type:Number,default:0},totalPage:{type:Number,default:0},pageSize:{type:Number,default:10},displayPageCount:{type:Number,default:5,validator:function(t){return 0<t}},showTotal:{type:Boolean,default:!1},showElevator:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},data:function(){return{innerCurrent:this.current,innerTotalPage:this.total?Math.ceil(this.total/this.pageSize):this.totalPage,elevatorValue:""}},computed:{totalText:function(){return"共"},totalPageText:function(){return"页"},totalUnitText:function(){return"个"},totalSeparatorText:function(){return"，"},jumpToText:function(){return"跳转至"},jumpToPageText:function(){return"页"},showPreviousButton:function(){return 1<this.innerCurrent},showNextButton:function(){return this.innerCurrent<this.innerTotalPage},pageList:function(){var t=[];t.push(this.getPageItem(1));var e=Math.floor((this.displayPageCount-1)/2),i=Math.floor(this.displayPageCount/2);if(2<this.innerCurrent-e&&t.push(this.getPageItem(-1,!0)),2<this.innerTotalPage)for(var n=Math.max(2,this.innerCurrent-e),a=Math.min(this.innerTotalPage-1,this.innerCurrent+i),r=n;r<=a;r++)t.push(this.getPageItem(r));return this.innerCurrent+i<this.innerTotalPage-1&&t.push(this.getPageItem(-2,!0)),1<this.innerTotalPage&&t.push(this.getPageItem(this.innerTotalPage)),t},previousClass:function(){return["bs-pagination-item","bs-pagination-previous",{disabled:this.disabled||this.innerCurrent<=1}]},nextClass:function(){return["bs-pagination-item","bs-pagination-next",{disabled:this.disabled||this.innerCurrent>=this.innerTotalPage}]},totalClass:function(){return["bs-pagination-total",{disabled:this.disabled}]},elevatorClass:function(){return["bs-pagination-elevator",{disabled:this.disabled}]}},watch:{current:function(t){this.innerCurrent=t},total:function(t){this.innerTotalPage=Math.ceil(t/this.pageSize),this.innerTotalPage<this.innerCurrent&&(this.innerCurrent=0===this.innerTotalPage?1:this.innerTotalPage)},totalPage:function(t){this.innerTotalPage=t}},methods:{getPageItem:function(t,e){var i=0<arguments.length&&void 0!==t?t:1,n=1<arguments.length?e:void 0,a=[];return n?a.push("bs-pagination-ellipsis"):a.push("bs-pagination-item"),this.disabled&&a.push("disabled"),this.innerCurrent===i&&a.push("selected"),{classList:a,isEllipsis:!!n,page:i}},setCurrent:function(t){t<1&&(t=1),t>this.innerTotalPage&&(t=this.innerTotalPage),this.innerCurrent!==t&&(this.innerCurrent=t,this.$emit("update:current",t),this.$emit("on-change",t,this.$el))},handleClickPrevious:function(){this.innerCurrent<=1||this.disabled||this.setCurrent(this.innerCurrent-1)},handleClickNext:function(){this.innerCurrent>=this.innerTotalPage||this.disabled||this.setCurrent(this.innerCurrent+1)},handleClickPage:function(t){if(!this.disabled)return t.isEllipsis?-1===t.page?void this.setCurrent(this.innerCurrent-this.displayPageCount):void this.setCurrent(this.innerCurrent+this.displayPageCount):void this.setCurrent(t.page)},handleJumpToPage:function(){var t=1*this.elevatorValue;t&&(t=Math.round(t),this.setCurrent(t)),this.elevatorValue=""}}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(546),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1659)),r=i(1660),s={name:"BsPopover",props:{placement:{type:String,default:"top",validator:function(t){return-1<["top","top-start","top-end","left","right","bottom","bottom-start","bottom-end"].indexOf(t)}},trigger:{type:String,default:"click",validator:function(t){return-1<["click","hover","focus"].indexOf(t)}},content:String,showArrow:{type:Boolean,default:!1},width:[String,Number],zIndex:Number,disabled:Boolean,value:Boolean,options:{type:Object,default:function(){return{}}},offset:{default:2},id:String,bodyStyle:{default:function(){return{}}}},data:function(){return{visible:!1,popperJS:null,reference:null,popperOptions:{computeStyle:{gpuAcceleration:!1},positionFixed:!0,modifiers:{offset:{offset:"".concat(this.offset,",").concat(this.offset)}}},appendedArrow:!1}},watch:{visible:function(t){t?(this.popperJS&&this.popperJS.enableEventListeners(),this.updatePopper()):this.popperJS&&this.popperJS.disableEventListeners(),this.$emit("input",t),t?this.$emit("show"):this.$emit("hide")},value:{immediate:!0,handler:function(t){this.visible=t}}},created:function(){var t=this.popperOptions,e=this.options;t=Object.assign(t,e),e.computeStyle&&e.computeStyle.hasOwnProperty("gpuAcceleration")?t.computeStyle.gpuAcceleration=("true"===e.computeStyle.gpuAcceleration.toString()||"false"===e.computeStyle.gpuAcceleration.toString())&&e.computeStyle.gpuAcceleration:t.computeStyle.gpuAcceleration=!1},mounted:function(){switch(this.reference=this.$slots.reference[0].elm,this.popper=this.$refs.popover||this.$slots.default[0].elm,this.trigger){case"click":(0,r.on)(this.reference,"click",this.toggle),(0,r.on)(document,"click",this.handleDocumentClick),(0,r.on)(document,"mouseup",this.handleDocumentClick);break;case"hover":(0,r.on)(this.reference,"mouseover",this.onMouseOver),(0,r.on)(this.popper,"mouseover",this.onMouseOver),(0,r.on)(this.reference,"mouseout",this.onMouseOut),(0,r.on)(this.popper,"mouseout",this.onMouseOut);break;case"focus":this.reference.querySelector("input, textarea")?((0,r.on)(this.reference,"focusin",this.show),(0,r.on)(this.reference,"focusout",this.close)):((0,r.on)(this.reference,"mousedown",this.show),(0,r.on)(this.reference,"mouseup",this.close))}},methods:{toggle:function(){this.visible=!this.visible,this.$emit("toggle",this.visible)},show:function(){this.visible=!0},close:function(){this.visible=!1,this.$emit("toggle",this.visible)},onMouseOver:function(){var t=this;clearTimeout(this._timer),this._timer=setTimeout(function(){t.show()},200)},onMouseOut:function(){var t=this;clearTimeout(this._timer),this._timer=setTimeout(function(){t.close()},200)},createPopper:function(){var t=this;this.popper&&this.reference&&this.$nextTick(function(){!t.$slots.default&&t.showArrow&&t.appendArrow(t.popper),t.popperOptions.placement=t.placement,t.popperOptions.onCreate=function(){t.$nextTick(t.updatePopper)},t.popperJS=new a.default(t.reference,t.popper,t.popperOptions)})},updatePopper:function(){this.popperJS?this.popperJS.scheduleUpdate():this.createPopper()},handleDocumentClick:function(t){this.$el&&this.reference&&!(0,r.elementContains)(this.$el,t.target)&&!(0,r.elementContains)(this.reference,t.target)&&this.popper&&!(0,r.elementContains)(this.popper,t.target||t.targetclassList.contains(this.id))&&(this.visible=!1,this.$emit("toggle",this.visible))},appendArrow:function(t){if(!this.appendedArrow){this.appendedArrow=!0;var e=document.createElement("div");e.setAttribute("x-arrow",""),e.className="popper__arrow",t.appendChild(e)}},destroy:function(){this.visible||(this.popperJS&&this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){(0,r.off)(this.reference,"click",this.toggle),(0,r.off)(this.reference,"mouseout",this.onMouseOut),(0,r.off)(this.reference,"mouseover",this.onMouseOver),(0,r.off)(document,"click",this.handleDocumentClick),(0,r.off)(this.reference,"focusin",this.show),(0,r.off)(this.reference,"focusout",this.close),(0,r.off)(this.reference,"mousedown",this.show),(0,r.off)(this.reference,"mouseup",this.close),(0,r.on)(document,"mouseup",this.handleDocumentClick),this.visible=!1,this.destroy()}},destroyed:function(){this.destroyPopper()}};e.default=s},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(549),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(142)),r=n(i(71)),s={name:"BsSelect",componentName:"BsSelect",mixins:[a.default],data:function(){return{selectedLabel:"",showMenu:!1,options:[],focused:!1}},provide:function(){return{select:this}},props:{value:{required:!0},disabled:Boolean,readonly:{type:Boolean,default:function(){return!0}},placeholder:{type:String,default:function(){return"请选择"}},width:{type:String,default:function(){return"150px"}},theme:{default:function(){return""}}},computed:{selectDisabled:function(){return this.disabled}},directives:{Clickoutside:r.default},watch:{value:function(t){this.updateLabel(),this.$emit("on-change",t)}},mounted:function(){this.$on("handleOptionClick",this.handleOptionSelect),this.$on("updateLabel",this.updateLabel),this.updateLabel()},methods:{updateLabel:function(){var e=this,t=this.options.find(function(t){return t.value===e.value});this.selectedLabel=t?t.displayLabel:""},toggleMenu:function(){this.selectDisabled||(this.showMenu=!this.showMenu)},handleClose:function(){this.showMenu=!1},handleOptionSelect:function(t){this.selectedLabel=t.displayLabel,this.$emit("input",t.value),this.handleClose()}}};e.default=s},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(552),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"BsOption",componentName:"BsOption",mixins:[n(i(142)).default],inject:["select"],props:{value:{required:!0},label:[String,Number]},computed:{itemSelected:function(){return this.select.value===this.value},displayLabel:function(){return this.label||this.value}},watch:{displayLabel:function(){this.dispatch("BsSelect","updateLabel")}},methods:{selectOptionClick:function(){this.dispatch("BsSelect","handleOptionClick",[this,!0])}},created:function(){this.select.options.push(this)}};e.default=a},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(555),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{hint:{type:String},pos:{default:"top"},type:{default:"dark"},offset:{default:"5"}},computed:{style:function(){return"light-hint"===this.type?{"background-color":"#000",padding:"2px 6px",color:"#eee","border-radius":"4px","font-size":"12px"}:{}},showArrow:function(){return"light-hint"!==this.type}}};e.default=n},function(t,e,i){"use strict";i.r(e);var n=i(557),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["tabs","tab"]}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(560),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["tabs","tab"]}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(563),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={name:"seek-bar",props:{min:{type:Number,default:0},max:{type:Number,default:1},value:{type:Number,required:!0},height:{type:Number,default:14},width:{type:Number,default:300},step:{type:Number,default:0},inlineColor:{type:String,default:"#4388FF"},outlineColor:{type:String,default:"#3C3E41"},ballColor:{type:String,default:"#ffffff"},ballCenterColor:{default:"#4388FF"},before:{default:""},after:{default:""},displayValue:{default:0}},data:function(){return{offsetX:0}},mounted:function(){this.initView()},watch:{value:function(t){if(this.step){var e=0;-1!==this.step.toString().indexOf(".")&&(e=this.step.toString().length-this.step.toString().indexOf(".")-1);var i=parseFloat(((this.offsetX+this.width)/this.width*(this.max-this.min)+this.min).toFixed(e));if((t=parseFloat(t.toFixed(e)))===i)return}this.initView()},min:function(){this.initView()},max:function(){this.initView()},step:function(){this.initView()},width:function(){this.initView()}},methods:{initView:function(){var t=this.$refs["seek-bar-wrap"].getBoundingClientRect().width;this.displayWidth=t||this.width,this.offsetX=(this.value-this.min)/(this.max-this.min)*this.width-this.width},startDrag:function(t){var a=this;t.preventDefault();var r=t.clientX,s=this.offsetX;document.onmousemove=function(t){var e=t.clientX-r,i=s+e;i<-a.width&&(i=-a.width),0<i&&(i=0),a.offsetX=i;var n=(a.offsetX+a.width)/a.width*(a.max-a.min)+a.min;a.$emit("input",n),a.$emit("seek",n)},document.onmouseup=function(){var t=(a.offsetX+a.width)/a.width*(a.max-a.min)+a.min;a.$emit("input",t),a.$emit("seek",t),a.$emit("seekend",t),document.onmousemove=document.onmouseup=null}},seekDirect:function(t){var e=this.$refs.outline.getBoundingClientRect().left,i=(t.clientX-e)/this.displayWidth*(this.max-this.min)+this.min;this.$emit("input",i),this.$emit("seek",i),this.$emit("seekend",i)}}};e.default=n},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(566),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={props:["value","tabs"],methods:{switchTab:function(t){this.$emit("input",t),this.$emit("switchTab",t)}}}},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(569),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(142)),r=n(i(71)),s={name:"BsSelect",componentName:"BsSelect",mixins:[a.default],data:function(){return{selectedLabel:"",showMenu:!1,options:[],focused:!1}},provide:function(){return{select:this}},props:{value:{required:!0},disabled:Boolean,readonly:{type:Boolean,default:function(){return!0}},placeholder:{type:String,default:function(){return"请选择"}},width:{type:String,default:function(){return"150px"}},theme:{default:function(){return""}}},computed:{selectDisabled:function(){return this.disabled}},directives:{Clickoutside:r.default},watch:{value:function(t){this.updateLabel(),this.$emit("on-change",t)}},mounted:function(){this.$on("handleOptionClick",this.handleOptionSelect),this.$on("updateLabel",this.updateLabel),this.updateLabel()},methods:{updateLabel:function(){var e=this,t=this.options.find(function(t){return t.value===e.value});this.selectedLabel=t?t.displayLabel:""},toggleMenu:function(){this.selectDisabled||(this.showMenu=!this.showMenu)},handleClose:function(){this.showMenu=!1},handleOptionSelect:function(t){this.selectedLabel=t.displayLabel,this.$emit("input",t.value),this.handleClose()}}};e.default=s},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(572),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e.default=a.a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={name:"BsOption",componentName:"BsOption",mixins:[n(i(142)).default],inject:["select"],props:{value:{required:!0},label:[String,Number]},computed:{itemSelected:function(){return this.select.value===this.value},displayLabel:function(){return this.label||this.value}},watch:{displayLabel:function(){this.dispatch("BsSelect","updateLabel")}},methods:{selectOptionClick:function(){this.dispatch("BsSelect","handleOptionClick",[this,!0])}},created:function(){this.select.options.push(this)}};e.default=a},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={methods:{resizeLiveWindow:function(t,e){var i=t.clientHeight,n=t.clientWidth,a=this.$MonitorScreen.getRatioScreen({width:n,height:i},this.$store.state.ratio);n=a.width,i=a.height,e.style.height=i+"px",e.style.width=n+"px",e.height=i*(window.devicePixelRatio||1),e.width=n*(window.devicePixelRatio||1)}}};e.default=n},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){t.exports=i.p+"assets/icon_google.4305e7b.png"},function(t,e,i){t.exports=i.p+"assets/360-browser-params.efc04e5.png"},,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function a(t){if("undefined"!=typeof window){"string"==typeof(t=t||{})&&(t={text:t});var e=0;e=0===c.length?16:c[c.length-1].$el.offsetTop+c[c.length-1].$el.offsetHeight+16,t.verticalOffset=e;var i=new o({data:t});i.$mount(),document.body.appendChild(i.$el),i.visible=!0,i.onClose=function(){c.shift()},c.push(i)}}var r=n(i(47)),s=n(i(1126)),o=r.default.extend(s.default),c=[];e.default=a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.getUserInfo=function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.get("https://api.bilibili.com/x/web-interface/nav"));case 1:case"end":return t.stop()}})},e.uploadAuth=function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.get("https://member.bilibili.com/x/web/archive/pre").then(function(t){var e=t.myinfo,i=e.banned,n=e.identify_check;return i?(o.default.sendCustomEvent("editor_account_closure_tip_show"),Promise.reject(new Error("您的帐号已被禁用，无法使用投稿！"))):0!==n.code?(o.default.sendCustomEvent("editor_real_name_tip_show"),Promise.reject(new Error("您尚未完成实名认证，无法使用投稿!"))):""}));case 1:case"end":return t.stop()}})},e.editorGray=function(){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s.default.get("/studio/video-editor-interface/video-editor/gray").then(function(t){return t.gray}));case 1:case"end":return t.stop()}})},e.logoutV2=function(){var e;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.default.awrap(s.default.post("//passport.bilibili.com/login/exit/v2",{biliCSRF:(0,s.getCookie)("bili_jct")}));case 2:(e=t.sent).redirectUrl?window.location.href=e.redirectUrl:window.location.href="//passport.bilibili.com/login";case 4:case"end":return t.stop()}})};var r=a(i(4)),s=n(i(53)),o=a(i(93))},,,,,,,,,,,,,function(t,e,i){t.exports=i.p+"assets/项目为空.07d47b7.png"},function(t,e,i){"use strict";i.r(e);var n=i(692),a=i(195);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1249);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"fff6d0e8",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(781),a=i(221);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1274);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"e961cc3c",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(714),a=i(284);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1310);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"654f627f",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(756),a=i(300);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1317);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"65e841a0",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(764),a=i(314);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1324);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"08a5b9ef",null);e.default=o.exports},,,,,,,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=null,a=null,n={globalLoading:function(t,e,i){var n=!(2<arguments.length&&void 0!==i)||i;if(t){o&&document.body.removeChild(o),(o=document.createElement("div")).setAttribute("id","global_loading"),n||(o.style.background="#ffffff"),document.body.appendChild(o);var a=document.createElement("div");a.setAttribute("class","loading-wrap"),o.appendChild(a);var r=document.createElement("div");if(r.setAttribute("class","loading-icon"),a.appendChild(r),e){var s=document.createElement("div");s.setAttribute("class","loading-text"),a.appendChild(s),s.innerHTML=e}}else o&&(document.body.removeChild(o),o=null)},globalError:function(t,e){if(t){a&&document.body.removeChild(a),(a=document.createElement("div")).setAttribute("id","global_error"),a.setAttribute("style","cursor: pointer;"),document.body.appendChild(a);var i=document.createElement("div");i.setAttribute("class","loading-wrap"),a.appendChild(i);var n=document.createElement("div");n.setAttribute("class","loading-text"),i.appendChild(n),n.innerHTML=e,a.addEventListener("click",function(){location.reload()})}else a&&(document.body.removeChild(a),a=null)},install:function(t){t.prototype.$globalLoading=this.globalLoading,t.prototype.$globalError=this.globalError}};e.default=n},,,,,function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"particle-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:{border:"border"===e.type,disabled:e.disabled,second:"second"===e.type,"second-border":"second-border"===e.type},attrs:{disabled:e.disabled},on:{click:function(t){return t.stopPropagation(),e.$emit("click")}}},[e._t("default")],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("svg",{class:"icon-sprite icon-sprite-"+e.name,on:{click:function(t){return e.$emit("click",t)},mousedown:function(t){return e.$emit("mousedown",t)}}},[i("use",{attrs:{"xlink:href":"#icon-"+e.name}})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var s=this,t=s.$createElement,e=s._self._c||t;return e("span",{staticClass:"bs-checkbox",class:{"is-disabled":s.disabled}},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.model,expression:"model"}],attrs:{type:"checkbox",disabled:s.disabled,autocomplete:"off"},domProps:{value:s.itemValue,checked:Array.isArray(s.model)?-1<s._i(s.model,s.itemValue):s.model},on:{keydown:function(t){t.stopPropagation()},change:function(t){var e=s.model,i=t.target,n=!!i.checked;if(Array.isArray(e)){var a=s.itemValue,r=s._i(e,a);i.checked?r<0&&(s.model=e.concat([a])):-1<r&&(s.model=e.slice(0,r).concat(e.slice(r+1)))}else s.model=n}}}),s._v(" "),e("bs-icon",{staticClass:"check-icon",attrs:{name:"勾"}}),s._v(" "),e("span",{staticClass:"label"},[s._t("default")],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement;return(this._self._c||t)("bs-popover",{attrs:{placement:this.pos,trigger:"hover",content:this.hint,offset:this.offset,zIndex:10,showArrow:this.showArrow,type:this.type,bodyStyle:this.style}},[this._t("default",null,{slot:"reference"})],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("ul",{staticClass:"tab-head"},i._l(i.tabs,function(e){return n("li",{key:e.name,class:{active:i.tab===(e.key||e.name)},on:{click:function(t){return i.$emit("switch",e)}}},[i._v("\n    "+i._s(e.name)+"\n  ")])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("ul",{staticClass:"sub-tab"},i._l(i.tabs,function(e,t){return n("li",{key:e.name,class:{active:i.tab===(e.key||e.name),gap:0!==t},on:{click:function(t){return i.$emit("switch",e)}}},[i._v("\n    "+i._s(e.name)+"\n  ")])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"tab-buttons"},i._l(i.tabs,function(e,t){return n("button",{key:t,class:{active:e.key===i.value},on:{click:function(t){return i.switchTab(e.key)}}},[i._v("\n    "+i._s(e.name)+"\n  ")])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("transition",{attrs:{name:"bs-message-fade"},on:{"after-leave":t.handleAfterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["bs-message",t.type?"bs-message--"+t.type:"",t.showClose?"is-closable":"",t.customClass],style:{top:t.verticalOffset+"px"},attrs:{role:"alert"},on:{mouseenter:t.clearTimer,mouseleave:t.startTimer}},[t._t("default",[t.dangerouslyUseHTMLString?i("p",{staticClass:"bs-message__content",domProps:{innerHTML:t._s(t.text)}}):i("p",{staticClass:"bs-message__content"},[t._v("\n        "+t._s(t.text)+"\n      ")])])],2)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],class:{"bs-select-light":!0,disabled:e.disabled,dark:"dark"===e.theme},style:"width: "+e.width+";",on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[i("div",{staticClass:"bs-select-light-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedLabel,expression:"selectedLabel"}],ref:"reference",staticClass:"bs-select-light-input-inner",class:{"is-focus":e.showMenu},attrs:{type:"text",placeholder:e.placeholder,readonly:e.readonly,"validate-event":!1,autocomplete:"off"},domProps:{value:e.selectedLabel},on:{keydown:function(t){t.stopPropagation()},input:function(t){t.target.composing||(e.selectedLabel=t.target.value)}}}),e._v(" "),e.showMenu?i("bs-icon",{attrs:{name:"收起"}}):i("bs-icon",{attrs:{name:"展开"}})],1),e._v(" "),i("transition",{attrs:{name:"bs-select-light-zoom-in-top"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"bs-select-light-list-wrap"},[i("ul",{staticClass:"bs-select-light-option-list"},[e._t("default")],2)])])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"home-wrap"},[e("home-header",{staticClass:"home-header"},[e("router-link",{attrs:{to:"/projects"}},[this._v("我的项目")])],1),this._v(" "),e("div",{staticClass:"home-body"},[e("router-view")],1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"projects-wrap"},[n("div",{staticClass:"nav"},[n("h3",{staticClass:"tab",class:{"tab-active":i.showProductPage}},[n("router-link",{attrs:{to:"/projects"}},[i._v("我的项目")])],1),i._v(" "),i.showProductPage?n("h3",{staticClass:"tab"},[n("router-link",{attrs:{to:"/products"}},[i._v("我的作品")])],1):i._e()]),i._v(" "),i.isSearching||i.projects.length?n("div",{staticClass:"projects-operator"},[n("bs-select-light",{model:{value:i.sortType,callback:function(t){i.sortType=t},expression:"sortType"}},[n("bs-option-light",{attrs:{value:0,label:"按创建时间"}}),i._v(" "),n("bs-option-light",{attrs:{value:1,label:"按修改时间"}})],1),i._v(" "),n("projects-search-box",{staticClass:"gap",model:{value:i.searchStr,callback:function(t){i.searchStr=t},expression:"searchStr"}})],1):i._e(),i._v(" "),i.projects.length?n("div",{ref:"projects-list",staticClass:"projects-list"},[n("project-add-card",{staticClass:"list-item",nativeOn:{click:function(t){return i.handleAddProject(t)}}}),i._v(" "),i._l(i.projects,function(e){return n("project-card",{key:e.project_id,staticClass:"list-item",attrs:{project:e},on:{click:function(t){return i.openProject(e.project_id)},del:function(t){return i.deleteProject(e.project_id)},copy:function(t){return i.copyProject(e.project_id)}}})})],2):i._e(),i._v(" "),i.isSearching&&!i.projects.length?n("div",{staticClass:"search-empty"},[n("img",{attrs:{src:a(623),alt:"空空如也"}}),i._v(" "),n("span",[i._v("搜索结果为空")])]):i._e(),i._v(" "),i.isSearching||i.projects.length||i.loading?i._e():n("div",{staticClass:"empty"},[n("img",{attrs:{src:a(623),alt:"空空如也"}}),i._v(" "),n("div",{staticClass:"title"},[i._v("开始创建第一个视频吧~")]),i._v(" "),n("div",{staticClass:"desc"},[i._v("创作也许没那么难，只要你迈出第一步！")]),i._v(" "),n("div",{staticClass:"create-project-btn",on:{click:function(t){return i.$store.commit("showCreateProject",!0)}}},[n("span",[i._v("开始创建新项目")]),i._v(" "),n("bs-icon",{attrs:{name:"按钮进入"}})],1)]),i._v(" "),i.pager.total>i.pager.pageSize?n("div",{staticClass:"pagination-wrap"},[n("bs-pagination",{staticClass:"bs-pagination",attrs:{theme:"light",total:i.pager.total,current:i.pager.page,"page-size":i.pager.pageSize,"show-total":!0,"show-elevator":!0},on:{"on-change":i.pageChange}})],1):i._e(),i._v(" "),i.$store.state.createProjectModal?n("project-add-modal"):i._e()],1)}var n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"bs-option",class:{selected:e.itemSelected},on:{click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.displayLabel))])])],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement;return(this._self._c||t)("h3",[this._v("404")])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("li",{staticClass:"bs-option",class:{selected:e.itemSelected},on:{click:function(t){return t.stopPropagation(),e.selectOptionClick(t)}}},[e._t("default",[i("span",[e._v(e._s(e.displayLabel))])])],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],class:{"bs-select":!0,disabled:e.disabled,dark:"dark"===e.theme},style:"width: "+e.width+";",on:{click:function(t){return t.stopPropagation(),e.toggleMenu(t)}}},[i("div",{staticClass:"bs-select-input-wrap"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedLabel,expression:"selectedLabel"}],ref:"reference",staticClass:"bs-select-input-inner",class:{"is-focus":e.showMenu},attrs:{type:"text",placeholder:e.placeholder,readonly:e.readonly,"validate-event":!1,autocomplete:"off"},domProps:{value:e.selectedLabel},on:{keydown:function(t){t.stopPropagation()},input:function(t){t.target.composing||(e.selectedLabel=t.target.value)}}}),e._v(" "),e.showMenu?i("bs-icon",{attrs:{name:"收起"}}):i("bs-icon",{attrs:{name:"展开"}})],1),e._v(" "),i("transition",{attrs:{name:"bs-select-zoom-in-top"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.showMenu,expression:"showMenu"}],staticClass:"bs-select-list-wrap"},[i("ul",{staticClass:"bs-select-option-list"},[e._t("default")],2)])])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("span",[i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&t.visible,expression:"!disabled && visible"}],ref:"popover",staticClass:"bs-popover",style:Object.assign({},{width:t.width+"px","z-index":t.zIndex,padding:this.$slots.default?"0px":"10px",background:t.$slots.default?"transparent":"#000"},t.bodyStyle)},[t._t("default",[t._v(t._s(t.content))])],2)]),t._v(" "),t._t("reference")],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("ul",{staticClass:"bs-pagination",class:[i.theme]},[n("li",{class:i.previousClass,on:{click:i.handleClickPrevious}},[n("bs-icon",{attrs:{name:"向左"}})],1),i._v(" "),i._l(i.pageList,function(e){return n("li",{key:e.page,class:e.classList,on:{click:function(t){return i.handleClickPage(e)}}},[n("a",[i._v(i._s(e.isEllipsis?"⋯":e.page))])])}),i._v(" "),n("li",{class:i.nextClass,on:{click:i.handleClickNext}},[n("bs-icon",{attrs:{name:"按钮进入"}})],1),i._v(" "),i.showTotal||i.showElevator?n("li",{staticClass:"bs-pagination-extra"},[i.showTotal?n("div",{class:i.totalClass},[i._v("\n      "+i._s(i.totalText)+i._s(i.innerTotalPage)+i._s(i.totalPageText)+i._s(i.showElevator?i.totalSeparatorText:"")+"\n    ")]):i._e(),i._v(" "),i.showElevator?n("div",{class:i.elevatorClass},[i._v("\n      "+i._s(i.jumpToText)+"\n      "),n("input",{directives:[{name:"model",rawName:"v-model",value:i.elevatorValue,expression:"elevatorValue"}],attrs:{type:"text",autocomplete:"off",spellcheck:"false",disabled:i.disabled},domProps:{value:i.elevatorValue},on:{keyup:function(t){return!t.type.indexOf("key")&&i._k(t.keyCode,"enter",13,t.key,"Enter")?null:i.handleJumpToPage(t)},keydown:function(t){t.stopPropagation()},input:function(t){t.target.composing||(i.elevatorValue=t.target.value)}}}),i._v("\n      "+i._s(i.jumpToPageText)+"\n    ")]):i._e()]):i._e()],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"editor-wrap",staticClass:"editor-wrap",on:{dragenter:function(t){return t.stopPropagation(),e.dragenter(t)},dragover:function(t){return t.stopPropagation(),t.preventDefault()},dragleave:function(t){return t.preventDefault()},mouseleave:function(t){return e.dragleave()},drop:function(t){return t.stopPropagation(),e.drop(t)}}},[i("editor-header",{staticClass:"editor-header"}),e._v(" "),i("div",{staticClass:"main"},[i("sidebar",{attrs:{panels:e.panels,active:e.activePanel},on:{switch:e.switchPanel,resize:e.setViewSize}}),e._v(" "),i("div",{staticClass:"right"},[i("div",{ref:"center",staticClass:"center",style:{height:e.$store.state.uiSize.panelContentHeight+"px"}},[i("resources",{staticClass:"resources",attrs:{active:e.activePanel}}),e._v(" "),i("monitor",{staticClass:"monitor"})],1),e._v(" "),i("timeline",{ref:"timeline",staticClass:"timeline",style:{height:e.$store.state.uiSize.panelContentHeight+"px"}}),e._v(" "),i("rhythm")],1)],1),e._v(" "),i("guide")],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":e.afterEnter,"after-leave":e.afterLeave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],class:["bs-dialog__wrap",{"bs-dialog__wrap-mask":e.mask}],on:{click:function(t){return e.maskHandle(t)}}},[i("div",{class:["bs-dialog",e.customClass],style:e.style,on:{click:function(t){t.stopPropagation()}}},[e.$slots.title||e.title?i("div",{staticClass:"bs-dialog__header"},[e._t("title",[i("span",{staticClass:"bs-dialog__title"},[e._v(e._s(e.title))])])],2):e._e(),e._v(" "),e.$slots.default||e.text?i("div",{staticClass:"bs-dialog__body"},[e._t("default",[i("div",{domProps:{innerHTML:e._s(e.text)}})])],2):e._e(),e._v(" "),e.onClose||e.onOk||e.$slots.footer?i("div",{staticClass:"bs-dialog__footer"},[e._t("footer",[e.cancelFirst?e._e():i("a",[i("bs-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v(e._s(e.confirmBtnText))]),e._v(" "),e.showCancel?i("bs-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"second"},on:{click:e.close}},[e._v(e._s(e.cancelBtnText))]):e._e()],1),e._v(" "),e.cancelFirst?i("a",[e.showCancel?i("bs-button",{attrs:{type:"primary"},on:{click:e.close}},[e._v(e._s(e.cancelBtnText))]):e._e(),e._v(" "),i("bs-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"second"},on:{click:e.ok}},[e._v(e._s(e.confirmBtnText))])],1):e._e()])],2):e._e()])])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"products-wrap"},[n("div",{staticClass:"nav"},[n("h3",{staticClass:"tab"},[n("router-link",{attrs:{to:"/projects"}},[i._v("我的项目")])],1),i._v(" "),n("h3",{staticClass:"tab tab-active"},[n("router-link",{attrs:{to:"/products"}},[i._v("我的作品")])],1)]),i._v(" "),n("div",{staticClass:"products-operator"},[n("bs-select-light",{model:{value:i.sortType,callback:function(t){i.sortType=t},expression:"sortType"}},[n("bs-option-light",{attrs:{value:1,label:"按修改时间"}})],1),i._v(" "),n("products-search-box",{staticClass:"gap",model:{value:i.searchStr,callback:function(t){i.searchStr=t},expression:"searchStr"}})],1),i._v(" "),i.products.length?n("div",{staticClass:"products-list"},i._l(i.products,function(e){return n("product-card",{key:e.video_id,staticClass:"list-item",attrs:{product:e},on:{click:function(t){return i.previewVideo(e)},del:function(t){return i.deleteProduct(e.video_id)},rename:function(t){return i.renameProduct(e)}}})}),1):i._e(),i._v(" "),i.products.length?i._e():n("div",{staticClass:"search-empty"},[n("img",{attrs:{src:a(623),alt:"空空如也"}}),i._v(" "),i.isSearching?n("span",[i._v("搜索结果为空")]):n("span",[i._v("当前作品列表为空")])]),i._v(" "),i.selectedVideo?n("preview-video",{attrs:{video:i.selectedVideo},on:{cancel:function(t){i.selectedVideo=null}}}):i._e(),i._v(" "),i.pager.total>i.pager.pageSize?n("div",{staticClass:"pagination-wrap"},[n("bs-pagination",{staticClass:"bs-pagination",attrs:{theme:"light",total:i.pager.total,current:i.pager.page,"page-size":i.pager.pageSize,"show-total":!0,"show-elevator":!0},on:{"on-change":i.pageChange}})],1):i._e()],1)}var n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("bs-dialog",{attrs:{visible:i.visible,bodyStyle:{padding:"20px",paddingBottom:"4px",width:"356px",background:"#090A0B",border:"1px solid #252526"}},on:{"update:visible":function(t){i.visible=t}}},[n("div",{staticClass:"title"},[i._v("\n    以下直播素材即将过期，使用该素材的项目也将同步丢失素材。请尽快提交稿件哦~\n  ")]),i._v(" "),n("ul",i._l(i.expireTitles,function(t,e){return n("li",{key:e},[i._v(i._s(t))])}),0),i._v(" "),n("div",{staticClass:"operation"},[n("bs-button",{staticClass:"btn-known",on:{click:i.confirm}},[i._v("我知道了")]),i._v(" "),n("bs-checkbox",{staticClass:"checkbox",attrs:{itemValue:1},model:{value:i.options,callback:function(t){i.options=t},expression:"options"}},[i._v("不再提示此类过期信息")])],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{attrs:{id:"b-root"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!this.isEquipmentSupport,expression:"!this.isEquipmentSupport"}],attrs:{id:"b-equipment"}},[n("img",{attrs:{src:a(1107)}}),i._v(" "),n("div",{staticClass:"equipment-title"},[i._v("您的系统暂不支持，请在桌面系统下使用谷歌浏览器")]),i._v(" "),n("div",{staticClass:"equipment-sub-title"},[i._v("\n        "+i._s("支持的系统：Windows、macOS、Linux")+"\n      ")])]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:!this.isBrowserSupport,expression:"!this.isBrowserSupport"}],attrs:{id:"b-n-browser"}},[n("img",{attrs:{src:a(1108)}}),i._v(" "),n("div",{staticClass:"n-browser-title"},[i._v("暂不支持当前浏览器，请复制页面链接在以下新版本浏览器中打开")]),i._v(" "),n("div",{staticClass:"n-browser-desc"},i._l(i.recommendData,function(t,e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"item.isShow"}],key:e,staticClass:"n-browser-sub-show"},[n("img",{attrs:{src:t.icon}}),i._v(" "),n("div",{staticClass:"recommend-to",on:{click:function(t){return i.goRecommendUrl(e)}}},[i._v(i._s(t.message))])])}),0)]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:this.isBrowserSupport,expression:"this.isBrowserSupport"}],attrs:{id:"b-y-browser"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!this.isBrowserVersionSupport,expression:"!this.isBrowserVersionSupport"}],staticClass:"y-browser-version"},[n("img",{attrs:{src:a(1109)}}),i._v(" "),n("div",{staticClass:"update-title"},[i._v("\n          "+i._s("当前浏览器版本不支持,请升级到最新的 "+i.isBrowserVersionSubTitle+" 浏览器"+(i.is360?",并切换到极速模式下":""))+"\n        ")]),i._v(" "),n("img",{staticStyle:{"margin-top":"31px"},attrs:{src:this.isBrowserVersionIcon}}),i._v(" "),n("div",{staticClass:"update-to",on:{click:function(t){return i.toUpdate(i.isBrowserVersionUpdateUrl)}}},[i._v("\n          "+i._s(this.isBrowserVersionTitle)+"\n        ")])]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:this.isBrowserVersionSupport&&!this.isBrowserParamsSupport,expression:"this.isBrowserVersionSupport && !this.isBrowserParamsSupport"}],staticClass:"browser-params"},[n("div",{staticClass:"params-re-chrome"},[n("div",{staticClass:"re-params-title"},[i._v("浏览器环境出现不兼容，推荐您使用最新版本的谷歌浏览器")]),i._v(" "),n("img",{staticStyle:{"margin-top":"31px"},attrs:{src:a(606)}}),i._v(" "),i._m(0),i._v(" "),n("div",{staticClass:"re-params-no-info"},[i._v("错误说明："+i._s((this.isSupportSharedArrayBuffer()?"":"不支持SharedArrayBuffer")+(this.isSupportWebAssembly()?"":"不支持WebAssembly")+(this.isSupportWebGL()?"":"不支持WebGL")))])])])])])}var n=[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"https://www.google.cn/chrome/browser/desktop/index.html",target:"_blank"}},[e("div",{staticClass:"re-params-to"},[this._v("谷歌")])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"home-header-wrap"},[i("div",[e._m(0),e._v(" "),i("div",{staticClass:"center"},[i("videos-uat")],1),e._v(" "),i("div",{staticClass:"right"},[i("div",{staticClass:"head-wrapper"},[i("a",{attrs:{href:"//space.bilibili.com/"+e.userInfo.mid,target:"_blank"}},[i("div",{staticClass:"face",style:"background-image: url('"+e.userInfo.face+"')"})]),e._v(" "),i("div",{staticClass:"drop-down"},[i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goCreateCenter(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"创作中心"}}),e._v(" "),i("span",[e._v("创作中心")])],1),e._v(" "),i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goUploadManager(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"稿件管理"}}),e._v(" "),i("span",[e._v("稿件管理")])],1),e._v(" "),i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.clickLogout(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"登出"}}),e._v(" "),i("span",[e._v("登出")])],1)])]),e._v(" "),i("div",{staticClass:"more-wrapper"},[i("bs-icon",{attrs:{name:"更多"}}),e._v(" "),i("ul",{staticClass:"drop-down"},[i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goUpdateRecords(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"更新记录"}}),e._v(" "),i("span",[e._v("更新记录")])],1),e._v(" "),i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goContactService(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"联系客服"}}),e._v(" "),i("span",[e._v("联系客服")])],1)])],1)])])])}var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"."}},[e("div",{staticClass:"left"},[e("img",{attrs:{src:i(1222),alt:"bilibili studio"}}),this._v(" "),e("h3",[this._v("bilibili云剪辑")])])])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"projects-search-box-wrap"},[i("bs-icon",{staticClass:"search-icon",attrs:{name:"搜索放大镜"}}),e._v(" "),i("label",{staticClass:"search-input",attrs:{for:"projects-search"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],attrs:{type:"text",autocomplete:"off",id:"projects-search",placeholder:"输入项目名称进行搜索"},domProps:{value:e.inputValue},on:{keydown:function(t){t.stopPropagation()},input:[function(t){t.target.composing||(e.inputValue=t.target.value)},function(t){return e.$emit("input",e.inputValue)}]}})])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"timeline-wrap"},[i("operation-bar",{ref:"op-bar",staticClass:"operation-bar",on:{operate:e.operate,rulerUpdate:e.rulerUpdate}}),e._v(" "),i("div",{staticClass:"timeline-main"},[i("div",{staticClass:"left"},[i("div",{staticClass:"empty"}),e._v(" "),i("track-heads",{ref:"track-heads",attrs:{allTracks:e.allTracks,clipDragging:e.clipDragging,theme:e.theme}})],1),e._v(" "),i("div",{ref:"right",staticClass:"right",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.clickSeek(t)}}},[i("seek-line",{ref:"seek-line",attrs:{width:e.timelineWidth}}),e._v(" "),i("ruler",{staticClass:"ruler",attrs:{width:e.timelineWidth},nativeOn:{mousewheel:function(t){return e.rulerMouseWheel(t)}}}),e._v(" "),i("track-bodys",{directives:[{name:"show",rawName:"v-show",value:!e.isTracksEmpty,expression:"!isTracksEmpty"}],ref:"track-bodys",staticClass:"track-bodys",attrs:{allTracks:e.allTracks,highlight:e.highlight,clipDragging:e.clipDragging,theme:e.theme},on:{scroll:e.bodyScroll}}),e._v(" "),i("track-empty",{directives:[{name:"show",rawName:"v-show",value:e.isTracksEmpty,expression:"isTracksEmpty"}],attrs:{clipDragging:e.clipDragging}}),e._v(" "),i("drag-track-mask")],1)]),e._v(" "),i("transition",{attrs:{name:"fade"}},[e.uiProcessLocked?i("div",{staticClass:"loading"},[i("div",{staticClass:"loading-icon"})]):e._e()])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"project-card-wrap",on:{click:e.openProject}},[i("div",{ref:"cover",staticClass:"cover",style:"background-image: url('"+e.project.cover_path+"')"},[i("div",{staticClass:"delete",on:{click:function(t){return t.stopPropagation(),e.$emit("del")}}},[i("bs-icon",{attrs:{name:"删除"}})],1),e._v(" "),2===e.project.state?i("div",{staticClass:"expire-hint"},[e._v("素材即将到期")]):e._e()]),e._v(" "),i("p",{staticClass:"project-name"},[e._v(e._s(e.project.title))]),e._v(" "),i("div",{staticClass:"bottom"},[i("p",{staticClass:"project-date"},[e._v("\n      最后更新时间："+e._s(e.formatProjectLastDateView(1e3*e.project.mtime))+"\n    ")]),e._v(" "),i("span",{on:{click:function(t){t.stopPropagation()}}},[i("bs-popover",{attrs:{zIndex:10,placement:"right",trigger:"click"}},[i("div",{staticClass:"op-wrapper"},[i("ul",{staticClass:"op-list"},[i("li",{staticClass:"op-item",on:{click:e.openProject}},[i("bs-icon",{attrs:{name:"剪辑"}}),e._v(" "),i("span",[e._v("剪辑")])],1),e._v(" "),i("li",{staticClass:"op-item",on:{click:function(t){return t.stopPropagation(),e.$emit("copy")}}},[i("bs-icon",{attrs:{name:"复制"}}),e._v(" "),i("span",[e._v("复制")])],1),e._v(" "),i("li",{staticClass:"op-item",on:{click:function(t){return t.stopPropagation(),e.$emit("del")}}},[i("bs-icon",{attrs:{name:"删除"}}),e._v(" "),i("span",[e._v("删除")])],1)])]),e._v(" "),i("bs-icon",{attrs:{slot:"reference",name:"更多"},slot:"reference"})],1)],1)])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"project-add-modal"},[n("div",{staticClass:"project-add-wrap"},[n("img",{staticClass:"add-close",attrs:{src:a(1231),alt:""},on:{click:i.closeCreateProjectModal}}),i._v(" "),n("div",{staticClass:"add-header"},[n("p",{staticClass:"label"},[i._v("输入项目名称")]),i._v(" "),n("label",{staticClass:"label-content",attrs:{for:"project-name"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:i.projectName,expression:"projectName"}],attrs:{type:"text",autocomplete:"off",id:"project-name",placeholder:"请输入项目名称，最多20个字",maxlength:"20"},domProps:{value:i.projectName},on:{keydown:function(t){t.stopPropagation()},input:function(t){t.target.composing||(i.projectName=t.target.value)}}})])]),i._v(" "),n("div",{staticClass:"add-body"},[n("p",{staticClass:"label"},[i._v("选择项目尺寸")]),i._v(" "),n("div",{staticClass:"label-content"},i._l(i.sizes,function(e){return n("div",{key:e.value,staticClass:"size",class:{selected:i.size===e.value},on:{click:function(t){i.size=e.value}}},[n("div",{staticClass:"size-item"},[n("img",{attrs:{src:e.bg,alt:""}}),i._v(" "),n("p",{staticClass:"text"},[i._v(i._s(e.value))])])])}),0)]),i._v(" "),n("div",{staticClass:"add-bottom",on:{click:i.createProject}},[n("div",{staticClass:"add-btn"},[i._v("创建")])])])])}var n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"project-add-card-wrp"},[e("div",{ref:"plus",staticClass:"plus-btn"},[e("bs-icon",{staticClass:"plus-icon",attrs:{name:"加号2"}}),this._v(" "),e("span",{staticClass:"plus-text"},[this._v("创建项目")])],1),this._v(" "),e("p",{staticClass:"plus-info"},[this._v("新建视频，开启创作")])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("header",{staticClass:"header-wrap",attrs:{id:"guide--header"}},[e.$store.state.biliPreviewerMode?i("div",{staticClass:"bili-preview-mode"},[i("p",[e._v("bilibili-观察者模式")])]):e._e(),e._v(" "),i("div",{staticClass:"left-group"},[i("div",{staticClass:"left",on:{click:e.returnHome}},[i("bs-icon",{attrs:{name:"left"}}),e._v(" "),i("span",[e._v("返回我的项目")])],1),e._v(" "),i("div",{staticClass:"center"},[e.nameEditing?e._e():i("div",{staticClass:"project-name",on:{click:e.startNameEdit}},[e._v(e._s(e.projectName))]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.editProjectName,expression:"editProjectName"},{name:"show",rawName:"v-show",value:e.nameEditing,expression:"nameEditing"}],ref:"project-name-input",attrs:{type:"text",maxlength:"20",placeholder:"不超过20个字",autocomplete:"off"},domProps:{value:e.editProjectName},on:{keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.finishNameEdit(t)},blur:e.finishNameEdit,keydown:function(t){t.stopPropagation()},input:function(t){t.target.composing||(e.editProjectName=t.target.value)}}}),e._v(" "),i("div",{staticClass:"ver-line"}),e._v(" "),e.$store.state.projectCoverPath?i("div",{staticClass:"cover",style:{backgroundImage:"url("+e.$store.state.projectCoverPath+")"}}):e._e(),e._v(" "),i("bs-button",{staticClass:"change-cover",style:{marginLeft:e.$store.state.projectCoverPath?"10px":"20px"},attrs:{disabled:!e.$store.state.timelineDuration},on:{click:e.editCover}},[i("bs-icon",{staticClass:"edit-icon cover-icon",attrs:{name:"编辑"}}),e._v("\n        "+e._s(e.$store.state.projectCoverPath?"更换封面":"设置封面")+"\n      ")],1)],1)]),e._v(" "),i("div",{staticClass:"right"},[i("button",{staticClass:"save",on:{click:function(t){return e.saveProject(!0,!0)}}},[e._v("\n      保存草稿\n    ")]),e._v(" "),i("button",{staticClass:"btn-publish",on:{click:e.createVideo}},[i("bs-icon",{attrs:{name:"投稿"}}),e._v("\n      立即投稿\n    ")],1),e._v(" "),i("div",{staticClass:"user-info"},[i("a",{attrs:{href:"//space.bilibili.com/"+e.userInfo.mid,target:"_blank"}},[i("div",{staticClass:"face",style:"background-image: url('"+e.userInfo.face+"')"})]),e._v(" "),i("div",{staticClass:"down-drop"},[i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goCreateCenter(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"创作中心"}}),e._v(" "),i("span",[e._v("创作中心")])],1),e._v(" "),i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goUploadManager(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"稿件管理"}}),e._v(" "),i("span",[e._v("稿件管理")])],1),e._v(" "),i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.goHelpCenter(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"帮助"}}),e._v(" "),i("span",[e._v("帮助中心")])],1),e._v(" "),i("a",{staticClass:"drop-item",on:{click:function(t){return t.stopPropagation(),e.clickLogout(t)}}},[i("bs-icon",{staticClass:"drop-item-icon",attrs:{name:"登出"}}),e._v(" "),i("span",[e._v("登出")])],1)])])]),e._v(" "),e.showCoverEdit?i("CoverModal",{on:{close:function(t){e.showCoverEdit=!1}}}):e._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("transition",{attrs:{name:"dialog-fade"}},[e.visible?i("div",{ref:"rhythm",staticClass:"rhythm",on:{click:e.hideDotEditPanel}},[i("div",{staticClass:"rhythm-container",style:{width:e.containerWidth+"px",height:e.$store.state.uiSize.panelContentHeight-90+"px",minHeight:"320px"}},[i("div",{staticClass:"header"},[e._v("音乐踩点")]),e._v(" "),i("div",{ref:"rhythmPanel",staticClass:"rhythm-panel",on:{mousedown:function(t){return t.stopPropagation(),e.mousedown(t)},scroll:e.handleScroll}},[i("seek-line"),e._v(" "),i("ruler",{attrs:{canvasWidth:e.containerWidth,offsetLeft:e.offsetLeft,width:e.width}}),e._v(" "),i("div",{style:{width:e.width+"px",paddingLeft:e.offsetLeft+"px",paddingRight:e.offsetLeft+"px",marginTop:"53px"}},[i("wave",{attrs:{width:e.width}}),e._v(" "),i("dot-line",{on:{translateXSmooth:e.translateXSmooth}})],1)],1),e._v(" "),i("operate-dot",{attrs:{duration:e.removedBoundaryDuration},on:{translate:e.translateX}}),e._v(" "),i("operate",{on:{validateCanDot:e.validateCanDot}}),e._v(" "),i("audio-player",{ref:"audio",attrs:{duration:e.rhythmClip.orgDuration,data:e.rhythmData,scrollLeft:e.rhythmEditObj.scrollLeft},on:{translateX:e.translateX,close:e.hidePanel}})],1)]):e._e()])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"monitor-wrap",staticClass:"monitor-wrap",style:"width: "+this.$store.state.uiSize.monitorWidth+"px"},[e("live-window"),this._v(" "),e("seek-bar"),this._v(" "),e("control-bar")],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return t.showGuide?i("div",{staticClass:"guide-wrap"},[i("canvas",{ref:"guide-canvas"}),t._v(" "),i("div",{staticClass:"guide-desc",style:{top:t.step.descPos.top+"px",left:t.step.descPos.left+"px"}},[i("div",{staticClass:"top"},[i("div",{staticClass:"title"},[t._v(t._s(t.step.title))]),t._v(" "),t.hasNext?i("div",{staticClass:"jump",on:{click:t.finishGuide}},[t._v("跳过")]):t._e()]),t._v(" "),i("div",{staticClass:"center"},[t._v("\n      "+t._s(t.step.desc)+"\n    ")]),t._v(" "),i("div",{staticClass:"bottom"},[t._v("\n      "+t._s(t.stepIndex+1+"/"+t.guides.length)+"\n    ")]),t._v(" "),i("div",{class:"angle-"+t.step.descPos.angle}),t._v(" "),t.hasNext?i("button",{staticClass:"next-step",on:{click:t.nextStep}},[t._v("\n      下一步\n    ")]):i("button",{staticClass:"next-step",on:{click:t.finishGuide}},[t._v("完成")])])]):t._e()}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"projects-search-box-wrap"},[i("bs-icon",{staticClass:"search-icon",attrs:{name:"搜索放大镜"}}),e._v(" "),i("label",{staticClass:"search-input",attrs:{for:"projects-search"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],attrs:{type:"text",autocomplete:"off",id:"projects-search",placeholder:"输入作品名称进行搜索"},domProps:{value:e.inputValue},on:{keydown:function(t){t.stopPropagation()},input:[function(t){t.target.composing||(e.inputValue=t.target.value)},function(t){return e.$emit("input",e.inputValue)}]}})])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"product-card-wrap",on:{click:e.openProduct}},[i("div",{ref:"cover",staticClass:"cover",style:"background-image: url('"+e.product.cover_url+"')"}),e._v(" "),i("p",{staticClass:"product-name"},[e._v(e._s(e.product.title))]),e._v(" "),i("div",{staticClass:"bottom"},[i("p",{staticClass:"product-date"},[e._v("\n          最后更新时间："+e._s(e.formatProductLastDateView(1e3*e.product.mtime))+"\n        ")]),e._v(" "),i("span",{on:{click:[function(t){t.stopPropagation()},e.functionButtonLog]}},[i("bs-popover",{attrs:{zIndex:10,placement:"right",trigger:"click"}},[i("div",{staticClass:"op-wrapper"},[i("ul",{staticClass:"op-list"},[e.product.video_url?i("a",{attrs:{href:e.product.video_url},on:{click:function(t){return t.stopPropagation(),e.downloadLog(t)}}},[i("li",{staticClass:"op-item"},[i("bs-icon",{attrs:{name:"下载"}}),e._v(" "),i("span",[e._v("下载")])],1)]):e._e(),e._v(" "),i("li",{staticClass:"op-item",on:{click:function(t){return t.stopPropagation(),e.$emit("del")}}},[i("bs-icon",{attrs:{name:"删除"}}),e._v(" "),i("span",[e._v("删除")])],1),e._v(" "),i("li",{staticClass:"op-item",on:{click:function(t){return t.stopPropagation(),e.$emit("rename")}}},[i("bs-icon",{attrs:{name:"重命名"}}),e._v(" "),i("span",[e._v("重命名")])],1)])]),e._v(" "),i("bs-icon",{attrs:{slot:"reference",name:"更多"},slot:"reference"})],1)],1)])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{ref:"video-dialog",staticClass:"preview-video",attrs:{visible:e.show,top:"20vh"},on:{"update:visible":function(t){e.show=t},opened:e.listenHide,closed:function(t){return e.$emit("cancel")}}},[i("div",{staticClass:"preview-title",attrs:{slot:"title"},slot:"title"},[e._v("\n    视频预览\n    "),i("a",{on:{click:e.cancelPreview}},[i("bs-icon",{staticClass:"preview-close",attrs:{name:"关闭"}})],1)]),e._v(" "),i("div",{staticClass:"video-source"},[i("video",{attrs:{width:"900px",height:"506px",controls:""}},[i("source",{attrs:{src:e.video.video_url,type:"video/mp4"}}),e._v("\n      您的浏览器不支持 video 标签。\n    ")])]),e._v(" "),e._t("footer")],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"resources-wrap"},[i("div",{ref:"panel-container",staticClass:"panel-container",style:{"min-width":t.$store.state.showManagePanel?"600px":"500px"},attrs:{id:"guide--upload-rect"}},[i(t.currentPanel,{tag:"component"}),t._v(" "),i("edit-panels",{staticClass:"edit-panels"})],1),t._v(" "),t.$store.state.showParticleGraffitiModal?i("particle-graffiti-modal"):t._e(),t._v(" "),t.$store.state.showQuickCutModal?i("quick-cut-modal"):t._e(),t._v(" "),t.$store.state.showMobileUploadQrCodeModal?i("mobile-upload-qr-code-modal"):t._e(),t._v(" "),t.$store.state.showMusicCaptionTextEditModal?i("music-caption-text-edit-modal"):t._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("ul",{staticClass:"sidebar-wrap",class:{open:i.open},attrs:{id:"guide--features"}},[i.open?n("a",[i._l(i.panels,function(e,t){return n("li",{key:t,class:{active:i.active===e.key},on:{click:function(t){return t.stopPropagation(),i.$emit("switch",e.key)}}},[n("bs-icon",{attrs:{name:i.active===e.key?e.icon[1]:e.icon[0]}}),i._v(" "),n("div",{staticClass:"name"},[i._v(i._s(e.name))])],1)}),i._v(" "),n("li",{staticStyle:{"margin-top":"30px"},on:{click:i.handleHide}},[n("bs-icon",{staticStyle:{width:"24px",height:"24px"},attrs:{name:"收起侧边栏"}}),i._v(" "),n("div",{staticClass:"name"},[i._v("收起")])],1)],2):n("a",[i._l(i.panels,function(e,t){return n("li",{key:t,class:{active:i.active===e.key},on:{click:function(t){return t.stopPropagation(),i.$emit("switch",e.key)}}},[n("bs-icon",{attrs:{name:i.active===e.key?e.icon[1]:e.icon[0]}}),i._v(" "),n("div",{staticClass:"tip"},[i._v(i._s(e.name))])],1)}),i._v(" "),n("li",{staticStyle:{"margin-top":"30px"},on:{click:i.handleShow}},[n("bs-icon",{staticStyle:{width:"24px",height:"24px"},attrs:{name:"展开侧边栏"}})],1)],2)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:i.rhythmEditObj.showDot,expression:"rhythmEditObj.showDot"}],staticClass:"operate-container"},[n("div",{staticClass:"operate-box"},[i.enableAuto?[n("span",[i._v("自动踩点：")]),i._v(" "),n("bcc-switch",{attrs:{size:"medium"},on:{"on-change":i.changeAuto},model:{value:i.rhythmEditObj.auto,callback:function(t){i.$set(i.rhythmEditObj,"auto",t)},expression:"rhythmEditObj.auto"}})]:i._e(),i._v(" "),i.rhythmEditObj.auto?[n("div",{staticClass:"ver-line"}),i._v(" "),i._l(i.btns,function(e,t){return n("div",{key:t,staticClass:"rhythm-btn",class:{active:e.type===i.rhythmEditObj.type},on:{click:function(t){return i.changeType(e.type)}}},[i._v("\n        "+i._s(e.name)+"\n      ")])})]:i._e()],2),i._v(" "),n("div",{staticClass:"dot-circle",class:{disabled:i.rhythmEditObj.isBoundary},on:{click:i.handleDot}},[i.rhythmEditObj.canDot||i.rhythmEditObj.isBoundary?n("bs-icon",{staticClass:"dot-icon",attrs:{name:"音乐踩点-白色"}}):n("bs-icon",{staticClass:"dot-icon",attrs:{name:"音乐踩点-白色删除"}})],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"audio-bg"},[e("div",{ref:"audio-wave",staticClass:"audio-wave",style:{width:this.width+"px"}})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{attrs:{visible:e.visible,mask:!1,bodyStyle:{borderRadius:"12px",border:"0px",padding:"0px",width:e.videoShowAreaWidth+"px",height:e.videoShowAreaHeight+244+"px",transform:e.transform,backgroundColor:"#0F0F10",top:e.boxTop},top:"0"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"header"},[e._v("快速截取")]),e._v(" "),i("div",{staticClass:"body"},[e.processing||e.processingError?i("div",{staticClass:"video-cut-processing"},[i("div",{staticClass:"loading-wrp"},[e.processingError?e._e():i("div",{staticClass:"loading-icon"}),e._v(" "),i("div",{class:["loading-text",{"loading-text-error":e.processingError}]},[e._v(e._s(e.processingMessage))])])]):e._e(),e._v(" "),i("div",{staticClass:"video-show-area",style:{width:e.videoShowAreaWidth+"px",height:e.videoShowAreaHeight+"px"}},[e.supportPreview?i("video",{attrs:{id:"video-show-area"}}):i("p",[e._v("当前视频编码格式，无法预览")])]),e._v(" "),i("div",{staticClass:"video-select-duration"},[e._v(e._s(e.selectedVideoDuration))]),e._v(" "),i("div",{staticClass:"video-thumbnail-area"},[e.supportPreview?i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:!e.video1Playing,expression:"!video1Playing"}],staticClass:"playing",class:{disabled:!e.video1Ready},attrs:{name:"播放"},on:{click:function(t){return t.stopPropagation(),e.playVideo(t)}}}):e._e(),e._v(" "),e.supportPreview?i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:e.video1Playing,expression:"video1Playing"}],staticClass:"pause",class:{disabled:!e.video1Ready},attrs:{name:"暂停"},on:{click:e.playVideo}}):e._e(),e._v(" "),i("div",{staticClass:"video-thumbnail",style:{width:e.ORIGIN_WIDTH+"px",height:e.PER_THUMBNAIL_H_PX+"px"}},[e.supportPreview?i("div",{staticClass:"video-play-progress",style:{left:e.videoProgressLeft-1+"px"}}):e._e(),e._v(" "),i("canvas",{attrs:{id:"video-thumbnail"},on:{click:function(t){return t.stopPropagation(),e.clickSeekVideo(t)}}}),e._v(" "),i("div",{ref:"video-thumbnail-select-border",staticClass:"video-thumbnail-select-border"},[i("span",{staticClass:"video-thumbnail-select-left-pointer",on:{click:function(t){t.stopPropagation()}}},[e._v(e._s(e.selectedVideoInPoint))]),e._v(" "),i("span",{staticClass:"video-thumbnail-select-right-pointer",on:{click:function(t){t.stopPropagation()}}},[e._v(e._s(e.selectedVideoOutPoint))])]),e._v(" "),i("div",{staticClass:"video-thumbnail-drag left",on:{mousedown:function(t){return t.stopPropagation(),e.setStartDragLeft(t)},mouseup:function(t){t.stopPropagation(),e.leftDragStart=!1}}}),e._v(" "),i("div",{staticClass:"video-thumbnail-drag right",on:{mousedown:function(t){return t.stopPropagation(),e.setStartDragRight(t)},mouseup:function(t){t.stopPropagation(),e.rightDragStart=!1}}})])],1)]),e._v(" "),i("div",{staticClass:"footer"},[i("bs-button",{attrs:{type:"border"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("bs-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:e.processing||e.processingError},on:{click:e.cut}},[e._v("完成")]),e._v(" "),e.uploadCutDebug&&e.outputFile?i("bs-button",{staticStyle:{"margin-left":"20px"},attrs:{disabled:e.processing||e.processingError},on:{click:e.uploadFile}},[e._v("上传")]):e._e(),e._v(" "),e.uploadCutDebug&&e.outputFile?i("bs-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"second",disabled:e.processing||e.processingError},on:{click:e.downloadFile}},[e._v("下载")]):e._e()],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"dot-line"},n._l(n.rhythmEditObj.data,function(e,i){return a("div",{key:e,staticClass:"dot-container",style:{transform:"translateX("+n.millisecToPx(e)+"px)"},on:{click:function(t){return n.selectCur(e,i,t)}}},[a("span",{staticClass:"dot",class:{active:i===n.rhythmEditObj.selectedIdx,operatting:n.isOperatting(i),scale:n.sacleFontSize(i)}},[n._v("\n      "+n._s(n.getValue(i))+"\n    ")])])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"music-caption-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),"内容"===e.tab?i("music-caption-content",{staticClass:"tab-body",attrs:{clips:e.clips}}):e._e(),e._v(" "),"样式"===e.tab?i("music-caption-style",{staticClass:"tab-body",attrs:{clips:e.clips}}):e._e(),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"模板"===e.tab,expression:'tab === "模板"'}],staticClass:"change-material-template"},[i("caption-template",{attrs:{from:"MUSIC_CAPTION"}})],1),e._v(" "),"花字"===e.tab?i("music-caption-renderer",{attrs:{clips:e.clips}}):e._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"operate-dots"},[i.rhythmEditObj.showDotEdit?[n("div",{staticClass:"operate-dots-container"},[n("div",{staticClass:"btns"},[i._l(i.btns,function(e,t){return n("div",{key:t,staticClass:"btn",class:{disabled:e.disabled},on:{click:function(t){return i.handleBtn(e.type,t)}}},[n("bs-icon",{staticClass:"icon",class:{delete:"delete"===e.type},attrs:{name:e.name}}),i._v(" "),"delete"!==e.type?n("span",{staticClass:"txt"},[i._v("0.05s")]):i._e()],1)}),i._v(" "),n("div",{staticClass:"apply-btns"},i._l(i.applyBtns,function(e,t){return n("div",{key:t,staticClass:"apply",on:{click:function(t){return i.handleBtn(e.type,t)}}},[i._v("\n              "+i._s(e.name)+"\n            ")])}),0)],2),i._v(" "),n("div",{staticClass:"des"},[i._v("踩点已"+i._s(i.moveDirection)+"：\n          "),n("span",{staticClass:"time"},[i._v(i._s(Math.abs(i.forwardTime)/1e3)+"s")])])])]:i._e()],2)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"rhythm-audio"},[n("audio",{ref:"audio"}),i._v(" "),n("div",{staticClass:"audio-control"},[n("div",{staticClass:"rate"},[n("span",{staticClass:"txt"},[i._v("倍速：")]),i._v(" "),n("bs-tab-buttons",{attrs:{tabs:i.rates},on:{switchTab:i.changeRate},model:{value:i.rate,callback:function(t){i.rate=t},expression:"rate"}})],1),i._v(" "),i._l(i.btns,function(e,t){return n("bs-icon",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"item.show"}],key:t,staticClass:"btn",attrs:{name:e.icon},on:{click:function(t){return i.handleClick(e.type,t)}}})})],2)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"rhythm-seek-line"})}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{attrs:{visible:e.visible,mask:!1,onClose:e.closeQrCode,width:"320px"},on:{"update:visible":function(t){e.visible=t}}},[i("div",{staticClass:"header"},[i("p",[e._v("打开 bilibili APP 扫一扫上传资源")]),e._v(" "),i("p",[e._v("上传完成后请刷新页面")])]),e._v(" "),i("div",{staticClass:"close",on:{click:e.closeQrCode}},[i("bs-icon",{attrs:{name:"关闭"}})],1),e._v(" "),i("div",{staticClass:"body"},[i("div",{staticClass:"qr-code-wrp"},[e.qrCodeUrl?i("QRCode",{staticClass:"qr-code",attrs:{moduleSize:4,quietZoneWidth:4,data:e.qrCodeUrl,errorCorrectionLevel:"L"}}):e._e(),e._v(" "),e.qrCodeTimeOut?i("div",{staticClass:"qr-code-refresh"},[i("div",{staticClass:"refresh-text"},[e._v("二维码已失效，请刷新")]),e._v(" "),i("div",{staticClass:"refresh-btn",on:{click:function(t){return e.refreshQrCode(!1)}}},[e._v("刷新")])]):e._e()],1),e._v(" "),i("bs-icon",{staticClass:"bottom-icon",attrs:{name:"bilibiliPink"}}),e._v(" "),i("p",{staticClass:"bottom-text"},[e._v("你感兴趣的视频都在B站")])],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{ref:"track-bodys",staticClass:"track-bodys",on:{scroll:function(t){return i.$emit("scroll")}}},[n("div",{staticClass:"top-empty",class:{active:i.clipDragging},style:"transform: translateX("+i.scrollX+"px);",on:{mousemove:function(t){return i.getMouse("TOP")},mouseleave:i.loseMouse}}),i._v(" "),n("div",{ref:"space",staticClass:"space",style:{width:i.spaceWidth+"px",height:"0.1px","flex-shrink":0}}),i._v(" "),i._l(i.allTracks,function(t,e){return n("a",{key:e},[e===i.TrackOrder.indexOf(i.TrackTypes.VIDEO)&&i.theme?n("theme-track-body",{attrs:{theme:i.theme}}):i._e(),i._v(" "),n("div",{class:{"type-tracks":!0,"top-active":i.highlight[e].top,"bottom-active":i.highlight[e].bottom}},[e===i.TrackOrder.indexOf(i.TrackTypes.VIDEO)&&i.theme?n("theme-video-cover",{attrs:{theme:i.theme}}):i._e(),i._v(" "),n("div",{staticClass:"top-highlight",style:"transform: translateX("+i.scrollX+"px);"}),i._v(" "),i._l(t,function(t){return n("track-body",{key:t.uuid,attrs:{track:t,scrollX:i.scrollX}})}),i._v(" "),n("div",{staticClass:"bottom-highlight",style:"transform: translateX("+i.scrollX+"px);"})],2)],1)}),i._v(" "),n("div",{staticClass:"bottom-empty",class:{active:i.clipDragging},style:"transform: translateX("+i.scrollX+"px);",on:{mousemove:function(t){return i.getMouse("BOTTOM")},mouseleave:i.loseMouse}})],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"control-bar-wrap"},[i("div",{staticClass:"video-time"},[i("span",{staticClass:"time-item"},[e._v(e._s(e.$store.getters.currentTimelinePositionHumanViewFrame))]),e._v(" "),i("span",{staticClass:"gutter"},[e._v("/")]),e._v(" "),i("span",{staticClass:"time-item"},[e._v(e._s(e.$store.getters.timelineDurationHumanViewFrame))])]),e._v(" "),i("div",{staticClass:"play-control"},[i("bs-icon",{staticClass:"size-1",attrs:{name:"上一曲"},on:{click:e.backStart}}),e._v(" "),i("bs-icon",{staticClass:"size-2",attrs:{name:"回退"},on:{click:e.back5frame}}),e._v(" "),i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:!e._liveWindowPlaying_,expression:"!_liveWindowPlaying_"}],staticClass:"playing",attrs:{name:"播放"},on:{click:function(t){return e.playLiveWindow(!0)}}}),e._v(" "),i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:e._liveWindowPlaying_,expression:"_liveWindowPlaying_"}],staticClass:"pause",attrs:{name:"暂停"},on:{click:function(t){return e.playLiveWindow(!1)}}}),e._v(" "),i("bs-icon",{staticClass:"size-2",attrs:{name:"快进"},on:{click:e.forward5frame}}),e._v(" "),i("bs-icon",{staticClass:"size-1",attrs:{name:"下一曲"},on:{click:e.forwardEnd}})],1),e._v(" "),i("div",{staticClass:"view-control"},[i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeShowSelectSpeed,expression:"closeShowSelectSpeed"}],staticClass:"btn",on:{click:e.clickShowSelectSpeed}},[i("span",[e._v(e._s(e.$store.state.timelineSpeed)+"x")]),e._v(" "),e.showSelectSpeed?i("div",{staticClass:"change-video-speed-drop",on:{click:function(t){t.stopPropagation()}}},[i("seek-bar",{attrs:{height:9,width:75,max:2,min:.1,step:.1},model:{value:e._speed_,callback:function(t){e._speed_=t},expression:"_speed_"}})],1):e._e()]),e._v(" "),i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeShowSelectSize,expression:"closeShowSelectSize"}],staticClass:"btn",on:{click:e.clickShowSelectSize}},[i("span",[e._v(e._s(e.sizeView))]),e._v(" "),e.showSelectSize?i("div",{staticClass:"change-video-size-drop"},[i("div",{class:{active:.5===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("1:2")}}},[e._m(0),e._v(" "),i("span",[e._v("1:2")])]),e._v(" "),i("div",{class:{active:2===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("2:1")}}},[e._m(1),e._v(" "),i("span",[e._v("2:1")])]),e._v(" "),i("div",{class:{active:e.$store.state.ratio===4/3},on:{click:function(t){return e.selectRatio("4:3")}}},[e._m(2),e._v(" "),i("span",[e._v("4:3")])]),e._v(" "),i("div",{class:{active:.75===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("3:4")}}},[e._m(3),e._v(" "),i("span",[e._v("3:4")])]),e._v(" "),i("div",{class:{active:1===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("1:1")}}},[e._m(4),e._v(" "),i("span",[e._v("1:1")])]),e._v(" "),i("div",{class:{active:e.$store.state.ratio===16/9},on:{click:function(t){return e.selectRatio("16:9")}}},[e._m(5),e._v(" "),i("span",[e._v("16:9")])]),e._v(" "),i("div",{class:{active:e.$store.state.ratio===9/16},on:{click:function(t){return e.selectRatio("9:16")}}},[e._m(6),e._v(" "),i("span",[e._v("9:16")])])]):e._e()]),e._v(" "),i("bs-icon",{attrs:{name:"放大预览"},on:{click:e.startShowPreviewDialog}})],1),e._v(" "),e.showPreviewDialog?i("preview-modal",{on:{close:function(t){e.showPreviewDialog=!1}}}):e._e()],1)}var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-1-2"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-2-1"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-4-3"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-3-4"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-1-1"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-16-9"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-9-16"})])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{attrs:{visible:e.visible,bodyStyle:{borderRadius:"12px",border:"0px",padding:"25px 50px",width:e.width+"px",height:e.height+"px",backgroundColor:"#1a1a1a"},top:e.top+"px"},on:{"update:visible":function(t){e.visible=t},close:e.close}},[i("div",{staticClass:"preview-modal-wrap"},[i("div",{staticClass:"title",style:{height:e.titleHeight+"px",lineHeight:e.titleHeight+"px"}},[e._v("\n      设置封面\n    ")]),e._v(" "),i("div",{staticClass:"sub-title"},[e._v("选择当前帧为封面使用")]),e._v(" "),i("bs-icon",{staticClass:"cancel",attrs:{name:"关闭"},on:{click:e.close}}),e._v(" "),i("div",{staticClass:"canvas-box",style:{width:e.canvasBorderWidth+"px",height:e.canvasBorderHeight+"px"}},[i("canvas",{ref:"livewindow",staticClass:"preview-live-window",staticStyle:{margin:"0"},attrs:{width:e.canvasWidth,height:e.canvasHeight,id:"preview-live-window"}}),e._v(" "),i("div",{staticClass:"bar-container"},[i("div",{staticClass:"icon-box"},[i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:!e._liveWindowPlaying_,expression:"!_liveWindowPlaying_"}],staticClass:"status",attrs:{name:"封面-播放"},on:{click:function(t){return e.playLiveWindow(!0)}}}),e._v(" "),i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:e._liveWindowPlaying_,expression:"_liveWindowPlaying_"}],staticClass:"status pause",attrs:{name:"封面-暂停"},on:{click:function(t){return e.playLiveWindow(!1)}}})],1),e._v(" "),i("div",{staticStyle:{position:"relative"}},[i("seek-bar",{staticClass:"seek-bar",attrs:{width:e.canvasBorderWidth-132,outlineColor:"#484848",ballColor:"#fff",inlineColor:"#fff"}})],1),e._v(" "),i("div",{staticClass:"video-time"},[i("span",{staticClass:"cur"},[e._v(e._s(e.$store.getters.currentTimelinePositionHumanViewFrame))]),e._v(" "),i("span",{staticClass:"gutter"},[e._v("/")]),e._v(" "),i("span",{staticClass:"total"},[e._v(e._s(e.$store.getters.timelineDurationHumanViewFrame))])])])]),e._v(" "),i("bs-button",{staticClass:"confirm",attrs:{disabled:e._liveWindowPlaying_},on:{click:e.generateCover}},[e._v("确定使用")])],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement;return(e._self._c||t)("seek-bar",{staticClass:"seekbar",attrs:{height:8,width:e.width||e.$store.state.uiSize.monitorWidth,max:e.$store.state.timelineDuration||1,min:0,outlineColor:e.outlineColor||"rgba(0,0,0,0.5)",inlineColor:e.inlineColor||"#4388ff",ballColor:e.ballColor||"#4388ff"},on:{seek:e.seek},model:{value:e.$store.state.currentTimelinePosition,callback:function(t){e.$set(e.$store.state,"currentTimelinePosition",t)},expression:"$store.state.currentTimelinePosition"}})}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"live-window-container",staticClass:"live-window-wrap",attrs:{id:"live-window-container"}},[i("canvas",{ref:"live-window",staticClass:"live-window",style:{opacity:t.hideLiveWindow?0:void 0},attrs:{id:t.canvasId}}),t._v(" "),i("div",{ref:"monitor-layer",staticClass:"monitor-layer",attrs:{id:"monitor-layer"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:(t.$store.state.streamingWaiting||t.hideLiveWindow||t.$store.state.monitorLock)&&!t.$store.state.useOtherLiveWindow,expression:"\n      ($store.state.streamingWaiting ||\n        hideLiveWindow ||\n        $store.state.monitorLock) && !$store.state.useOtherLiveWindow // 非右上角的livewindow\n    "}],staticClass:"monitor-waiting"},[i("div",{staticClass:"loading-icon"})])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var n=this,t=n.$createElement,a=n._self._c||t;return a("bs-dialog",{attrs:{visible:n.visible,bodyStyle:{padding:"20px",paddingBottom:"4px",width:"724px",height:"521px",background:"#252526",top:"calc((100% - 500px)/2)"}},on:{"update:visible":function(t){n.visible=t}}},[1===n.step?a("section",{staticClass:"music-caption-text-edit-wrap step-1"},[a("div",{staticClass:"title"},[n._v("粘贴文本")]),n._v(" "),a("div",{staticClass:"edit-container"},[a("div",{staticClass:"edit-content"},[a("dir",{staticClass:"shadow-container"},[a("div",{ref:"shadow",staticClass:"shadow",on:{scroll:function(t){return n.scrollShadow(t)}}},n._l(n.textLines,function(t,e){return a("div",{key:e,staticClass:"item"},[a("div",{staticClass:"cursor",style:{color:24<t.length?"#FB0648":"#fff"}},[n._v("\n                "+n._s(t.length)+"/24\n              ")]),n._v(" "),a("div",{staticClass:"text"},[n._v(n._s(t))])])}),0)]),n._v(" "),a("textarea",{ref:"input",staticClass:"input",attrs:{placeholder:"在此输入文本"},domProps:{value:n.text},on:{input:function(t){return n.inputText(t)},scroll:function(t){return n.scrollInput(t)},keydown:function(t){t.stopPropagation()}}})],1),n._v(" "),a("div",{staticClass:"op-bar"},[a("div",{staticClass:"tip"},[n._v("注意：超过推荐字数的字幕可能会造成显示异常")]),n._v(" "),a("div",{staticClass:"op-item"},[a("bs-checkbox",{staticClass:"checkbox",attrs:{itemValue:1},model:{value:n.options,callback:function(t){n.options=t},expression:"options"}},[a("span",{staticStyle:{color:"#fff","font-size":"12px"}},[n._v("插入空行")])])],1),n._v(" "),a("div",{staticClass:"op-item",on:{click:n.autoSplitLines}},[n._v("自动分行")]),n._v(" "),a("div",{staticClass:"op-item",on:{click:n.clearText}},[n._v("一键清空")])])]),n._v(" "),a("div",{staticClass:"btn-group",staticStyle:{"margin-top":"24px"}},[a("bs-button",{attrs:{type:"border"},on:{click:n.cancel}},[n._v("取消")]),n._v(" "),a("bs-button",{staticStyle:{"margin-left":"32px"},on:{click:n.nextStep}},[n._v("下一步")])],1)]):n._e(),n._v(" "),2===n.step?a("section",{staticClass:"music-caption-text-edit-wrap step-2"},[a("div",{staticClass:"title"},[n._v("粘贴文本")]),n._v(" "),a("div",{staticClass:"edit-container"},[a("div",{staticClass:"edit-content"},[a("dir",{staticClass:"shadow-container"},[a("div",{ref:"shadow",staticClass:"shadow"},n._l(n.lineList,function(e,i){return a("a",{key:i},[a("div",{staticClass:"item"},[a("div",{staticClass:"cursor",style:{color:24<e.text.length?"#FB0648":"#fff"}},[n._v("\n                  "+n._s(e.text.length)+"/24\n                ")]),n._v(" "),a("div",{staticClass:"text"},[n._v(n._s(e.text))]),n._v(" "),a("bs-icon",{staticClass:"delete",attrs:{name:"关闭"},on:{click:function(t){return n.deleteLine(i)}}})],1),n._v(" "),e.hasGap&&i!==n.lineList.length-1?a("div",{staticClass:"item"},[a("div",{staticClass:"cursor"}),n._v(" "),a("div",{staticClass:"text"},[n._v("-")]),n._v(" "),a("bs-icon",{staticClass:"delete",attrs:{name:"关闭"},on:{click:function(t){e.hasGap=!1}}})],1):n._e()])}),0)])],1),n._v(" "),a("div",{staticClass:"op-bar"},[a("div",{staticClass:"tip"},[n._v("注意：超过推荐字数的字幕可能会造成显示异常")]),n._v(" "),a("div",{staticClass:"op-item",on:{click:n.clearText}},[n._v("一键清空")])])]),n._v(" "),a("div",{staticClass:"btn-group",staticStyle:{"margin-top":"24px"}},[a("bs-button",{attrs:{type:"border"},on:{click:function(t){n.step=1}}},[n._v("上一步")]),n._v(" "),a("bs-button",{staticStyle:{"margin-left":"32px"},on:{click:n.generateTextCaption}},[n._v("确认")])],1)]):n._e()])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return i.visible?n("div",[n("span",{staticStyle:{"margin-left":"20px",cursor:"pointer"},on:{click:function(t){i.showDialog=!0}}},[i._v("成片")]),i._v(" "),n("bs-dialog",{attrs:{title:"成片列表",visible:i.showDialog,width:"800px",top:"0"},on:{"update:visible":function(t){i.showDialog=t}}},[n("button",{on:{click:function(t){i.showDialog=!1}}},[i._v("点我关闭")]),i._v(" "),n("div",{staticStyle:{display:"flex","flex-wrap":"wrap"}},i._l(i.list,function(t,e){return n("div",{key:e,staticStyle:{"background-color":"#000","margin-top":"10px","margin-left":"10px",width:"200px"}},[n("span",[i._v(i._s(t.title))]),n("br"),i._v(" "),n("img",{staticStyle:{"max-width":"100px","max-height":"60px"},attrs:{src:t.cover_url,alt:""}}),i._v(" "),t.video_url?n("a",{attrs:{href:t.video_url}},[i._v("下载")]):i._e()])}),0)])],1):i._e()}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"music-wrap"},[n("ul",{staticClass:"tab-head"},i._l(i.tabs,function(e){return n("li",{key:e.name,class:{active:i.tab===e.name},on:{click:function(t){i.tab=e.name}}},[i._v("\n      "+i._s(e.name)+"\n    ")])}),0),i._v(" "),n("div",{staticClass:"tab-body"},[n("button",{staticClass:"btn-record",on:{click:i.showAudioRecord}},[n("bs-icon",{attrs:{name:"录音"}}),i._v("\n      录音\n    ")],1),i._v(" "),n("div",{staticClass:"card-list"},i._l(i.list,function(t){return n("card",{key:t.resource_id,attrs:{card:t,clipType:i.clipType}})}),1),i._v(" "),i.pager.total>i.pager.pageSize?n("bs-pagination",{staticStyle:{"margin-top":"20px"},attrs:{theme:"dark",total:i.pager.total,current:i.pager.page,"page-size":i.pager.pageSize},on:{"on-change":i.pageChange}}):i._e()],1),i._v(" "),i.recordVisible?n("record-modal",{on:{close:function(t){i.recordVisible=!1}}}):i._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"operation-bar"},[n("div",{class:{left:!0,disabled:this.$Timeline.clipDragging},attrs:{id:"guide--operation-icons"}},[i._l(i.operations,function(e,t){return n("bs-hint",{key:t,attrs:{hint:e.hint,offset:7}},[n("div",{staticClass:"icon-wrap",class:{active:e.active}},[n("bs-icon",{attrs:{name:e.icon},on:{mousedown:function(t){return i.itemMousedown(e,t)}}})],1)])}),i._v(" "),n("bs-popover",{attrs:{zIndex:10,offset:"20",placement:"right",trigger:"hover"}},[n("shortcut-board"),i._v(" "),n("div",{staticClass:"icon-wrap active",attrs:{slot:"reference"},slot:"reference"},[n("bs-icon",{attrs:{name:"快捷键"}})],1)],1),i._v(" "),i.$store.state.showRhythmEntry?n("bs-hint",{attrs:{hint:"音乐踩点",offset:7}},[n("div",{staticClass:"icon-wrap active"},[n("bs-icon",{attrs:{name:"音乐踩点"},on:{mousedown:i.clickRhythm}}),i._v(" "),n("div",{staticClass:"new"},[i._v("new")])],1)]):i._e(),i._v(" "),[i.$store.state.dynamicOperation.addKeyFrame.show?n("bs-hint",{attrs:{hint:"添加关键帧",offset:7}},[n("div",{staticClass:"icon-wrap active"},[n("div",{staticClass:"new"},[i._v("new")]),i._v(" "),n("bs-icon",{attrs:{name:"关键帧添加"},on:{mousedown:i.clickAddKeyframe}})],1)]):i._e(),i._v(" "),i.$store.state.dynamicOperation.removeKeyFrame.show?n("bs-hint",{attrs:{hint:"移除关键帧",offset:7}},[n("div",{staticClass:"icon-wrap active"},[n("div",{staticClass:"new"},[i._v("new")]),i._v(" "),n("bs-icon",{attrs:{name:"关键帧移除"},on:{mousedown:i.clickDeleteKeyframe}})],1)]):i._e()]],2),i._v(" "),n("div",{staticClass:"right"},[n("div",{staticClass:"shrink",attrs:{id:"guide--shrink"}},[n("bs-icon",{class:{disabled:i.timelineScale<=i.$store.state.minRuler},attrs:{name:"缩小"},on:{click:i.reduceRuler}}),i._v(" "),n("seek-bar",{attrs:{min:i.$store.state.minRuler,max:i.$store.state.maxRuler,step:1,outlineColor:"#aaa",inlineColor:"#4388ff",ballColor:"#4388ff"},on:{seek:i.seekTimelineScale},model:{value:i.timelineScale,callback:function(t){i.timelineScale=t},expression:"timelineScale"}}),i._v(" "),n("bs-icon",{class:{disabled:i.timelineScale>=i.$store.state.maxRuler},attrs:{name:"放大"},on:{click:i.addRuler}})],1),i._v(" "),n("bs-icon",{staticClass:"auto-shrink",attrs:{name:"收缩"},on:{click:i.handlerAutoShrink}})],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{attrs:{visible:e.visible,bodyStyle:{borderRadius:0,padding:"40px",width:"872px",height:"560px"},top:"5vh"},on:{"update:visible":function(t){e.visible=t}}},[i("bs-icon",{staticClass:"btn-close",attrs:{name:"关闭"},on:{click:function(t){return t.stopPropagation(),e.confirmClick(!1)}},nativeOn:{mouseup:function(t){t.stopPropagation()}}}),e._v(" "),i("div",[i("div",{ref:"live-window-container",staticClass:"monitor"},[i("canvas",{ref:"live-window",attrs:{id:"particle-graffitl-live-window"},on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.onParticleMousedown(t))},mousemove:function(t){return t.stopPropagation(),e.onParticleMousemove(t)}}})]),e._v(" "),i("p",{staticClass:"info"},[e._v("按住鼠标左键，开始绘制")])]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("bs-button",{on:{click:function(t){return e.confirmClick(!0)}},nativeOn:{mouseup:function(t){t.stopPropagation()}}},[e._v("确认")])],1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement;return(this._self._c||t)("v-dialog",{ref:"v-dialog",attrs:{text:this.text,width:"290px",showCancel:!0,confirmBtnText:"重新投稿",cancelBtnText:"再等等",cancelFirst:!1,"body-style":{"background-color":"#090A0B"},visible:!0}})}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tracks-empty",on:{mousemove:this.getMouse,mouseleave:this.loseMouse}},[e("img",{attrs:{draggable:"false",src:i(1489),alt:"上轨引导"}}),this._v(" "),e("div",{staticClass:"tips"},[this._v("拖放素材到这里，开始创建你的视频吧~")])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:0<=e.offsetX&&e.offsetX<=e.width,expression:"offsetX >= 0 && offsetX <=width"}],staticClass:"seek-line",style:"transform: translateX("+e.offsetX+"px);"},[i("div",{staticClass:"top",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startSeek(t),void e.mdStop())}}}),e._v(" "),i("div",{staticClass:"line"})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return t.isDragging?i("div",{staticClass:"drag-track-mask",on:{mousemove:t.dragenter,mouseleave:t.dragleave}},[i("bs-icon",{attrs:{name:"添加"}}),t._v(" "),i("span",[t._v(t._s(t.tip))])],1):t._e()}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"ruler-wrap"},[e("canvas",{ref:"ruler-canvas"})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{ref:"track-heads-content",staticClass:"track-heads"},[n("div",{staticClass:"top-empty",class:{active:i.clipDragging},on:{mousemove:function(t){return i.getMouse("TOP")},mouseleave:i.loseMouse}}),i._v(" "),n("div",i._l(i.allTracks,function(t,e){return n("div",{key:e},[e===i.TrackOrder.indexOf(i.TrackTypes.VIDEO)&&i.theme?n("theme-track-head",{attrs:{theme:i.theme}}):i._e(),i._v(" "),i._l(t,function(t,e){return n("track-head",{key:e,attrs:{track:t}})})],2)}),0),i._v(" "),n("div",{staticClass:"bottom-empty",class:{active:i.clipDragging},on:{mousemove:function(t){return i.getMouse("BOTTOM")},mouseleave:i.loseMouse}})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"rhythm-ruler"},[e("canvas",{ref:"ruler"})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"library-wrap"},[i("div",{staticClass:"header"},[i("bs-panel-tab-head",{attrs:{tabs:t.tabs,tab:t.tab},on:{switch:t.switchTab}}),t._v(" "),i("manage-resource",{attrs:{tab:t.tab}}),t._v(" "),i("upload-panel")],1),t._v(" "),i("div",{staticClass:"tab-body"},["project"===t.tab?i("project"):t._e(),t._v(" "),"my-lib"===t.tab?i("my-lib"):t._e()],1),t._v(" "),i("drag-zone",{attrs:{tab:t.tab}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return this.show?e("div",{staticClass:"edit-panel-wrap"},[e("bs-icon",{attrs:{name:"关闭"},on:{click:this.hideEditPanel}}),this._v(" "),e(this.currentPanel,{ref:"currentPanel",tag:"component"})],1):this._e()}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"triple-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[i("div",{staticClass:"card-body"},e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,blurBg:!0,backgroundSize:t.bgSize,from:e.from}})}),1),e._v(" "),i("div",{staticClass:"des"},[e._v("目前仅支持发布30s以上的视频进行展示哦~（仅支持横屏）")])])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"music-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"caption-wrap"},[e.from?e._e():i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,backgroundSize:"cover"}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"builtin-effect-wrap"},[n("bs-panel-tab-head",{attrs:{tabs:i.tabs,tab:i.tab},on:{switch:function(t){i.tab=t.name}}}),i._v(" "),n("div",{staticClass:"tab-body"},i._l(i.list,function(t,e){return n("built-in-effect-card",{key:e,attrs:{card:t,clipType:i.clipType}})}),1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filter-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,blurBg:!0}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"bs-editor",attrs:{id:"app"}},[this.$store.state.browserCheck?e("browser"):[e("router-view"),this._v(" "),e("check-live-expire")]],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"caption-wrap"},[e.fromMusicCaptionEdit?e._e():i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},["批量字幕"!==e.tab?e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,backgroundSize:"100%"}})}):e._l(e.list,function(t){return i("music-caption-card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,backgroundSize:"100%"}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sticker-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,blurBg:!0}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"transition-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,backgroundSize:"100%"}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sticker-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e._l(e.list,function(t){return i("card",{key:t.material_id,attrs:{card:t,clipType:e.clipType,backgroundSize:"70%"}})}),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e()],2)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"particle-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("数量")]),e._v(" "),i("bs-edit-seek-bar",{attrs:{max:3,min:.2,step:.1,before:"x"},model:{value:e._rateGain_,callback:function(t){e._rateGain_=t},expression:"_rateGain_"}})],1),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("大小")]),e._v(" "),i("bs-edit-seek-bar",{attrs:{max:3,min:.2,step:.1,before:"x"},model:{value:e._sizeGain_,callback:function(t){e._sizeGain_=t},expression:"_sizeGain_"}})],1)])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return e.draggingFile?i("div",{staticClass:"dragzone-wrap",on:{dragenter:function(t){return t.stopPropagation(),e.dragenter(t)},dragover:function(t){return t.stopPropagation(),t.preventDefault()},dragleave:e.dragleave,drop:function(t){return e.uploadDrop(t)}}},[i("bs-icon",{attrs:{name:"添加"}}),e._v(" "),i("span",[e._v(e._s(e.tip))])],1):e._e()}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",class:{"change-template-card-cursor":e.currentEditClip},style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{click:function(t){return e.handleChangeTemplate(e.card)}}},[i("div",{staticClass:"card-content",class:{disabled:e.cardDisabled},style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}},[i("section",{staticClass:"bg",style:{"background-image":"url("+e.card.cover+")","background-size":e.backgroundSize}}),e._v(" "),e.currentEditClip?e._e():i("section",{staticClass:"op-info"},[e.hover&&!e.cardDisabled?i("ul",{staticClass:"hover-op-list"},[i("bs-hint",{attrs:{hint:"添加到编辑轨道"}},[i("li",{staticClass:"bind-project",on:{click:e.addToTrack}},[i("bs-icon",{staticClass:"add-to-track",staticStyle:{width:"20px",height:"20px"},attrs:{name:"添加到轨道"}})],1)])],1):e._e()])]),e._v(" "),e.showSelectBorder?i("div",{staticClass:"active-border"}):e._e(),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.name_zhCN)+"\n  ")]),e._v(" "),i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"seek-bar-wrap",staticClass:"seek-bar-wrap",style:"width: "+e.width+"px; height: "+e.height+"px;",on:{mousedown:e.seekDirect}},[i("div",{ref:"outline",staticClass:"outline",style:"\n    height: 2px;\n    background-color: "+e.outlineColor+";\n    "},[i("div",{staticClass:"inline",style:"transform: translateX("+e.offsetX+"px); background-color: "+e.inlineColor+";"})]),e._v(" "),i("div",{staticClass:"ball",style:"transform: translateX("+e.offsetX+"px);\n      width: "+e.height+"px;\n      right: -"+e.height/2+"px;\n      height: "+e.height+"px;\n      background-color: "+e.ballColor+";\n      ",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t)}}})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"track-head",class:{"active-top-track":e.track.activeTopTrack,"active-bottom-track":e.track.activeBottomTrack,active:e.track.active,audio:e.isAudio,video:e.isVideo},on:{mousemove:function(t){return e.getMouse(t)},mouseleave:e.loseMouse}},[i("div",{ref:"wrapper",staticClass:"wrapper",staticStyle:{}},[i("bs-icon",{staticClass:"track-icon",class:{"triple-icon":e.isTriple},attrs:{name:e.trackUIData[e.track.type].icon}}),e._v(" "),i("div",{staticClass:"icon-bg"},[e.track.visible?i("bs-icon",{attrs:{name:"轨道可见"},on:{click:e.hideTrack}}):i("bs-icon",{attrs:{name:"轨道不可见"},on:{click:e.showTrack}})],1),e._v(" "),e.isMusicCaption?i("div",{class:{"icon-bg":!0,"add-music-caption":!0,disable:!e.track.visible}},[i("bs-icon",{attrs:{name:"唱词字幕添加"},on:{click:e.addMusicCaption}})],1):e._e(),e._v(" "),i("div",{staticClass:"volume-bg"},[0!=e.track.volume?i("bs-icon",{staticClass:"volume-icon",attrs:{name:"轨道音量"},on:{click:e.forbidVolume}}):i("bs-icon",{staticClass:"volume-icon",attrs:{name:"静音"},on:{click:e.restoreVolume}}),e._v(" "),i("seek-bar",{class:{forbid:e.$Timeline.isLocked},attrs:{min:0,max:2,width:44,height:7},model:{value:e.track.volume,callback:function(t){e.$set(e.track,"volume",t)},expression:"track.volume"}})],1)],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"theme-video-cover",class:{"clip-dragging":e.isClipDragging}},[e.theme.headDuration?i("theme-cover-clip",{attrs:{width:e.headWidth,left:e.headLeft,selected:e.theme.selected,name:"片头"},nativeOn:{mousedown:function(t){t.stopPropagation(),e.mousedown(0),e.mdStop()},click:function(t){return t.stopPropagation(),e.click("head")}}}):e._e(),e._v(" "),e.theme.tailDuration?i("theme-cover-clip",{ref:"tail",attrs:{width:e.tailWidth,left:e.tailLeftPredict||e.tailLeft,selected:e.theme.selected,name:"片尾"},nativeOn:{mousedown:function(t){t.stopPropagation(),e.mousedown(1),e.mdStop()},click:function(t){return t.stopPropagation(),e.click("tail")}}}):e._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",class:{"change-template-card-cursor":e.currentEditClip},style:{width:e.$store.state.uiSize.squareThemeCardWidth+"px",height:e.$store.state.uiSize.squareThemeCardWidth+"px"},on:{click:function(t){return e.handleChangeTemplate(e.card)}}},[i("div",{staticClass:"card-content",style:{"background-image":"url("+e.materialCover+")","background-size":e.backgroundSize,width:e.$store.state.uiSize.squareThemeCardWidth+"px",height:e.$store.state.uiSize.squareThemeCardWidth+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}},[e.showPreview&&e.card.demo_url?i("canvas",{ref:"video-canvas"}):e._e(),e._v(" "),e.currentEditClip?e._e():i("div",{staticClass:"apply-button",on:{click:function(t){return e.applyTheme(e.card)}}},[e._v("应用主题")])]),e._v(" "),e.showSelectBorder?i("div",{staticClass:"active-border"}):e._e(),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.name_zhCN)+"\n  ")]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"dragPreview",style:{"background-image":"url("+e.materialCover+")","background-size":e.backgroundSize,width:e.$store.state.uiSize.squareThemeCardWidth+"px",height:e.$store.state.uiSize.squareThemeCardWidth+"px","border-radius":"8px"}})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"filter-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"滤镜编辑"===e.tab,expression:"tab === '滤镜编辑'"}],staticClass:"tab-body"},[i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("强度")]),e._v(" "),i("bs-edit-seek-bar",{attrs:{max:1,min:0,step:.1},model:{value:e._intensity_,callback:function(t){e._intensity_=t},expression:"_intensity_"}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"模板"===e.tab,expression:'tab === "模板"'}],staticClass:"change-material-template"},[i("filter-template",{attrs:{from:"FILTER"}})],1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"caption-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("caption-renderer",{directives:[{name:"show",rawName:"v-show",value:"花字"===e.tab,expression:'tab === "花字"'}]}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"字幕模板"===e.tab,expression:'tab === "字幕模板"'}],staticClass:"change-material-template"},[i("caption-template",{attrs:{from:"CAPTION"}})],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"字幕设置"===e.tab,expression:'tab === "字幕设置"'}],staticClass:"tab-body"},[i("div",{staticClass:"label-content"},[e.isKeyFrameMode?i("bs-button",{staticStyle:{width:"150px",margin:"20px 0 20px 0"},attrs:{type:"border"},on:{click:e.clearCaptionKeyFrames}},[e._v("退出关键帧模式\n      ")]):e._e(),e._v(" "),i("textarea",{directives:[{name:"model",rawName:"v-model",value:e._text_,expression:"_text_"}],staticClass:"caption-input",staticStyle:{"margin-top":"10px"},attrs:{type:"text",placeholder:"请输入字幕文字",autocomplete:"off"},domProps:{value:e._text_},on:{keydown:function(t){t.stopPropagation()},blur:e.captionInputBlur,input:function(t){t.target.composing||(e._text_=t.target.value)}}})],1),e._v(" "),i("bs-sub-tab",{attrs:{tabs:e.subTabs,tab:e.subTab},on:{switch:function(t){e.subTab=t.name}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"样式"===e.subTab,expression:'subTab === "样式"'}],staticClass:"label-container"},[i("div",{staticClass:"font-line"},[i("div",{staticClass:"label",staticStyle:{width:"140px"}},[i("div",{staticClass:"label-prefix"},[e._v("字体")]),e._v(" "),i("div",{staticClass:"label-content"},[i("caption-font-select",{attrs:{captionFonts:e.captionFonts},model:{value:e._bsFontId_,callback:function(t){e._bsFontId_=t},expression:"_bsFontId_"}})],1)]),e._v(" "),e._fontSize_&&!e.isKeyFrameMode?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("字号")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-select",{attrs:{theme:"dark",width:"100px"},model:{value:e._fontSize_,callback:function(t){e._fontSize_=t},expression:"_fontSize_"}},e._l(e.fontSizeList,function(t,e){return i("bs-option",{key:e,attrs:{value:t,label:t}})}),1)],1)]):e._e(),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("颜色")]),e._v(" "),i("div",{staticClass:"label-content"},[i("color-select",{attrs:{"default-color":e.currentEditPanelData.defaultColor},model:{value:e._color_,callback:function(t){e._color_=t},expression:"_color_"}})],1)])]),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix",staticStyle:{width:"120px"}},[e._v("效果")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-checkbox",{staticStyle:{"margin-right":"30px"},attrs:{itemValue:0},model:{value:e._shadow_,callback:function(t){e._shadow_=t},expression:"_shadow_"}},[e._v("投影\n          ")]),e._v(" "),i("bs-checkbox",{staticStyle:{"margin-right":"30px"},attrs:{itemValue:1},model:{value:e._bold_,callback:function(t){e._bold_=t},expression:"_bold_"}},[e._v("加粗\n          ")]),e._v(" "),i("bs-checkbox",{attrs:{itemValue:2},model:{value:e._italic_,callback:function(t){e._italic_=t},expression:"_italic_"}},[e._v("斜体")])],1)]),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("对齐")]),e._v(" "),i("div",{staticClass:"label-content"},[i("text-align",{model:{value:e._align_,callback:function(t){e._align_=t},expression:"_align_"}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.currentEditPanelData.rendererId,expression:"!currentEditPanelData.rendererId"}],staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("描边")]),e._v(" "),i("bcc-switch",{model:{value:e._outline_,callback:function(t){e._outline_=t},expression:"_outline_"}})],1),e._v(" "),e._outline_?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("描边颜色")]),e._v(" "),i("div",{staticClass:"label-content"},[e._v("\n          "+e._s(e.currentEditPanelData.defaultOutlineColor)+"\n          "),i("border-color-select",{attrs:{"default-color":e.currentEditPanelData.defaultOutlineColor},model:{value:e._outlineColor_,callback:function(t){e._outlineColor_=t},expression:"_outlineColor_"}})],1)]):e._e(),e._v(" "),e._outline_?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("描边宽度")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.1},model:{value:e._outlineWidth_,callback:function(t){e._outlineWidth_=t},expression:"_outlineWidth_"}})],1)]):e._e(),e._v(" "),e.isKeyFrameMode?e._e():i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("位置")]),e._v(" "),i("div",{staticClass:"label-content"},[i("translate",{on:{setTranslate:e.setTranslate}})],1)])])],1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"theme-track-head",on:{mousemove:function(t){return e.getMouse(t)},mouseleave:e.loseMouse}},[i("div",{ref:"wrapper",staticClass:"wrapper",staticStyle:{}},[i("bs-icon",{staticClass:"track-icon",attrs:{name:"轨道主题"}}),e._v(" "),i("div",{staticClass:"icon-bg"},[i("bs-icon",{staticStyle:{opacity:"0.3",cursor:"not-allowed"},attrs:{name:"轨道可见"}})],1),e._v(" "),i("div",{staticClass:"volume-bg"},[0!=e.theme.volume?i("bs-icon",{staticClass:"volume-icon",attrs:{name:"轨道音量"},on:{click:e.forbidVolume}}):i("bs-icon",{staticClass:"volume-icon",attrs:{name:"静音"},on:{click:e.restoreVolume}}),e._v(" "),i("seek-bar",{class:{forbid:e.$Timeline.isLocked},attrs:{min:0,max:2,width:44,height:7},model:{value:e.volume,callback:function(t){e.volume=t},expression:"volume"}})],1)],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+35+"px"}},[i("div",{staticClass:"card-content",style:{"background-image":"url("+e.card.cover_url+")",width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}},[i("section",{staticClass:"op-info"},[e.hover?i("ul",{staticClass:"hover-op-list"},[i("bs-hint",{attrs:{hint:"添加到编辑轨道"}},[i("li",{staticClass:"bind-project",on:{click:e.addToTrack}},[i("bs-icon",{staticClass:"add-to-track",staticStyle:{width:"20px",height:"20px"},attrs:{name:"添加到轨道"}})],1)])],1):e._e()])]),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.name)+"\n  ")]),e._v(" "),i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{attrs:{visible:e.visible,bodyStyle:{borderRadius:"12px",border:"0px",padding:"0px",width:e.width+"px",height:e.height+"px",backgroundColor:"#1a1a1a"},maskClosable:!0,top:e.top+"px"},on:{"update:visible":function(t){e.visible=t},close:e.close}},[i("div",{staticClass:"preview-modal-wrap"},[i("div",{staticClass:"title",style:{height:e.titleHeight+"px"}},[e._v("\n      放大预览\n    ")]),e._v(" "),i("div",{staticStyle:{"text-align":"center"},style:{width:e.canvasBorderWidth+"px",height:e.canvasBorderHeight+"px"}},[i("canvas",{ref:"livewindow",staticClass:"preview-live-window",staticStyle:{margin:"0"},attrs:{width:e.canvasWidth,height:e.canvasHeight,id:"preview-live-window"}})]),e._v(" "),i("preview-modal-control-bar",{staticClass:"control-bar",style:{height:e.controllerHeight+"px"}}),e._v(" "),i("seek-bar",{staticClass:"seek-bar",style:{bottom:e.controllerHeight-4+"px",width:e.width+"px"},attrs:{width:e.width}})],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"theme-edit-wrap"},[n("bs-panel-tab-head",{attrs:{tabs:i.tabs,tab:i.tab},on:{switch:function(t){i.tab=t.name}}}),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"主题模板"===i.tab,expression:'tab === "主题模板"'}],staticClass:"change-material-template"},[n("theme-template",{attrs:{from:"edit"}})],1),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"主题设置"===i.tab,expression:'tab === "主题设置"'}],staticClass:"tab-body"},[i.currentEditPanelData.titleCaption||i.currentEditPanelData.trailerCaption?n("div",{staticClass:"tab-buttons"},i._l(i.themeCaptions,function(e){return n("button",{key:e.key,staticClass:"item",class:{active:e.key===i.selectedCaptionShow},on:{click:function(t){t.stopPropagation(),i.selectedCaptionShow=e.key}}},[i._v("\n        "+i._s(e.value)+"\n      ")])}),0):i._e(),i._v(" "),n("div",{staticClass:"label-container"},[i.currentEditPanelData.titleCaption&&"titleCaption"===i.selectedCaptionShow?[n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("片头字幕")]),i._v(" "),n("div",{staticClass:"label-content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:i._titleCaptionText_,expression:"_titleCaptionText_"}],staticClass:"caption-input",attrs:{type:"text",placeholder:"请输入字幕文字",autocomplete:"off"},domProps:{value:i._titleCaptionText_},on:{keydown:function(t){t.stopPropagation()},blur:i.themeCaptionInputBlur,input:function(t){t.target.composing||(i._titleCaptionText_=t.target.value)}}})])]),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("字体字号")]),i._v(" "),n("div",{staticClass:"label-content"},[n("caption-font-select",{attrs:{captionFonts:i.captionFonts},model:{value:i._titleCaptionBsFontId_,callback:function(t){i._titleCaptionBsFontId_=t},expression:"_titleCaptionBsFontId_"}}),i._v(" "),i._titleCaptionFontSize_?n("bs-select",{staticStyle:{"margin-left":"24px"},attrs:{theme:"dark",width:"100px"},model:{value:i._titleCaptionFontSize_,callback:function(t){i._titleCaptionFontSize_=t},expression:"_titleCaptionFontSize_"}},i._l(i.fontSizeList,function(t,e){return n("bs-option",{key:e,attrs:{value:t,label:t}})}),1):i._e()],1)]),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("颜色")]),i._v(" "),n("div",{staticClass:"label-content"},[n("color-select",{attrs:{"default-color":i.currentEditPanelData.titleCaption.defaultColor},model:{value:i._titleCaptionColor_,callback:function(t){i._titleCaptionColor_=t},expression:"_titleCaptionColor_"}})],1)])]:i._e(),i._v(" "),i.currentEditPanelData.trailerCaption&&"trailerCaption"===i.selectedCaptionShow?[n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("片尾字幕")]),i._v(" "),n("div",{staticClass:"label-content"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:i._trailerCaptionText_,expression:"_trailerCaptionText_"}],staticClass:"caption-input",attrs:{type:"text",placeholder:"请输入字幕文字",autocomplete:"off"},domProps:{value:i._trailerCaptionText_},on:{keydown:function(t){t.stopPropagation()},blur:i.themeCaptionInputBlur,input:function(t){t.target.composing||(i._trailerCaptionText_=t.target.value)}}})])]),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("字体字号")]),i._v(" "),n("div",{staticClass:"label-content"},[n("caption-font-select",{attrs:{captionFonts:i.captionFonts},model:{value:i._trailerCaptionBsFontId_,callback:function(t){i._trailerCaptionBsFontId_=t},expression:"_trailerCaptionBsFontId_"}}),i._v(" "),i._trailerCaptionFontSize_?n("bs-select",{staticStyle:{"margin-left":"24px"},attrs:{theme:"dark",width:"100px"},model:{value:i._trailerCaptionFontSize_,callback:function(t){i._trailerCaptionFontSize_=t},expression:"_trailerCaptionFontSize_"}},i._l(i.fontSizeList,function(t,e){return n("bs-option",{key:e,attrs:{value:t,label:t}})}),1):i._e()],1)]),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("颜色")]),i._v(" "),n("div",{staticClass:"label-content"},[n("color-select",{attrs:{"default-color":i.currentEditPanelData.trailerCaption.defaultColor},model:{value:i._trailerCaptionColor_,callback:function(t){i._trailerCaptionColor_=t},expression:"_trailerCaptionColor_"}})],1)])]:i._e(),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("音量")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:2,min:0,before:"x"},model:{value:i._themeVolume_,callback:function(t){i._themeVolume_=t},expression:"_themeVolume_"}})],1)],2)])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"shortcut-board-wrap"},i._l(i.shortcutList,function(t,e){return n("div",{key:e,staticClass:"item"},[n("div",{staticClass:"name"},[i._v(i._s(t[0]))]),i._v(" "),n("div",{staticClass:"key"},[i._v(i._s(t[1]))])])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,n){"use strict";function i(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",style:{width:e.$store.state.uiSize.cardWidth+"px",height:9*e.$store.state.uiSize.cardWidth/16+35+"px"}},[i("div",{staticClass:"card-content",style:{"background-image":"url("+n(861)+")",width:e.$store.state.uiSize.cardWidth+"px",height:9*e.$store.state.uiSize.cardWidth/16+30+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}}),e._v(" "),i("audio",{ref:"audio-node"}),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.title)+"\n  ")]),e._v(" "),i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}})],1)}var a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"effect-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"特效编辑"===e.tab,expression:"tab === '特效编辑'"}],staticClass:"tab-body"},[i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("强度")]),e._v(" "),i("bs-edit-seek-bar",{attrs:{max:1,min:0,step:.1},model:{value:e._intensity_,callback:function(t){e._intensity_=t},expression:"_intensity_"}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"模板"===e.tab,expression:'tab === "模板"'}],staticClass:"change-material-template"},[i("effect-template",{attrs:{from:"EFFECT"}})],1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"track-body",staticClass:"track-body",class:{"active-top-track":e.track.activeTopTrack,"active-bottom-track":e.track.activeBottomTrack,active:e.track.active,"clip-on-top":e.track.clipOnTop,"clip-on-bottom":e.track.clipOnBottom,"clip-on-center":e.track.clipOnCenter,audio:e.isAudio,video:e.isVideo},on:{mousemove:function(t){return e.getMouse(t)},mouseleave:e.loseMouse}},[i("div",{staticClass:"container-bg",style:"transform: translateX("+e.translateX+"px);"}),e._v(" "),i("div",{staticClass:"top-highlight",style:"transform: translateX("+e.translateX+"px);"}),e._v(" "),i("div",{ref:"clips-wrapper",staticClass:"clips-wrapper",class:{hidden:!e.track.visible}},[e.showGap?i("div",{ref:"gap",staticClass:"gap",style:{left:e.gapLeft+"px",width:e.gapRight-e.gapLeft+"px"}},[25<e.gapRight-e.gapLeft?i("a",{on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.deleteGap(t))}}},[i("bs-icon",{attrs:{name:"关闭"}})],1):e._e()]):e._e(),e._v(" "),i("div",{ref:"bg",staticClass:"bg",style:"transform: translateX("+e.translateX+"px);",on:{click:function(t){return e.gapHandler(t)}}}),e._v(" "),e.isVideo?i("div",{ref:"active-track",staticClass:"active-track",style:{left:"0px",width:e.activeTrackWidth+"px"}}):e._e(),e._v(" "),i("div",{staticClass:"center-highlight",style:"transform: translateX("+e.translateX+"px);"}),e._v(" "),e._l(e.track.clips,function(t){return i("clip-item",{key:t.uuid,attrs:{clip:t}})})],2),e._v(" "),i("div",{staticClass:"bottom-highlight",style:"transform: translateX("+e.translateX+"px);"})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"effect-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{staticClass:"tab-body"},[e.showMask?e._e():i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("强度")]),e._v(" "),i("bs-edit-seek-bar",{attrs:{max:e._max_,min:0,step:e._step_},model:{value:e._intensity_,callback:function(t){e._intensity_=t},expression:"_intensity_"}})],1),e._v(" "),e.showMask?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("遮罩形状")]),e._v(" "),i("div",{staticClass:"mask-shape-rect",class:{active:"rect"===e.currentEditPanelData.shape},on:{click:function(t){return t.stopPropagation(),e.maskChangeShape("rect")}}}),e._v(" "),i("div",{staticClass:"mask-shape-ellipse",class:{active:"ellipse"===e.currentEditPanelData.shape},on:{click:function(t){return t.stopPropagation(),e.maskChangeShape("ellipse")}}})]):e._e(),e._v(" "),e.showMask?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("反向")]),e._v(" "),i("bcc-switch",{model:{value:e._maskInverseRegion_,callback:function(t){e._maskInverseRegion_=t},expression:"_maskInverseRegion_"}})],1):e._e(),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("位置")]),e._v(" "),i("sdk-edit-translate",{on:{setTranslate:e.setTranslate}})],1)])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"theme-track-body",staticClass:"theme-track-body",on:{mousemove:function(t){return e.getMouse(t)},mouseleave:e.loseMouse}},[i("div",{staticClass:"container-bg",style:"transform: translateX("+e.translateX+"px);"}),e._v(" "),i("div",{ref:"clips-wrapper",staticClass:"clips-wrapper"},[i("div",{ref:"bg",staticClass:"bg",style:"transform: translateX("+e.translateX+"px);"}),e._v(" "),i("div",{staticClass:"center-highlight",style:"transform: translateX("+e.translateX+"px);"}),e._v(" "),i("theme-clip",{attrs:{theme:e.theme}})],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"my-lib-wrapper",staticClass:"my-lib-wrapper"},[i("div",{staticClass:"top"},[i("div",{staticClass:"left"},[i("bs-tab-buttons",{attrs:{tabs:e.tabs,switchTab:e.switchTab},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}}),e._v(" "),e.$store.state.isManageResource?e._e():[e.$store.state.quickCutGray?i("button",{staticClass:"btn-upload multiple",on:{mouseenter:function(t){t.stopPropagation(),e.openMultipleUploadType=!0},mouseleave:function(t){t.stopPropagation(),e.openMultipleUploadType=!1}}},[e._v("\n          上传\n          "),e.openMultipleUploadType?e._e():i("bs-icon",{attrs:{name:"展开"}}),e._v(" "),e.openMultipleUploadType?i("bs-icon",{attrs:{name:"收起"}}):e._e(),e._v(" "),e.openMultipleUploadType?i("multi-upload-type-drop",{on:{quickCutUpload:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_QUICK_CUT_UPLOAD,"my-lib")},normalUpload:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_UPLOAD_CLICKED,"my-lib")},qrcodeUpload:function(t){return e.$store.commit("setShowMobileUploadQrCodeModal","my-lib")}}}):e._e()],1):i("button",{staticClass:"btn-upload",on:{click:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_UPLOAD_CLICKED,"my-lib")}}},[i("bs-icon",{attrs:{name:"上传"}}),e._v("\n          "+e._s(e.$store.state.isManageResource)+"\n          上传\n        ")],1),e._v(" "),i("remote-store",{attrs:{top:e.remoteStoreTop,left:e.remoteStoreLeft}})]],2),e._v(" "),i("search-box",{on:{click:e.clickSearchBox},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1),e._v(" "),i("div",{staticClass:"display-body",style:{marginTop:e.remoteStoreMarginTop}},["category"===e.tab?i("category-tab",{attrs:{searchStr:e.searchStr}}):e._e(),e._v(" "),"date"===e.tab?i("date-tab",{attrs:{searchStr:e.searchStr}}):e._e()],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",class:{"change-template-card-cursor":e.currentEditClip},style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{click:function(t){return e.handleChangeTemplate(e.card)}}},[i("div",{staticClass:"card-content",style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}},[i("section",{staticClass:"bg",style:{"background-image":"url("+e.materialCover+")","background-size":e.backgroundSize}}),e._v(" "),e.currentEditClip?e._e():i("section",{staticClass:"op-info"},[e.hover?i("ul",{staticClass:"hover-op-list"},[i("bs-hint",{attrs:{hint:"添加到编辑轨道"}},[i("li",{staticClass:"bind-project",on:{click:e.addToTrack}},[i("bs-icon",{staticClass:"add-to-track",staticStyle:{width:"20px",height:"20px"},attrs:{name:"添加到轨道"}})],1)])],1):e._e()])]),e._v(" "),e.showSelectBorder?i("div",{staticClass:"active-border"}):e._e(),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.name_zhCN)+"\n  ")]),e._v(" "),i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-wrap",style:{width:t.$store.state.uiSize.cardWidth+"px",height:9*t.$store.state.uiSize.cardWidth/16+35+"px"}},[i(t.type,{tag:"component",staticClass:"card-content",style:{width:t.$store.state.uiSize.cardWidth+"px",height:9*t.$store.state.uiSize.cardWidth/16+"px"},attrs:{card:t.card,inProject:t.inProject},on:{transcode:t.transcode,del:t.del}}),t._v(" "),i("bs-hint",{attrs:{hint:t.card.title,pos:"bottom-start",type:"light-hint"}},[i("div",{staticClass:"card-title-wrp"},[t.highlightHint?i("span",{staticClass:"highlight-hint"},[t._v("高光时刻")]):t._e(),t._v(" "),i("span",{ref:"ellipsis",staticClass:"card-title ellipsis",class:{"highlight-offset":t.highlightHint}},[t._v(t._s(t.card.title))])])]),t._v(" "),t.expireTime?i("span",{staticClass:"expire-time-hint"},[t._v("\n    "+t._s(t.expireTime)+"\n  ")]):t._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"video-edit-wrap"},[n("bs-panel-tab-head",{attrs:{tabs:i.tabs,tab:i.tab},on:{switch:function(t){i.tab=t.name,i.$LogReport.sendCustomEvent("editor_video_multiple_settings_click",i.tab)}}}),i._v(" "),i.tab===i.tabNames.basic?n("div",{staticClass:"tab-body"},[n("div",{staticClass:"label-container"},[i.isKeyFrameMode?n("div",{staticClass:"label"},[n("bs-button",{staticStyle:{width:"150px"},attrs:{type:"border"},on:{click:i.clearVideoKeyFrames}},[i._v("退出关键帧模式\n        ")])],1):i._e(),i._v(" "),i.isKeyFrameMode?i._e():n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("缩放")]),i._v(" "),n("div",{staticClass:"label-content"},[n("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.01,before:"x"},model:{value:i._scale_,callback:function(t){i._scale_=t},expression:"_scale_"}})],1)]),i._v(" "),i.isKeyFrameMode?i._e():n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("中心坐标")]),i._v(" "),n("div",{staticClass:"label-content"},[n("sdk-edit-position",{attrs:{prefix:"X"},model:{value:i._centerX_,callback:function(t){i._centerX_=t},expression:"_centerX_"}}),i._v(" "),n("sdk-edit-position",{staticStyle:{"margin-left":"24px"},attrs:{prefix:"Y"},model:{value:i._centerY_,callback:function(t){i._centerY_=t},expression:"_centerY_"}})],1)]),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("透明度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:1,min:0,step:.01},model:{value:i._opacity_,callback:function(t){i._opacity_=t},expression:"_opacity_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("背景模糊")]),i._v(" "),n("bcc-switch",{model:{value:i._bgBlur_,callback:function(t){i._bgBlur_=t},expression:"_bgBlur_"}})],1),i._v(" "),i.isKeyFrameMode?i._e():n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("旋转设置")]),i._v(" "),n("sdk-edit-rotation",{on:{rotate:i.setRotation}})],1),i._v(" "),n("div",{staticClass:"label"},[n("bs-button",{on:{click:i.resetBase}},[i._v("重置")])],1)])]):i._e(),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:i.tab===i.tabNames.zoom,expression:"tab === tabNames.zoom"}],staticClass:"tab-body"},[n("div",{staticClass:"label-container"},[n("div",{staticClass:"label"},[n("sdk-edit-image-motion",{model:{value:i._imageMotion_,callback:function(t){i._imageMotion_=t},expression:"_imageMotion_"}})],1)])]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:i.tab===i.tabNames.effect,expression:"tab === tabNames.effect"}],staticClass:"tab-body"},i._l(i.filters,function(e){return n("div",{key:e.value,staticClass:"filter-card",class:e.className,style:{width:i.$store.state.uiSize.squareCardSize+"px",height:i.$store.state.uiSize.squareCardSize+"px"},on:{click:function(t){i._filter_=e.value}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:i._filter_===e.value,expression:"_filter_ === filterItem.value"}],staticClass:"active-border"}),i._v(" "),n("p",{staticClass:"text"},[i._v(i._s(e.title))])])}),0),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:i.tab===i.tabNames.color,expression:"tab === tabNames.color"}],staticClass:"tab-body"},[n("div",{staticClass:"label-container"},[n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("亮度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:10,min:0,step:.1},model:{value:i._brightness_,callback:function(t){i._brightness_=t},expression:"_brightness_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("对比度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:10,min:0,step:.1},model:{value:i._contrast_,callback:function(t){i._contrast_=t},expression:"_contrast_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("饱和度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:10,min:0,step:.1},model:{value:i._saturation_,callback:function(t){i._saturation_=t},expression:"_saturation_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("暗角")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:1,min:0,step:.01},model:{value:i._degree_,callback:function(t){i._degree_=t},expression:"_degree_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("锐度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:1,min:0,step:.01},model:{value:i._sharpness_,callback:function(t){i._sharpness_=t},expression:"_sharpness_"}})],1)]),i._v(" "),n("div",{staticClass:"label"},[n("bs-button",{on:{click:i.resetColorCorrection}},[i._v("重置")])],1)]),i._v(" "),-1!==i.tabs.findIndex(function(t){return t.name===i.tabNames.audio})?n("div",{directives:[{name:"show",rawName:"v-show",value:i.tab===i.tabNames.audio,expression:"tab === tabNames.audio"}],staticClass:"tab-body"},[n("div",{staticClass:"label-container"},[n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("音量")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:2,min:0,step:.1,before:"x"},model:{value:i._volume_,callback:function(t){i._volume_=t},expression:"_volume_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("淡入")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.1,after:"s"},model:{value:i._volumeFadeIn_,callback:function(t){i._volumeFadeIn_=t},expression:"_volumeFadeIn_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("淡出")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.1,after:"s"},model:{value:i._volumeFadeOut_,callback:function(t){i._volumeFadeOut_=t},expression:"_volumeFadeOut_"}})],1)]),i._v(" "),n("div",{staticClass:"label"},[n("bs-button",{on:{click:i.resetAudio}},[i._v("重置")])],1)]):i._e(),i._v(" "),-1!==i.tabs.findIndex(function(t){return t.name===i.tabNames.background})?n("background-edit",{directives:[{name:"show",rawName:"v-show",value:i.tab===i.tabNames.background,expression:"tab === tabNames.background"}],staticClass:"tab-body"}):i._e(),i._v(" "),-1!==i.tabs.findIndex(function(t){return t.name===i.tabNames.speedChange})&&i.tab===i.tabNames.speedChange?n("speed-controller",{staticClass:"tab-body"}):i._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"show",rawName:"v-show",value:!e.loading,expression:"!loading"}],staticClass:"project-res-wrapper"},[e.list.length&&!e.isManageResource?i("div",{staticClass:"btn-group"},[e.$store.state.quickCutGray?i("button",{staticClass:"btn-upload multiple",on:{mouseenter:function(t){t.stopPropagation(),e.openMultipleUploadType=!0},mouseleave:function(t){t.stopPropagation(),e.openMultipleUploadType=!1}}},[e._v("\n      上传\n      "),e.openMultipleUploadType?e._e():i("bs-icon",{attrs:{name:"展开"}}),e._v(" "),e.openMultipleUploadType?i("bs-icon",{attrs:{name:"收起"}}):e._e(),e._v(" "),e.openMultipleUploadType?i("multi-upload-type-drop",{on:{quickCutUpload:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_QUICK_CUT_UPLOAD,"project")},normalUpload:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_UPLOAD_CLICKED,"project")},qrcodeUpload:function(t){return e.$store.commit("setShowMobileUploadQrCodeModal","project")}}}):e._e()],1):i("button",{staticClass:"btn-upload",on:{click:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_UPLOAD_CLICKED,"project")}}},[i("bs-icon",{attrs:{name:"上传"}}),e._v("\n      上传\n    ")],1),e._v(" "),i("bs-icon",{staticClass:"btn-record",attrs:{name:"录音"},on:{click:e.showAudioRecord}})],1):e._e(),e._v(" "),e.list.length?e._e():i("div",{staticClass:"btn-upload-init"},[i("button",{staticClass:"btn-upload-center",on:{click:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_UPLOAD_CLICKED,"project")}}},[i("bs-icon",{attrs:{name:"上传"}}),e._v(" "),i("span",{staticClass:"text"},[e._v("点击上传")]),e._v(" "),i("span",{staticClass:"tip"},[e._v("（可拖拽文件到此处）")])],1),e._v(" "),i("button",{staticClass:"btn-upload-center quick-cut-upload",on:{click:function(t){return e.$Bus.$emit(e.$GLEventKey.FILE_QUICK_CUT_UPLOAD,"project")}}},[i("bs-icon",{attrs:{name:"快剪上传"}}),e._v(" "),i("span",{staticClass:"text"},[e._v("快速截取")]),e._v(" "),i("span",{staticClass:"tip"},[e._v("（仅限视频）")])],1),e._v(" "),i("button",{staticClass:"btn-upload-center",on:{click:e.showMobileUploadQRCode}},[i("bs-icon",{attrs:{name:"手机_二维码上传"}}),e._v(" "),i("span",{staticClass:"text"},[e._v("手机上传")]),e._v(" "),i("span",{staticClass:"tip"},[e._v("（可扫描二维码上传）")])],1)]),e._v(" "),e.list.length?i("ul",{staticClass:"card-list"},e._l(e.list,function(t){return i("resource-card",{key:t.resource_id,attrs:{card:t,inProject:!0}})}),1):e._e(),e._v(" "),e.pager.total>e.pager.pageSize?i("bs-pagination",{staticStyle:{"margin-bottom":"20px"},attrs:{theme:"dark",total:e.pager.total,current:e.pager.page,"page-size":e.pager.pageSize},on:{"on-change":e.pageChange}}):e._e(),e._v(" "),e.recordVisible?i("record-modal",{on:{close:function(t){e.recordVisible=!1}}}):e._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sticker-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"贴纸设置"===e.tab,expression:'tab === "贴纸设置"'}],staticClass:"tab-body"},[i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("位置")]),e._v(" "),i("sdk-edit-translate",{on:{setTranslate:e.setTranslate}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"贴纸模板"===e.tab,expression:'tab === "贴纸模板"'}],staticClass:"change-material-template"},[i("sticker-template",{attrs:{from:"template"}})],1)],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,n){"use strict";function i(){var e=this,t=e.$createElement,i=e._self._c||t;return i("bs-dialog",{attrs:{visible:e.visible,bodyStyle:{padding:"40px",width:"590px",height:"689px",transform:e.transform},top:e.topOffset},on:{"update:visible":function(t){e.visible=t}}},[i("bs-icon",{staticClass:"btn-close",attrs:{name:"关闭"},on:{click:e.close}}),e._v(" "),i("div",{staticClass:"body"},[i("div",{ref:"livewindow-container",staticClass:"monitor"},[i("canvas",{ref:"livewindow",attrs:{id:"audio-record-livewindow"}})]),e._v(" "),i("div",{staticClass:"checkbox-group"},[i("bs-checkbox",{attrs:{itemValue:0,disabled:e.$store.state.sdkAllLock||"stop"!==e.record.state||e.audioPlaying},model:{value:e.videoOptions,callback:function(t){e.videoOptions=t},expression:"videoOptions"}},[e._v("同时预览")]),e._v(" "),i("bs-checkbox",{staticStyle:{"margin-left":"40px"},attrs:{itemValue:1,disabled:e.$store.state.sdkAllLock||-1===e.videoOptions.indexOf(0)},model:{value:e.videoOptions,callback:function(t){e.videoOptions=t},expression:"videoOptions"}},[e._v("预览静音")])],1),e._v(" "),e.hasRecord&&"recording"!==e.record.state?e._e():i("div",{staticClass:"record-op"},["stop"!==e.record.state||e.hasRecord?e._e():i("img",{staticClass:"btn-start",attrs:{src:n(1289)},on:{click:e.startAudioRecord}}),e._v(" "),"recording"===e.record.state?i("img",{staticClass:"in-record",attrs:{src:n(1290)},on:{click:e.stopAudioRecord}}):e._e(),e._v(" "),i("span",{staticClass:"record-time"},[e._v(e._s(e.secToString(e.record.sec)))])]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasRecord,expression:"hasRecord"}],staticClass:"audio-play"},[i("div",{staticClass:"audio-card"},[i("div",{staticClass:"duration"},[e._v(e._s(e.secToString(e.record.sec)))])]),e._v(" "),i("audio-player",{ref:"audio-player",on:{play:e.audioPlay,pause:e.audioPause,del:e.deleteAudio,seek:e.seekAudio}})],1)]),e._v(" "),i("div",{attrs:{slot:"footer"},slot:"footer"},[i("bs-button",{attrs:{type:"border"},on:{click:e.close}},[e._v("取消")]),e._v(" "),i("bs-button",{staticStyle:{"margin-left":"30px"},attrs:{disabled:!e.hasRecord||e.isUploading},on:{click:e.confirmClick}},[e._v("上传")])],1)],1)}var a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return i.isManageResource?i._e():n("div",{staticClass:"upload-panel"},[n("div",{staticClass:"upload-head",on:{click:function(t){i.open=!i.open}}},[n("div",{staticClass:"upload-status"},[i._v(i._s(i.uploadStatus))]),i._v(" "),n("div",{staticClass:"upload-num"},[i._v(i._s(i.uploadNum))]),i._v(" "),n("div",{staticClass:"icon"},[i.open?i._e():n("bs-icon",{attrs:{name:"展开"}}),i._v(" "),i.open?n("bs-icon",{attrs:{name:"收起"}}):i._e()],1)]),i._v(" "),i.open?n("ul",{staticClass:"upload-list"},i._l(i.uploads,function(e,t){return n("li",{key:t},[n("div",{staticClass:"name"},[i._v(i._s(e.title))]),i._v(" "),n("div",{staticClass:"progress"},[n("div",{staticClass:"progress-out"},[n("div",{staticClass:"progress-inner",style:"transform: translateX("+100*(e.progress-1)+"%)"})]),i._v(" "),n("div",{staticClass:"progress-num"},[i._v(i._s(parseInt(100*e.progress))+"%")])]),i._v(" "),n("div",{staticClass:"op"},[e.progress<1?n("span",{staticClass:"cancle",on:{click:function(t){return i.cancelTask(e.id)}}},[i._v("取消")]):i._e()])])}),0):i._e()])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"show",rawName:"v-show",value:t.showManagePanel,expression:"showManagePanel"}],staticClass:"manage-panel"},[t.isManageResource?t._e():i("button",{staticClass:"btn-manage",on:{click:t.handleManageSource}},[i("bs-icon",{staticClass:"icon-manage",attrs:{name:"批量管理"}}),t._v("\n    批量管理\n  ")],1),t._v(" "),t.isManageResource?[t.selectedResource.length?i("div",{staticClass:"des"},[t._v("已选中"+t._s(t.selectedResource.length)+"个素材")]):t._e(),t._v(" "),i("button",{staticClass:"btn-manage delete",class:{disabled:!t.selectedResource.length},attrs:{disabled:!t.selectedResource.length},on:{click:t.handleDeleteSource}},[i("bs-icon",{staticClass:"icon-manage",attrs:{name:"资源管理删除"}}),t._v("\n      删除\n    ")],1),t._v(" "),i("button",{staticClass:"btn-manage cancel",on:{click:t.cancelManageSource}},[i("bs-icon",{staticClass:"icon-manage",attrs:{name:"资源管理取消"}}),t._v("\n      取消\n    ")],1)]:t._e()],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"music-caption-renderer-wrap"},[n._l(n.list,function(e,i){return a("div",{key:e.material_id,staticClass:"caption-renderer-card",class:{empty:0===i&&1===n.pager.page},style:{width:n.$store.state.uiSize.squareCardSize+"px",height:n.$store.state.uiSize.squareCardSize+"px",backgroundImage:"url("+e.cover_url+")"},on:{click:function(t){return n.selectCaptionRenderer(e,i)}}},[n.active===i?a("div",{staticClass:"active-border"}):n._e(),n._v(" "),a("p",{staticClass:"text"},[n._v(n._s(e.name))])])}),n._v(" "),n.pager.total>n.pager.pageSize?a("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:n.pager.total,current:n.pager.page,"page-size":n.pager.pageSize},on:{"on-change":n.pageChange}}):n._e()],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",class:{"change-template-card-cursor":e.currentEditClip},style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{click:function(t){return e.handleChangeTemplate(e.card)}}},[i("div",{staticClass:"card-content",style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}},[e.materialCover&&e.blurBg?i("section",{staticClass:"blur-bg",style:"background-image: url('"+e.materialCover+"')"}):e._e(),e._v(" "),i("section",{staticClass:"bg",style:{"background-image":"url("+e.materialCover+")","background-size":e.backgroundSize}}),e._v(" "),e.showPreview&&e.card.demo_url?i("canvas",{ref:"video-canvas"}):e._e(),e._v(" "),e.isTransitionCard||e.currentEditClip?e._e():i("section",{staticClass:"op-info"},[e.hover?i("ul",{staticClass:"hover-op-list"},[i("bs-hint",{attrs:{hint:"添加到编辑轨道"}},[i("li",{staticClass:"bind-project",on:{click:e.addToTrack}},[i("bs-icon",{staticClass:"add-to-track",staticStyle:{width:"20px",height:"20px"},attrs:{name:"添加到轨道"}})],1)])],1):e._e()])]),e._v(" "),e.showSelectBorder?i("div",{staticClass:"active-border"}):e._e(),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.name_zhCN)+"\n  ")]),e._v(" "),e.currentEditClip?e._e():i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-wrap",class:{"change-template-card-cursor":e.currentEditClip},style:{width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{click:function(t){return e.changeMusicTemplate(e.card)}}},[i("div",{staticClass:"card-content",style:{"background-image":"url("+e.materialCover+")","background-size":e.backgroundSize,width:e.$store.state.uiSize.squareCardSize+"px",height:e.$store.state.uiSize.squareCardSize+"px"},on:{mouseenter:e.startPreview,mouseleave:e.stopPreview,mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)}}},[e.showPreview&&e.card.demo_url?i("canvas",{ref:"video-canvas"}):e._e(),e._v(" "),e.currentEditClip?e._e():i("div",{staticClass:"apply-button",on:{click:function(t){return e.applyMusicCaption(e.card)}}},[e._v("应用样式")])]),e._v(" "),e.showSelectBorder?i("div",{staticClass:"active-border"}):e._e(),e._v(" "),i("span",{staticClass:"card-title"},[e._v("\n    "+e._s(e.card.name_zhCN)+"\n  ")]),e._v(" "),i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sticker-edit-wrap"},[i("bs-panel-tab-head",{attrs:{tabs:e.tabs,tab:e.tab},on:{switch:function(t){e.tab=t.name}}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"贴纸设置"===e.tab,expression:'tab === "贴纸设置"'}],staticClass:"tab-body"},[e.isKeyFrameMode?i("div",{staticClass:"keyframe-content"},[e._m(0),e._v(" "),i("bs-button",{staticStyle:{width:"150px"},attrs:{type:"border"},on:{click:e.clearStickerKeyFrames}},[e._v("退出关键帧模式")])],1):e._e(),e._v(" "),e.isKeyFrameMode?e._e():i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("位置")]),e._v(" "),i("sdk-edit-translate",{on:{setTranslate:e.setTranslate}})],1),e._v(" "),e.isKeyFrameMode?e._e():i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("旋转设置")]),e._v(" "),i("sdk-edit-rotation",{on:{rotate:e.setRotation}})],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:"贴纸模板"===e.tab,expression:'tab === "贴纸模板"'}],staticClass:"change-material-template"},[i("sticker-template")],1)],1)}var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hint"},[this._v("当前为关键帧模式，只支持在预览窗口中更改素材位置，角度等信息"),e("br"),this._v("你可点击下方按钮，关闭该模式")])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"audio-edit-wrap"},[n("bs-panel-tab-head",{attrs:{tabs:i.tabs,tab:i.tab},on:{switch:function(t){i.tab=t.name}}}),i._v(" "),n("div",{staticClass:"tab-body"},[n("div",{directives:[{name:"show",rawName:"v-show",value:"变声"===i.tab,expression:"tab === '变声'"}],staticClass:"audio-fxs"},i._l(i.fxs,function(e){return n("div",{key:e.title,staticClass:"audio-fx-card",class:[e.className],style:{width:i.$store.state.uiSize.squareCardSize+"px",height:i.$store.state.uiSize.squareCardSize+"px"},on:{click:function(t){i._fx_=e.value}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:i._fx_===e.value,expression:"_fx_ === fxItem.value"}],staticClass:"active-border"}),i._v(" "),n("p",{staticClass:"audio-fx-title",style:{top:i.$store.state.uiSize.squareCardSize+10+"px"}},[i._v(i._s(e.title))])])}),0),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"参数设置"===i.tab,expression:"tab === '参数设置'"}],staticClass:"label-container"},[n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("速度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:8,min:.25,step:.01,before:"x"},on:{seekend:function(t){return i.setSpeed(t,!0)}},model:{value:i._speed_,callback:function(t){i._speed_=t},expression:"_speed_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("音量")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:2,min:0,step:.1,before:"x"},model:{value:i._volume_,callback:function(t){i._volume_=t},expression:"_volume_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("淡入")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.1,after:"s"},model:{value:i._volumeFadeIn_,callback:function(t){i._volumeFadeIn_=t},expression:"_volumeFadeIn_"}})],1),i._v(" "),n("div",{staticClass:"label"},[n("div",{staticClass:"label-prefix"},[i._v("淡出")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.1,after:"s"},model:{value:i._volumeFadeOut_,callback:function(t){i._volumeFadeOut_=t},expression:"_volumeFadeOut_"}})],1)]),i._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:"参数设置"===i.tab,expression:"tab === '参数设置'"}],staticClass:"label"},[n("bs-button",{on:{click:i.resetAudio}},[i._v("重置")])],1)])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"music-caption-content"},[n("div",{staticClass:"top"},[n("bs-button",{attrs:{type:"border"},on:{click:i.loadFromText}},[i._v("粘贴文本")]),i._v(" "),n("bs-button",{style:{width:"120px",marginLeft:"16px"},attrs:{type:"border"},on:{click:i.loadFromLyricFile}},[i._v("导入字幕文件\n    ")]),i._v(" "),n("span",{staticClass:"tip"},[i._v("支持LRC, SRT, ASS格式")])],1),i._v(" "),i.clips&&i.clips.length?n("div",{staticClass:"edit-caption-panel"},[n("div",{ref:"body",staticClass:"body"},i._l(i.clips,function(e,t){return n("div",{key:t,ref:"item-"+t,refInFor:!0,staticClass:"clip-item",class:{active:i.activeClip&&e.uuid===i.activeClip.uuid&&!i.$store.state.isContextPlaying,"timeline-play-active":e.inPoint<=i.$store.state.currentTimelinePosition&&e.outPoint>=i.$store.state.currentTimelinePosition&&i.$store.state.isContextPlaying}},[n("div",{staticClass:"time"},[n("div",[i._v(i._s(i.secToString(e.inPoint/1e6,!0)))]),i._v("\n          ~\n          "),n("div",[i._v(i._s(i.secToString(e.outPoint/1e6,!0)))])]),i._v(" "),n("div",{staticClass:"text-container"},[n("pre",[i._v(i._s(e.getMusicCaptionText()+"\n"))]),i._v(" "),n("textarea",{ref:"caption-input",refInFor:!0,staticClass:"input",attrs:{placeholder:"可在此输入文本",autocomplete:"off"},domProps:{value:e.getMusicCaptionText()},on:{keydown:function(t){t.stopPropagation()},click:function(t){return i.selectMusicCaptionClip(e)},focus:function(t){return i.selectMusicCaptionClip(e)},input:function(t){return i.inputCaptionText(t,e)}}})])])}),0),i._v(" "),n("div",{staticClass:"op-bar"},[n("div",{staticClass:"op-item",on:{click:i.addOneLine}},[i._v("当前画面添加字幕")]),i._v(" "),n("div",{staticClass:"op-item",on:{click:i.clearAllMusicCaption}},[i._v("一键清空")])])]):n("div",{staticClass:"empty-hint"},[n("div",{staticClass:"tip"},[i._v("\n      还没有字幕哦～\n      "),n("a",{on:{click:i.addFirstMusicCaption}},[i._v("点击此处添加第一条字幕")])])])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"music-caption-style-edit"},[i("div",{staticClass:"label-container"},[i("div",{staticClass:"font-line"},[i("div",{staticClass:"label",staticStyle:{width:"140px"}},[i("div",{staticClass:"label-prefix"},[e._v("字体")]),e._v(" "),i("div",{staticClass:"label-content"},[i("caption-font-select",{attrs:{captionFonts:e.captionFonts},model:{value:e._bsFontId_,callback:function(t){e._bsFontId_=t},expression:"_bsFontId_"}})],1)]),e._v(" "),e._fontSize_?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("字号")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-select",{attrs:{theme:"dark",width:"100px"},model:{value:e._fontSize_,callback:function(t){e._fontSize_=t},expression:"_fontSize_"}},e._l(e.fontSizeList,function(t,e){return i("bs-option",{key:e,attrs:{value:t,label:t}})}),1)],1)]):e._e(),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("颜色")]),e._v(" "),i("div",{staticClass:"label-content"},[i("color-select",{attrs:{"default-color":e.musicCaptionEditData.defaultColor},model:{value:e._color_,callback:function(t){e._color_=t},expression:"_color_"}})],1)])]),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("效果")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-checkbox",{staticStyle:{"margin-right":"30px"},attrs:{itemValue:0},model:{value:e._shadow_,callback:function(t){e._shadow_=t},expression:"_shadow_"}},[e._v("投影")]),e._v(" "),i("bs-checkbox",{staticStyle:{"margin-right":"30px"},attrs:{itemValue:1},model:{value:e._bold_,callback:function(t){e._bold_=t},expression:"_bold_"}},[e._v("加粗")]),e._v(" "),i("bs-checkbox",{attrs:{itemValue:2},model:{value:e._italic_,callback:function(t){e._italic_=t},expression:"_italic_"}},[e._v("斜体")])],1)]),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!e.musicCaptionEditData.rendererId,expression:"!musicCaptionEditData.rendererId"}],staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("描边")]),e._v(" "),i("bcc-switch",{model:{value:e._outline_,callback:function(t){e._outline_=t},expression:"_outline_"}})],1),e._v(" "),e._outline_?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("描边颜色")]),e._v(" "),i("div",{staticClass:"label-content"},[i("border-color-select",{attrs:{"default-color":e.musicCaptionEditData.defaultOutlineColor},model:{value:e._outlineColor_,callback:function(t){e._outlineColor_=t},expression:"_outlineColor_"}})],1)]):e._e(),e._v(" "),e._outline_?i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("描边宽度")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-edit-seek-bar",{attrs:{max:5,min:0,step:.1},model:{value:e._outlineWidth_,callback:function(t){e._outlineWidth_=t},expression:"_outlineWidth_"}})],1)]):e._e(),e._v(" "),i("div",{staticClass:"label"},[i("div",{staticClass:"label-prefix"},[e._v("位置")]),e._v(" "),i("div",{staticClass:"label-content"},[i("bs-button",{on:{click:e.resetPosition}},[e._v("重置位置")])],1)])])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("span",{class:this.wrpClasses,on:{click:this.toggle}},[e("input",{attrs:{type:"hidden",name:this.name,autocomplete:"off"},domProps:{value:this.currentValue},on:{keydown:function(t){t.stopPropagation()}}})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("card-template",{staticClass:"image-card",attrs:{card:t.card,inProject:t.inProject}},[t.card.cover_download_url?i("section",{staticClass:"blur-bg",style:"background-image: url('"+t.card.cover_download_url+"')"}):t._e(),t._v(" "),t.card.cover_download_url?i("section",{staticClass:"bg",style:"background-image: url('"+t.card.cover_download_url+"')"}):t._e()])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"color-select-wrap"},i._l(i.colors,function(e,t){return n("div",{key:t,staticClass:"color-border",class:{active:i.currentColor===e,"no-border":"none"===e},on:{click:function(t){return i.select(e)}}},[n("div",{staticClass:"color-body",style:"border-color: "+e+";"})])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"bs-color-select-comp"},[n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:i.handleClose,expression:"handleClose"}],staticClass:"bs-color-select",on:{click:function(t){return t.stopPropagation(),i.toggleMenu(t)}}},[n("div",{staticClass:"display-color-box",style:"background-color: "+i.currentColor+";"}),i._v(" "),i.showMenu?n("bs-icon",{attrs:{name:"收起"}}):n("bs-icon",{attrs:{name:"展开"}})],1),i._v(" "),n("transition",{attrs:{name:"bs-select-zoom-in-top"}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:i.showMenu,expression:"showMenu"}],staticClass:"ul-color-container"},i._l(i.colors,function(e,t){return n("li",{key:t,class:{active:i.currentColor===e},style:"background-color: "+e+";",on:{click:function(t){return i.select(e)}}})}),0)])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"multi-upload"},[i("div",{staticClass:"multi-upload-mask"}),e._v(" "),i("div",{staticClass:"normal-upload",on:{click:function(t){return t.stopPropagation(),e.$emit("normalUpload")}}},[i("bs-icon",{attrs:{name:"上传"}}),e._v(" "),i("span",{staticClass:"text"},[e._v("普通上传")])],1),e._v(" "),i("div",{staticClass:"other-upload",on:{click:function(t){return t.stopPropagation(),e.$emit("quickCutUpload")}}},[i("bs-icon",{attrs:{name:"快剪上传"}}),e._v(" "),i("span",{staticClass:"text"},[e._v("快速截取")]),e._v(" "),i("span",{staticClass:"tip"},[e._v("（仅限视频）")])],1),e._v(" "),i("div",{staticClass:"other-upload",on:{click:function(t){return t.stopPropagation(),e.$emit("qrcodeUpload")}}},[i("bs-icon",{attrs:{name:"手机_二维码上传"}}),e._v(" "),i("span",{staticClass:"text"},[e._v("手机上传")]),e._v(" "),i("span",{staticClass:"tip"},[e._v("（可扫描二维码上传）")])],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"remote-store",style:{top:this.positionTop,left:this.positionLeft}},[e("div",{staticClass:"progress"},[e("div",{staticClass:"active",style:{width:this.remoteStoreUsedPercentage}})]),this._v(" "),e("p",{staticClass:"progress-info"},[this._v(this._s(this.remoteStoreUsed)+"G / "+this._s(this.remoteStoreTotal)+"G")])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"date-tab"},[i.list.length?n("div",i._l(i.dateGroupList,function(t,e){return n("div",{key:e,staticClass:"group"},[n("div",{staticClass:"top"},[n("div",{staticClass:"date"},[i._v(i._s(t.date))]),i._v(" "),n("div",{staticClass:"line"})]),i._v(" "),n("div",{staticClass:"cards"},i._l(t.list,function(t){return n("resource-card",{key:t.resource_id,attrs:{card:t,inProject:!1}})}),1)])}),0):i._e(),i._v(" "),i.list.length||i.loading?i._e():n("div",{staticClass:"empty"},[n("img",{attrs:{src:a(858),alt:"空空的"}})]),i._v(" "),i.pager.total>i.pager.pageSize?n("bs-pagination",{staticStyle:{"margin-bottom":"20px"},attrs:{theme:"dark",total:i.pager.total,current:i.pager.page,"page-size":i.pager.pageSize},on:{"on-change":i.pageChange}}):i._e()],1)}var n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},function(t,e,i){"use strict";function n(){var t=this.$createElement;return(this._self._c||t)(this.componentId,{tag:"component",attrs:{clip:this.clip}})}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"text-align-wrap"},i._l(i.aligns,function(e,t){return n("div",{key:t,staticClass:"block",class:[i.align===e?"active":"",e],on:{click:function(t){return i.setAlign(e)}}},[n("div"),i._v(" "),n("div"),i._v(" "),n("div"),i._v(" "),n("div")])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this.$createElement,e=this._self._c||t;return e("card-template",{staticClass:"audio-card",attrs:{card:this.card,inProject:this.inProject},on:{mouseenter:this.startPreview,mouseleave:this.stopPreview}},[e("section",{style:"background-image: url('"+this.bgImg+"')"})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("card-template",{staticClass:"video-card",attrs:{card:t.card,inProject:t.inProject},on:{mouseenter:t.startPreview,mouseleave:t.stopPreview}},[t.card.cover_download_url?i("section",{staticClass:"blur-bg",style:"background-image: url('"+t.card.cover_download_url+"')"}):t._e(),t._v(" "),t.card.cover_download_url?i("section",{staticClass:"bg",style:"background-image: url('"+t.card.cover_download_url+"')"}):t._e(),t._v(" "),i("canvas",{directives:[{name:"show",rawName:"v-show",value:t.showPreview,expression:"showPreview"}],ref:"video-canvas",staticClass:"preview-canvas"})])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:i.closeShowSelect,expression:"closeShowSelect"}],staticClass:"caption-font-select"},[n("div",{staticClass:"caption-font-display",on:{click:function(t){t.stopPropagation(),i.selectShow=!i.selectShow}}},[i.activeCaptionFont?n("img",{attrs:{src:i.activeCaptionFont.cover,alt:"默认"}}):n("p",[i._v("字体选择")]),i._v(" "),i.selectShow?n("bs-icon",{attrs:{name:"收起"}}):n("bs-icon",{attrs:{name:"展开"}})],1),i._v(" "),n("transition",{attrs:{name:"bs-select-zoom-in-top"}},[i.selectShow?n("div",{staticClass:"caption-font-options"},[n("ul",i._l(i.captionFonts,function(e,t){return n("li",{key:e.bsFontId+"_"+t,class:["option-item",{selected:i.value===e.bsFontId}],on:{click:function(t){return t.stopPropagation(),i.selectCaptionFont(e)}}},[e.cover?n("img",{attrs:{src:e.cover,alt:"默认"}}):n("p",[i._v(i._s(e.name))]),i._v(" "),n("bs-icon",{attrs:{name:"勾"}})],1)}),0)]):i._e()])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var n=this,t=n.$createElement,a=n._self._c||t;return a("div",{staticClass:"renderer-container"},[n._l(n.list,function(e,i){return a("div",{key:e.material_id,staticClass:"caption-renderer-card",class:{empty:0===i&&1===n.pager.page},style:{width:n.$store.state.uiSize.squareCardSize+"px",height:n.$store.state.uiSize.squareCardSize+"px",backgroundImage:"url("+e.cover_url+")"},on:{click:function(t){return n.selectCaptionRenderer(e,i)}}},[n.active===i?a("div",{staticClass:"active-border"}):n._e(),n._v(" "),a("p",{staticClass:"text"},[n._v(n._s(e.name))])])}),n._v(" "),n.pager.total>n.pager.pageSize?a("bs-pagination",{staticStyle:{"margin-top":"20px",width:"100%"},attrs:{theme:"dark",total:n.pager.total,current:n.pager.page,"page-size":n.pager.pageSize},on:{"on-change":n.pageChange}}):n._e()],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,a){"use strict";function i(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"category-tab"},[n("ul",{staticClass:"tabs"},i._l(i.tabs,function(e,t){return n("li",{key:t,class:{active:e.key===i.tab},on:{click:function(t){return i.categoryTabClick(e.key)}}},[i._v("\n      "+i._s(e.name)+"\n    ")])}),0),i._v(" "),i.list.length?n("div",{staticClass:"cards"},i._l(i.list,function(t){return n("resource-card",{key:t.resource_id,attrs:{card:t,inProject:!1}})}),1):i._e(),i._v(" "),i.list.length||i.loading?i._e():n("div",{staticClass:"empty"},[n("img",{attrs:{src:a(858),alt:"空空的"}})]),i._v(" "),i.pager.total>i.pager.pageSize?n("bs-pagination",{staticStyle:{"margin-bottom":"20px"},attrs:{theme:"dark",total:i.pager.total,current:i.pager.page,"page-size":i.pager.pageSize},on:{"on-change":i.pageChange}}):i._e()],1)}var n=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return n})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"projects-search-box-wrap",on:{click:function(t){return e.$emit("click")}}},[i("bs-icon",{staticClass:"search-icon",attrs:{name:"搜索放大镜"}}),e._v(" "),i("label",{staticClass:"search-input",attrs:{for:"projects-search"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.inputValue,expression:"inputValue"}],attrs:{type:"text",id:"projects-search",placeholder:"搜索",autocomplete:"off"},domProps:{value:e.inputValue},on:{input:[function(t){t.target.composing||(e.inputValue=t.target.value)},function(t){return e.$emit("input",e.inputValue)}],keydown:function(t){t.stopPropagation()}}})])],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"sdk-edit-rotation"},i._l(i.rotations,function(e,t){return n("div",{key:t,staticClass:"item",class:e.className,attrs:{title:e.title},on:{click:function(t){return i.$emit("rotate",e.value)}}},[n("bs-icon",{attrs:{name:e.icon}})],1)}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"sdk-edit-image-motion"},i._l(i.options,function(e,t){return n("div",{key:t,staticClass:"item",class:{active:i.value===e.val},on:{click:function(t){return i.$emit("input",e.val)}}},[n("div",{staticClass:"icon-wrap"},[n("bs-icon",{attrs:{name:e.icon}})],1),i._v(" "),n("div",{staticClass:"title"},[i._v("\n      "+i._s(e.text)+"\n    ")])])}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"background-wrap"},[n("bs-tab-buttons",{staticStyle:{"margin-top":"32px"},attrs:{tabs:i.tabs},model:{value:i.tab,callback:function(t){i.tab=t},expression:"tab"}}),i._v(" "),"color"===i.tab?n("section",[n("bg-card",{attrs:{card:null,active:!i._backgroundResourceId_},nativeOn:{click:function(t){return i.setBackground(null)}}}),i._v(" "),i._l(i.colorCards,function(e,t){return n("bg-card",{key:t,attrs:{card:e,active:i._backgroundResourceId_===e.bs_hash},nativeOn:{click:function(t){return i.setBackground(e)}}})})],2):i._e(),i._v(" "),"image"===i.tab?n("section",[n("bg-card",{attrs:{card:null,active:!i._backgroundResourceId_},nativeOn:{click:function(t){return i.setBackground(null)}}}),i._v(" "),i._l(i.imageCards,function(e,t){return n("bg-card",{key:t,attrs:{card:e,active:i._backgroundResourceId_===e.bs_hash},nativeOn:{click:function(t){return i.setBackground(e)}}})})],2):i._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"theme-clip",staticClass:"theme-clip-wrap",class:{selected:e.theme.selected},style:"\n    width:"+(e.widthPredict||e.width)+"px;\n    border: 2px solid "+(e.theme.selected?"#8D97AD":"transparent")+";\n  ",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.mousedown(t),void e.mdStop())},click:function(t){return t.stopPropagation(),e.click(t)}}},[i("div",{staticClass:"display-text"},[i("span",[e._v(" 主题："+e._s(e.theme.themeName)+" ")])])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return i.curveEditing?n("curve-edit",{staticStyle:{"margin-top":"32px"},attrs:{dataPoints:i.currentDataPoints},on:{finished:function(t){i.curveEditing=!1}}}):n("div",{staticClass:"speed-controller"},[n("bs-tab-buttons",{staticStyle:{"margin-top":"32px"},attrs:{tabs:i.tabs},on:{switchTab:i.switchTab},model:{value:i.tab,callback:function(t){i.tab=t},expression:"tab"}}),i._v(" "),"line"===i.tab?n("section",[n("div",{staticClass:"label",staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"label-prefix"},[i._v("速度")]),i._v(" "),n("bs-edit-seek-bar",{attrs:{max:8,min:.1,step:.01,before:"x"},on:{seekend:function(t){return i.setSpeed(t,!0)}},model:{value:i._speed_,callback:function(t){i._speed_=t},expression:"_speed_"}})],1),i._v(" "),i.showGiveUpCurve?n("div",{staticClass:"give-up-curve"},[n("div",{staticClass:"hint"},[i._v("放弃曲线变速，使用常规变速")]),i._v(" "),n("bs-button",{on:{click:i.giveUpCurveSpeed}},[i._v("确定")])],1):i._e()]):i._e(),i._v(" "),"curve"===i.tab?n("section",{staticStyle:{"padding-top":"40px"}},i._l(i.list,function(e,t){return n("curve-card",{key:t,attrs:{curve:e,active:!e&&!i._speedCurveName_||e&&i._speedCurveName_===e.name},nativeOn:{click:function(t){return i.applyCurveObject(e)}}})}),1):i._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"audio-player"},[i("audio",{ref:"audio"}),e._v(" "),i("div",{staticClass:"top"},[i("span",[e._v(e._s(e.name))]),e._v(" "),i("bs-icon",{staticClass:"del",attrs:{name:"删除"},on:{click:function(t){return e.$emit("del")}}})],1),e._v(" "),i("div",{staticClass:"bottom"},["pause"===e.state?i("bs-icon",{staticClass:"audio-op",attrs:{name:"播放"},on:{click:e.play}}):i("bs-icon",{staticClass:"audio-op",attrs:{name:"暂停"},on:{click:e.pause}}),e._v(" "),i("seek-bar",{attrs:{max:e.duration,min:0,width:150,height:10},on:{seek:e.seek},model:{value:e.seekBarValue,callback:function(t){e.seekBarValue=t},expression:"seekBarValue"}}),e._v(" "),i("span",{staticClass:"play-time"},[e._v(e._s(e.secToString(e.seekBarValue)))])],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"sdk-edit-position",style:{width:e.headWidth+e.bodyWidth+"px"}},[i("div",{staticClass:"prefix-text",style:{width:e.headWidth+"px"}},[e._v("\n    "+e._s(e.prefix)+"\n  ")]),e._v(" "),i("span",{staticClass:"number-value",style:{width:e.bodyWidth+"px"}},[i("span",{staticClass:"value"},[e._v(e._s(e.value+e.unit))]),e._v(" "),i("bs-icon",{staticClass:"increase",class:{disable:e.value>=e.max},attrs:{name:"增加"},nativeOn:{mousedown:function(t){return e.startIncrease(t)},mouseup:function(t){return e.stopTimer(t)}}}),e._v(" "),i("bs-icon",{staticClass:"decrease",class:{disable:e.value<=e.min},attrs:{name:"减少"},nativeOn:{mousedown:function(t){return e.startDecrease(t)},mouseup:function(t){return e.stopTimer(t)}}})],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"preview-modal-control-bar-wrap"},[i("div",{staticClass:"video-time"},[i("span",{staticClass:"time-item"},[e._v(e._s(e.$store.getters.currentTimelinePositionHumanViewFrame))]),e._v(" "),i("span",{staticClass:"gutter"},[e._v("/")]),e._v(" "),i("span",{staticClass:"time-item"},[e._v(e._s(e.$store.getters.timelineDurationHumanViewFrame))])]),e._v(" "),i("div",{staticClass:"play-control"},[i("bs-icon",{staticClass:"size-1",attrs:{name:"上一曲"},on:{click:e.backStart}}),e._v(" "),i("bs-icon",{staticClass:"size-2",attrs:{name:"回退"},on:{click:e.back5frame}}),e._v(" "),i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:!e._liveWindowPlaying_,expression:"!_liveWindowPlaying_"}],staticClass:"playing",attrs:{name:"播放"},on:{click:function(t){return e.playLiveWindow(!0)}}}),e._v(" "),i("bs-icon",{directives:[{name:"show",rawName:"v-show",value:e._liveWindowPlaying_,expression:"_liveWindowPlaying_"}],staticClass:"pause",attrs:{name:"暂停"},on:{click:function(t){return e.playLiveWindow(!1)}}}),e._v(" "),i("bs-icon",{staticClass:"size-2",attrs:{name:"快进"},on:{click:e.forward5frame}}),e._v(" "),i("bs-icon",{staticClass:"size-1",attrs:{name:"下一曲"},on:{click:e.forwardEnd}})],1),e._v(" "),i("div",{staticClass:"view-control"},[i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeShowSelectSpeed,expression:"closeShowSelectSpeed"}],staticClass:"btn",on:{click:e.clickShowSelectSpeed}},[i("span",[e._v(e._s(e.$store.state.timelineSpeed)+"x")]),e._v(" "),e.showSelectSpeed?i("div",{staticClass:"change-video-speed-drop",on:{click:function(t){t.stopPropagation()}}},[i("seek-bar",{attrs:{height:9,width:75,max:2,min:.1,step:.1},model:{value:e._speed_,callback:function(t){e._speed_=t},expression:"_speed_"}})],1):e._e()]),e._v(" "),i("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.closeShowSelectSize,expression:"closeShowSelectSize"}],staticClass:"btn",on:{click:e.clickShowSelectSize}},[i("span",[e._v(e._s(e.sizeView))]),e._v(" "),e.showSelectSize?i("div",{staticClass:"change-video-size-drop"},[i("div",{class:{active:.5===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("1:2")}}},[e._m(0),e._v(" "),i("span",[e._v("1:2")])]),e._v(" "),i("div",{class:{active:2===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("2:1")}}},[e._m(1),e._v(" "),i("span",[e._v("2:1")])]),e._v(" "),i("div",{class:{active:e.$store.state.ratio===4/3},on:{click:function(t){return e.selectRatio("4:3")}}},[e._m(2),e._v(" "),i("span",[e._v("4:3")])]),e._v(" "),i("div",{class:{active:.75===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("3:4")}}},[e._m(3),e._v(" "),i("span",[e._v("3:4")])]),e._v(" "),i("div",{class:{active:1===e.$store.state.ratio},on:{click:function(t){return e.selectRatio("1:1")}}},[e._m(4),e._v(" "),i("span",[e._v("1:1")])]),e._v(" "),i("div",{class:{active:e.$store.state.ratio===16/9},on:{click:function(t){return e.selectRatio("16:9")}}},[e._m(5),e._v(" "),i("span",[e._v("16:9")])]),e._v(" "),i("div",{class:{active:e.$store.state.ratio===9/16},on:{click:function(t){return e.selectRatio("9:16")}}},[e._m(6),e._v(" "),i("span",[e._v("9:16")])])]):e._e()])])])}var a=[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-1-2"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-2-1"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-4-3"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-3-4"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-1-1"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-16-9"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"rect"},[e("i",{staticClass:"rect-9-16"})])}];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"translate-wrap"},i._l(i.list,function(e){return n("div",{key:e.value,staticClass:"item",class:{active:i.active===e.key},on:{click:function(t){return i.translate(e)}}},[n("bs-icon",{staticClass:"check-icon",attrs:{name:"勾"}})],1)}),0)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"theme-cover-clip",class:{selected:t.selected},style:{width:t.width+"px",left:t.left+"px",border:"2px solid "+(t.selected?"#8D97AD":"transparent")}},[40<t.width?i("span",[t._v(t._s(t.name))]):t._e(),t._v(" "),t.width<=40&&20<t.width?i("bs-icon",{attrs:{name:"主题白色"}}):t._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"edit-seek-bar-wrapper",style:"width: "+e.width+"px;"},[i("div",{staticClass:"top"},[i("div",{staticClass:"current",style:{left:e.width+e.offsetX-25+"px"}},[e._v("\n      "+e._s(""+e.before+(e.displayValue||e.value)+e.after)+"\n    ")])]),e._v(" "),i("div",{ref:"seek-bar-wrap",staticClass:"seek-bar-wrap",style:"width: "+e.width+"px; height: "+e.height+"px;",on:{mousedown:e.seekDirect}},[i("div",{ref:"outline",staticClass:"outline",style:"\n    height: 4px;\n    background-color: "+e.outlineColor+";\n    "},[i("div",{staticClass:"inline",style:"transform: translateX("+e.offsetX+"px); background-color: "+e.inlineColor+";"})]),e._v(" "),i("div",{staticClass:"ball",style:"transform: translateX("+e.offsetX+"px);\n      width: "+e.height+"px;\n      right: -"+e.height/2+"px;\n      height: "+e.height+"px;\n      background-color: "+e.ballColor+";\n      ",on:{mousedown:function(t){return t.stopPropagation(),e.startDrag(t)}}},[i("div",{staticClass:"center",style:{"background-color":e.ballCenterColor}})])]),e._v(" "),i("div",{staticClass:"bottom"},[i("div",{staticClass:"min"},[e._v(e._s(""+e.before+e.min+e.after))]),e._v(" "),i("div",{staticClass:"max"},[e._v(e._s(""+e.before+e.max+e.after))])])])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,n){"use strict";function i(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"card-wrap",style:{width:t.$store.state.uiSize.squareCardSize+"px",height:t.$store.state.uiSize.squareCardSize+35+"px"}},[t.curve?i("div",{staticClass:"curve-card",style:{width:t.$store.state.uiSize.squareCardSize+"px",height:t.$store.state.uiSize.squareCardSize+"px",backgroundImage:"url("+n(1368)("./"+t.curve.name+".png")+")"}},[t.active?i("div",{staticClass:"active"},[i("bs-icon",{attrs:{name:"编辑"}})],1):t._e()]):i("div",{staticClass:"curve-card empty",style:{width:t.$store.state.uiSize.squareCardSize+"px",height:t.$store.state.uiSize.squareCardSize+"px"}},[t.active?i("div",{staticClass:"active-border"}):t._e()]),t._v(" "),i("span",{staticClass:"card-title"},[t._v("\n    "+t._s(t.curve&&t.curve.name)+"\n  ")])])}var a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var t=this,e=t.$createElement,i=t._self._c||e;return t.card?i("div",{staticClass:"background-card",style:{width:t.$store.state.uiSize.squareCardSize+"px",height:t.$store.state.uiSize.squareCardSize+"px",backgroundImage:"url("+this.card.bs_file_url+")"}},[t.active?i("div",{staticClass:"active-border"}):t._e()]):i("div",{staticClass:"background-card empty",style:{width:t.$store.state.uiSize.squareCardSize+"px",height:t.$store.state.uiSize.squareCardSize+"px"}},[t.active?i("div",{staticClass:"active-border"}):t._e()])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card-template",on:{mouseenter:function(t){return t.stopPropagation(),e.mouseenter(t)},mouseleave:function(t){return t.stopPropagation(),e.mouseleave(t)},mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.mousedown(t)},click:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:e.handleClick(t)}}},[e._t("default"),e._v(" "),i("section",[e.card.duration?i("div",{staticClass:"duration"},[e._v("\n      "+e._s(e.durationTime(e.card.duration/1e6))+"\n    ")]):e._e()]),e._v(" "),e.isFailed?i("section",{staticClass:"task-failed"},[e._v("\n    "+e._s(e.transCodeFailMessage)+"\n  ")]):e._e(),e._v(" "),e.isUploading?i("section",{staticClass:"uploading"},[e._v("\n    上传中..."+e._s(parseInt(100*e.uploadProgress))+"%\n    "),i("div",{staticClass:"progress-out"},[i("div",{staticClass:"progress-in",style:"transform: translateX("+100*(e.uploadProgress-1)+"%)"})])]):e._e(),e._v(" "),e.isTransform?i("section",{staticClass:"is-transform"},[1===e.card.task_state||4===e.card.task_state?i("span",[e._v("转码准备中，请稍后")]):i("span",[e._v("转码中，请勿操作 "+e._s(e.card.task_progress)+"%")])]):e._e(),e._v(" "),e.uploadFailed?i("section",{staticClass:"upload-failed"},[e._v("\n    上传失败\n  ")]):e._e(),e._v(" "),e.isManageResource?e._e():i("section",{staticClass:"op-info"},[!e.hover&&e.willExpire?i("div",{staticClass:"expire-hint"},[e._v("即将到期")]):e._e(),e._v(" "),e.hover?i("ul",{staticClass:"hover-op-list"},[e.isFailed&&e.canTranscode?i("li",{staticClass:"re-transform",on:{click:e.reTranscode}},[i("bs-icon",{attrs:{name:"刷新"}})],1):e._e(),e._v(" "),!e.inProject&&e.ready?i("bs-hint",{attrs:{hint:"添加到项目资源"}},[i("li",{staticClass:"bind-project",on:{click:e.bindProject}},[i("bs-icon",{attrs:{name:"添加"}})],1)]):e._e(),e._v(" "),e.inProject&&e.ready?i("bs-hint",{attrs:{hint:"添加到编辑轨道"}},[i("li",{staticClass:"bind-project",on:{click:e.addToTrack}},[i("bs-icon",{staticClass:"add-to-track",staticStyle:{width:"20px",height:"20px"},attrs:{name:"添加到轨道"}})],1)]):e._e(),e._v(" "),i("bs-hint",{attrs:{hint:"删除资源"}},[i("li",{staticClass:"del",on:{click:e.removeResource}},[i("bs-icon",{attrs:{name:"删除"}})],1)])],1):e._e()]),e._v(" "),e.isManageResource?i("div",{staticClass:"manage-edit"},[e.isSelected?i("bs-icon",{attrs:{name:"资源选中"}}):i("bs-icon",{attrs:{name:"资源未选中"}})],1):e._e(),e._v(" "),e.useClipItem&&e.ready?i("clip",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"clip-item",attrs:{clip:e.clip}}):e._e()],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{ref:"clip-item",staticClass:"clip-item-wrap",class:{selected:e.clip.selected,resizing:e.clip.isLeftResizing||e.clip.isRightResizing,video:e.isVideo},style:"\n    width:"+e.width+"px;\n    left:"+e.left+"px;\n    visibility:"+(e.clip.isDragging?"hidden":"visible")+";\n    background-color: "+e.bgColor+";\n    border: "+(e.isAudio||e.isVideo||e.isImage?"none":"2px solid "+e.borderColor)+";\n    height: "+e.height+"px;\n    transform: "+(e.clip.animOffsetX?"translateX("+e.clip.animOffsetX+"px)":"")+";\n    transition: transform 0.15s ease-in;\n    box-sizing: "+(e.isVideo||e.isImage?"content-box":"border-box")+"\n    ",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.mousedown(t),void e.mdStop())},click:e.click}},[e.isVideo||e.isImage?i("clip-bg",{staticClass:"clip-bg",attrs:{resizingDirect:e.resizingDirect,width:e.width,clip:e.clip}}):e._e(),e._v(" "),e.isAudio?i("div",{staticClass:"audio-bg clip-bg"},[i("div",{ref:"audio-wave",staticClass:"audio-wave"}),e._v(" "),i("div",{ref:"audio-rhythm",staticClass:"audio-rhythm"})]):e._e(),e._v(" "),e.showText?i("div",{staticClass:"display-text"},[i("span",[e._v("\n      "+e._s(e.text)+"\n    ")])]):e._e(),e._v(" "),e.isSticker?i("div",{staticClass:"display-cover",style:{"background-image":"url("+e.clip.resource.cover_url+")"}}):e._e(),e._v(" "),i("key-frame",{staticClass:"clip-bg",attrs:{clip:e.clip,width:e.width,inPointOffsetX:e.inPointOffsetX}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.clip.selected,expression:"clip.selected"}],staticClass:"left-trigger",on:{mouseenter:function(t){e.leftHandlerHoverActive=!0},mouseleave:function(t){e.leftHandlerHoverActive=!1}}},[i("transition",{attrs:{name:"fade"}},[e.clip.selected&&e.showLeftHandler&&!e.clip.lastClip.hasTransition&&!e.isTriple?i("div",{staticClass:"handler left",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startResize(t,0),void e.mdStop())},click:function(t){t.stopPropagation()}}},[i("div"),e._v(" "),i("div"),e._v(" "),i("div")]):e._e()])],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.clip.selected,expression:"clip.selected"}],staticClass:"right-trigger",on:{mouseenter:function(t){e.rightHandlerHoverActive=!0},mouseleave:function(t){e.rightHandlerHoverActive=!1}}},[i("transition",{attrs:{name:"fade"}},[e.clip.selected&&e.showRightHandler&&!e.clip.hasTransition&&!e.isTriple?i("div",{staticClass:"handler right",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startResize(t,1),void e.mdStop())},click:function(t){t.stopPropagation()}}},[i("div"),e._v(" "),i("div"),e._v(" "),i("div")]):e._e()])],1),e._v(" "),e.clip.lastClip.hasTransition&&e.clip.selected?i("div",{staticClass:"handler-for-transition-left",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startResize(t,0),void e.mdStop())},click:function(t){t.stopPropagation()}}}):e._e(),e._v(" "),e.clip.hasTransition&&e.clip.selected?i("div",{staticClass:"handler-for-transition-right",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.startResize(t,1),void e.mdStop())},click:function(t){t.stopPropagation()}}}):e._e(),e._v(" "),!e.showClip||e.clip.isRightResizing||e.clip.nextClip.isLeftResizing?e._e():i("transition-in-clip",{attrs:{clipWidth:e.width,clip:e.clip}})],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"curve-edit-wrapper"},[n("div",{staticClass:"edit-box",style:{width:i.width+"px",height:i.height+"px"}},[n("canvas",{ref:"edit-canvas",attrs:{width:i.width,height:i.height},on:{mousedown:function(t){return i.canvasMousedown(t)}}}),i._v(" "),i._l(i.drawPoints,function(e,t){return n("div",{key:t,staticClass:"data-point",class:{active:e.origin===i.activeDataPoint},style:{top:e.y-8+"px",left:e.x-8+"px"},on:{mousedown:function(t){return i.mousedown(t,e)}}})}),i._v(" "),n("div",{staticClass:"curve-progress",style:{left:100*i.curveProgress+"%"}})],2),i._v(" "),n("div",{staticClass:"btn-group",style:{width:i.width+"px"}},[n("bs-button",{staticStyle:{width:"80px"},attrs:{type:"second"},on:{click:i.applyInitialCurve}},[i._v("重置")]),i._v(" "),i.activeDataPoint?n("bs-button",{staticStyle:{width:"90px"},attrs:{disabled:i.activeDataPoint===i.dataPoints[0]||i.activeDataPoint===i.dataPoints[i.dataPoints.length-1]},on:{click:i.deletePoint}},[i._v("删除点")]):n("bs-button",{staticStyle:{width:"90px"},on:{click:i.addPoint}},[i._v("增加点")]),i._v(" "),n("bs-button",{staticStyle:{width:"80px"},attrs:{type:"second"},on:{click:function(t){return i.$emit("finished")}}},[i._v("完成")])],1)])}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"bg-container"},[n("section",{ref:"bg",staticClass:"bg",style:{width:i.width+"px",backgroundImage:i.bgImageStyle}},i._l(i.imgs,function(t,e){return n("div",{key:e,staticClass:"lazyload",style:t.posStyle,attrs:{"data-url":t.url}})}),0),i._v(" "),i.clip.selected?n("div",{staticClass:"border",style:{border:"2px solid "+i.borderColor}}):i._e(),i._v(" "),i._l(i.displayHighlights,function(e,t){return n("div",{key:"highlights_"+t,staticClass:"highlight-line",style:{left:e.pos+"px"},on:{mouseenter:function(t){e.toast=!0},mouseleave:function(t){e.toast=!1}}})}),i._v(" "),i._l(i.displayHighlights,function(t,e){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.toast,expression:"item.toast"}],key:"highlights_tip_"+e,staticClass:"highlight-toast",style:{left:t.pos+10+"px"}},[i._v("\n    高光\n  ")])})],2)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var i=this,t=i.$createElement,n=i._self._c||t;return n("div",{staticClass:"keyframes-wrap"},i._l(i.keyFramePositions,function(t,e){return n("bs-icon",{directives:[{name:"show",rawName:"v-show",value:t-i.inPointOffsetX<i.width,expression:"pos - inPointOffsetX < width"}],key:"keyframe_"+e,staticClass:"keyframe-icon",style:{left:t-7.5-i.inPointOffsetX+"px"},attrs:{name:e===i.activeIndex?"关键点选中":"关键点"},on:{click:function(t){return i.seekKeyFrame(e)}}})}),1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},function(t,e,i){"use strict";function n(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"transition-in-clip",style:{"z-index":e.zIndex},on:{click:function(t){t.stopPropagation()}}},[e.clip.hasTransition&&!e.clip.acceptTransition&&20<e.clipWidth&&20<e.clip.nextClip.clipWidth?i("bs-popover",{ref:"popover",attrs:{zIndex:10,placement:"right",trigger:"click",id:e.clip.uuid,disabled:e.$store.state.sdkAllLock||e.clip.isThemeTransition},on:{toggle:e.togglePopover}},[e.clip.hasTransition?i("div",{staticClass:"transition-edit",on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.mdStop())}}},[i("bs-icon",{staticClass:"close",attrs:{name:"关闭"},on:{click:function(t){return e.$refs.reference.click()}}}),e._v(" "),i("div",{staticClass:"top"},[i("span",[e._v("转场效果："+e._s((e.transition||{}).displayName))]),e._v(" "),i("bs-icon",{attrs:{name:"删除"},on:{click:e.deleteTransition}})],1),e._v(" "),i("div",{staticClass:"bottom"},[i("edit-position",{attrs:{prefix:"时长设置",min:1,max:10,headWidth:90,unit:"s",disabled:e.$store.state.sdkAllLock},model:{value:e.editDuration,callback:function(t){e.editDuration=t},expression:"editDuration"}})],1)],1):e._e(),e._v(" "),i("section",{ref:"reference",staticClass:"transition-body",style:{right:e.bodyRight,width:e.bodyWidth},attrs:{slot:"reference"},on:{mousedown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"left",37,t.key,["Left","ArrowLeft"])?null:"button"in t&&0!==t.button?null:(t.stopPropagation(),e.mdStop())},click:function(t){return t.stopPropagation(),e.toggleEdit(t)}},slot:"reference"},[i("bs-icon",{class:{"is-theme":e.clip.isThemeTransition},attrs:{name:e.transitionFocus?"转场选中":"转场"}})],1)]):e._e(),e._v(" "),e.clip.acceptTransition?i("section",{class:{highlight:!0,accept:e.clip.acceptTransition,"accept-drop":e.clip.acceptTransitionDrop},style:{right:e.right,width:e.width},on:{mousemove:e.getMouse,mouseleave:e.loseMouse,click:e.toggleEdit}}):e._e()],1)}var a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){t.exports=i.p+"assets/icon_opera.2b84e85.png"},function(t,e,i){t.exports=i.p+"assets/icon_edge.5e5e50e.png"},,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(35)),r=n(i(4)),s=i(15),o={get:{"/studio/video-editor-interface/video-editor/resources":{value:{},func:function(t){var e=t.params||{},i={page:0,page_size:0,list:this.value.list.slice(0),total:this.value.total};if(void 0!==e.page&&void 0!==e.pageSize&&(i.page=+e.page,i.page_size=+e.pageSize,i.list=this.value.list.slice(e.page-1,(e.page-1)*e.pageSize)),e.resource_ids&&void 0!==e.resource_ids){var n=e.resource_ids.split(",");i.list=i.list.filter(function(t){return n.includes(t.resource_id)})}return i}},"/studio/video-editor-interface/video-editor/project":{value:{},func:function(){return this.value}},"/studio/video-editor-interface/video-editor/resource":{func:function(t){var e=t.params.resource_id,i={};return o.get["/studio/video-editor-interface/video-editor/resources"].value.list.forEach(function(t){t.resource_id===e&&(i=t)}),i}},"/studio/video-editor-interface/video-editor/resource/thumbnails":{value:{},func:function(t){var e=t.params.resource_id;return this.value[e]}},"/studio/video-editor-interface/video-editor/resource/slices":{value:{},func:function(t){var e=t.params.resource_id;return this.value[e]}},"/studio/video-editor-interface/rubick/task/highlight":{value:{},func:function(){return this.value}}},post:{}},c={get:function(e,i){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.get[e].func(i));case 1:case"end":return t.stop()}})},post:function(e,i,n){return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.post[e].func(i,n));case 1:case"end":return t.stop()}})},init:function(i){var n=!1;return i&&"object"===(0,a.default)(i)&&Object.keys(i).forEach(function(e){o[e]&&i[e]&&Object.keys(i[e]).forEach(function(t){i[e][t]&&o[e][t]&&o[e][t]&&((0,s.secureHTTPSData)(i[e][t]),o[e][t].value=i[e][t],n=!0)})}),n},getProxyStore:function(){return o},match:function(t,e){return!(!o[e]||!o[e][t])}};e.default=c},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var n=i(653),a=i(163);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1237);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"15aa9c30",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(643),a=i(189);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1244);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"41e747cb",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(679),a=i(205);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1253);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"777aa2c2",null);e.default=o.exports},function(t,e,i){t.exports=i.p+"assets/项目为空暗黑.3e1d928.png"},function(t,e,i){"use strict";i.r(e);var n=i(774),a=i(229);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1262);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"e5a8909e",null);e.default=o.exports},function(t,e,i){"use strict";function n(n,a,r){var s=arguments,o=this,c=new Date;return function(){var t=o,e=s,i=new Date;clearTimeout(t),r<i-c?(n.apply(t,e),c=i):setTimeout(function(){n.apply(t,e)},a)}}Object.defineProperty(e,"__esModule",{value:!0}),e.scroll=function(t,e,i,n){var a,r=t;[window,document,document.documentElement,null,void 0,""].includes(t)?(a={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0,width:window.innerWidth,height:window.innerHeight},r=window,t=document.documentElement||document.body):a=t.getBoundingClientRect();var s,o=!1;r.addEventListener("scroll",function(){switch(i){case"top":s=t.scrollTop<=e;break;case"bottom":s=t.scrollHeight-a.height-t.scrollTop<=e;break;case"left":s=t.scrollLeft<=e;break;case"right":s=t.scrollWidth-a.width-t.scrollLeft<=e;break;default:s=t.scrollHeight-a.height-t.scrollTop<=e}s?o&&n(!(o=!1)):o=!0})},e.lazyLoad=function(t,l){var d;l=Number(l)||0;var e=t;[window,document,document.documentElement,null,void 0,""].includes(t)?(d={top:0,right:window.innerWidth,bottom:window.innerHeight,left:0,width:window.innerWidth,height:window.innerHeight},e=window,t=document.documentElement||document.body):d=t.getBoundingClientRect();function i(){t.querySelectorAll(".lazyload").forEach(function(t){var e,i,n,a,r,s,o,c,u;e=t,i=d.top,n=d.left,a=d.height,r=d.width,s=e.getBoundingClientRect().top,o=e.getBoundingClientRect().left,c=e.offsetHeight,u=e.offsetWidth,s<i+a+l&&i<s+c+l&&o<n+r+l&&n<o+u+l&&(t.style.backgroundImage="url(".concat(t.dataset.url,")"))})}i(),e.addEventListener("scroll",n(i,200,100))},e.firstLoad=function(){var t=document.documentElement||document.body,l=t.getBoundingClientRect();t.querySelectorAll(".lazyload").forEach(function(t){var e,i,n,a,r,s,o,c,u;e=t,i=l.top,n=l.left,a=l.height,r=l.width,s=e.getBoundingClientRect().top,o=e.getBoundingClientRect().left,c=e.offsetHeight,u=e.offsetWidth,s<i+a+1e3&&i<s+c+1e3&&o<n+r+1e3&&n<o+u+1e3&&(t.style.backgroundImage="url(".concat(t.dataset.url,")"))})},e.throttle=n,e.debounce=function(t,e){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e||window)},200)}},function(t,e,i){t.exports=i.p+"assets/音频封面.0c860a7.png"},function(t,e,i){"use strict";i.r(e);var n=i(757),a=i(255);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1286);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"445bf6b0",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(743),a=i(261);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1294);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"21817fe9",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(761),a=i(303);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1318);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"62fdf6fd",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(755),a=i(306);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1319);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"3b63d1fe",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(717),a=i(322);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1329);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"d43c2f7c",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(715),a=i(328);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1334);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"451d510c",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(712),a=i(337);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1337);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"15f428f6",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(710),a=i(349);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1349);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0d95a5df",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(708),a=i(355);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1352);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"727e9fe6",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(768),a=i(365);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1355);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0e7b0be5",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.clipToEditMap=e.EditPanelTypes=e.panels=void 0;var a,r=n(i(6)),s=i(7);e.panels=[{key:"library",name:"资源库",icon:["资源库v2","资源库v2高亮"]},{key:"theme",name:"主题",icon:["主题v2","主题v2高亮"]},{key:"caption",name:"文字",icon:["字幕v2","字幕v2高亮"]},{key:"music-caption",name:"字幕",icon:["唱词字幕v2","唱词字幕v2高亮"]},{key:"sticker",name:"贴纸",icon:["贴纸v2","贴纸v2高亮"]},{key:"transition",name:"转场",icon:["转场v2","转场v2高亮"]},{key:"effect",name:"特效",icon:["特效v2","特效v2高亮"]},{key:"builtin-effect",name:"蒙版",icon:["粒子v2","粒子v2高亮"]},{key:"triple",name:"三连",icon:["三连","三连高亮"]},{key:"filter",name:"滤镜",icon:["滤镜v2","滤镜v2高亮"]}];var o={VIDEO:"video",AUDIO:"audio",STICKER:"sticker",TRIPLE:"triple",CAPTION:"caption",MUSIC_CAPTION:"music-caption",FILTER:"filter",PARTICLE:"particle",EFFECT:"effect",BUILTIN_EFFECT:"builtin-effect",THEME:"theme"};e.EditPanelTypes=o;var c=(a={},(0,r.default)(a,s.ClipTypes.AUDIO,o.AUDIO),(0,r.default)(a,s.ClipTypes.CAPTION,o.CAPTION),(0,r.default)(a,s.ClipTypes.MUSIC_CAPTION,o.MUSIC_CAPTION),(0,r.default)(a,s.ClipTypes.STICKER,o.STICKER),(0,r.default)(a,s.ClipTypes.TRIPLE,o.TRIPLE),(0,r.default)(a,s.ClipTypes.FILTER,o.FILTER),(0,r.default)(a,s.ClipTypes.EFFECT,o.EFFECT),(0,r.default)(a,s.ClipTypes.PARTICLE,o.PARTICLE),(0,r.default)(a,s.ClipTypes.RECORD_AUDIO,o.AUDIO),(0,r.default)(a,s.ClipTypes.IMAGE,o.VIDEO),(0,r.default)(a,s.ClipTypes.VIDEO,o.VIDEO),(0,r.default)(a,s.ClipTypes.THEME,o.THEME),a);e.clipToEditMap=c},,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.VideoClip=e.VideoTrack=void 0;var u=a(i(8)),l=a(i(51)),d=a(i(45)),r=a(i(52)),s=n(i(97)),o=function(t){function i(t){var e;return(0,u.default)(this,i),(e=(0,l.default)(this,(0,d.default)(i).call(this,"videoTrack",t))).transitions=[],e}return(0,r.default)(i,t),i}(s.Track);e.VideoTrack=o;var c=function(t){function c(t){var e,i=t.clipIndex,n=t.videoType,a=t.m3u8Path,r=t.m3u8Url,s=t.resourceUrl,o=t.duration;return(0,u.default)(this,c),(e=(0,l.default)(this,(0,d.default)(c).call(this,"video",i))).m3u8Path=a,e.path=s,e.m3u8Url=r,e.videoType=n,e.trimIn=0,e.trimOut=o,e.orgDuration=o,e.volume=1,e.speed=1,e.speedCurve="",e.speedCurveName="",e.bgBlur=!1,e.fadeInDuration=0,e.fadeOutDuration=0,e.extraRotation=0,e.reverse=!1,e.noAudio=!1,e.fxs=[],e.thumbnails=[],e.videoWidth=0,e.videoHeight=0,e.enableMotion=!1,e.motionMode=0,e.isFreezeVideo=!1,e.freezePoint=0,e.keyFrames=[],e}return(0,r.default)(c,t),c}(s.Clip);e.VideoClip=c},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.CaptionClip=e.CaptionTrack=void 0;var o=a(i(8)),c=a(i(51)),u=a(i(45)),r=a(i(52)),s=n(i(97)),l=function(t){function n(t){var e,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return(0,o.default)(this,n),(e=(0,c.default)(this,(0,u.default)(n).call(this,"captionTrack",t))).isMusicCaption=i,e}return(0,r.default)(n,t),n}(s.Track);e.CaptionTrack=l;var d=function(t){function s(t,e,i,n){var a,r=4<arguments.length&&void 0!==arguments[4]&&arguments[4];return(0,o.default)(this,s),(a=(0,c.default)(this,(0,u.default)(s).call(this,"caption",t))).text=e,a.captionType=i,a.styleDesc=n,a.scaleX=1,a.scaleY=1,a.rotation=0,a.translationX=0,a.translationY=0,a.fontFamily="",a.bsFontId="",a.fontSize=-1,a.color="",a.defaultColor="",a.shadow=!1,a.bold=!1,a.italic=!1,a.align="center",a.outline=!1,a.outlineColor="",a.outlineDefaultColor="",a.outlineWidth=0,a.isMusicCaption=r,a.rendererId="",a.keyFrames=[],a}return(0,r.default)(s,t),s}(s.Clip);e.CaptionClip=d},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.StickerClip=e.StickerTrack=void 0;var r=a(i(8)),s=a(i(51)),o=a(i(45)),c=a(i(52)),u=n(i(97)),l=function(t){function n(t){var e,i=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return(0,r.default)(this,n),(e=(0,s.default)(this,(0,o.default)(n).call(this,"stickerTrack",t))).isTriple=i,e}return(0,c.default)(n,t),n}(u.Track);e.StickerTrack=l;var d=function(t){function a(t,e){var i,n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];return(0,r.default)(this,a),(i=(0,s.default)(this,(0,o.default)(a).call(this,"sticker",t))).stickerType="general",i.desc=e,i.scale=1,i.rotation=0,i.translationX=0,i.translationY=0,i.horizontalFlip=!1,i.verticalFlip=!1,i.displayName="",i.displayNamezhCN="",i.keyFrames=[],i.isTriple=n,i}return(0,c.default)(a,t),a}(u.Clip);e.StickerClip=d},,,,,,,,function(t,e,i){i(896),t.exports=i(1081)},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(3),a=n(i(4)),r=n(i(47)),s=i(1084),c=n(i(67)),u=n(i(609)),o=n(i(1681)),l=n(i(1682));window.debugLog=console.log,console.log=function(){};"https:"!==window.location.protocol&&(window.location.href="https:"+window.location.href.substring(window.location.protocol.length));var d=window.Sentry;if(d){window.debugLog("已经开启错误上报");d.init({dsn:"https://03b601e9857e42cf9a5615f6b16d986f@api.bilibili.com/x/traceback/81",debug:!1,release:"a517da3",environment:"production",sampleRate:.5,integrations:[new d.Integrations.InboundFilters((0,o.default)({ignoreErrors:["Non-Error promise rejection captured with keys: isTrusted","WebGL is not supported","鉴权失败"]})),new d.Integrations.Vue({Vue:r.default,attachProps:!0})],beforeSend:function(t,e){return setTimeout(function(){return console.error(e.originalException||e.syntheticException)},0),t}})}else window.debugLog("未开启错误上报");var f,p=i(1683);(f=p).keys().map(f);var h=new l.default({checkOnLoad:!0,resetOnEnd:!0});h.onDetected(function(){(0,u.default)({text:"检查到AdBlock使用，可能会造成云剪辑使用问题，建议暂时禁止运行",type:"info",duration:8e3})}),h.onNotDetected(function(){}),c.default.dispatch("verifyDebugMode").then(function(){return Promise.all([c.default.dispatch("checkAuth"),c.default.dispatch("uploadAuth"),c.default.dispatch("prodRelease"),c.default.dispatch("verifyEditorGray")])}).then(function(){var e,i,o;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(window.__BILI_PAGE_RENDER_FAIL__)return(0,u.default)({text:"当前浏览器环境不支持渲染",type:"error"}),t.abrupt("return");t.next=3;break;case 3:return t.next=5,a.default.awrap((0,s.createApp)());case 5:e=t.sent,i=e.app,(o=e.router).onReady(function(){var t=o.getMatchedComponents();if(!t||!t.length){var e=new Error("404 Not Found");throw e.status=404,e}Promise.all(t.map(function(t){return t.asyncData&&t.asyncData({store:c.default,route:o.currentRoute})})).then(function(){i.$mount("#bs-editor-app")}).catch(function(t){console.error(t)}),o.beforeResolve(function(e,t,i){var n=o.getMatchedComponents(e),a=o.getMatchedComponents(t),r=!1,s=n.filter(function(t,e){return r=r||a[e]!==t});if(!s.length)return i();Promise.all(s.map(function(t){if(t.asyncData)return t.asyncData({store:c.default,route:e})})).catch(function(t){console.error(t)}).finally(function(){i()})}),o.afterEach(function(){})});case 9:case"end":return t.stop()}})}).catch(function(t){if(window.__BILI_PAGE_RENDER_FAIL__)(0,u.default)({text:"当前浏览器环境不支持渲染",type:"error"});else if("您的帐号已被禁用，无法使用投稿！"===t.message)(0,u.default)({text:"您的帐号已被禁用，无法使用投稿！",type:"error"}),setTimeout(function(){location.href="https://member.bilibili.com/v2#/upload/video/frame"},1e3);else if("您尚未完成实名认证，无法使用投稿!"===t.message)(0,u.default)({text:"您尚未完成实名认证，无法使用投稿!",type:"error"}),setTimeout(function(){location.href="https://member.bilibili.com/v2#/upload/video/frame"},1e3);else if("RELEASE_WAITING"===t.message){var e=document.createElement("p");e.innerText="工程部署中，敬请期待",document.body.appendChild(e)}else"GRAY_ERROR"===t.message?((0,u.default)({text:"工程部署中，敬请期待",type:"error"}),setTimeout(function(){location.href="https://member.bilibili.com/v2#/upload/video/frame"},1e3)):((0,u.default)({text:t.message,type:"error"}),console.error(t))})},,,function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.createApp=function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=(0,f.default)(),(0,u.sync)(d.default,e),t.next=4,r.default.awrap(s.default.prototype.$DBCache.createDB());case 4:return((((i=new s.default({store:d.default,router:e,render:function(t){return t(l.default)}})).$BSSdk.VM=i).$DBCache.VM=i).$MonitorScreen.VM=i).$DebugSDk.VM=i,window.$DebugSDk=i.$DebugSDk,t.abrupt("return",{app:i,router:e});case 11:case"end":return t.stop()}})};var r=a(i(4));i(1085);var s=a(i(47)),o=a(i(821)),c=a(i(604)),u=i(1104),l=a(i(1105)),d=a(i(67)),f=a(i(1219)),p=a(i(637));i(1543);var h=a(i(1544)),v=a(i(1587)),m=a(i(1589)),g=a(i(1590)),_=a(i(49)),w=a(i(1594)),b=a(i(1643)),y=a(i(1644)),C=a(i(93)),T=a(i(1645)),x=a(i(1646)),E=n(i(95)),k=n(i(137)),S=n(i(27)),P=n(i(94)),O=n(i(31)),R=n(i(69)),I=n(i(610)),D=n(i(1647)),A=a(i(1648)),L=a(i(136)),$=a(i(1650)),F=a(i(1652)),M=a(i(609)),V=a(i(1653)),B=a(i(856)),N=a(i(1654)),j=a(i(1657)),G=i(1662),U=a(i(1667)),z=a(i(1668)),K=a(i(1670)),W=a(i(1672)),H=a(i(1674)),X=i(1676),Y=c.default.create();Y.interceptors.response.use(function(t){return t},function(t){console.error(t);var e=t.message,i=t.config.url;return i&&(null!=i.match(/jssz-boss/)?e="boss资源加载异常":null!=i.match(/api.bilibili.com/)?e="api接口请求异常":null!=i.match(/member.bilibili.com/)&&(e="member接口请求异常")),(0,M.default)({type:"error",text:e||"网络请求错误"}),Promise.reject(t)}),s.default.component("bs-icon",A.default),s.default.component("bs-dialog",L.default),s.default.component("bs-checkbox",$.default),s.default.component("bs-button",B.default),s.default.component("bs-pagination",N.default),s.default.component("bs-popover",j.default),s.default.component("bs-select",G.Select),s.default.component("bs-option",G.Option),s.default.component("bs-select-light",X.SelectLight),s.default.component("bs-option-light",X.OptionLight),s.default.component("bs-hint",U.default),s.default.component("bs-panel-tab-head",z.default),s.default.component("bs-sub-tab",K.default),s.default.component("bs-edit-seek-bar",W.default),s.default.component("bs-tab-buttons",H.default),s.default.prototype.$confirm=F.default,s.default.prototype.$message=M.default,s.default.prototype.$prompt=V.default,s.default.use(T.default),s.default.use(x.default),s.default.use(o.default),s.default.directive("clickOutside",{bind:function(i,n,a){i.event=function(t){var e=i===t.target||i.contains(t.target);n.value.call(a.context,e,t)},document.body.addEventListener("click",i.event)},unbind:function(t){document.body.removeEventListener("click",t.event)}}),s.default.prototype.$BSSdk=(0,h.default)(),s.default.prototype.$DBCache=(0,v.default)(),s.default.prototype.$Bus=(0,m.default)(),s.default.prototype.$GLEventKey=g.default,s.default.prototype.$GL=_.default,s.default.prototype.$MonitorScreen=(0,w.default)(),s.default.prototype.$DebugSDk=(0,y.default)(!0),s.default.prototype.$EditPanelData=b.default,s.default.prototype.$axios=Y,s.default.prototype.$api={videos:E,tasks:k,resources:S,projects:P,materials:O,boss:R,auth:I,mobile:D},s.default.prototype.$LogReport=C.default,s.default.use(p.default),window.debugLock=function(){window.debugLog("当前运行锁情况","SDKLock: ".concat(s.default.prototype.$BSSdk.SDKLock),"queueLock: ".concat(s.default.prototype.$BSSdk.queueLock))}},function(t,e,i){},,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);var n=i(713),a=i(143);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1218);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(664),a=i(145);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1114);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){t.exports=i.p+"assets/icon_browser_system.100aa55.png"},function(t,e,i){t.exports=i.p+"assets/icon_browser_browser.1a75b70.png"},function(t,e,i){t.exports=i.p+"assets/icon_browser_update.c0ec882.png"},function(t,e,i){t.exports=i.p+"assets/icon_360_se.b8bf04a.png"},function(t,e,i){t.exports=i.p+"assets/icon_firefox.89de2f3.png"},function(t,e,i){t.exports=i.p+"assets/firefox-browser-params.427313c.png"},function(t,e,i){t.exports=i.p+"assets/opera-browser-params.44b3437.png"},function(t,e,i){"use strict";var n=i(147);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(663),a=i(148);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1217);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"58ab2c1b",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6));function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var o=null,c={saveUserInfo:function(t,e){t.userInfo=e},saveProjectInfo:function(t,e){var i=e.projectId,n=e.projectName,a=e.projectXMLDownloadPath,r=e.projectCoverPath;t.projectId=i,t.projectName=n,t.projectXMLDownloadPath=a,t.projectCoverPath=r},updateCover:function(t,e){t.projectCoverPath=e},updateTimelineDuration:function(t,e){t.timelineDuration=e},updateCurrentTimelinePosition:function(t,e){t.currentTimelinePosition=e},updateStreamingWaiting:function(t,e){t.streamingWaiting=e},updateCaptionFonts:function(t,e){t.captionFonts=e},updateCaptionFontFamily:function(t,e){var i=e.bsFontId,n=e.fontFamily,a=t.captionFonts.findIndex(function(t){return t.bsFontId===i});-1!==a&&(t.captionFonts[a]=s({},t.captionFonts[a],{fontFamily:n}))},showCreateProject:function(t,e){t.createProjectModal=e},addUploadTask:function(t,e){t.uploads.push(e)},cancelUploadTask:function(t,e){var i=t.uploads.findIndex(function(t){return t.id===e});-1!==i&&t.uploads[i].methods.cancel()},deleteUploadTask:function(t,e){var i=t.uploads.findIndex(function(t){return t.id===e});-1!==i&&t.uploads.splice(i,1)},updateUploadProgress:function(t,e){var i=e.resourceId,n=e.progress,a=t.uploads.findIndex(function(t){return t.id===i});-1!==a&&(t.uploads[a].progress=n)},setMusicCaptionResourceList:function(t,e){t.musicCaptionResourceList=e},setMusicCaptionEditData:function(t,e){t.musicCaptionEditData=e},updateCurrentEditPanelData:function(t,e){t.currentEditPanelData=e},changeShowParticleGraffitiModal:function(t,e){t.showParticleGraffitiModal=e},updateRatio:function(t,e){t.ratio=e},updateTimelineSpeed:function(t,e){t.timelineSpeed=parseFloat(e.toFixed(1))},setThumbs:function(t,e){t.thumbsMap=s({},t.thumbsMap,(0,a.default)({},e.id,e.thumbs))},setHighLights:function(t,e){t.highlightsMap=s({},t.highlightsMap,(0,a.default)({},e.id,e.highlights))},setResource:function(t,e){t.resourceMap=s({},t.resourceMap,(0,a.default)({},e.id,e.resource))},updateMonitorLock:function(t){t.monitorLock=!0,o&&clearTimeout(o),o=setTimeout(function(){t.monitorLock=!1},800)},updateBrowserCheck:function(t,e){t.browserCheck=e},updateProjectUndoQueue:function(t,e){t.projectUndoQueue=e},updateProjectRedoQueue:function(t,e){t.projectRedoQueue=e},setHotKeyLock:function(t,e){t.hotKeyLock=e},updateSDKReadyToWork:function(t,e){t.SDKReadyToWork=e},setRemoteStoreValue:function(t,e){var i=e.used,n=e.total;t.usedRemoteStoreValue=i,t.totalRemoteStoreValue=n},updateSDKAllLock:function(t,e){t.sdkAllLock=e},openBiliPreviewerMode:function(t,e){t.biliPreviewerMode=e},updateThemeDuration:function(t,e){t.themeDuration=e||0},setShowQuickCutModal:function(t,e){t.showQuickCutModal=e},setShowMobileUploadQrCodeModal:function(t,e){t.showMobileUploadQrCodeModal=e},setShowMusicCaptionTextEditModal:function(t,e){t.showMusicCaptionTextEditModal=e},setQuickCutFile:function(t,e){var i=e.file,n=e.from;t.quickCutFile=i,t.quickCutFileFrom=n},updateUITracks:function(t,e){t.allTracks=e},setManageStatus:function(t,e){t.isManageResource=e},setSelectedResource:function(t,e){t.selectedResource=e},initManageResource:function(t){t.selectedResource=[],t.isManageResource=!1},setManagePanel:function(t,e){t.showManagePanel=e},showAddKeyFrame:function(t){t.dynamicOperation.addKeyFrame.show=!0,t.dynamicOperation.removeKeyFrame.show=!1},showRemoveKeyFrame:function(t){t.dynamicOperation.addKeyFrame.show=!1,t.dynamicOperation.removeKeyFrame.show=!0},clearKeyFrameOperation:function(t){t.dynamicOperation.addKeyFrame.show=!1,t.dynamicOperation.removeKeyFrame.show=!1},setIsContextPlaying:function(t,e){t.isContextPlaying=e},setMaterialsData:function(t,e){t.submitted_materials=e},setRhythmEntry:function(t,e){t.showRhythmEntry=e},setRhythmClip:function(t,e){t.rhythmClip=e},setRhythmData:function(t,e){t.rhythmData=e},updateRhythmEditData:function(t,e){t.rhythmEditObj=s({},t.rhythmEditObj,{},e)},updateTripleStickerStatus:function(t,e){t.tripleStickerStatus=s({},t.tripleStickerStatus,{},e)},initRhythmEditData:function(t){t.rhythmEditObj={auto:!1,type:0,data:[],sectionData:[],showDot:!1,showDotEdit:!1,selectedIdx:-1,operateIdx:-1,scrollLeft:0,isBoundary:!1,isPlaying:!1}},setRhythmWaveData:function(t,e){var i=e.resource_id,n=e.data,a=t.rhythmWaveData.findIndex(function(t){return t.resource_id=i});-1===a?t.rhythmWaveData.push({resource_id:i,data:n}):t.rhythmWaveData[a].data=n},updataCacheRhythmDataList:function(t,e){var i=e.resource_id,n=e.data;t.cacheRhythmDataList[i]=n}};e.default=c},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(35)),s=a(i(4)),o=i(53),c=n(i(610)),u=n(i(94)),l=n(i(31)),d=n(i(27)),f=a(i(830)),p=a(i(49)),h=a(i(1201)),v=a(i(1202)),m=a(i(1203)),g=a(i(1204)),_=a(i(1205)),w=a(i(1206)),b=a(i(1207)),y=a(i(1208)),C=a(i(1209)),T=a(i(1210)),x=a(i(1211)),E=a(i(1212)),k=a(i(831)),S=[{old_id:"锐字工房云字库彩云GBK",new_id:"b107cea90e199f17734b67921b56d61c",cover:w.default},{old_id:"180210 小豆岛默陌肥圆手写简",new_id:"e28169a01067faa7a8fe9ab66937835e",cover:g.default},{old_id:"汉仪综艺体简",new_id:"a19010b237fc2a3d656a96660e23e542",cover:C.default},{old_id:"方正大雅宋_GBK1",new_id:"f6eb16bfc541cc402e35fd5d2d53e41c",cover:m.default},{old_id:"海派腔调禅粗黑简2",new_id:"7535cb805413018b7447d1085faf5823",cover:b.default},{old_id:"锐字工房云字库粗圆GBK",new_id:"d453beac7c4d768ac38ef5756608c94d",cover:y.default},{old_id:"FZZJ-YGYTKJW",new_id:"3e496d5cb2c4d34bb57a86c38beb5a95",cover:h.default},{old_id:"云书法手书建刚静心楷简",new_id:"cd51660d50943f5d51cd6433cb8bb89b",cover:x.default},{old_id:"锐字工房云字库行楷GBK",new_id:"4e6626cf432ba807ce881fb94c6ddc75",cover:T.default},{old_id:"云书法手书建刚彤彤简",new_id:"dc133fc50fb40e5854d46d66eab2e4f4",cover:_.default},{old_id:"方正喵呜体",new_id:"7deb186f3e305bb5015dd447a3b919ba",cover:v.default}],P={checkAuth:function(e){var i;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((0,o.getCookie)("DedeUserID")){t.next=3;break}return t.abrupt("return",Promise.reject(new Error("NOT_LOGIN")));case 3:return t.next=5,s.default.awrap(c.getUserInfo());case 5:if((i=t.sent).isLogin){t.next=8;break}return t.abrupt("return",Promise.reject(new Error("NOT_LOGIN")));case 8:e.commit("saveUserInfo",i);case 9:case"end":return t.stop()}})},fetchProject:function(e){var i,n;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.state.route.params.id,t.next=3,s.default.awrap(u.fetchProjectDetail(i));case 3:n=t.sent,e.commit("saveProjectInfo",{projectId:n.project_id,projectName:n.title,projectXMLDownloadPath:n.xml_download_url,projectCoverPath:n.cover_path});case 5:case"end":return t.stop()}})},fetchCaptionFonts:function(e){var i,n,a;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(l.fetchMaterialListV2({type:1,formatted_type:601,page:1,page_size:50}));case 2:return i=t.sent,n=i.materials,(a=(void 0===n?[]:n).map(function(t){var e={fontFamily:"",bsFontId:t.material_id,oldBsFontId:"",packageUrl:t.package_url,name:t.name,cover:t.cover_url},i=S.find(function(t){return t.old_id===e.bsFontId||t.new_id===e.bsFontId});return i&&(e.cover=i.cover,e.oldBsFontId=i.old_id),e})).unshift({fontFamily:"",bsFontId:p.default.DEFAULT_FONT,packageUrl:"https://s1.hdslb.com/bfs/studio/fonts/f171e410fabe0eb342be10962e3ecc9208935a02.ttf",name:"默认",cover:E.default}),a=(0,k.default)(a,"bsFontId"),e.commit("updateCaptionFonts",a),t.abrupt("return",a);case 10:case"end":return t.stop()}})},uploadAuth:function(){return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",c.uploadAuth());case 1:case"end":return t.stop()}})},prodRelease:function(){return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return","");case 1:case"end":return t.stop()}})},verifyEditorGray:function(){return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",!0);case 1:case"end":return t.stop()}})},refreshResourceRemoteStore:function(e){var i;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(d.fetchResourceSpace());case 2:i=t.sent,e.commit("setRemoteStoreValue",{used:i.used||0,total:i.total||0});case 4:case"end":return t.stop()}})},verifyDebugMode:function(n){return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.location.search||-1===window.location.search.indexOf("bili_previewer_mode")){t.next=8;break}if(window.debugLog("开启观察者模式"),window.opener){t.next=5;break}return window.location.href="/studio/bs-editor",t.abrupt("return");case 5:return setTimeout(function(){n.state.biliPreviewerMode||(window.location.href="/studio/bs-editor")},500),t.next=8,s.default.awrap(new Promise(function(i){window.onmessage=function(t){if(t=t||window.event,"object"===(0,r.default)(t.data)){var e={key:t.data.key||"",value:t.data.value||{}};"bili_bs_editor_proxy_store"===e.key&&f.default.init(e.value)&&(n.commit("openBiliPreviewerMode",!0),i())}};var t=window.location.pathname.split("/").pop();window.opener.postMessage("bili_bs_editor_ready_".concat(t),"http://bd-mng.bilibili.co")}));case 8:case"end":return t.stop()}})}};e.default=P},,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={RESOURCE_STORE_NAME:"BILI_BS_RESOURCE_STORE",PROJECT_QUEUE_STORE_NAME:"BILI_BS_PROJECT_QUEUE_STORE",PROJECT_CREATE_SIZE:"BS_STUDIO_CREATE_SIZE"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={SDK_VERSION:26,SDK_LOWER_MEMORY_VERSION:26,USE_LOWER_MEMORY_SDK_KEY:"USE_LOWER_MEMORY_SDK_KEY",getSdkVersionName:function(){return"true"===localStorage.getItem(this.USE_LOWER_MEMORY_SDK_KEY)?"v".concat(this.SDK_LOWER_MEMORY_VERSION,"_lower_memory"):"v".concat(this.SDK_VERSION)},getSDKLowerMem:function(){return"true"===localStorage.getItem(this.USE_LOWER_MEMORY_SDK_KEY)},FFMPEG_VERSION:6,LIVE_WINDOW_CANVAS_ID:"live-window",XML_FS_PATH:"bs_project.xml",RES_WIDTH:960,RES_HEIGHT:540,FRAME:30,RATIO_MAP:{"16:9":16/9,"9:16":9/16,"4:3":4/3,"3:4":.75,"1:1":1,"1:2":.5,"2:1":2},SECOND_CONVERT:1e6,DEFAULT_IMAGE_ORG_DURATION:864e8,DEFAULT_FONT:"default_font",FS_VIDEO_FX_FOLDER:"/videofx",FS_STICKER_FOLDER:"/animatedsticker",FS_CAPTION_FOLDER:"/captionstyle",FS_THEME_FOLDER:"/theme",FS_TRANSITION_FOLDER:"/transition",FS_COMPOUND_CAPTION_FOLDER:"/compoundcaption",FS_M3U8_FOLDER:"/m3u8",FS_FONT_FOLDER:"/font",FS_AUDIO_RECORD_FOLDER:"/record",FS_LUT_FOLDER:"/lut",FS_STORYBOARD_FOLDER:"/storyboardDir",FS_CAPTION_RENDERER_FOLDER:"/renderer",FILTER_ORDINARY:2,FILTER_LUT:2,FILTER_COLOR:2,FILTER_EFFECT:2,FILTER_VISTA:2,FILTER_BORDER:2,FILTER_DOU:2,FILTER_BILIBILI_BIAN_KUANG:7,FILTER_BILIBILI:2,PARTICLE_FILTER:16,PARTICLE_GRAFFITI:16,EFFECT_BLUR:123,EFFECT_MOSAIC:124,EFFECT_MASK:125,TIMELINE_VIDEO_FX_TYPE_BUILT_IN:"builtin",TIMELINE_VIDEO_FX_TYPE_PACKAGE:"package",TIMELINE_VIDEO_FX_TYPE_LUT:"lut",MOSAIC_DESC:"Mosaic",GAUSSIAN_BLUR_DESC:"Gaussian Blur",MASK_DESC:"Mask",DEFAULT_GAUSSIAN_BLUR_STRENGTH:1,DEFAULT_MOSAIC_STRENGTH:.005,MASK_SHAPE_RECT:"rect",MASK_SHAPE_ELLIPSE:"ellipse",VIGNETTE:"Vignette",VIGNETTE_DEGREE:"Degree",VIGNETTE_PARAM_TYPE:"float",TRANSFORM_2D_DESC:"Transform 2D",TRANSFORM_2D_SCALE_X:"Scale X",TRANSFORM_2D_SCALE_Y:"Scale Y",TRANSFORM_2D_TRANS_X:"Trans X",TRANSFORM_2D_TRANS_Y:"Trans Y",TRANSFORM_2D_ROTATION:"Rotation",TRANSFORM_2D_OPACITY:"Opacity",TRANSFORM_2D_PARAM_TYPE:"float",COLOR_PROPERTY:"Color Property",COLOR_PROPERTY_BRIGHTNESS:"Brightness",COLOR_PROPERTY_SATURATION:"Saturation",COLOR_PROPERTY_CONTRAST:"Contrast",COLOR_PROPERTY_PARAM_TYPE:"float",SHARPEN:"Sharpen",SHARPEN_AMOUNT:"Amount",SHARPEN_PARAM_TYPE:"float",STORYBOARD_DESC:"Storyboard",STORYBOARD_RESOURCE_DIR:"Resource Dir",STORYBOARD_NO_BACKGROUND:"No Background",STORYBOARD_DESCRIPTION_STRING:"Description String",CARTOON_DESC:"Cartoon",CARTOON_TYPE_NULL:0,CARTOON_TYPE_RAW:1,CARTOON_TYPE_INK_PAINTING:2,CARTOON_TYPE_MONO_CHROME:3,CARTOON_STROKE_ONLY:"Stroke Only",CARTOON_GRAY_SCALE:"Grayscale",CARTOON_PARAM_TYPE:"bool",AUDIO_FX_RAW:"",AUDIO_FX_FAST_CARTOON:"Fast Cartoon Voice",AUDIO_FX_AUDIO_REVERB:"Audio Reverb",AUDIO_FX_AUDIO_WAHWAH:"Audio Wahwah",AUDIO_FX_FEMALE_VOICE:"Female Voice",AUDIO_FX_MALE_VOICE:"Male Voice",AUDIO_FX_CARTOON_VOICE:"Cartoon Voice",AUDIO_FX_AUDIO_ECHO:"Audio Echo",AUDIO_FX_MONSTER_VOICE:"Monster Voice",DEFAULT_PARTICLE_RATE_GAIN:1,DEFAULT_PARTICLE_SIZE_GAIN:1,KEYFRAME_STICKER_SCALE:"Sticker Scale",KEYFRAME_STICKER_X:"Sticker TransX",KEYFRAME_STICKER_Y:"Sticker TransY",KEYFRAME_STICKER_ROTATION:"Sticker RotZ",KEYFRAME_VIDEO_SCALE_X:"Scale X",KEYFRAME_VIDEO_SCALE_Y:"Scale Y",KEYFRAME_VIDEO_X:"Trans X",KEYFRAME_VIDEO_Y:"Trans Y",KEYFRAME_VIDEO_ROTATION:"Rotation",KEYFRAME_CAPTION_SCALE_X:"Caption SacleX",KEYFRAME_CAPTION_SCALE_Y:"Caption ScaleY",KEYFRAME_CAPTION_X:"Caption TransX",KEYFRAME_CAPTION_Y:"Caption TransY",KEYFRAME_CAPTION_ROTATION:"Caption RotZ"};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={SYSTEM:25,DEFAULT_TIME:15e3,CONVERT:1e6,MIN_TIME:1e6,TimelineRules:[{message:"2分钟",rulingCount:10,rulingSpace:14,tip:"0.2分钟",start:"00:02:00:00",tipSpace:300},{message:"2分钟",rulingCount:10,rulingSpace:18,tip:"0.2分钟",start:"00:02:00:00",tipSpace:300},{message:"1分钟",rulingCount:10,rulingSpace:12,tip:"0.1分钟",start:"00:01:00:00",tipSpace:150},{message:"1分钟",rulingCount:10,rulingSpace:16,tip:"0.1分钟",start:"00:01:00:00",tipSpace:150},{message:"30秒",rulingCount:10,rulingSpace:10,tip:"3秒",start:"00:00:30:00",tipSpace:75},{message:"30秒",rulingCount:10,rulingSpace:12,tip:"3秒",start:"00:00:30:00",tipSpace:75},{message:"30秒",rulingCount:10,rulingSpace:15,tip:"3秒",start:"00:00:30:00",tipSpace:75},{message:"30秒",rulingCount:10,rulingSpace:18,tip:"3秒",start:"00:00:30:00",tipSpace:75},{message:"20秒",rulingCount:10,rulingSpace:16,tip:"2秒",start:"00:00:20:00",tipSpace:50},{message:"20秒",rulingCount:10,rulingSpace:20,tip:"2秒",start:"00:00:20:00",tipSpace:50},{message:"10秒",rulingCount:10,rulingSpace:13,tip:"1秒",start:"00:00:10:00",tipSpace:25},{message:"10秒",rulingCount:10,rulingSpace:16,tip:"1秒",start:"00:00:10:00",tipSpace:25},{message:"10秒",rulingCount:10,rulingSpace:21,tip:"1秒",start:"00:00:10:00",tipSpace:25},{message:"4秒",rulingCount:10,rulingSpace:11,tip:"0.4秒",start:"00:00:04:00",tipSpace:10},{message:"2秒",rulingCount:10,rulingSpace:10,tip:"0.2秒",start:"00:00:02:00",tipSpace:5},{message:"2秒",rulingCount:10,rulingSpace:16,tip:"0.2秒",start:"00:00:02:00",tipSpace:5},{message:"1秒",rulingCount:5,rulingSpace:22,tip:"0.2秒",start:"00:00:01:00",tipSpace:5}],DEFAULT_RULER:8,MIN_RULER:0,MAX_RULER:16};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={videoTypes:["mp4","mkv","mp4","ts","mts","avi","flv","mov","m2p","mxf","mpg","rm","rmvb","wmv"],audioTypes:["mp3","wav","aac","ac3","m4a"],imageTypes:["png","jpg","jpeg","jpe","bmp","gif"],HIGH_LIGHT_AREA:/^uat-/.test(location.hostname)?[35,13]:[35]};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={PREVIEWER_MODE_ERROR:"观察者模式，不允许操作",UNDO_ING:"操作回滚中...",REDO_ING:"操作回滚中...",VIDEO_CREATE_ING:"项目导出中...",PROJECT_SAVE_ING:"项目保存中...",EDITOR_INIT_ING:"编辑器准备中，马上就好~",EDITOR_START_FETCH_PROJECT:"开始拉取项目信息",EDITOR_START_RUN_SDK:"开始运行渲染层",EDITOR_START_FETCH_PROJECT_XML:"开始拉取项目配置文件",EDITOR_START_PARSE_XML:"开始解析项目配置文件",EDITOR_START_DOWNLOAD_PROJECT_MATERIAL:"开始下载项目依赖素材",EDITOR_START_DRAW_PROJECT:"开始绘制项目",EDITOR_START_CREATE_DRAW_PROJECT:"开始创建项目绘制",EDITOR_START_CLEAR_QUEUE:"开始打扫项目堆栈",EDITOR_START_DOWNLOAD_SDK:"开始加载渲染核心",EDITOR_START_DOWNLOAD_DEFINE_JS:"开始加载命名脚本",EDITOR_START_DOWNLOAD_FUNCTION_JS:"开始加载渲染功能函数",EDITOR_START_ENSURE_MODULE:"开始确认渲染运行环境",EDITOR_START_CREATE_CONTEXT:"开始创建绘制上下文",EDITOR_START_BIND_LIVE_WINDOW:"开始绑定绘制窗口",EDITOR_START_FETCH_WASM_JS:"开始加载渲染胶水脚本",EDITOR_START_FETCH_WASM:"开始加载渲染库",EDITOR_START_COMPILE_WASM:"开始编译渲染库",FONT_DOWNLOAD_ING:"加载字体中~",MUSIC_RECORD_UPLOAD_ING:"录音文件上传中"}},function(t,e,i){"use strict";i.r(e);var n=i(650),a=i(150);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1127);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"beedc352",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(152);i.n(n).a},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){t.exports=i.p+"assets/叶根友.716a614.png"},function(t,e,i){t.exports=i.p+"assets/喵呜.c516d16.png"},function(t,e,i){t.exports=i.p+"assets/大雅.a2e5500.png"},function(t,e,i){t.exports=i.p+"assets/小豆.744f22c.png"},function(t,e,i){t.exports=i.p+"assets/彤彤.6251f92.png"},function(t,e,i){t.exports=i.p+"assets/彩云.77e4a0e.png"},function(t,e,i){t.exports=i.p+"assets/禅粗.ecf5857.png"},function(t,e,i){t.exports=i.p+"assets/粗圆.62734d3.png"},function(t,e,i){t.exports=i.p+"assets/综艺.d6d5475.png"},function(t,e,i){t.exports=i.p+"assets/行楷.e29d375.png"},function(t,e,i){t.exports=i.p+"assets/静心.edb5e27.png"},function(t,e,i){t.exports=i.p+"assets/默认.f1a7076.png"},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(49)),r=i(7),s=Date.now()+"";localStorage.setItem("bs_editor_auto_save_tag",s);var o={isContextPlaying:!1,autoSaveTag:s,pageLoadTime:Date.now(),sdkAllLock:!1,SDKReadyToWork:!1,createProjectModal:!1,userInfo:null,timelineDuration:0,currentTimelinePosition:0,streamingWaiting:!1,ratio:a.default.RATIO_MAP[sessionStorage.getItem(a.default.PROJECT_CREATE_SIZE)]||16/9,timelineSpeed:1,monitorLock:!1,browserCheck:!0,hotKeyLock:!1,projectUndoQueue:[],projectRedoQueue:[],usedRemoteStoreValue:0,totalRemoteStoreValue:0,isManageResource:!1,selectedResource:[],showManagePanel:!1,currentEditPanelData:null,musicCaptionEditData:null,showRhythmEntry:!1,rhythmClip:null,rhythmData:null,rhythmEditObj:{auto:!1,type:0,data:[],sectionData:[],showDot:!1,showDotEdit:!1,selectedIdx:-1,operateIdx:-1,scrollLeft:0,isBoundary:!1,isPlaying:!1},rhythmWaveData:[],cacheRhythmDataList:{},captionFonts:[],musicCaptionResourceList:[],projectId:0,projectName:"",projectXMLDownloadPath:"",projectCoverPath:"",allTracks:r.TrackOrder.map(function(){return[]}),uploads:[],showParticleGraffitiModal:!1,thumbsMap:{},highlightsMap:{},resourceMap:{},minRuler:a.default.MIN_RULER,maxRuler:a.default.MAX_RULER,uiSize:{cardWidth:170,themeCardWidth:280,squareThemeCardWidth:180,monitorWidth:100,monitorHeight:100,resourcePanelWidth:100,squareCardSize:110,panelContentHeight:20},biliPreviewerMode:!1,themeDuration:0,themeDurationPredict:0,needThemeAnimate:!0,showQuickCutModal:!1,showMobileUploadQrCodeModal:"",showMusicCaptionTextEditModal:!1,quickCutFile:null,quickCutFileFrom:"",quickCutGray:!0,useOtherLiveWindow:!1,lastUploadXML:"",dynamicOperation:{addKeyFrame:{show:!1},removeKeyFrame:{show:!1}},submitted_materials:null,tripleStickerStatus:{follow:!1,followAndTriple:!1,triple:!1,num:0,show:!0}};e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(15),a={timelineDurationHumanViewFrame:function(t){return t.SDKReadyToWork?(0,n.secToString)(t.timelineDuration/1e6,!0):(0,n.secToString)(0,!0)},currentTimelinePositionHumanViewFrame:function(t){return t.SDKReadyToWork?(0,n.secToString)(t.currentTimelinePosition/1e6,!0):(0,n.secToString)(0,!0)},canUndo:function(t){return 1<t.projectUndoQueue.length},canRedo:function(t){return 0<t.projectRedoQueue.length},showProductPage:function(t){var e=t.userInfo.mid.toString();return Number(e[e.length-1])<=2||!!localStorage.getItem("bs_editor_magic_download")}};e.default=a},,,function(t,e,i){"use strict";var n=i(153);i.n(n).a},function(t,e,i){"use strict";var n=i(154);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(821)),r=n(i(1220)),s=n(i(1239)),o=n(i(1240)),c=n(i(855)),u=n(i(1535));e.default=function(){var t={mode:"history",base:"/studio/bs-editor",routes:[{path:"/",component:r.default,redirect:"/projects",children:[{path:"projects",name:"projects",component:c.default},{path:"products",name:"products",component:u.default}]},{path:"/:id",component:o.default},{path:"*",component:s.default}]};return console.log(t),new a.default(t)}},function(t,e,i){"use strict";i.r(e);var n=i(652),a=i(155);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1238);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"61d9b296",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(665),a=i(157);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1225);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"df6ec0fa",null);e.default=o.exports},function(t,e,i){t.exports=i.p+"assets/logo.be44169.png"},function(t,e,i){"use strict";i.r(e);var n=i(695),a=i(159);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1224);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"44849588",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(161);i.n(n).a},function(t,e,i){"use strict";var n=i(162);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(666),a=i(165);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1227);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"99017448",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(167);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(668),a=i(168);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1229);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0830b6c2",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(170);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(669),a=i(171);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1234);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0e9f790a",null);e.default=o.exports},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAYAAAByDd+UAAAABGdBTUEAALGPC/xhBQAAATFJREFUSA3tluENgjAQhV9lD6MrOIErmDiKCStIdBXjCk7gChj3wNoH1jRtgTsTfmjsD5Drvft6x5UK/Me3V8DECex25QkGi2KGTVVV93he8lyW5bx54AyY+njYb0PNLHxofzuYtVg1DS4UJvMjhhbmtIwB2GXsngCZmUu7tsBSC33DnJYxGCsGJiWlQyIssB4rr1STBWqhUhjj9gKlUA1sFDgG1cJEwD4o7WwqNlfbIIL3LAbmoLRpYSpgDH2J60KYGf05kn3Ymae7DnZpiI0bhHOTlTSGsYwETtI0OZj/6gzNcUG5MVhSSUCJTwjuBWoCaXyzQE0Av3qpJgFKhR4U3iXaZB/ypP6k3QlmM7GDXRbdedqe+uGSchvf4mYMrtoviA/7hroY/Ivh7f/771TgCc82HSl3y+qyAAAAAElFTkSuQmCC"},function(t,e,i){t.exports=i.p+"assets/电脑端.fb9e3cf.png"},function(t,e,i){t.exports=i.p+"assets/手机端.0eae096.png"},function(t,e,i){"use strict";var n=i(173);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(670),a=i(174);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1236);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"2b81717a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(176);i.n(n).a},function(t,e,i){"use strict";var n=i(177);i.n(n).a},function(t,e,i){"use strict";var n=i(178);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(655),a=i(179);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(660),a=i(181);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1534);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"9c7860d4",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(671),a=i(183);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1251);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7fc3d65b",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(699),a=i(185);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"3db60dc2",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(661),a=i(187);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1245);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7249d772",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(191);i.n(n).a},function(t,e,i){"use strict";var n=i(192);i.n(n).a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i(4)),r=i(15),o=n(i(95)),c=n(i(69)),u={mounted:function(){window.uploadTestXML=this.uploadTestXML.bind(this),window.createTestVideo=this.createTestVideo.bind(this)},methods:{uploadTestXML:function(e){var i,n,a,r;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e){t.next=3;break}return t.abrupt("return");case 3:return i=this.$BSSdk.xmlClean(i),n=new Blob([i],{type:"text/xml"}),a=this.$route.params.id,t.next=8,s.default.awrap(o.updateXML(a,n.size));case 8:return r=t.sent,t.next=11,s.default.awrap(new Promise(function(t,e){c.upload(n,r.upload_url).done(t).catch(e)}));case 11:return t.next=13,s.default.awrap(o.updateXMLCallback(a,r.version,n.size).catch(function(t){return"125206"===t.message?"":Promise.reject(t)}));case 13:location.reload();case 14:case"end":return t.stop()}},null,this)},createTestVideo:function(){var e=this;if(this.$store.state.biliPreviewerMode)this.$message({text:this.$GL.PREVIEWER_MODE_ERROR});else if(this.$store.state.sdkAllLock)this.$message({text:"渲染运行中，请重新操作"});else{var t=this.$store.state.timelineDuration;if(this.$LogReport.sendCustomEvent("editor_project_submit_click"),t){if(t>7200*this.$GL.SECOND_CONVERT)return this.$LogReport.sendCustomEvent("editor_video_duration_tip_show"),void this.$message({text:"时长不可超过2小时",type:"error"});if(!this.uploadLock){this.uploadLock=!0;var i,n=(this.$store.state.projectName||"成片")+"-"+(0,r.formatDateView)(new Date);s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.default.awrap(e.saveProject(!1,!0));case 2:if(t.sent){t.next=5;break}throw new Error("成片项目保存失败，请重新操作～");case 5:return e.$globalLoading(!0,e.$GL.VIDEO_CREATE_ING),t.next=8,s.default.awrap(e.$api.auth.uploadAuth());case 8:return t.next=10,s.default.awrap(e.$api.videos.createVideo({project_id:e.$store.state.projectId,title:n,cover_url:e.projectCover}));case 10:if((i=t.sent).limit)return e.$globalLoading(!1),e.uploadLock=!1,e.showLimitVideoCreate(i),t.abrupt("return");t.next=16;break;case 16:e.goUploadArticle(i,n);case 17:case"end":return t.stop()}}).catch(function(t){e.uploadLock=!1,e.$globalLoading(!1),console.error(t),"您尚未完成实名认证，无法使用投稿!"===t.message?e.$confirm("您尚未完成实名认证，前往实名?",function(){window.open("https://passport.bilibili.com/site/site.html")},function(){}):e.$message({text:t.message||"提交失败，请重新操作",type:"error"})})}}else this.$message({text:"空时长项目，无法投稿噢。",type:"error"})}}}};e.default=u},function(t,e,i){"use strict";i.r(e);var n=i(691),a=i(193);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1250);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"17ea3868",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(199);i.n(n).a},function(t,e,i){"use strict";var n=i(200);i.n(n).a},function(t,e,i){"use strict";var n=i(201);i.n(n).a},function(t,e,i){"use strict";var n=i(202);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(678),a=i(203);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1461);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"4a9a7822",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(207);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(706),a=i(208);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1302);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"595181e7",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(737),a=i(210);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1287);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7ef5dc54",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(767),a=i(212);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1257);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"d048ad3a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(214);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(766),a=i(215);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1280);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"f634fa28",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(763),a=i(219);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1275);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0cafc41a",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(782),a=i(225);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1272);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(786),a=i(227);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1263);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"04330878",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(231);i.n(n).a},function(t,e,i){"use strict";var n=i(232);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(784),a=i(233);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1265);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"058b000b",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(235);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var v=n(i(4)),a=i(15),r={data:function(){return{waveRendered:!1,rhythmRendered:!1,canvasHeight:20}},methods:{getWaveData:function(){var e,i,n,a,r;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clip.resource&&this.clip.resource.left_wave_download_url){t.next=2;break}return t.abrupt("return");case 2:return e=this.clip.resource.left_wave_download_url,i=new URL(e).pathname.split("/").reverse()[0],t.next=6,v.default.awrap(this.$DBCache.readAssetFromDB(i));case 6:if(n=t.sent)return t.abrupt("return",n);t.next=9;break;case 9:return t.next=11,v.default.awrap(this.$axios.get(e,{responseType:"arraybuffer"}));case 11:return a=t.sent,r=new Int8Array(a.data),t.next=15,v.default.awrap(this.$DBCache.saveAssetToDB(i,r));case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},null,this)},generateImageID:function(){var t=this.clip.resource.left_wave_download_url,e=new URL(t).pathname.split("/").reverse()[0],i=(0,a.getRuler)();return"".concat(e,"_left_").concat(i,"_v2")},generateRhythmID:function(t){var e=this.clip.resource.left_wave_download_url,i=new URL(e).pathname.split("/").reverse()[0],n=t||(0,a.getRuler)();return"".concat(i,"_rhythm_left_").concat(n)},renderWave:function(t){this.clip.resource.left_wave_download_url&&(!t&&this.waveRendered?this.renderByTrim():this.renderByRuler(),!t&&this.rhythmRendered?this.renderRhythmByTrim():this.renderRhythm())},renderRhythm:function(){var e=this;-1<this.$store.state.rhythmWaveData.findIndex(function(t){return t.resource_id===e.clip.resource.resource_id})&&this.renderRhythmImage()},reRenderRhythm:function(e){var i,n;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clip.resource.resource_id!==e){t.next=10;break}i=0;case 2:if(i<this.$GL.TimelineRules.length)return n=this.generateRhythmID(i),t.next=6,v.default.awrap(this.$DBCache.removeAssetFromDB(n));t.next=9;break;case 6:i++,t.next=2;break;case 9:this.renderRhythmImage();case 10:case"end":return t.stop()}},null,this)},renderRhythmImage:function(){var e,i,n,a,r,s,o,c=this;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=function(t,e){c.style(c.$refs["audio-rhythm"],{backgroundImage:"url(".concat(t,")"),backgroundSize:"".concat(e/c.width*100,"% ").concat(c.canvasHeight,"px"),backgroundPosition:"".concat(-Math.floor(c.clip.trimIn/c.clip.orgDuration*e)/(c.width-e)*100,"% 0px"),backgroundRepeat:"no-repeat"}),c.rhythmRendered=!0},i=Math.floor(this.clip.orgDuration/(this.clip.trimOut-this.clip.trimIn)*this.width),n=this.generateRhythmID(),t.next=5,v.default.awrap(this.$DBCache.readAssetFromDB(n));case 5:if(a=t.sent)return t.abrupt("return",e(a,i));t.next=8;break;case 8:if(r=this.$store.state.rhythmWaveData,(s=r.findIndex(function(t){return t.resource_id===c.clip.resource.resource_id}))<0)return t.abrupt("return");t.next=12;break;case 12:o=this.drawRhythm(r[s].data,i),this.$DBCache.saveAssetToDB(n,o),e(o,i);case 15:case"end":return t.stop()}},null,this)},drawRhythm:function(t,e){65535<e&&(e=65535);var i=document.createElement("canvas");i.width=e,i.height=this.canvasHeight;var n=i.getContext("2d"),a=128*this.canvasHeight/256;n.fillStyle="#FFD538",n.moveTo(.5,a);for(var r=0;r<t.length;r++){var s=1e3*t[r]*e/this.clip.orgDuration;n.arc(s,this.canvasHeight-1,1,0,360,!1),n.closePath()}return n.fill(),i.toDataURL()},renderRhythmByTrim:function(){var t=Math.floor(this.clip.orgDuration/(this.clip.trimOut-this.clip.trimIn)*this.width);this.style(this.$refs["audio-rhythm"],{backgroundSize:"".concat(t/this.width*100,"% ").concat(this.canvasHeight,"px"),backgroundPosition:"".concat(-Math.floor(this.clip.trimIn/this.clip.orgDuration*t)/(this.width-t)*100,"% 0px")})},renderByRuler:function(){var a,r,s,e,o,i,c=this;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(t,e){c.style(c.$refs["audio-wave"],{backgroundImage:"url(".concat(t,")"),backgroundSize:"".concat(e/c.width*100,"% ").concat(c.canvasHeight,"px"),backgroundPosition:"".concat(-Math.floor(c.clip.trimIn/c.clip.orgDuration*e)/(c.width-e)*100,"% 0px"),backgroundRepeat:"no-repeat"}),c.waveRendered=!0},r=Math.floor(this.clip.orgDuration/(this.clip.trimOut-this.clip.trimIn)*this.width),s=this.generateImageID(),t.next=5,v.default.awrap(this.$DBCache.readAssetFromDB(s));case 5:if(e=t.sent)return t.abrupt("return",a(e,r));t.next=8;break;case 8:return t.next=10,v.default.awrap(this.getWaveData());case 10:this.sampleData=t.sent,(o=new Worker(this.$BSSdk.SDK_WORKER_PATH+"audio_wave_worker.js")).onmessage=function(e){var i,n;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.data,t.next=3,v.default.awrap(c.generateWaveImage(i,r));case 3:n=t.sent,c.$DBCache.saveAssetToDB(s,n),a(n,r),o.terminate(),o=null;case 8:case"end":return t.stop()}})},65535<(i=r)&&(i=65535),o.postMessage([this.sampleData,i]);case 16:case"end":return t.stop()}},null,this)},renderByTrim:function(){var t=Math.floor(this.clip.orgDuration/(this.clip.trimOut-this.clip.trimIn)*this.width);this.style(this.$refs["audio-wave"],{backgroundSize:"".concat(t/this.width*100,"% ").concat(this.canvasHeight,"px"),backgroundPosition:"".concat(-Math.floor(this.clip.trimIn/this.clip.orgDuration*t)/(this.width-t)*100,"% 0px")})},generateWaveImage:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:for(65535<(n=i)&&(n=65535),a=document.createElement("canvas"),r=this.canvasHeight,a.width=n,a.height=r,(s=a.getContext("2d")).fillStyle="#0061AC",s.beginPath(),o=128*r/256,s.moveTo(.5,o),c=0;c<n;c++)u=e[2*c+1],l=(128-u)*r/256,s.lineTo(c+.5,Math.floor(l));for(d=Math.floor(n-1);0<=d;d--)f=e[2*d],p=(128+Math.abs(f))*r/256,s.lineTo(d+.5,Math.floor(p));return s.lineTo(.5,o),s.closePath(),s.fill(),h=a.toDataURL(),t.abrupt("return",h);case 19:case"end":return t.stop()}},null,this)},style:function(e,i){return Object.keys(i).forEach(function(t){e.style[t]!==i[t]&&(e.style[t]=i[t])}),e}}};e.default=r},function(t,e,i){"use strict";i.r(e);var n=i(785),a=i(236);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1271);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"af0afe0a",null);e.default=o.exports},,,,function(t,e,i){"use strict";var n=i(238);i.n(n).a},function(t,e,i){"use strict";var n=i(239);i.n(n).a},function(t,e,i){"use strict";var n=i(240);i.n(n).a},function(t,e,i){"use strict";var n=i(241);i.n(n).a},function(t,e,i){"use strict";var n=i(242);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(762),a=i(243);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){t.exports=i.p+"assets/录音封面.6b233d1.png"},function(t,e,i){"use strict";i.r(e);var n=i(754),a=i(245);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(247);i.n(n).a},function(t,e,i){"use strict";var n=i(248);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(759),a=i(249);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1282);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"321e88f5",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(251);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(758),a=i(252);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1284);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"73fee790",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(254);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.hasClass=p,e.addClass=function(t,e){if(!t)return;for(var i=t.className,n=(e||"").split(" "),a=0,r=n.length;a<r;a++){var s=n[a];s&&(t.classList?t.classList.add(s):p(t,s)||(i+=" "+s))}t.classList||(t.className=i)},e.removeClass=function(t,e){if(!t||!e)return;for(var i=e.split(" "),n=" "+t.className+" ",a=0,r=i.length;a<r;a++){var s=i[a];s&&(t.classList?t.classList.remove(s):p(t,s)&&(n=n.replace(" "+s+" "," ")))}t.classList||(t.className=u(n))},e.setStyle=function t(e,i,n){if(!e||!i)return;if("object"===(0,r.default)(i))for(var a in i)i.hasOwnProperty(a)&&t(e,a,i[a]);else"opacity"===(i=l(i))&&c<9?e.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":e.style[i]=n},e.isInContainer=e.getScrollContainer=e.isScroll=e.getStyle=e.once=e.off=e.on=void 0;var r=n(i(35)),a=n(i(47)).default.prototype.$isServer,s=/([:\-_]+(.))/g,o=/^moz([A-Z])/,c=a?0:Number(document.documentMode),u=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},l=function(t){return t.replace(s,function(t,e,i,n){return n?i.toUpperCase():i}).replace(o,"Moz$1")},d=!a&&document.addEventListener?function(t,e,i){t&&e&&i&&t.addEventListener(e,i,!1)}:function(t,e,i){t&&e&&i&&t.attachEvent("on"+e,i)};e.on=d;var f=!a&&document.removeEventListener?function(t,e,i){t&&e&&t.removeEventListener(e,i,!1)}:function(t,e,i){t&&e&&t.detachEvent("on"+e,i)};e.off=f;function p(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):-1<(" "+t.className+" ").indexOf(" "+e+" ")}e.once=function(e,i,n){d(e,i,function t(){n&&n.apply(this,arguments),f(e,i,t)})};var h=c<9?function(e,i){if(!a){if(!e||!i)return null;"float"===(i=l(i))&&(i="styleFloat");try{switch(i){case"opacity":try{return e.filters.item("alpha").opacity/100}catch(t){return 1}default:return e.style[i]||e.currentStyle?e.currentStyle[i]:null}}catch(t){return e.style[i]}}}:function(e,i){if(!a){if(!e||!i)return null;"float"===(i=l(i))&&(i="cssFloat");try{var t=document.defaultView.getComputedStyle(e,"");return e.style[i]||t?t[i]:null}catch(t){return e.style[i]}}};e.getStyle=h;function v(t,e){if(!a)return h(t,null!==e||void 0!==e?e?"overflow-y":"overflow-x":"overflow").match(/(scroll|auto)/)}e.isScroll=v;e.getScrollContainer=function(t,e){if(!a){for(var i=t;i;){if([window,document,document.documentElement].includes(i))return window;if(v(i,e))return i;i=i.parentNode}return i}};e.isInContainer=function(t,e){if(a||!t||!e)return!1;var i,n=t.getBoundingClientRect();return i=[window,document,document.documentElement,null,void 0].includes(e)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:e.getBoundingClientRect(),n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right}},function(t,e,i){"use strict";var n=i(257);i.n(n).a},function(t,e,i){"use strict";var n=i(258);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(741),a=i(259);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1295);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"af3a8242",null);e.default=o.exports},function(t,e,i){t.exports=i.p+"assets/录音按钮.8846b46.png"},function(t,e,i){t.exports=i.p+"assets/录音停止.2a96ee9.png"},function(t,e,i){"use strict";i.r(e);var n=i(773),a=i(263);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1293);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"015b77d1",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){var i,n;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=document.createElement("video"),n=new Promise(function(t){return i.addEventListener("loadedmetadata",function(){i.duration===1/0?(i.currentTime=Number.MAX_SAFE_INTEGER,i.ontimeupdate=function(){i.ontimeupdate=null,t(i.duration),i.currentTime=0}):t(i.duration)})}),i.src="string"==typeof e||e instanceof String?e:window.URL.createObjectURL(e),t.abrupt("return",n);case 4:case"end":return t.stop()}})};var a=n(i(4))},function(t,e,i){"use strict";var n=i(265);i.n(n).a},function(t,e,i){"use strict";var n=i(266);i.n(n).a},function(t,e,i){"use strict";var n=i(267);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(744),a=i(268);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1297);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"262be93c",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(270);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(745),a=i(271);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1299);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"ce8d3384",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(273);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(719),a=i(274);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1301);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"228da4e7",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(276);i.n(n).a},function(t,e,i){"use strict";var n=i(277);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(709),a=i(278);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1306);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"6ecfe113",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(732),a=i(280);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1305);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"78e65c60",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(282);i.n(n).a},function(t,e,i){"use strict";var n=i(283);i.n(n).a},function(t,e,i){"use strict";var n=i(288);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(748),a=i(289);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1309);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"82006daa",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(291);i.n(n).a},function(t,e,i){"use strict";var n=i(292);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(684),a=i(293);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1328);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"3f605f66",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(751),a=i(295);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1315);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"284082ee",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.loadSRTLyrics=e.loadLrcLyrics=e.loadAssLyrics=e.loadLyrics=e.LyricItem=void 0;function a(e){return new Promise(function(s){var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept",e),t.onchange=function(e){var i,n,a,r;return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((i=e.target.files).length){t.next=5;break}s(null),t.next=12;break;case 5:return n=i[0],t.next=8,m.default.awrap((0,c.fileIsUtf8)(n));case 8:a=t.sent,(r=new FileReader).onload=function(){var t=n.name.split("."),e=t[t.length-1].toLowerCase();s({text:r.result,name:n.name,ext:e})},a?r.readAsText(n):r.readAsText(n,"gb2312");case 12:case"end":return t.stop()}})},t.click()})}function v(t,e,i){(0,r.default)(this,v),this.startTime=t,this.endTime=e,this.text=i}var o=n(i(24)),r=n(i(8)),m=n(i(4)),c=i(1314);e.LyricItem=v;e.loadLyrics=function(){var e,i,n;return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.awrap(a(".srt,.lrc,.ass"));case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:i=e.text,n=e.ext,t.t0=n,t.next="srt"===t.t0?9:"lrc"===t.t0?12:"ass"===t.t0?15:18;break;case 9:return t.next=11,m.default.awrap(l(i));case 11:return t.abrupt("return",t.sent);case 12:return t.next=14,m.default.awrap(u(i));case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,m.default.awrap(s(i));case 17:return t.abrupt("return",t.sent);case 18:case"end":return t.stop()}})};var s=function(e){var i,r,s;return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(i=e.split("\n")).filter(function(t){return t.startsWith("Dialogue")}),r=[],s=function(t){var e=t.match(/(\d+):(\d{2}):(\d{2})\.(\d{2})/);return 1e3*(1e3*(3600*Number(e[1])+60*Number(e[2])+Number(e[3]))+10*Number(e[4]))},i.forEach(function(t){var e=t.replace(/\{.*?\}/g,"").split(","),i=e[1],n=e[2],a=e.slice(9).join(",").replace(/(^\s*)|(\s*$)/g,"").replace(/( +)/g," ").replace(/\\N/g,"\n");a&&(a.startsWith("m ")&&8<a.split(" ").length||r.push(new v(s(i),s(n),a)))}),t.abrupt("return",r.filter(function(t){return t.endTime>t.startTime}));case 6:case"end":return t.stop()}})};e.loadAssLyrics=s;var u=function(e){var i;return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=[],e.split("\n").filter(function(t){return t.replace("s","")}).forEach(function(t){t=t.replace(/(^\s*)|(\s*$)/g,"");var e=(0,o.default)(t.matchAll(/\[\d{2}:\d{2}(?:\.\d{2})?\]/g)).filter(function(t){return t}).map(function(t){return t[0]});if(e.length){var r=t.match(/^(?:\[\d{2}:\d{2}(?:\.\d{2})?\])*(.*)$/)[1];if(r){var s=[];e.forEach(function(t){var e,i,n,a=t.match(/\[(\d{2}):(\d{2})(?:\.(\d{2}))?\]/);e=Number(a[1]),i=Number(a[2]),n=Number(a[3]||0),s.push({startTime:1e3*(1e3*(60*e+i)+n),text:r})}),i=i.concat(s)}}}),i.sort(function(t,e){return t.startTime-e.startTime}),i.forEach(function(t,e){e>=i.length-1?t.endTime=t.startTime+5e6:t.endTime=i[e+1].startTime}),t.abrupt("return",i.map(function(t){return new v(t.startTime,t.endTime,t.text)}).filter(function(t){return t.endTime>t.startTime}));case 7:case"end":return t.stop()}})};e.loadLrcLyrics=u;var l=function(e){var i,n,a,r,s,o,c,u,l,d,f,p,h;return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=[],n=e.split(/\n\s*?\n/),a=function(t){var e=t.match(/(\d{2}):(\d{2}):(\d{2}),(\d{3})/);return 1e3*(1e3*(3600*Number(e[1])+60*Number(e[2])+Number(e[3]))+Number(e[4]))},r=0;case 4:if(!(r<n.length)){t.next=25;break}if(s=n[r],(o=s.split("\n")).length<3)return t.abrupt("continue",22);t.next=9;break;case 9:for(c=0;!parseInt(o[c])&&c<o.length;)c++;if(c===o.length)return t.abrupt("continue",22);t.next=13;break;case 13:for(u=o[++c],l=u.match(/^(\d{2}:\d{2}:\d{2},\d{3})/)[1],d=u.match(/\s(\d{2}:\d{2}:\d{2},\d{3})/)[1],f=a(l),p=a(d),h="";c<o.length-1;)h+=o[++c]+"\n";h=h.replace(/\{\\.*?\}/g,"").replace(/(^\s*)|(\s*$)/g,"").replace(/( +)/g," "),i.push(new v(f,p,h));case 22:r++,t.next=4;break;case 25:return t.abrupt("return",i.filter(function(t){return t.endTime>t.startTime}));case 26:case"end":return t.stop()}})};e.loadSRTLyrics=l},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.fileIsUtf8=void 0;var a=n(i(4));function r(i){return new Promise(function(e){var t=new FileReader;t.onload=function(t){e(t.target.result)},t.readAsArrayBuffer(i)})}function s(t){for(var e,i=0,n=t&&t.length;i<n;i++){if(255<(e=t[i]))return!1;if(!(9===e||10===e||13===e||32<=e&&e<=126))if(194<=e&&e<=223){if(n<=i+1||t[i+1]<128||191<t[i+1])return!1;i++}else if(224===e){if(n<=i+2||t[i+1]<160||191<t[i+1]||t[i+2]<128||191<t[i+2])return!1;i+=2}else if(225<=e&&e<=236||238===e||239===e){if(n<=i+2||t[i+1]<128||191<t[i+1]||t[i+2]<128||191<t[i+2])return!1;i+=2}else if(237===e){if(n<=i+2||t[i+1]<128||159<t[i+1]||t[i+2]<128||191<t[i+2])return!1;i+=2}else if(240===e){if(n<=i+3||t[i+1]<144||191<t[i+1]||t[i+2]<128||191<t[i+2]||t[i+3]<128||191<t[i+3])return!1;i+=3}else if(241<=e&&e<=243){if(n<=i+3||t[i+1]<128||191<t[i+1]||t[i+2]<128||191<t[i+2]||t[i+3]<128||191<t[i+3])return!1;i+=3}else{if(244!==e)return!1;if(n<=i+3||t[i+1]<128||143<t[i+1]||t[i+2]<128||191<t[i+2]||t[i+3]<128||191<t[i+3])return!1;i+=3}}return!0}e.fileIsUtf8=function(e){var i;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r(e));case 2:return i=t.sent,t.abrupt("return",s(new Uint8Array(i)));case 4:case"end":return t.stop()}})}},function(t,e,i){"use strict";var n=i(297);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(752),a=i(298);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1325);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"796b4d5e",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(302);i.n(n).a},function(t,e,i){"use strict";var n=i(305);i.n(n).a},function(t,e,i){"use strict";var n=i(308);i.n(n).a},function(t,e,i){"use strict";var n=i(311);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(753),a=i(312);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.oneOf=function(t,e){for(var i=0;i<e.length;i++)if(t===e[i])return!0;return!1}},function(t,e,i){"use strict";var n=i(316);i.n(n).a},function(t,e,i){"use strict";var n=i(317);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(746),a=i(318);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1327);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"ef316814",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(320);i.n(n).a},function(t,e,i){"use strict";var n=i(321);i.n(n).a},function(t,e,i){"use strict";var n=i(324);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(716),a=i(325);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1331);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"27e1cc00",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(327);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(738),a=i(330);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1333);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"5f4428b0",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(332);i.n(n).a},function(t,e,i){"use strict";var n=i(333);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(642),a=i(334);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1336);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"9b5b494a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(336);i.n(n).a},function(t,e,i){"use strict";var n=i(339);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(696),a=i(340);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1339);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"e5d5856e",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(342);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(711),a=i(343);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1346);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7bea406d",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(728),a=i(345);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1342);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"59135b56",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(347);i.n(n).a},function(t,e,i){t.exports=i.p+"assets/马赛克@3x.6f5f994.png"},function(t,e,i){t.exports=i.p+"assets/模糊@3x.7ca13d7.png"},function(t,e,i){t.exports=i.p+"assets/遮罩@3x.03ffbc4.png"},function(t,e,i){"use strict";var n=i(348);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(724),a=i(351);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1348);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"854779d4",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(353);i.n(n).a},function(t,e,i){"use strict";var n=i(354);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(720),a=i(357);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1351);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7c4ad8e0",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(359);i.n(n).a},function(t,e,i){"use strict";var n=i(360);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(707),a=i(361);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1399);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"632f691f",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(749),a=i(363);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1356);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"724dd00a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(367);i.n(n).a},function(t,e,i){"use strict";var n=i(368);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(742),a=i(369);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1358);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"008b8dea",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(371);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(740),a=i(372);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1381);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"8f00f38a",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(769),a=i(374);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1361);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"6fb8c5d4",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(376);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(770),a=i(377);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1365);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"b1206e1e",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(780),a=i(379);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1364);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"b9e9ed80",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(381);i.n(n).a},function(t,e,i){"use strict";var n=i(382);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(772),a=i(383);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1380);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0f5e698e",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(779),a=i(385);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1376);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"17cc0f38",null);e.default=o.exports},function(t,e,i){var n={"./子弹时间.png":1369,"./自定义.png":1370,"./蒙太奇.png":1371,"./跳切.png":1372,"./闪出.png":1373,"./闪进.png":1374,"./高光时光.png":1375};function a(t){var e=r(t);return i(e)}function r(t){var e=n[t];if(e+1)return e;var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}a.keys=function(){return Object.keys(n)},a.resolve=r,(t.exports=a).id=1368},function(t,e,i){t.exports=i.p+"assets/子弹时间.be5dbfe.png"},function(t,e,i){t.exports=i.p+"assets/自定义.eedb198.png"},function(t,e,i){t.exports=i.p+"assets/蒙太奇.0ee8ebc.png"},function(t,e,i){t.exports=i.p+"assets/跳切.a9f9849.png"},function(t,e,i){t.exports=i.p+"assets/闪出.43a91b1.png"},function(t,e,i){t.exports=i.p+"assets/闪进.faf3184.png"},function(t,e,i){t.exports=i.p+"assets/高光时光.587db54.png"},function(t,e,i){"use strict";var n=i(387);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(783),a=i(388);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1379);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(24)),a=n(i(8)),s=n(i(14)),o=function(){function t(){(0,a.default)(this,t)}return(0,s.default)(t,null,[{key:"getPoint",value:function(t,e){if(!(t<0||1<t)){for(var i=[],n=null,a=0;a<e.length;a+=2){var r=e[a],s=e[a+1];if(n){var o=n.x+(r-n.x)*t,c=n.y+(s-n.y)*t;i.push.apply(i,[o,c])}n={x:r,y:s}}return 2===i.length?i:this.getPoint(t,i)}}},{key:"generatePoints",value:function(t,e){for(var i=0,n=[];i<=t;){var a=i/t;n.push.apply(n,(0,r.default)(this.getPoint(a,e))),i++}return n}},{key:"getY",value:function(t,e,i){for(var n=this.generatePoints(t,e),a=0,r=1/0,s=0;s<n.length;s+=2){var o=n[s],c=Math.abs(o-i);c<r&&(a=s,r=c)}return n[a+1]}}]),t}();e.default=o},function(t,e,i){"use strict";var n=i(390);i.n(n).a},function(t,e,i){"use strict";var n=i(391);i.n(n).a},function(t,e,i){"use strict";var n=i(392);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(750),a=i(393);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1383);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"3f19debc",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(395);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(726),a=i(396);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1387);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"2e3789a6",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(765),a=i(398);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1386);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"b5ab2922",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(400);i.n(n).a},function(t,e,i){"use strict";var n=i(401);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(733),a=i(402);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1389);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7b0ebbeb",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(404);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(718),a=i(405);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1391);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"18dcf695",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(407);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(725),a=i(408);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1393);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"f43b8586",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(410);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(730),a=i(411);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1395);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"02cdc876",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(413);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(735),a=i(414);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1397);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"22bb2408",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(416);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(417);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);var r=i(0),s=Object(r.a)(n.default,void 0,void 0,!1,null,null,null);e.default=s.exports},function(t,e,i){"use strict";var n=i(419);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(698),a=i(420);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1425);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"2c88e496",null);e.default=o.exports},,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(422);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(682),a=i(423);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1454);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"e2a2a0d2",null);e.default=o.exports},,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(425);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(688),a=i(426);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1458);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"742728c8",null);e.default=o.exports},,,function(t,e,i){"use strict";var n=i(428);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(694),a=i(429);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1460);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"5fda1654",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(431);i.n(n).a},function(t,e,i){"use strict";var n=i(432);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(667),a=i(433);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1502);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"b6b390b2",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(697),a=i(435);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1467);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7fc34db0",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(731),a=i(437);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1465);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"5cd4321b",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(439);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(877)),r={mounted:function(){var i=this;this.hotkeyString="backspace,space,del,left,right,home,end,ctrl~s,ctrl~v,ctrl~c,ctrl~z,ctrl~shift~z",(0,a.default)(this.hotkeyString,{splitKey:"~"},this.hotKeyListener),window.addEventListener("keydown",function(t){var e=t.key.toLowerCase();["c","v","s","z"].includes(e)&&t.metaKey&&!t.shiftKey&&i.hotKeyListener(event,{key:"ctrl~".concat(e)}),["z"].includes(e)&&t.metaKey&&t.shiftKey&&i.hotKeyListener(event,{key:"ctrl~shift~".concat(e)})})},destroyed:function(){a.default.unbind(this.hotkeyString)},methods:{hotKeyListener:function(t,e){if(t.preventDefault(),this.$store.state.SDKReadyToWork&&!this.$store.state.hotKeyLock){var i={backspace:this.$GLEventKey.DELETE_CLIP,space:this.$GLEventKey.PAUSE_OR_PLAY,del:this.$GLEventKey.DELETE_CLIP,left:this.$GLEventKey.GO_BACKWARD_FRAME,right:this.$GLEventKey.GO_FORWARD_FRAME,home:this.$GLEventKey.GO_START_FRAME,end:this.$GLEventKey.GO_END_FRAME,"ctrl~s":this.$GLEventKey.REQUIRE_SAVE_PROJECT,"ctrl~v":this.$GLEventKey.PASTE_CLIP,"ctrl~c":this.$GLEventKey.COPY_CLIP,"ctrl~z":this.$GLEventKey.UNDO_OPERATION,"ctrl~shift~z":this.$GLEventKey.REDO_OPERATION}[e.key];this.$Bus.$emit(i),"ctrl~c"===e.key&&this.$LogReport.sendCustomEvent("editor_item_copy"),"ctrl~v"===e.key&&this.$LogReport.sendCustomEvent("editor_item_paste")}}}};e.default=r},function(t,e,i){"use strict";var n=i(440);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(703),a=i(441);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1469);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"12088270",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(443);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(704),a=i(444);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1475);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"7c393e02",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(722),a=i(446);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1472);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"b56d127a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(448);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(727),a=i(449);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1474);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"407fb190",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(451);i.n(n).a},function(t,e,i){"use strict";var n=i(452);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(689),a=i(453);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1487);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"54fb067f",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(734),a=i(455);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1478);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0ceeb1c7",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(457);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(736),a=i(458);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1482);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"64108ea4",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(771),a=i(460);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1481);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(462);i.n(n).a},function(t,e,i){"use strict";var n=i(463);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(723),a=i(464);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1486);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"1f514b54",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(777),a=i(466);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1485);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(468);i.n(n).a},function(t,e,i){"use strict";var n=i(469);i.n(n).a},function(t,e,i){"use strict";var n=i(470);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(700),a=i(471);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1490);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"cba9b472",null);e.default=o.exports},function(t,e,i){t.exports=i.p+"assets/上轨引导.c8ca4cf.png"},function(t,e,i){"use strict";var n=i(473);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(6)),E=n(i(4)),k=i(21),S=i(7),P=i(15),g=i(27),O="WAITING",R="ON",I="OFF",a={data:function(){return{draggingMouse:{sourceType:null,track:null,trackBg:null,clip:null},draggingClip:null,lastAnimTrack:null,animState:I,animTimeout:0,lockMouseMove:!1,trackMaskActive:!1}},methods:{handleClipResize:function(e,i,n){var a,r;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=0===i?"outPoint":"inPoint",this.alignRaw({sortBy:a,sdkFinished:!1}),r=this.getTrackByClip(e),this.mergeClipOnTrack(r,e),0===i)return t.next=7,E.default.awrap(this._changeTrimIn(e));t.next=9;break;case 7:t.next=11;break;case 9:return t.next=11,E.default.awrap(this._changeTrimOut(e));case 11:this.alignRaw({alignPos:!0}),n&&n();case 13:case"end":return t.stop()}},null,this)},mergeTripleClipOnTrack:function(t,e){for(var i=0;i<t.clips.length;i++){var n=t.clips[i];if(n!==e&&!(e.outPoint<=n.inPoint||e.inPoint>=n.outPoint))if(e.inPoint>=n.inPoint&&e.inPoint<=n.outPoint)e.inPoint=n.outPoint,e.outPoint=n.outPoint+5e6;else if(e.outPoint>n.inPoint&&e.outPoint<n.outPoint){n.inPoint-5e6<0?(n.inPoint=5e6,n.outPoint=1e7,e.outPoint=n.inPoint,e.inPoint=0):(e.outPoint=n.inPoint,e.inPoint=n.inPoint-5e6)}}return-1===t.clips.indexOf(e)&&t.clips.push(e),e},mergeClipOnTrack:function(t,e){-1===t.clips.indexOf(e)&&t.clips.push(e);for(var i=0;i<t.clips.length;i++){var n=t.clips[i];if(n!==e&&!(e.outPoint<=n.inPoint||e.inPoint>=n.outPoint))if(e.inPoint<=n.inPoint&&e.outPoint>=n.outPoint)t.clips.splice(t.clips.indexOf(n),1),i--;else if(e.inPoint<=n.inPoint&&e.outPoint<n.outPoint){var a=e.outPoint-n.inPoint;n.raw.keyFrameFromInPoint=n.raw.inPoint,n.raw.keyFrameFromDuration=n.raw.outPoint-n.raw.inPoint,n.inPoint=e.outPoint,n.hasTrim()&&(n.trimIn+=a)}else if(e.inPoint>n.inPoint&&e.outPoint>=n.outPoint){var r=n.outPoint-e.inPoint;n.outPoint=e.inPoint,n.hasTrim()&&(n.trimOut-=r)}else{var s=n.outPoint-e.inPoint,o=e.outPoint-n.inPoint,c=n,u=n.clone();u.raw.keyFrameFromInPoint=u.raw.inPoint,u.raw.keyFrameFromDuration=u.raw.outPoint-n.raw.inPoint,t.clips.push(u),c.outPoint=e.inPoint,u.inPoint=e.outPoint,n.hasTrim()&&(c.trimOut-=s,u.trimIn+=o)}}},getClipPositionInfo:function(t){for(var e=this.getSameTracksInfoByClip(t).tracks,i=0;i<e.length;i++)for(var n=e[i],a=0;a<n.clips.length;a++)if(n.clips[a]===t)return{trackIndex:i,clipIndex:a,trackType:n.type,track:n,tracks:e};return null},applyTheme:function(e){var i;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$LogReport.sendCustomEvent("editor_theme_apply_click",e.bs_hash||e.material_id),!this.$BSSdk.canAddTheme()){t.next=11;break}if(i={materialId:e.material_id,packageUrl:e.package_url,displayName:e.name_zhCN},this.$BSSdk.getTheme())return t.next=6,E.default.awrap(this.$BSSdk.changeThemeVolume(1));t.next=6;break;case 6:return t.next=8,E.default.awrap(this.$BSSdk.addTheme(i));case 8:this.$BSSdk.saveQueue(),t.next=12;break;case 11:this.$message({text:"应用主题至少需要一个可见的视频轨道",type:"warning"});case 12:case"end":return t.stop()}},null,this)},handleTransitionDrop:function(e){var i,n,a,r,s,o;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.draggingMouse.clip){t.next=3;break}return t.abrupt("return");case 3:return n=this.getClipPositionInfo(i),a=n.trackIndex,r=n.clipIndex,s=this.$BSSdk.getVideoClipTransition(a,r),this.$LogReport.sendCustomEvent("editor_add_assets_drag",e.type),this.$LogReport.sendCustomEvent("editor_add_assets_drag_id",e.getMaterialId()),t.next=9,E.default.awrap(this._addTransition(i,e));case 9:if(s)return o=this.$BSSdk.getVideoClipTransition(a,r),t.next=13,E.default.awrap(this.$BSSdk.changeTransitionDuration(o,s.duration));t.next=13;break;case 13:i.hasTransition=!0,i.resizeTransitionClip&&i.resizeTransitionClip(),this.alignRaw();case 16:case"end":return t.stop()}},null,this)},draggingGetMouseForTransition:function(t){this.draggingMouse.clip=t,this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.acceptTransitionDrop=!1})})}),t.acceptTransitionDrop=!0},draggingLoseMouseForTransition:function(){this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.acceptTransitionDrop=!1})})}),this.draggingMouse.clip=null},isExpired:function(t){var e="expired-ids";return-1!==(localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):[]).indexOf(t)&&(this.$message({text:"该素材已过期，无法使用",type:"error"}),!0)},handleClipDrop:function(a,e){var n,r,s,o,c,i,u,l,d,f,p,h,v,m=this;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.draggingMouse.sourceType||this.isExpired(a.getResourceId()))return t.abrupt("return");t.next=2;break;case 2:if(this.alignRaw({sdkFinished:!1}),n=this.getSameTracksInfoByClip(a),r=n.trackType,s=n.tracks,o=function(){var t=m.getClipPositionInfo(a);if(t)return t.track.clips.splice(t.clipIndex,1),t;var e=a.type;if(a.isRecordAudio()&&(e=S.ClipTypes.RECORD_AUDIO),m.$LogReport.sendCustomEvent("editor_add_assets_drag",e),e!==S.ClipTypes.VIDEO&&e!==S.ClipTypes.AUDIO){var i=a.getMaterialId();i=i||a.getDisplayName(),m.$LogReport.sendCustomEvent("editor_add_assets_drag_id",i)}return a.resource&&a.resource.resource_id&&(0,g.bindResource)(a.resource.resource_id,m.$route.params.id).catch(function(){}),null},c=function(e){var i,n;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=o(),n=new S.TrackUI({type:r,clips:[a]}),s.splice(e,0,n),i){t.next=12;break}return t.next=6,E.default.awrap(m._addTrack(r,e));case 6:return n.raw=t.sent,t.next=9,E.default.awrap(m._addClip(n,a));case 9:a.raw=t.sent,t.next=17;break;case 12:return t.next=14,E.default.awrap(m._addTrack(r,e));case 14:return n.raw=t.sent,t.next=17,E.default.awrap(m._moveClip(a,e));case 17:setTimeout(function(){n.showSelf&&n.showSelf()},50);case 18:case"end":return t.stop()}})},i=function(){for(var t=0;t<s.length;t++)s[t].clips.length||s.splice(t,1);m.alignRaw({alignPos:!0})},function(){var t=(0,P.getNowTimeByPx)(m.newNodeLeft-m.leftPanelWidth,m.scrollX),e=t-a.inPoint;a.inPoint=t,a.outPoint+=e;var i,n=(i=0,Math.abs(a.inPoint)<5e4&&(i=0-a.inPoint),m.draggingMouse.sourceType===k.MouseSourceTypes.TRACK_CENTER&&m.draggingMouse.track.clips.forEach(function(t){Math.abs(a.inPoint-t.outPoint)<5e4&&(i=t.outPoint-a.inPoint),Math.abs(a.outPoint-t.inPoint)<5e4&&(i=t.inPoint-a.outPoint)}),i);a.inPoint+=n,a.outPoint+=n}(),-1===[k.MouseSourceTypes.TRACK_TOP,k.MouseSourceTypes.TRACK_CENTER,k.MouseSourceTypes.TRACK_BOTTOM].indexOf(this.draggingMouse.sourceType)||this.draggingMouse.track.type===n.trackType){t.next=24;break}if(u=this.trackOrder.indexOf(this.draggingMouse.track.type),l=this.trackOrder.indexOf(n.trackType),u<l)return t.next=18,E.default.awrap(c(0));t.next=20;break;case 18:t.next=22;break;case 20:return t.next=22,E.default.awrap(c(s.length));case 22:return i(),t.abrupt("return");case 24:d=function(){var e,i;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=m.trackOrder.indexOf(S.TrackTypes.VIDEO),i=m.trackOrder.indexOf(n.trackType),e<=i)return t.next=5,E.default.awrap(c(0));t.next=7;break;case 5:t.next=9;break;case 7:return t.next=9,E.default.awrap(c(s.length));case 9:case"end":return t.stop()}})},t.t0=this.draggingMouse.sourceType,t.next=t.t0===k.MouseSourceTypes.INIT_EMPTY?28:t.t0===k.MouseSourceTypes.TOP_EMPTY?31:t.t0===k.MouseSourceTypes.BOTTOM_EMPTY?34:t.t0===k.MouseSourceTypes.TRACK_TOP?37:t.t0===k.MouseSourceTypes.TRACK_CENTER?41:t.t0===k.MouseSourceTypes.TRACK_BOTTOM?57:t.t0===k.MouseSourceTypes.THEME?61:64;break;case 28:return t.next=30,E.default.awrap(c(0));case 30:return t.abrupt("break",64);case 31:return t.next=33,E.default.awrap(c(0));case 33:return t.abrupt("break",64);case 34:return t.next=36,E.default.awrap(c(s.length));case 36:return t.abrupt("break",64);case 37:return f=s.indexOf(this.draggingMouse.track),t.next=40,E.default.awrap(c(f));case 40:return t.abrupt("break",64);case 41:if(p=o(),this.mergeClipOnTrack(this.draggingMouse.track,a),h=this.draggingMouse.track,p){t.next=54;break}if(e)return t.next=48,E.default.awrap(this._addClip(h,a.clone(),a));t.next=50;break;case 48:t.next=52;break;case 50:return t.next=52,E.default.awrap(this._addClip(h,a));case 52:t.next=56;break;case 54:return t.next=56,E.default.awrap(this._moveClip(a,s.indexOf(h)));case 56:return t.abrupt("break",64);case 57:return v=s.indexOf(this.draggingMouse.track),t.next=60,E.default.awrap(c(v+1));case 60:return t.abrupt("break",64);case 61:return t.next=63,E.default.awrap(d());case 63:return t.abrupt("break",64);case 64:i();case 65:case"end":return t.stop()}},null,this)},sortClips:function(t){var i=0<arguments.length&&void 0!==t?t:"inPoint";this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.sort(function(t,e){return t[i]-e[i]})})})},alignRaw:function(t){var r=this,e=0<arguments.length&&void 0!==t?t:{},i=e.sortBy||"inPoint",s=void 0===e.sdkFinished||e.sdkFinished,o=e.alignPos;this.sortClips(i),this.allTracks.forEach(function(t){t.forEach(function(n,a){n.raw=r._getTrack(n.type,a),n.clips.forEach(function(t,e){if(t.raw=r._getClip(n.type,a,e),t.nextClip=n.clips[e+1]||{selected:!1},t.lastClip=n.clips[e-1]||{selected:!1},o&&(t.inPoint=t.raw.inPoint,t.outPoint=t.raw.outPoint,t.trimIn=t.raw.trimIn,t.trimOut=t.raw.trimOut),n.type===S.TrackTypes.VIDEO&&s){var i=r.$BSSdk.getVideoClipTransition(a,e);i?(t.hasTransition=!0,t.isThemeTransition=i.isThemeTransition):(t.hasTransition=!1,t.isThemeTransition=!1)}else t.hasTransition=!1})})})},draggingGetMouseForClip:function(t,e,i){var n=this;if(this.draggingClip&&!this.lockMouseMove&&(this.draggingClip.type!==S.ClipTypes.MUSIC_CAPTION||e&&e.type===S.TrackTypes.MUSIC_CAPTION&&t===k.MouseSourceTypes.TRACK_CENTER)&&(this.draggingClip.type!==S.ClipTypes.TRIPLE||e&&e.type===S.TrackTypes.TRIPLE&&t===k.MouseSourceTypes.TRACK_CENTER)){this.draggingMouse.sourceType=t,this.draggingMouse.track=e,this.draggingMouse.trackBg=i,this.allTracks.forEach(function(t){t.forEach(function(t){t.clipOnTop=!1,t.clipOnCenter=!1,t.clipOnBottom=!1})}),this.highlight.forEach(function(t){t.top=!1,t.bottom=!1});var a=!1,r=this.getSameTracksInfoByClip(this.draggingClip),s=function(){r.tracks.length?r.tracks[0].clipOnTop=!0:n.highlight[r.index].top=!0,a=!0},o=function(){r.tracks.length?r.tracks[r.tracks.length-1].clipOnBottom=!0:n.highlight[r.index].bottom=!0,a=!0},c=function(){n.trackOrder.indexOf(e.type)<n.trackOrder.indexOf(r.trackType)?s():o()};switch(this.draggingMouse.sourceType){case k.MouseSourceTypes.TOP_EMPTY:s();break;case k.MouseSourceTypes.BOTTOM_EMPTY:o();break;case k.MouseSourceTypes.TRACK_TOP:if(e.type!==r.trackType){c();break}e.clipOnTop=!0,a=!0;break;case k.MouseSourceTypes.TRACK_CENTER:if(e.type!==r.trackType){c();break}e.clipOnCenter=!0,a=!0;break;case k.MouseSourceTypes.TRACK_BOTTOM:if(e.type!==r.trackType){c();break}e.clipOnBottom=!0,a=!0;break;case k.MouseSourceTypes.THEME:n.trackOrder.indexOf(S.TrackTypes.VIDEO)<=n.trackOrder.indexOf(r.trackType)?s():o()}a&&this.draggingNode&&this.draggingNode.classList.add("ready-to-drop")}},setDragMask:function(t){this.trackMaskActive=t},draggingLoseMouseForClip:function(){this.lockMouseMove||(this.draggingMouse.sourceType=null,this.draggingMouse.track=null,this.draggingMouse.trackBg=null,this.allTracks.forEach(function(t){t.forEach(function(t){t.clipOnTop=!1,t.clipOnCenter=!1,t.clipOnBottom=!1})}),this.highlight.forEach(function(t){t.top=!1,t.bottom=!1}),this.draggingNode&&this.draggingNode.classList.remove("ready-to-drop"))},initDragNode:function(t,e,i,n){var a,r=this,s=parseInt(t.style.width);a=5e4<s&&n.type===S.ClipTypes.VIDEO?function(t){var e=document.createElement("div");e.classList.add("clip-item-wrap");var i=(0,P.getPxByNowTime)((0,P.getNowTimeByPx)(document.body.clientWidth,r.scrollX));i=s<i?s:i,e.style.width=i+"px",e.style.height=t.style.height,e.style.backgroundColor="#000",e.style.overflow="hidden";var n=t.querySelector(".bg");return n&&(e.style.backgroundImage=n.style.backgroundImage,e.style.backgroundSize="auto 100%"),e}(t):t.cloneNode(!0),e+this.scrollX<this.getLeftLimit(n)&&n.type!==S.ClipTypes.TRANSITION&&(e=this.getLeftLimit(n)-this.scrollX),a.style.position="fixed",a.style.left=e+"px",a.style.top=i+"px",a.style.pointerEvents="none",a.style.zIndex="6",a.classList.add("dragging");var o=a.querySelector(".transition-in-clip");return o&&(o.style.display="none"),a},getTrackByClip:function(t){for(var e=0;e<this.allTracks.length;e++)for(var i=0;i<this.allTracks[e].length;i++)for(var n=0;n<this.allTracks[e][i].clips.length;n++)if(this.allTracks[e][i].clips[n]===t)return this.allTracks[e][i];return null},getSameTracksInfoByClip:function(t){for(var e,i=(e={},(0,r.default)(e,S.TrackTypes.TIMELINE_VIDEO_FX,[S.ClipTypes.FILTER,S.ClipTypes.EFFECT,S.ClipTypes.PARTICLE]),(0,r.default)(e,S.TrackTypes.STICKER,[S.ClipTypes.STICKER]),(0,r.default)(e,S.TrackTypes.TRIPLE,[S.ClipTypes.TRIPLE]),(0,r.default)(e,S.TrackTypes.CAPTION,[S.ClipTypes.CAPTION]),(0,r.default)(e,S.TrackTypes.MUSIC_CAPTION,[S.ClipTypes.MUSIC_CAPTION]),(0,r.default)(e,S.TrackTypes.AUDIO,[S.ClipTypes.AUDIO,S.ClipTypes.RECORD_AUDIO]),(0,r.default)(e,S.TrackTypes.VIDEO,[S.ClipTypes.IMAGE,S.ClipTypes.VIDEO]),e),n=0;n<this.trackOrder.length;n++){var a=this.trackOrder[n];if(-1!==i[a].indexOf(t.type))return{trackType:a,index:n,tracks:this.allTracks[n]}}},adjustScroll:function(e,i){var n=e.getBoundingClientRect().top;this.$nextTick(function(){var t=n-e.getBoundingClientRect().top;i.scrollTop-=t})},lockOperationTracks:function(t,e){1<arguments.length&&void 0!==e&&e?this.uiLockAllTracks=t:this.lockAllTracks=t},handleClipDragging:function(t){var v=this,m=t.clip,g=t.left,_=t.top,i=t.element,w=t.mouseX,b=t.mouseY,y=t.dragMask;if(!this.isLocked){var C,n,T=!1,x=function(){var e;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return v.$Bus.$emit(v.$GLEventKey.CLIP_START_DRAGGING,m),T=!0,C=v.initDragNode(i,g,_,m),v.draggingNode=C,document.body.appendChild(C),y?v.$Bus.$emit(v.$GLEventKey.START_DRAGGING_MUSICCAPTION_OR_THEME):m.type!==S.ClipTypes.TRANSITION?(n=v.getSameTracksInfoByClip(m).tracks,v.clipDragging=!0,m.isDragging=!0,n.forEach(function(t,e){t.active=!0,0===e&&(t.activeTopTrack=!0),e===n.length-1&&(t.activeBottomTrack=!0)}),v.currentClipElementTop=i.getBoundingClientRect().top,v.$refs["track-bodys"]&&v.adjustScroll(i,v.$refs["track-bodys"].$el)):v.allTracks[v.trackOrder.indexOf(S.TrackTypes.VIDEO)].forEach(function(t){t.clips.reduce(function(t,e){return t?e?(Math.abs(t.outPoint-e.inPoint)<5&&(t.acceptTransition=!0),e):null:e},null)}),y?(v.$Bus.$on(k.EventKeys.TRACK_MASK_GET_MOUSE,v.setDragMask),v.$Bus.$on(k.EventKeys.TRACK_MASK_LOSE_MOUSE,v.setDragMask)):m.type!==S.ClipTypes.TRANSITION?(v.$Bus.$on(k.EventKeys.TRACK_GET_MOUSE,v.draggingGetMouseForClip),v.$Bus.$on(k.EventKeys.TRACK_LOSE_MOUSE,v.draggingLoseMouseForClip)):(v.$Bus.$on(k.EventKeys.TRANSITION_GET_MOUSE,v.draggingGetMouseForTransition),v.$Bus.$on(k.EventKeys.TRANSITION_LOSE_MOUSE,v.draggingLoseMouseForTransition)),v.draggingClip=m,e=function(e){return new Promise(function(t){setTimeout(function(){t(!0)},e)})},t.next=11,E.default.awrap(e(10));case 11:case"end":return t.stop()}})},a=function(e){var i,n,r,s,o,c,u,a,l,d,f,p,h;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.clientX-w,n=e.clientY-b,Math.sqrt(i*i+n*n)<10&&!T)return t.abrupt("return");t.next=4;break;case 4:if(T){t.next=7;break}return t.next=7,E.default.awrap(x());case 7:o=1/(s=0),c=r=!1,u=g+i,a=_+n,m.type===S.ClipTypes.TRANSITION||y||(u+v.scrollX<v.getLeftLimit(m)&&(u=v.getLeftLimit(m)-v.scrollX),l=function(){if((m.type===S.ClipTypes.IMAGE||m.type===S.ClipTypes.VIDEO)&&v.$Timeline.theme&&v.draggingMouse.sourceType){var t=v.$Timeline.allTracks[v.$Timeline.trackOrder.indexOf(S.TrackTypes.VIDEO)],i=(0,P.getNowTimeByPx)(v.newNodeLeft-v.leftPanelWidth,v.scrollX)+m.outPoint-m.inPoint,n=i;t.forEach(function(t){t.visible&&t.clips.forEach(function(t){var e=t===m?i:t.outPoint+(0,P.getNowTimeByPx)(t.animOffsetX);n<e&&(n=e)})}),v.$store.state.themeDurationPredict=n+v.$Timeline.theme.tailDuration}else v.$store.state.themeDurationPredict=0},v.draggingMouse.trackBg&&v.draggingMouse.sourceType===k.MouseSourceTypes.TRACK_CENTER&&v.draggingMouse.track.type===v.getSameTracksInfoByClip(v.draggingClip).trackType&&(a=v.draggingMouse.trackBg.getBoundingClientRect().top,d=1/0,f=(0,P.getPxByNowTime)(m.outPoint-m.inPoint),(p=v.draggingMouse.track.clips).forEach(function(t){if(m!==t&&!t.animOffsetX){var e=(0,P.getPxByNowTime)(t.inPoint,v.scrollX)+v.leftPanelWidth-u-f,i=(0,P.getPxByNowTime)(t.outPoint,v.scrollX)+v.leftPanelWidth-u;Math.abs(e)<Math.abs(d)&&(d=e),Math.abs(i)<Math.abs(d)&&(d=i)}}),Math.abs(d)<10&&u+d>=v.leftPanelWidth&&(u+=d),Math.abs(u-v.getLeftLimit(m))<10&&(u=v.getLeftLimit(m)),function(){for(var a=p.reduce(function(t,e){return e!==m&&t.push(e),t},[]),t=function(i){var t=0===i?0:a[i-1].outPoint,n=a[i];if(u>=(0,P.getPxByNowTime)(t,v.scrollX)+v.leftPanelWidth-1&&u<=(0,P.getPxByNowTime)(n.inPoint,v.scrollX)+v.leftPanelWidth+1&&u+f>(0,P.getPxByNowTime)(n.inPoint,v.scrollX)+v.leftPanelWidth)return c=!0,v.doAnimTmpFunc=function(){v.lastAnimTrack=v.draggingMouse.track;var t=a.slice(i,a.length),e=v.newNodeLeft+f-((0,P.getPxByNowTime)(n.inPoint,v.scrollX)+v.leftPanelWidth);t.forEach(function(t){t.animOffsetX=e}),v.doAnimTmpFunc=null,l()},v.animState===I?(v.animState=O,v.animTimeout=setTimeout(function(){v.animState=R,v.doAnimTmpFunc&&v.doAnimTmpFunc()},100)):v.animState===R&&v.doAnimTmpFunc&&v.doAnimTmpFunc(),"break"},e=0;e<a.length;e++){if("break"===t(e))break}}(),h=function(){var a=p.reduce(function(t,e){return e!==m&&t.push(e),t},[]),t=(p=p.sort(function(t,e){return t.inPoint-e.inPoint})).findIndex(function(t){return t.uuid===m.uuid});0<t&&(o=(0,P.getPxByNowTime)(a[0].inPoint,v.scrollX),s=(0,P.getPxByNowTime)(a[t-1].outPoint,v.scrollX)-(0,P.getPxByNowTime)(a[0].inPoint,v.scrollX)+v.leftPanelWidth);for(var e=function(i){var n=a[i-1],t=a[i-1].outPoint;if(u<=(0,P.getPxByNowTime)(t,v.scrollX)+v.leftPanelWidth-1&&u>=(0,P.getPxByNowTime)(n.inPoint,v.scrollX)+v.leftPanelWidth)return c=r=!0,v.doAnimTmpFunc=function(){v.lastAnimTrack=v.draggingMouse.track;var t=a.slice(0,i),e=v.newNodeLeft-((0,P.getPxByNowTime)(n.outPoint,v.scrollX)+v.leftPanelWidth);e<-o&&(e=-o),t.forEach(function(t){t.animOffsetX=e}),v.doAnimTmpFunc=null},v.animState===I?(v.animState=O,v.animTimeout=setTimeout(function(){v.animState=R,v.doAnimTmpFunc&&v.doAnimTmpFunc()},100)):v.animState===R&&v.doAnimTmpFunc&&v.doAnimTmpFunc(),"break";r=!1},i=a.length;0<i;i--){if("break"===e(i))break}},m.type===S.ClipTypes.TRIPLE&&h()),c||(l(),v.clearClipInsertAnim())),m.type===S.ClipTypes.MUSIC_CAPTION||m.type===S.ClipTypes.TRIPLE?C.style.top=v.currentClipElementTop+"px":C.style.top=a+"px",m.type===S.ClipTypes.TRIPLE&&r&&(u=u<=s?s:u),C.style.left=u+"px",v.newNodeLeft=u;case 18:case"end":return t.stop()}})};document.addEventListener("mousemove",a),document.addEventListener("mouseup",function t(){var e;document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",t),T&&E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(v.uiProcessLocked=!0,T=!1,v.lockMouseMove=!0,document.body.removeChild(C),!y){t.next=20;break}if(v.$Bus.$emit(v.$GLEventKey.END_DRAGGING_MUSICCAPTION_OR_THEME),v.$Bus.$emit(v.$GLEventKey.CLIP_STOP_DRAGGING,m),!v.trackMaskActive){t.next=18;break}if(m.type!==S.ClipTypes.CAPTION){t.next=12;break}v.$Bus.$emit(v.$GLEventKey.APPLY_MUSIC_CAPTION,m.resource),t.next=18;break;case 12:if(m.type===S.ClipTypes.THEME)return t.next=15,E.default.awrap(v.applyTheme(m.resource));t.next=17;break;case 15:t.next=18;break;case 17:m.type===S.ClipTypes.STICKER&&v.$Bus.$emit(v.$GLEventKey.APPLY_TRIPLE_STICKER,m.resource);case 18:t.next=34;break;case 20:if(m.type===S.ClipTypes.TRANSITION){t.next=32;break}if(e=!1,v.animState===O&&(v.animState=R,v.doAnimTmpFunc&&v.doAnimTmpFunc()),v.animState===R)return t.next=26,E.default.awrap(v.$BSSdk.doBatchProcess(function(){return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E.default.awrap(v.prepareStage(m));case 2:e=t.sent;case 3:case"end":return t.stop()}})}));t.next=26;break;case 26:return t.next=28,E.default.awrap(v.handleClipDrop(m,e));case 28:v.clipDragging=!1,m.isDragging=!1,n.forEach(function(t){t.activeTopTrack=!1,t.activeBottomTrack=!1,t.active=!1}),v.draggingMouse.trackBg?v.adjustScroll(v.draggingMouse.trackBg,v.$refs["track-bodys"].$el):i&&v.$refs["track-bodys"]&&v.adjustScroll(i,v.$refs["track-bodys"].$el),v.$Bus.$emit(v.$GLEventKey.CLIP_STOP_DRAGGING,m),t.next=34;break;case 32:v.allTracks[v.trackOrder.indexOf(S.TrackTypes.VIDEO)].forEach(function(t){t.clips.forEach(function(t){t.acceptTransition=!1,t.acceptTransitionDrop=!1})}),v.handleTransitionDrop(m);case 34:v.draggingNode=null,v.draggingClip=null,v.lockMouseMove=!1,v.uiProcessLocked=!1,v.trackMaskActive=!1,y?(v.$Bus.$off(k.EventKeys.TRACK_MASK_GET_MOUSE,v.setDragMask),v.$Bus.$off(k.EventKeys.TRACK_MASK_LOSE_MOUSE,v.setDragMask)):m.type!==S.ClipTypes.TRANSITION?(v.draggingLoseMouseForClip(),v.$Bus.$off(k.EventKeys.TRACK_GET_MOUSE,v.draggingGetMouseForClip),v.$Bus.$off(k.EventKeys.TRACK_LOSE_MOUSE,v.draggingLoseMouseForClip)):(v.draggingLoseMouseForTransition(),v.$Bus.$on(k.EventKeys.TRANSITION_GET_MOUSE,v.draggingGetMouseForTransition),v.$Bus.$on(k.EventKeys.TRANSITION_LOSE_MOUSE,v.draggingLoseMouseForTransition)),v.$store.state.themeDurationPredict=0;case 41:case"end":return t.stop()}})})}},clearClipInsertAnim:function(){this.animState=I,this.animTimeout&&(clearTimeout(this.animTimeout),this.animTimeout=0),this.lastAnimTrack&&this.lastAnimTrack.clips.forEach(function(t){t.animOffsetX=0}),this.lastAnimTrack=null},sleep:function(e){return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t){setTimeout(function(){t()},e)}));case 1:case"end":return t.stop()}})},prepareStage:function(e){var i,n,a,r,s,o,c,u,l,d,f,p;return E.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!1,this.getClipPositionInfo(e))return i=!0,t.next=6,E.default.awrap(this.deleteClip(e,!1));t.next=6;break;case 6:n=this.lastAnimTrack,r=this.allTracks[this.trackOrder.indexOf(n.type)],s=0;case 9:if(!(s<r.length)){t.next=16;break}if(n===r[s])return a=s,t.abrupt("break",16);t.next=13;break;case 13:s++,t.next=9;break;case 16:if(20<this.lastAnimTrack.clips.length)return t.next=19,E.default.awrap(this.sleep(50));t.next=19;break;case 19:for(o=[],c=this.lastAnimTrack.clips.length-1;0<=c;c--)(u=this.lastAnimTrack.clips[c]).animOffsetX&&(l=(0,P.getNowTimeByPx)(u.animOffsetX),u.inPoint+=l,u.outPoint+=l,d=u.getEl().style.transition,u.getEl().style.transition="",u.animOffsetX=0,o.push(u),u.getEl().style.transition=d);f=0;case 22:if(f<o.length)return p=o[f],t.next=26,E.default.awrap(this.SaveQueueTmp_moveClip(p,a));t.next=30;break;case 26:this.alignRaw();case 27:f++,t.next=22;break;case 30:return this.clearClipInsertAnim(),t.abrupt("return",i);case 32:case"end":return t.stop()}},null,this)}}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=n(i(4)),l=i(21),v=i(7),m=n(i(33)),g=i(40),a={methods:{operate:function(t){switch(t){case l.OperationTypes.REVOKE:this.undoOperation();break;case l.OperationTypes.UNDO_REVOKE:this.redoOperation();break;case l.OperationTypes.CUT:this.handleClipCut();break;case l.OperationTypes.SEPARATE:this.handleVideoClipSeparate();break;case l.OperationTypes.DELETE:this.handleClipDelete(!0);break;case l.OperationTypes.FREEZE:this.handleVideoClipFreeze()}},undoOperation:function(){var e=this;this.isLocked||this.$BSSdk.doBatchProcess(function(){return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.awrap(e.$BSSdk.undoQueue());case 2:case"end":return t.stop()}})})},redoOperation:function(){var e=this;this.isLocked||this.$BSSdk.doBatchProcess(function(){return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.awrap(e.$BSSdk.redoQueue());case 2:case"end":return t.stop()}})})},startQueryOperation:function(){var t=this;this.queryOperationInterval=setInterval(function(){t.setOperationState(l.OperationTypes.CUT,t.canCutClip()),t.setOperationState(l.OperationTypes.SEPARATE,t.canSeparate()),t.setOperationState(l.OperationTypes.FREEZE,t.canFreezeVideo()),t.setOperationState(l.OperationTypes.REVOKE,t.$store.getters.canUndo),t.setOperationState(l.OperationTypes.UNDO_REVOKE,t.$store.getters.canRedo)},300)},stopQueryOperation:function(){clearInterval(this.queryOperationInterval)},canFreezeVideo:function(){var t=this.selectedClip;return!(!t||t.type!==v.ClipTypes.VIDEO)&&(!(this.currentTimelinePosition<=t.inPoint||this.currentTimelinePosition>=t.outPoint)&&!t.getIsFreezeVideo())},handleVideoClipFreeze:function(){var p=this;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.awrap(this.$BSSdk.doBatchProcess(function(){var e,i,n,a,r,s,o,c,u,l,d,f;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(p.isLocked)return t.abrupt("return");t.next=2;break;case 2:if(p.uiProcessLocked=!0,p.clipDragging||p.draggingClip)return t.abrupt("return");t.next=5;break;case 5:if(e=p.selectedClip){t.next=8;break}return t.abrupt("return");case 8:return p.$LogReport.sendCustomEvent("editor_video_freezing_click"),i=p.getClipPositionInfo(e),n=i.track,a=i.trackIndex,r=p.handleClipCutInUI(e),s=r.rightClip,t.next=13,h.default.awrap(p.SaveQueueTmp_splitClip(n,s,e));case 13:p.sortClips(),p.alignRaw({alignPos:!0}),o=n.clips.indexOf(s),c=3e6,u=n.clips.length-1;case 18:if(o<=u)return(l=n.clips[u]).inPoint+=c,l.outPoint+=c,t.next=24,h.default.awrap(p.SaveQueueTmp_moveClip(l,a));t.next=27;break;case 24:u--,t.next=18;break;case 27:return(d=new v.ClipUI({type:v.ClipTypes.VIDEO,isFreezeVideo:!0,resource:e.resource,duration:c})).inPoint=e.outPoint,d.outPoint=d.inPoint+c,p.mergeClipOnTrack(n,d),(f=(0,m.default)(e)).raw.keyFrames&&f.raw.keyFrames.length&&p.$BSSdk.freezeVideoKeyFrameToCopyClip(e.raw,f.raw,e.outPoint-e.inPoint),t.next=35,h.default.awrap(p.SaveQueueTmp_addClip(n,d,f,{isFreezeVideo:!0,freezePoint:e.trimOut}));case 35:return p.alignRaw(),t.next=38,h.default.awrap(p.$BSSdk.saveQueue());case 38:p.uiProcessLocked=!1;case 39:case"end":return t.stop()}})}));case 2:case"end":return t.stop()}},null,this)},updataRhythmEditData:function(){var t=this.$store.state.rhythmData,e=t.edit_type,i=t.ai_data,n=t.man_data,a=t.sectionData,r=null;(e=Number(e))?[2,3].includes(e)?r={auto:!0,type:e,data:i[e-2].markers,sectionData:a.ai_data[e-2]}:1===e&&(r={auto:!1,type:1,data:n[0].markers,sectionData:a.man_data[0]||[]}):r={auto:!1,type:1,data:[],sectionData:[]},this.$store.commit("updateRhythmEditData",r)},handleVideoClipSeparate:function(){var e,i,n,a;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$LogReport.sendCustomEvent("editor_timeline_track_separate_click"),this.isLocked)return t.abrupt("return");t.next=3;break;case 3:if(this.clipDragging||this.draggingClip)return t.abrupt("return");t.next=5;break;case 5:if(e=this.selectedClip){t.next=8;break}return t.abrupt("return");case 8:return t.next=10,h.default.awrap(this._separateVideo(e));case 10:return(i=e.clone()).type=v.ClipTypes.AUDIO,n=this.allTracks[v.TrackOrder.indexOf(v.TrackTypes.AUDIO)],a=new v.TrackUI({type:v.TrackTypes.AUDIO,clips:[i]}),n.splice(0,0,a),t.next=17,h.default.awrap(this._addTrack(v.TrackTypes.AUDIO,0));case 17:return a.raw=t.sent,t.next=20,h.default.awrap(this._addClip(a,i,null,{displayName:i.getDisplayName()+" 原声",speed:e.raw.speed||1}));case 20:i.raw=t.sent;case 21:case"end":return t.stop()}},null,this)},canSeparate:function(){var t=this.selectedClip;return!!t&&this._canSeparate(t)},canCutClip:function(){var t=this.selectedClip;return!!t&&(t.type!==v.ClipTypes.TRIPLE&&!(this.currentTimelinePosition<=t.inPoint||this.currentTimelinePosition>=t.outPoint))},handleClipCutInUI:function(t){if(this.alignRaw({sdkFinished:!1}),!(this.currentTimelinePosition<=t.inPoint||this.currentTimelinePosition>=t.outPoint)){var e=this.getTrackByClip(t),i=this.currentTimelinePosition-t.inPoint,n=t.outPoint-this.currentTimelinePosition,a=t.clone();return t.outPoint=this.currentTimelinePosition,a.inPoint=this.currentTimelinePosition,t.hasTrim()&&("number"==typeof t.raw.speed&&(n*=t.raw.speed,i*=t.raw.speed),t.trimOut-=n,a.trimIn+=i),a.raw.keyFrameFromInPoint=a.raw.inPoint,a.raw.keyFrameFromDuration=a.raw.outPoint-a.raw.inPoint,this.mergeClipOnTrack(e,a),{track:e,rightClip:a}}},handleClipCut:function(){var e,i,n,a;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLocked)return t.abrupt("return");t.next=2;break;case 2:if(this.clipDragging||this.draggingClip)return t.abrupt("return");t.next=4;break;case 4:if(e=this.selectedClip){t.next=7;break}return t.abrupt("return");case 7:if(i=this.handleClipCutInUI(e),n=i.track,a=i.rightClip,e.type===v.ClipTypes.VIDEO)return t.next=11,h.default.awrap(this._splitClip(n,a,e));t.next=13;break;case 11:t.next=15;break;case 13:return t.next=15,h.default.awrap(this._addClip(n,a,e));case 15:this.sortClips(),this.alignRaw({alignPos:!0});case 17:case"end":return t.stop()}},null,this)},handleClipCopy:function(){this.selectedClip&&(this.clipboardClip=(0,m.default)(this.selectedClip),this.clipboardClip.hasTransition=!1)},clipDirectToTrack:function(e){var i,r,n,a,s,o,c,u=this;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.uiProcessLocked=!0,this.alignRaw(),i=this.getSameTracksInfoByClip(e),r=i.trackType,n=i.tracks,a=this.$store.state.currentTimelinePosition,(e.type===v.ClipTypes.IMAGE||e.type===v.ClipTypes.VIDEO)&&this.theme&&this.theme.headDuration&&this.theme.headDuration>a&&(a=this.theme.headDuration),s=e.outPoint-e.inPoint,e.inPoint=a,e.outPoint=a+s,e.showSelf=function(t){var e=t.getBoundingClientRect();if(e.left+50>document.body.clientWidth||e.right-20<0){var i=document.body.clientWidth-u.leftPanelWidth,n=e.width>i?i:e.width,a=u.scrollX+e.left-document.body.clientWidth+n;(0,g.scrollXTo)(u.$refs["track-bodys"].$el,a)}},o=function(n,a){var e;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(function(){var t=n[0];if(!t)return!1;for(var e=0;e<t.clips.length;e++){var i=t.clips[e];if(!(a.outPoint<i.inPoint||a.inPoint>i.outPoint))return!1}return!0}())return t.abrupt("return",n[0]);t.next=3;break;case 3:return e=new v.TrackUI({type:r,clips:[]}),setTimeout(function(){e.showSelf&&e.showSelf()},50),n.splice(0,0,e),t.next=8,h.default.awrap(u._addTrack(r,0));case 8:return e.raw=t.sent,u.alignRaw(),t.abrupt("return",e);case 11:case"end":return t.stop()}})},t.next=14,h.default.awrap(o(n,e));case 14:return c=t.sent,this.mergeClipOnTrack(c,e),t.next=18,h.default.awrap(this._addClip(c,e));case 18:e.raw=t.sent,this.alignRaw(),this.uiProcessLocked=!1,this.$Bus.$emit(l.EventKeys.CLIP_SELECTED,e);case 22:case"end":return t.stop()}},null,this)},handleClipPaste:function(){var e,i,n,a,r,s,o,c,u,l,d,f,p=this;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLocked)return t.abrupt("return");t.next=2;break;case 2:if(this.clipboardClip.type===v.ClipTypes.TRIPLE&&0<this.$store.state.tripleStickerStatus.num)return t.abrupt("return");t.next=4;break;case 4:if(this.uiProcessLocked=!0,e=function(t,e){return t.trimIn===e.trimIn&&t.trimOut===e.trimOut&&t.outPoint-t.inPoint==e.outPoint-e.inPoint&&t.getResourceId()===e.getResourceId()},i=function(){var e,i,n,a,r,s;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,p.alignRaw(),e=p.clipboardClip){t.next=5;break}return t.abrupt("return");case 5:return i=e.clone(),n=p.getSameTracksInfoByClip(e),a=n.tracks,r=n.trackType,s=new v.TrackUI({type:r,clips:[i]}),a.splice(0,0,s),t.next=11,h.default.awrap(p._addTrack(r,0));case 11:return s.raw=t.sent,t.next=14,h.default.awrap(p._addClip(s,i,e));case 14:i.raw=t.sent,p.alignRaw(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),console.error(t.t0);case 21:case"end":return t.stop()}},null,null,[[0,18]])},this.selectedClip&&e(this.selectedClip,this.clipboardClip)&&!this.selectedClip.hasTransition){t.next=12;break}return t.next=10,h.default.awrap(i());case 10:t.next=42;break;case 12:n=this.clipboardClip,a=this.getClipPositionInfo(this.selectedClip),r=a.track,s=a.clipIndex,o=a.trackIndex,c=n.clone(),l=(u=s)+1;case 17:if(!(l<r.clips.length)){t.next=29;break}if((d=r.clips[l]).hasTransition)return t.next=22,h.default.awrap(i());t.next=23;break;case 22:return t.abrupt("return",t.sent);case 23:if(e(d,this.selectedClip)&&d.inPoint===r.clips[l-1].outPoint){t.next=25;break}return t.abrupt("break",29);case 25:u=l;case 26:l++,t.next=17;break;case 29:return f=c.outPoint-c.inPoint,t.next=32,h.default.awrap(this.$BSSdk.doBatchProcess(function(){var e,i;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=r.clips.length-1;case 1:if(u<e)return(i=r.clips[e]).inPoint+=f,i.outPoint+=f,t.next=7,h.default.awrap(p.SaveQueueTmp_moveClip(i,o));t.next=10;break;case 7:e--,t.next=1;break;case 10:case"end":return t.stop()}})}));case 32:return c.inPoint=r.clips[u].outPoint,c.outPoint=c.inPoint+f,c.showSelf=function(t){var e=t.getBoundingClientRect();if(e.left+50>document.body.clientWidth||e.right-20<0){var i=document.body.clientWidth-p.leftPanelWidth,n=e.width>i?i:e.width,a=p.scrollX+e.left-document.body.clientWidth+n;(0,g.scrollXTo)(p.$refs["track-bodys"].$el,a)}},this.mergeClipOnTrack(r,c),t.next=38,h.default.awrap(this.SaveQueueTmp_addClip(r,c,n));case 38:return c.raw=t.sent,this.alignRaw(),t.next=42,h.default.awrap(this.$BSSdk.saveQueue());case 42:this.uiProcessLocked=!1;case 43:case"end":return t.stop()}},null,this)},deleteClip:function(e){var i,n,a,r,s,o,c,u=arguments;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=!(1<u.length&&void 0!==u[1])||u[1],this.alignRaw(),e===this.selectedClip&&(this.selectedClip=null),n=this.getClipPositionInfo(e),a=n.tracks,r=n.track,s=n.clipIndex,o=n.trackIndex,r.clips.splice(s,1),i)return t.next=8,h.default.awrap(this._deleteClip(r,s));t.next=10;break;case 8:t.next=12;break;case 10:return t.next=12,h.default.awrap(this.SaveQueueTmp_deleteClip(r,s));case 12:if(r.clips.length||a.splice(o,1),c=this.allTracks[this.trackOrder.indexOf(v.TrackTypes.VIDEO)],!this.theme||c.length&&-1!==c.findIndex(function(t){return!0===t.visible})){t.next=18;break}return this.theme=null,t.next=18,h.default.awrap(this.$BSSdk.removeTheme());case 18:e.type===v.ClipTypes.TRIPLE&&i&&this.updateTripleStatus(),this.alignRaw();case 20:case"end":return t.stop()}},null,this)},handleClipDelete:function(){var e,i,n,a=arguments;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<a.length&&void 0!==a[0]&&a[0],i=this.selectedClip,this.isLocked)return t.abrupt("return");t.next=4;break;case 4:if(!i&&this.gapConf)return this.$Bus.$emit(this.$GLEventKey.TRACK_GAP_DELETE),t.abrupt("return");t.next=7;break;case 7:if(this.theme&&this.theme.selected)return this.$Bus.$emit(this.$GLEventKey.THEME_DELETE),t.abrupt("return");t.next=10;break;case 10:if(i){t.next=12;break}return t.abrupt("return");case 12:if(e?this.$LogReport.sendCustomEvent("editor_timeline_delete_click"):this.$LogReport.sendCustomEvent("editor_item_delete"),i.type!==v.ClipTypes.VIDEO&&i.type!==v.ClipTypes.AUDIO&&(n=(n=i.getMaterialId())||i.getDisplayName(),this.$LogReport.sendCustomEvent("editor_assets_delete_id",n)),this.clipDragging||this.draggingClip)return t.abrupt("return");t.next=16;break;case 16:return this.uiProcessLocked=!0,t.next=19,h.default.awrap(this.deleteClip(i));case 19:this.setOperationState(l.OperationTypes.DELETE,!1),this.setOperationState(l.OperationTypes.CUT,!1),this.setOperationState(l.OperationTypes.SEPARATE,!1),this.uiProcessLocked=!1;case 23:case"end":return t.stop()}},null,this)},changeTemplate:function(e,i){var n,a,r,s,o,c;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.uiProcessLocked=!0,n=this.selectedClip,a=this.getClipPositionInfo(n),r=a.track,s=a.clipIndex,(o=n.clone()).resource=e,o.raw=null,i===v.ClipTypes.STICKER)return c=n.type===v.ClipTypes.TRIPLE,t.next=10,h.default.awrap(this.$BSSdk.removeStickerClip(r.raw,s,!1,!0));t.next=16;break;case 10:return t.next=12,h.default.awrap(this.$BSSdk.addStickerClip(r.raw,{inPoint:o.inPoint,outPoint:o.outPoint,packageUrl:o.getPackageUrl(),materialType:o.getMaterialType(),materialId:o.getMaterialId(),displayName:o.getDisplayName()},n.raw,!1,!0,c));case 12:o.raw=t.sent,this.updateTripleStatus(),t.next=22;break;case 16:if(i===v.ClipTypes.FILTER||i===v.ClipTypes.EFFECT)return t.next=19,h.default.awrap(this.$BSSdk.removeTimelineVideoFxClip(r.raw,s,!1,!0));t.next=22;break;case 19:return t.next=21,h.default.awrap(this.$BSSdk.addTimelineVideoFxClip(r.raw,{inPoint:o.inPoint,outPoint:o.outPoint,packageType:o.getPackageType(),packageUrl:o.getPackageUrl(),materialType:o.getMaterialType(),materialId:o.getMaterialId(),displayName:o.getDisplayName()},n.raw,!1,!0));case 21:o.raw=t.sent;case 22:return this.alignRaw(),this.mergeClipOnTrack(r,o),this.$BSSdk.setCurrentEditClip(o.raw),this.$BSSdk.drawMonitorEdit(),this.updateClipSelect(o),t.next=29,h.default.awrap(this.$BSSdk.saveQueue());case 29:this.uiProcessLocked=!1;case 30:case"end":return t.stop()}},null,this)}}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=n(i(4)),u=i(7),a={created:function(){this.patchMethods()},methods:{patchMethods:function(){function t(t,e,a,r){t.forEach(function(t){var n=e+t;i[n]=i[t],i[t]=function(){var e,i=arguments;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(a());case 2:return t.next=4,c.default.awrap(this[n].apply(this,Array.prototype.slice.call(i)));case 4:return e=t.sent,t.next=7,c.default.awrap(r());case 7:return t.abrupt("return",e);case 8:case"end":return t.stop()}},null,this)}.bind(i)})}var i=this;t(["_separateVideo","_changeTrackVolume","_addTransition","_deleteClip","_addTrack","_addClip","_moveClip","_changeTrimIn","_changeTrimOut","_changeTrackVisible","_splitClip"],"SetThemeTmp",function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}})},function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i.setTheme();case 1:case"end":return t.stop()}})}),t(["_separateVideo","_changeTrackVolume","_addTransition","_deleteClip","_addTrack","_addClip","_moveClip","_changeTrimIn","_changeTrimOut","_changeTrackVisible","_splitClip"],"LockPatchTmp",function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i.lockOperationTracks(!0,!0);case 1:case"end":return t.stop()}})},function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i.lockOperationTracks(!1,!0);case 1:case"end":return t.stop()}})}),t(["_addTransition","_deleteClip","_addClip","_moveClip","_changeTrimIn","_changeTrimOut","_changeTrackVisible","_splitClip"],"SaveQueueTmp",function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}})},function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(i.$BSSdk.saveQueue());case 2:case"end":return t.stop()}})})},_splitClip:function(e,i,n){var a;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:a=void 0,n&&(a=n.raw),t.t0=e.type,t.next=t.t0===u.TrackTypes.VIDEO?5:8;break;case 5:return t.next=7,c.default.awrap(this.$BSSdk.splitVideoClip(e.raw,{inPoint:i.inPoint},a));case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}},null,this)},_separateVideo:function(e){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(this.$BSSdk.separateVideoClipAV(e.raw));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},null,this)},_canSeparate:function(t){return!t.getIsFreezeVideo()&&this.$BSSdk.getClipCanBeAVSeparated(t.raw)},_changeTrackVisible:function(e,i){var n=this;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(this.$BSSdk.doBatchProcess(function(){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.default.awrap(n.$BSSdk.showTrack(e.raw,i));case 2:case"end":return t.stop()}})}));case 2:e.type===u.TrackTypes.TRIPLE&&this.updateTripleStatus(i),i?this.alignRaw():(this.selectedClip=null,e.clips.forEach(function(t){t.selected=!1}));case 4:case"end":return t.stop()}},null,this)},_changeTrackVolume:function(e,i){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.raw){t.next=2;break}return t.abrupt("return");case 2:t.t0=e.type,t.next=t.t0===u.TrackTypes.VIDEO?5:t.t0===u.TrackTypes.AUDIO?8:11;break;case 5:return t.next=7,c.default.awrap(this.$BSSdk.changeVideoTrackVolume(e.raw,{targetVolume:i}));case 7:return t.abrupt("return",t.sent);case 8:return t.next=10,c.default.awrap(this.$BSSdk.changeAudioTrackVolume(e.raw,{targetVolume:i}));case 10:return t.abrupt("return",t.sent);case 11:case"end":return t.stop()}},null,this)},_addTransitionFromRaw:function(e,i){var n,a,r;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getClipPositionInfo(e),a=n.trackIndex,r=n.clipIndex,t.next=3,c.default.awrap(this.$BSSdk.addVideoClipTransition(a,r,{packageType:i.packageType,displayName:i.displayName||i.displayNamezhCN,duration:i.duration,desc:i.desc}));case 3:case"end":return t.stop()}},null,this)},_addTransition:function(e,i){var n,a,r;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.getClipPositionInfo(e),a=n.trackIndex,r=n.clipIndex,t.next=3,c.default.awrap(this.$BSSdk.addVideoClipTransition(a,r,{packageType:i.getPackageType(),packageUrl:i.getPackageUrl(),displayName:i.getDisplayName(),duration:this.$GL.SECOND_CONVERT}));case 3:case"end":return t.stop()}},null,this)},_getTransition:function(t){var e=this.getClipPositionInfo(t),i=e.trackIndex,n=e.clipIndex;return this.$BSSdk.getVideoClipTransition(i,n)},_setTransitionTime:function(t,e){var i=this.getClipPositionInfo(t),n=i.trackIndex,a=i.clipIndex;this.$BSSdk.changeTransitionDuration(n,a,e*this.$GL.SECOND_CONVERT)},_getTrack:function(t,e){switch(t){case u.TrackTypes.VIDEO:return this.$BSSdk.getVideoTrack(e);case u.TrackTypes.AUDIO:return this.$BSSdk.getAudioTrack(e);case u.TrackTypes.CAPTION:return this.$BSSdk.getCaptionTrack(e);case u.TrackTypes.MUSIC_CAPTION:return this.$BSSdk.getCaptionTrack(e,!0);case u.TrackTypes.STICKER:return this.$BSSdk.getStickerTrack(e);case u.TrackTypes.TRIPLE:return this.$BSSdk.getStickerTrack(e,!0);case u.TrackTypes.TIMELINE_VIDEO_FX:return this.$BSSdk.getTimelineVideoFxTrack(e)}},_getClip:function(t,e,i){switch(t){case u.TrackTypes.VIDEO:return this.$BSSdk.getVideoClip(e,i);case u.TrackTypes.AUDIO:return this.$BSSdk.getAudioClip(e,i);case u.TrackTypes.CAPTION:return this.$BSSdk.getCaptionClip(e,i);case u.TrackTypes.MUSIC_CAPTION:return this.$BSSdk.getCaptionClip(e,i,!0);case u.TrackTypes.STICKER:return this.$BSSdk.getStickerClip(e,i);case u.TrackTypes.TRIPLE:return this.$BSSdk.getStickerClip(e,i,!0);case u.TrackTypes.TIMELINE_VIDEO_FX:return this.$BSSdk.getTimelineVideoFxClip(e,i)}},_deleteClip:function(e,i){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e.type,t.next=t.t0===u.TrackTypes.VIDEO?3:t.t0===u.TrackTypes.AUDIO?6:t.t0===u.TrackTypes.CAPTION?9:t.t0===u.TrackTypes.MUSIC_CAPTION?12:t.t0===u.TrackTypes.STICKER?15:t.t0===u.TrackTypes.TRIPLE?18:t.t0===u.TrackTypes.TIMELINE_VIDEO_FX?21:24;break;case 3:return t.next=5,c.default.awrap(this.$BSSdk.removeVideoClip(e.raw,i));case 5:return t.abrupt("break",24);case 6:return t.next=8,c.default.awrap(this.$BSSdk.removeAudioClip(e.raw,i));case 8:return t.abrupt("break",24);case 9:return t.next=11,c.default.awrap(this.$BSSdk.removeCaptionClip(e.raw,i));case 11:return t.abrupt("break",24);case 12:return t.next=14,c.default.awrap(this.$BSSdk.removeCaptionClip(e.raw,i,!0,!0));case 14:return t.abrupt("break",24);case 15:return t.next=17,c.default.awrap(this.$BSSdk.removeStickerClip(e.raw,i));case 17:return t.abrupt("break",24);case 18:return t.next=20,c.default.awrap(this.$BSSdk.removeStickerClip(e.raw,i,!0,!1,!0));case 20:return t.abrupt("break",24);case 21:return t.next=23,c.default.awrap(this.$BSSdk.removeTimelineVideoFxClip(e.raw,i));case 23:return t.abrupt("break",24);case 24:case"end":return t.stop()}},null,this)},_addTrack:function(e,i){return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=e,t.next=t.t0===u.TrackTypes.VIDEO?3:t.t0===u.TrackTypes.AUDIO?6:t.t0===u.TrackTypes.CAPTION?9:t.t0===u.TrackTypes.MUSIC_CAPTION?12:t.t0===u.TrackTypes.STICKER?15:t.t0===u.TrackTypes.TRIPLE?18:t.t0===u.TrackTypes.TIMELINE_VIDEO_FX?21:24;break;case 3:return t.next=5,c.default.awrap(this.$BSSdk.createVideoTrack(i));case 5:return t.abrupt("return",t.sent);case 6:return t.next=8,c.default.awrap(this.$BSSdk.createAudioTrack(i));case 8:return t.abrupt("return",t.sent);case 9:return t.next=11,c.default.awrap(this.$BSSdk.createCaptionTrack(i));case 11:return t.abrupt("return",t.sent);case 12:return t.next=14,c.default.awrap(this.$BSSdk.createCaptionTrack(i,!0));case 14:return t.abrupt("return",t.sent);case 15:return t.next=17,c.default.awrap(this.$BSSdk.createStickerTrack(i));case 17:return t.abrupt("return",t.sent);case 18:return t.next=20,c.default.awrap(this.$BSSdk.createStickerTrack(i,!0));case 20:return t.abrupt("return",t.sent);case 21:return t.next=23,c.default.awrap(this.$BSSdk.createTimelineVideoFxTrack(i));case 23:return t.abrupt("return",t.sent);case 24:case"end":return t.stop()}},null,this)},_addClip:function(e,i,n){var a,r,s,o=arguments;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:a=3<o.length&&void 0!==o[3]?o[3]:{},r=void 0,n&&(r=n.raw),t.t0=e.type,t.next=t.t0===u.TrackTypes.VIDEO?6:t.t0===u.TrackTypes.AUDIO?9:t.t0===u.TrackTypes.CAPTION?14:t.t0===u.TrackTypes.MUSIC_CAPTION?17:t.t0===u.TrackTypes.STICKER?20:t.t0===u.TrackTypes.TRIPLE?23:t.t0===u.TrackTypes.TIMELINE_VIDEO_FX?26:29;break;case 6:return t.next=8,c.default.awrap(this.$BSSdk.addVideoClip(e.raw,{m3u8Url:i.getM3U8Url(),resourceUrl:i.getResourceUrl(),videoType:i.type===u.ClipTypes.VIDEO?1:2,inPoint:i.inPoint,trimIn:i.trimIn,trimOut:i.trimOut,resourceId:i.getResourceId(),displayName:i.getDisplayName(),orgDuration:i.orgDuration,videoWidth:i.getVideoWidth(),videoHeight:i.getVideoHeight(),isFreezeVideo:a.isFreezeVideo,freezePoint:a.freezePoint},r));case 8:return t.abrupt("return",t.sent);case 9:return(s={m3u8Url:i.getM3U8Url(),resourceUrl:i.getResourceUrl(),inPoint:i.inPoint,trimIn:i.trimIn,trimOut:i.trimOut,resourceId:i.getResourceId(),isRecorder:i.type===u.ClipTypes.RECORD_AUDIO,displayName:a.displayName||i.getDisplayName(),speed:a.speed,orgDuration:i.orgDuration}).speed||delete s.speed,t.next=13,c.default.awrap(this.$BSSdk.addAudioClip(e.raw,s,r));case 13:return t.abrupt("return",t.sent);case 14:return t.next=16,c.default.awrap(this.$BSSdk.addCaptionClip(e.raw,{text:i.getText(),inPoint:i.inPoint,outPoint:i.outPoint,packageUrl:i.getPackageUrl(),materialType:i.getMaterialType(),materialId:i.getMaterialId(),displayName:i.getDisplayName()},r));case 16:return t.abrupt("return",t.sent);case 17:return t.next=19,c.default.awrap(this.$BSSdk.addCaptionClip(e.raw,{text:i.musicCaptionText,inPoint:i.inPoint,outPoint:i.outPoint,packageUrl:i.getPackageUrl(),materialType:i.getMaterialType(),materialId:i.getMaterialId(),displayName:i.getDisplayName()},r,!1,!0));case 19:return t.abrupt("return",t.sent);case 20:return t.next=22,c.default.awrap(this.$BSSdk.addStickerClip(e.raw,{inPoint:i.inPoint,outPoint:i.outPoint,packageUrl:i.getPackageUrl(),materialType:i.getMaterialType(),materialId:i.getMaterialId(),displayName:i.getDisplayName()},r));case 22:return t.abrupt("return",t.sent);case 23:return t.next=25,c.default.awrap(this.$BSSdk.addStickerClip(e.raw,{inPoint:i.inPoint,outPoint:i.outPoint,packageUrl:i.getPackageUrl(),materialType:i.getMaterialType(),materialId:i.getMaterialId(),displayName:i.getDisplayName()},r,!1,!1,!0));case 25:return t.abrupt("return",t.sent);case 26:return t.next=28,c.default.awrap(this.$BSSdk.addTimelineVideoFxClip(e.raw,{inPoint:i.inPoint,outPoint:i.outPoint,packageType:i.getPackageType(),packageUrl:i.getPackageUrl(),materialType:i.getMaterialType(),materialId:i.getMaterialId(),displayName:i.getDisplayName()},r));case 28:return t.abrupt("return",t.sent);case 29:case"end":return t.stop()}},null,this)},_moveClip:function(e,i){var n;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=this.getSameTracksInfoByClip(e).trackType,t.t0=n,t.next=t.t0===u.TrackTypes.VIDEO?4:t.t0===u.TrackTypes.AUDIO?7:t.t0===u.TrackTypes.CAPTION?10:t.t0===u.TrackTypes.MUSIC_CAPTION?13:t.t0===u.TrackTypes.TRIPLE?16:t.t0===u.TrackTypes.STICKER?19:t.t0===u.TrackTypes.TIMELINE_VIDEO_FX?22:25;break;case 4:return t.next=6,c.default.awrap(this.$BSSdk.changeVideoClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i}));case 6:return t.abrupt("return",t.sent);case 7:return t.next=9,c.default.awrap(this.$BSSdk.changeAudioClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i}));case 9:return t.abrupt("return",t.sent);case 10:return t.next=12,c.default.awrap(this.$BSSdk.changeCaptionClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i}));case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,c.default.awrap(this.$BSSdk.changeCaptionClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i},!0));case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,c.default.awrap(this.$BSSdk.changeStickerClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i},!0));case 18:return t.abrupt("return",t.sent);case 19:return t.next=21,c.default.awrap(this.$BSSdk.changeStickerClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i}));case 21:return t.abrupt("return",t.sent);case 22:return t.next=24,c.default.awrap(this.$BSSdk.changeTimelineVideoFxClipPosition(e.raw,{inPoint:e.inPoint,targetTrackIndex:i}));case 24:return t.abrupt("return",t.sent);case 25:case"end":return t.stop()}},null,this)},_changeTrimIn:function(e){var i;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.getSameTracksInfoByClip(e).trackType,t.t0=i,t.next=t.t0===u.TrackTypes.VIDEO?4:t.t0===u.TrackTypes.AUDIO?7:t.t0===u.TrackTypes.CAPTION?10:t.t0===u.TrackTypes.MUSIC_CAPTION?13:t.t0===u.TrackTypes.STICKER?16:t.t0===u.TrackTypes.TIMELINE_VIDEO_FX?19:22;break;case 4:return t.next=6,c.default.awrap(this.$BSSdk.changeVideoClipTrimIn(e.raw,{inPoint:e.inPoint}));case 6:return t.abrupt("return",t.sent);case 7:return t.next=9,c.default.awrap(this.$BSSdk.changeAudioClipTrimIn(e.raw,{inPoint:e.inPoint}));case 9:return t.abrupt("return",t.sent);case 10:return t.next=12,c.default.awrap(this.$BSSdk.changeCaptionClipTrimIn(e.raw,{inPoint:e.inPoint}));case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,c.default.awrap(this.$BSSdk.changeCaptionClipTrimIn(e.raw,{inPoint:e.inPoint},!0));case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,c.default.awrap(this.$BSSdk.changeStickerClipTrimIn(e.raw,{inPoint:e.inPoint}));case 18:return t.abrupt("return",t.sent);case 19:return t.next=21,c.default.awrap(this.$BSSdk.changeTimelineVideoFxClipTrimIn(e.raw,{inPoint:e.inPoint}));case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}},null,this)},_changeTrimOut:function(e){var i;return c.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.getSameTracksInfoByClip(e).trackType,t.t0=i,t.next=t.t0===u.TrackTypes.VIDEO?4:t.t0===u.TrackTypes.AUDIO?7:t.t0===u.TrackTypes.CAPTION?10:t.t0===u.TrackTypes.MUSIC_CAPTION?13:t.t0===u.TrackTypes.STICKER?16:t.t0===u.TrackTypes.TIMELINE_VIDEO_FX?19:22;break;case 4:return t.next=6,c.default.awrap(this.$BSSdk.changeVideoClipTrimOut(e.raw,{outPoint:e.outPoint}));case 6:return t.abrupt("return",t.sent);case 7:return t.next=9,c.default.awrap(this.$BSSdk.changeAudioClipTrimOut(e.raw,{outPoint:e.outPoint}));case 9:return t.abrupt("return",t.sent);case 10:return t.next=12,c.default.awrap(this.$BSSdk.changeCaptionClipTrimOut(e.raw,{outPoint:e.outPoint}));case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,c.default.awrap(this.$BSSdk.changeCaptionClipTrimOut(e.raw,{outPoint:e.outPoint},!0));case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,c.default.awrap(this.$BSSdk.changeStickerClipTrimOut(e.raw,{outPoint:e.outPoint}));case 18:return t.abrupt("return",t.sent);case 19:return t.next=21,c.default.awrap(this.$BSSdk.changeTimelineVideoFxClipTrimOut(e.raw,{outPoint:e.outPoint}));case 21:return t.abrupt("return",t.sent);case 22:case"end":return t.stop()}},null,this)}}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var v=n(i(4)),m=i(21),g=i(7),a={data:function(){return{gapConf:null}},created:function(){this.$Bus.$on(this.$GLEventKey.TRACK_GAP_ACTIVE,this.trackGapActive),this.$Bus.$on(this.$GLEventKey.TRACK_GAP_INACTIVE,this.trackGapInactive),this.$Bus.$on(this.$GLEventKey.TRACK_GAP_DELETE,this.trackGapDelete)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.TRACK_GAP_ACTIVE,this.trackGapActive),this.$Bus.$off(this.$GLEventKey.TRACK_GAP_INACTIVE,this.trackGapInactive),this.$Bus.$off(this.$GLEventKey.TRACK_GAP_DELETE,this.trackGapDelete)},methods:{trackGapActive:function(t){this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.selected=!1})})}),this.selectedClip=null,this.gapConf=t,this.setOperationState(m.OperationTypes.DELETE,!0)},trackGapInactive:function(){this.gapConf=null,this.selectedClip||this.setOperationState(m.OperationTypes.DELETE,!1)},trackGapDelete:function(){var h=this;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.default.awrap(this.$BSSdk.doBatchProcess(function(){var e,i,n,a,r,s,o,c,u,l,d,f,p;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(h.alignRaw(),!h.gapConf||h.isLocked)return t.abrupt("return");t.next=3;break;case 3:return h.uiProcessLocked=!0,t.next=6,v.default.awrap(h.sleep(20));case 6:h.$LogReport.sendCustomEvent("editor_track_space_delete"),h.gapConf.hide(),h.selectedClip||h.setOperationState(m.OperationTypes.DELETE,!1),e=h.gapConf,i=e.gap,n=e.track,a=[],n.clips.forEach(function(t){t.inPoint>=i[1]&&a.push(t)}),r=i[1]-i[0],s=h.getClipPositionInfo(a[0]),o=s.trackIndex,c=[],u=0;case 16:if(u<a.length)return(l=a[u]).type!==g.ClipTypes.IMAGE&&l.type!==g.ClipTypes.VIDEO||c.push(h._getTransition(l)),l.inPoint-=r,l.outPoint-=r,t.next=23,v.default.awrap(h.SaveQueueTmp_moveClip(l,o));t.next=27;break;case 23:h.alignRaw();case 24:u++,t.next=16;break;case 27:d=0;case 28:if(!(d<a.length)){t.next=37;break}if(f=a[d],(p=c[d])&&!p.isThemeTransition)return t.next=34,v.default.awrap(h._addTransitionFromRaw(f,p));t.next=34;break;case 34:d++,t.next=28;break;case 37:h.uiProcessLocked=!1,h.gapConf=null,h.alignRaw(),h.$BSSdk.saveQueue();case 41:case"end":return t.stop()}})}));case 2:case"end":return t.stop()}},null,this)}}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=i(21),s=i(7),o=i(15),c={data:function(){return{theme:null}},created:function(){this.$Bus.$on(r.EventKeys.THEME_SELECTED,this.themeSelected),this.$Bus.$on(r.EventKeys.CLIP_SELECTED,this.clipSelectedHandlerForTheme),this.$Bus.$on(this.$GLEventKey.TRACK_GAP_ACTIVE,this.gapSelectedHandlerForTheme),this.$Bus.$on(this.$GLEventKey.THEME_DELETE,this.handleThemeDelete)},destroyed:function(){this.$Bus.$off(r.EventKeys.THEME_SELECTED,this.themeSelected),this.$Bus.$off(r.EventKeys.CLIP_SELECTED,this.clipSelectedHandlerForTheme),this.$Bus.$off(this.$GLEventKey.TRACK_GAP_ACTIVE,this.gapSelectedHandlerForTheme),this.$Bus.$off(this.$GLEventKey.THEME_DELETE,this.handleThemeDelete)},methods:{getLeftLimit:function(t){return(t.type===s.ClipTypes.IMAGE||t.type===s.ClipTypes.VIDEO)&&this.theme&&this.theme.headDuration?this.leftPanelWidth+(0,o.getPxByNowTime)(this.theme.headDuration):this.leftPanelWidth},themeSelected:function(){this.theme.selected=!0,this.selectedClip=null,this.allTracks.forEach(function(t){t.forEach(function(t){t.clips.forEach(function(t){t.selected=!1})})}),this.setOperationState(r.OperationTypes.DELETE,!0)},clipSelectedHandlerForTheme:function(){this.theme&&(this.theme.selected=!1)},gapSelectedHandlerForTheme:function(){this.theme&&(this.theme.selected=!1)},handleThemeDelete:function(){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.theme){t.next=2;break}return t.abrupt("return");case 2:return this.$Bus.$emit(this.$GLEventKey.HIDE_EDIT_PANEL),this.uiProcessLocked=!0,this.theme=null,t.next=7,a.default.awrap(this.$BSSdk.removeTheme());case 7:this.selectedClip||this.setOperationState(r.OperationTypes.DELETE,!1),this.$BSSdk.saveQueue(),this.uiProcessLocked=!1;case 10:case"end":return t.stop()}},null,this)}}};e.default=c},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=a(i(4)),f=i(7),p=i(629),o=i(40),h=i(21),r=n(i(31)),s={created:function(){this.$Bus.$on(this.$GLEventKey.APPLY_MUSIC_CAPTION,this.applyMusicCaption),this.$Bus.$on(this.$GLEventKey.ADD_MUSIC_CAPTION_TO_CURRENT_TIME,this.addMusicCaptionToCurrentTime),this.$Bus.$on(this.$GLEventKey.CLEAR_ALL_MUSIC_CAPTION,this.clearAllMusicCaption),this.$Bus.$on(this.$GLEventKey.APPLY_MUSIC_LYRICS_TO_TRACK,this.applyMusicLyricsToTrack),this.$Bus.$on(this.$GLEventKey.APPLY_TEXT_CAPTIONS_TO_TRACK,this.applyTextCaptionsToTrack)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.APPLY_MUSIC_CAPTION,this.applyMusicCaption),this.$Bus.$off(this.$GLEventKey.ADD_MUSIC_CAPTION_TO_CURRENT_TIME,this.addMusicCaptionToCurrentTime),this.$Bus.$off(this.$GLEventKey.CLEAR_ALL_MUSIC_CAPTION,this.clearAllMusicCaption),this.$Bus.$off(this.$GLEventKey.APPLY_MUSIC_LYRICS_TO_TRACK,this.applyMusicLyricsToTrack),this.$Bus.$off(this.$GLEventKey.APPLY_TEXT_CAPTIONS_TO_TRACK,this.applyTextCaptionsToTrack)},methods:{getFirstMusicCaptionResource:function(){var e;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$store.state.musicCaptionResourceList)return t.abrupt("return",this.$store.state.musicCaptionResourceList[0]);t.next=2;break;case 2:return t.prev=2,t.next=5,d.default.awrap(r.fetchMaterialListV2({type:0,subtype:112,page:1,page_size:20,ext:"captionstyle"}));case 5:return e=t.sent,this.$store.commit("setMusicCaptionResourceList",e.materials),t.abrupt("return",e.materials[0]);case 10:throw t.prev=10,t.t0=t.catch(2),this.$message({text:t.t0.message||"素材获取失败",type:"error"}),new Error(t.t0.message);case 14:case"end":return t.stop()}},null,this,[[2,10]])},clearAllMusicCaption:function(){var e,i,n,a=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$globalLoading(!0,"清除字幕中..."),e=1e6,i=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.MUSIC_CAPTION)][0],t.next=5,d.default.awrap(this.$BSSdk.doBatchProcess(function(){var e;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=i.clips.length-1;case 1:if(0<e)return i.clips.splice(e,1),t.next=5,d.default.awrap(a.SaveQueueTmp_deleteClip(i,e));t.next=12;break;case 5:if(a.alignRaw(),e%500==0&&0<e)return t.next=9,d.default.awrap(a.sleep(10));t.next=9;break;case 9:e--,t.next=1;break;case 12:case"end":return t.stop()}})}));case 5:return(n=i.clips[0]).inPoint=0,n.outPoint=5*e,n.duration=n.outPoint,t.next=11,d.default.awrap(this.SaveQueueTmp_changeTrimIn(n));case 11:return n.raw=t.sent,t.next=14,d.default.awrap(this.SaveQueueTmp_changeTrimOut(n));case 14:return n.raw=t.sent,t.next=17,d.default.awrap(this.$BSSdk.setCaptionClipText(n.raw,"示例字幕"));case 17:return t.next=19,d.default.awrap(this.$BSSdk.saveQueue());case 19:this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,n),this.$Bus.$emit(h.EventKeys.CLIP_SELECTED,n),this.$globalLoading(!1);case 22:case"end":return t.stop()}},null,this)},addMusicCaptionToCurrentTime:function(){var a,e,i,n,r,s=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.isLocked)return t.abrupt("return");t.next=2;break;case 2:return a=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.MUSIC_CAPTION)][0],e=function(t){for(var e=0;e<a.clips.length;e++){var i=a.clips[e],n=0;if(t<i.inPoint)return 5e6<(n=i.inPoint-t)?5e6:n;if(t>=i.inPoint&&t<i.outPoint&&(n=i.outPoint-t),n)return 2e6<n?n:a.clips[e+1]?5e6<(n=a.clips[e+1].inPoint-t)?5e6:n:5e6}return 5e6},i=a.clips[0],(n=i.clone()).inPoint=this.$store.state.currentTimelinePosition,n.outPoint=n.inPoint+e(n.inPoint),n.raw=null,n.showSelf=function(t){var e=t.getBoundingClientRect();if(e.left+50>document.body.clientWidth||e.right-20<0){var i=document.body.clientWidth-s.leftPanelWidth,n=e.width>i?i:e.width,a=s.scrollX+e.left-document.body.clientWidth+n;(0,o.scrollXTo)(s.$refs["track-bodys"].$el,a)}},this.mergeClipOnTrack(a,n),(r=(0,p.cloneDeep)(i)).raw.text="示例字幕",t.next=16,d.default.awrap(this._addClip(a,n,r));case 16:n.raw=t.sent,this.alignRaw(),this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,n),this.$Bus.$emit(h.EventKeys.CLIP_SELECTED,n);case 20:case"end":return t.stop()}},null,this)},applyMusicCaption:function(a){var r,e,i,n,s,o=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=4;break}return t.next=3,d.default.awrap(this.getFirstMusicCaptionResource());case 3:a=t.sent;case 4:if(this.$LogReport.sendCustomEvent("batch-captions_apply_click",a.bs_hash),(r=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.MUSIC_CAPTION)]).length){t.next=24;break}return e=this.$store.state.currentTimelinePosition,i=e+5e6,(n=new f.ClipUI({type:f.ClipTypes.MUSIC_CAPTION,inPoint:e,outPoint:i,duration:5e6,resource:a})).musicCaptionText="示例字幕",s=new f.TrackUI({type:f.TrackTypes.MUSIC_CAPTION,clips:[n]}),r.push(s),t.next=17,d.default.awrap(this._addTrack(f.TrackTypes.MUSIC_CAPTION,0));case 17:return s.raw=t.sent,t.next=20,d.default.awrap(this._addClip(s,n));case 20:n.raw=t.sent,this.alignRaw(),t.next=30;break;case 24:if(r[0].visible){t.next=26;break}return t.abrupt("return",this.$message({text:"字幕轨道已隐藏，无法应用样式",type:"warning"}));case 26:return t.next=28,d.default.awrap(this.$BSSdk.doBatchProcess(function(){var e,i,n;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=r[0].clips,i=0;case 2:if(i<e.length)return n=e[i].raw,t.next=6,d.default.awrap(o.$BSSdk.applyMusicCaptionStyle(n,{packageUrl:a.package_url,displayName:a.name}));t.next=9;break;case 6:i++,t.next=2;break;case 9:case"end":return t.stop()}})}));case 28:return t.next=30,d.default.awrap(this.$BSSdk.saveQueue());case 30:case"end":return t.stop()}},null,this)},applyTextCaptionsToTrack:function(e){var i,r,s,n,a,o,c,u,l=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$globalLoading(!0,"应用字幕中..."),t.next=3,d.default.awrap(this.sleep(10));case 3:if((i=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.MUSIC_CAPTION)]).length){t.next=7;break}return t.next=7,d.default.awrap(this.applyMusicCaption());case 7:if(r=i[0],s=(0,p.cloneDeep)(r.clips[0]),n=1e6,1!==r.clips.length||"示例字幕"!==r.clips[0].getMusicCaptionText()&&r.clips[0].getMusicCaptionText()){t.next=27;break}c=r.clips.length-1;case 12:if(0<=c)return r.clips.splice(c,1),t.next=16,d.default.awrap(this.SaveQueueTmp_deleteClip(r,c));t.next=20;break;case 16:this.alignRaw();case 17:c--,t.next=12;break;case 20:return t.next=22,d.default.awrap(this._addTrack(f.TrackTypes.MUSIC_CAPTION,0));case 22:r.raw=t.sent,a=o=0,t.next=29;break;case 27:o=r.clips[r.clips.length-1].outPoint+5*n,a=r.clips.length;case 29:return u=[],e.forEach(function(t){var e={};e.inPoint=o,e.outPoint=o+5*n,e.text=t.text,o+=e.outPoint-e.inPoint,t.hasGap&&(o+=5*n),u.push(e)}),t.next=33,d.default.awrap(this.$BSSdk.doBatchProcess(function(){var e,i,n,a;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=0;case 1:if(e<u.length)return i=(0,p.cloneDeep)(s),n=u[e],(a=i.clone()).inPoint=n.inPoint,a.outPoint=n.outPoint,a.duration=a.outPoint-a.inPoint,i.raw.text=n.text,l.mergeClipOnTrack(r,a),t.next=12,d.default.awrap(l.$BSSdk.addCaptionClip(r.raw,{text:a.musicCaptionText,inPoint:a.inPoint,outPoint:a.outPoint,packageUrl:a.getPackageUrl(),materialType:a.getMaterialType(),materialId:a.getMaterialId(),displayName:a.getDisplayName()},i.raw,!0,!0));t.next=16;break;case 12:l.alignRaw();case 13:e++,t.next=1;break;case 16:case"end":return t.stop()}})}));case 33:return this.$globalLoading(!1),this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,r.clips[a]),this.$Bus.$emit(h.EventKeys.CLIP_SELECTED,r.clips[a]),t.next=38,d.default.awrap(this.$BSSdk.saveQueue());case 38:case"end":return t.stop()}},null,this)},applyMusicLyricsToTrack:function(o){var e,c,u=this;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.$globalLoading(!0,"应用字幕中..."),t.next=3,d.default.awrap(this.sleep(10));case 3:if((e=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.MUSIC_CAPTION)]).length){t.next=7;break}return t.next=7,d.default.awrap(this.applyMusicCaption());case 7:return c=e[0],t.next=10,d.default.awrap(this.$BSSdk.doBatchProcess(function(){var e,i,n,a,r,s;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=(0,p.cloneDeep)(c.clips[0]),i=c.clips.length-1;case 2:if(0<=i)return c.clips.splice(i,1),t.next=6,d.default.awrap(u.SaveQueueTmp_deleteClip(c,i));t.next=13;break;case 6:if(u.alignRaw(),i%500==0&&0<i)return t.next=10,d.default.awrap(u.sleep(10));t.next=10;break;case 10:i--,t.next=2;break;case 13:return t.next=15,d.default.awrap(u._addTrack(f.TrackTypes.MUSIC_CAPTION,0));case 15:c.raw=t.sent,n=0;case 17:if(n<o.length)return a=(0,p.cloneDeep)(e),r=o[n],(s=a.clone()).inPoint=r.startTime,s.outPoint=r.endTime,s.duration=s.outPoint-s.inPoint,a.raw.text=r.text,u.mergeClipOnTrack(c,s),t.next=28,d.default.awrap(u.$BSSdk.addCaptionClip(c.raw,{text:s.musicCaptionText,inPoint:s.inPoint,outPoint:s.outPoint,packageUrl:s.getPackageUrl(),materialType:s.getMaterialType(),materialId:s.getMaterialId(),displayName:s.getDisplayName()},a.raw,!0,!0));t.next=35;break;case 28:if(u.alignRaw(),n%500==0&&0<n)return t.next=32,d.default.awrap(u.sleep(10));t.next=32;break;case 32:n++,t.next=17;break;case 35:case"end":return t.stop()}})}));case 10:return this.$globalLoading(!1),this.$Bus.$emit(this.$GLEventKey.SHOW_EDIT_PANEL,c.clips[0]),this.$Bus.$emit(h.EventKeys.CLIP_SELECTED,c.clips[0]),t.next=15,d.default.awrap(this.$BSSdk.saveQueue());case 15:case"end":return t.stop()}},null,this)}}};e.default=s},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=n(i(4)),f=i(7),a={created:function(){this.$Bus.$on(this.$GLEventKey.APPLY_TRIPLE_STICKER,this.applyTripleSticker),this.$Bus.$on(this.$GLEventKey.UPDATE_TRIPLE_STATUS,this.updateTripleStatus)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.APPLY_TRIPLE_STICKER,this.applyTripleSticker),this.$Bus.$off(this.$GLEventKey.UPDATE_TRIPLE_STATUS,this.updateTripleStatus)},methods:{applyTripleSticker:function(e){var i,n,a,r,s,o,c,u,l;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.$LogReport.sendCustomEvent("triple_sticker_click",e.type),(i=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.TRIPLE)]).length){t.next=18;break}return n=this.$store.state.currentTimelinePosition,a=n+5e6,r=new f.ClipUI({type:f.ClipTypes.TRIPLE,inPoint:n,outPoint:a,duration:5e6,resource:e}),s=new f.TrackUI({type:f.TrackTypes.TRIPLE,clips:[r]}),i.push(s),t.next=12,d.default.awrap(this._addTrack(f.TrackTypes.TRIPLE,0));case 12:return s.raw=t.sent,t.next=15,d.default.awrap(this._addClip(s,r));case 15:r.raw=t.sent,t.next=30;break;case 18:if((o=i[0]).visible){t.next=21;break}return t.abrupt("return",this.$message({text:"一键三连轨道已隐藏，无法应用样式",type:"warning"}));case 21:return c=this.$store.state.currentTimelinePosition,u=c+5e6,l=new f.ClipUI({type:f.ClipTypes.TRIPLE,inPoint:c,outPoint:u,duration:5e6,resource:e}),l=this.mergeTripleClipOnTrack(o,l),t.next=29,d.default.awrap(this._addClip(o,l));case 29:l.raw=t.sent;case 30:this.alignRaw(),this.updateTripleStatus();case 32:case"end":return t.stop()}},null,this)},updateTripleStatus:function(){var t=this.allTracks[this.trackOrder.indexOf(f.TrackTypes.TRIPLE)][0],e={followAndTriple:!1,follow:!1,triple:!1,show:!!t&&t.visible,num:0,type:-1};t&&t.clips.forEach(function(t){"48216532-B42E-460D-9D58-6FDE7D1B63AB"===t.raw.id?(e.followAndTriple=!0,e.num++,e.type=2):"FA87750D-F355-41B1-ADAD-5A834329F89E"===t.raw.id?(e.triple=!0,e.num++,e.type=1):"F977036E-1779-47EB-9209-970301EE6DAF"===t.raw.id&&(e.follow=!0,e.num++,e.type=0)}),this.$store.commit("updateTripleStickerStatus",e)}}};e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(701),a=i(474);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1499);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"153395f5",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(476);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(702),a=i(477);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1501);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"bb8556f4",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(479);i.n(n).a},function(t,e,i){"use strict";var n=i(480);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(672),a=i(481);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1519);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"47aed9ca",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(705),a=i(483);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1505);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"8a9db03a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(485);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(681),a=i(486);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1508);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"0449cde0",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var v=n(i(4)),a={data:function(){return{canvasHeight:50}},methods:{getWaveData:function(){var e,i,n,a,r;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clip.resource&&this.clip.resource.left_wave_download_url){t.next=2;break}return t.abrupt("return");case 2:return e=this.clip.resource.left_wave_download_url,i=new URL(e).pathname.split("/").reverse()[0],t.next=6,v.default.awrap(this.$DBCache.readAssetFromDB(i));case 6:if(n=t.sent)return t.abrupt("return",n);t.next=9;break;case 9:return t.next=11,v.default.awrap(this.$axios.get(e,{responseType:"arraybuffer"}));case 11:return a=t.sent,r=new Int8Array(a.data),t.next=15,v.default.awrap(this.$DBCache.saveAssetToDB(i,r));case 15:return t.abrupt("return",r);case 16:case"end":return t.stop()}},null,this)},renderWave:function(){var a,r,s,e,o,i,c=this;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.clip.resource.left_wave_download_url){t.next=2;break}return t.abrupt("return");case 2:return a=function(t,e){console.log(e,c.width),c.style(c.$refs["audio-wave"],{backgroundImage:"url(".concat(t,")"),backgroundSize:"100% ".concat(c.canvasHeight,"px"),backgroundRepeat:"no-repeat"}),c.waveRendered=!0},r=this.width,s=this.generateImageID(),t.next=7,v.default.awrap(this.$DBCache.readAssetFromDB(s));case 7:if(e=t.sent)return t.abrupt("return",a(e,r));t.next=10;break;case 10:return t.next=12,v.default.awrap(this.getWaveData());case 12:this.sampleData=t.sent,(o=new Worker(this.$BSSdk.SDK_WORKER_PATH+"audio_wave_worker.js")).onmessage=function(e){var i,n;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.data,t.next=3,v.default.awrap(c.generateWaveImage(i,r));case 3:n=t.sent,c.$DBCache.saveAssetToDB(s,n),a(n,r),o.terminate(),o=null;case 8:case"end":return t.stop()}})},65535<(i=r)&&(i=65535),o.postMessage([this.sampleData,i]);case 18:case"end":return t.stop()}},null,this)},generateWaveImage:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:for(65535<(n=i)&&(n=65535),a=document.createElement("canvas"),r=this.canvasHeight,a.width=n,a.height=r,(s=a.getContext("2d")).fillStyle="#2E9CFF",s.beginPath(),o=128*r/256,s.moveTo(.5,o),c=0;c<n;c++)u=e[2*c+1],l=(128-u)*r/256,s.lineTo(c+.5,Math.floor(l));for(d=Math.floor(n-1);0<=d;d--)f=e[2*d],p=(128+Math.abs(f))*r/256,s.lineTo(d+.5,Math.floor(p));return s.lineTo(.5,o),s.closePath(),s.fill(),h=a.toDataURL(),t.abrupt("return",h);case 19:case"end":return t.stop()}},null,this)},style:function(e,i){return Object.keys(i).forEach(function(t){e.style[t]!==i[t]&&(e.style[t]=i[t])}),e},generateImageID:function(){var t=this.clip.resource.left_wave_download_url,e=new URL(t).pathname.split("/").reverse()[0];return"".concat(e,"_rhythm_wave")}}};e.default=a},function(t,e,i){"use strict";var n=i(488);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(680),a=i(489);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1510);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"1ce55b65",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(491);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(683),a=i(492);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1512);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"e82e0a3a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(494);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(685),a=i(495);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1514);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"2677829a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(497);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(686),a=i(498);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1516);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"5435a997",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(500);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(687),a=i(501);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1518);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"37eae534",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(503);i.n(n).a},function(t,e,i){"use strict";var n=i(504);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(673),a=i(505);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1529);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"08cf432b",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(690),a=i(507);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1526);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"04ef3091",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(729),a=i(509);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1525);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"3ad7609f",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(775),a=i(511);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1524);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"d43b7f0a",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(513);i.n(n).a},function(t,e,i){"use strict";var n=i(514);i.n(n).a},function(t,e,i){"use strict";var n=i(515);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(693),a=i(516);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1528);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"07da3416",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(518);i.n(n).a},function(t,e,i){"use strict";var n=i(519);i.n(n).a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(24)),p=a(i(4)),s=a(i(6)),o=a(i(8)),h=i(27),u=i(137),v=i(40),m=n(i(69)),c=i(10);function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach(function(t){(0,s.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function g(t){var e=t.id,i=t.title,n=t.progress,a=t.methods;(0,o.default)(this,g),this.id=e,this.title=i,this.progress=n,this.methods=a}var f={data:function(){return{confirmTasks:[]}},computed:d({},(0,c.mapState)(["uploads"])),created:function(){this.$Bus.$on(this.$GLEventKey.FILE_UPLOAD_CLICKED,this.startFileUpload),this.$Bus.$on(this.$GLEventKey.FILE_DRAG_UPLOAD,this.acceptMultiFile),this.$Bus.$on(this.$GLEventKey.FILE_QUICK_CUT_UPLOAD,this.startQuickCutFileUpload)},destroyed:function(){this.$Bus.$off(this.$GLEventKey.FILE_UPLOAD_CLICKED,this.startFileUpload),this.$Bus.$off(this.$GLEventKey.FILE_DRAG_UPLOAD,this.acceptMultiFile),this.$Bus.$off(this.$GLEventKey.FILE_QUICK_CUT_UPLOAD,this.startQuickCutFileUpload)},methods:d({},(0,c.mapMutations)(["addUploadTask","updateUploadProgress","deleteUploadTask"]),{startQuickCutFileUpload:function(r){var s=this;if(this.$store.state.biliPreviewerMode)this.$message({text:this.$GL.PREVIEWER_MODE_ERROR});else if(this.$LogReport.sendCustomEvent("editor_quick_video_cut_click"),!this.$store.state.SDKLock){var t=this.createInput(),o=[],e=["rmvb","rm"],i=!0,n=!1,a=void 0;try{for(var c,u=this.$GL.videoTypes[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var l=c.value;-1===e.indexOf(l)&&o.push(l)}}catch(t){n=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(n)throw a}}t.setAttribute("accept",o.map(function(t){return"."+t}).join(",")),t.onchange=function(e){var i,n,a;return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.target.files.length)return t.abrupt("return",!1);t.next=2;break;case 2:if(i=e.target.files[0],n=i.name,a=(n.split(".").pop()||"").toLocaleLowerCase(),-1===o.indexOf(a))return s.$message({text:"不支持该格式文件",type:"error"}),t.abrupt("return",!1);t.next=8;break;case 8:s.$Bus.$emit(s.$GLEventKey.PAUSE_OR_PLAY,!1),s.$store.commit("setQuickCutFile",{file:i,from:r}),s.$store.commit("setShowQuickCutModal",!0);case 11:case"end":return t.stop()}})},t.click()}},startFileUpload:function(i){var n=this;if(this.$store.state.biliPreviewerMode)this.$message({text:this.$GL.PREVIEWER_MODE_ERROR});else{var t=this.createInput();t.onchange=function(e){return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.target.files.length)return t.abrupt("return",!1);t.next=2;break;case 2:n.acceptMultiFile(e.target.files,i).catch(function(t){n.$message({text:t.message,type:"error"})});case 3:case"end":return t.stop()}})},t.click()}},acceptMultiFile:function(e,i){var n,a,r,s,o,c;return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.default.awrap((0,u.fetchTaskProcessCount)(1));case 2:if(n=t.sent,a=n.max_processing_count,r=n.count,s=this.uploads.reduce(function(t,e){return e.progress<1?t+1:t},0),e.length+r+s>a)return t.abrupt("return",this.$message({text:"当前服务最多支持同时".concat(a,"个资源进行上传/转码"),type:"error"}));t.next=8;break;case 8:o=0;case 9:if(!(o<e.length)){t.next=19;break}if((c=e[o]).size){t.next=14;break}return this.$message({text:"".concat(c.name," 文件大小为空"),type:"error"}),t.abrupt("continue",16);case 14:return t.next=16,p.default.awrap(this.acceptFile(c,i));case 16:o++,t.next=9;break;case 19:this.confirmTasks.length&&this.confirmNextResource();case 20:case"end":return t.stop()}},null,this)},confirmNextResource:function(){this.confirmTasks.length&&(this.confirmTasks[0](),this.confirmTasks.shift())},acceptFile:function(o,c){var u,l,i,d,e,n,f=this;return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(u=+new Date,(0,v.isMediaSupportFormat)(o.name)){t.next=3;break}return t.abrupt("return",this.$message({text:"不支持该格式文件",type:"error"}));case 3:return l=(0,v.getMediaFormatType)(o.name),i=(0,v.getMediaExtension)(o.name),d=o.type,n={exists:!(e=function(){var s,e;return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p.default.awrap((0,h.createResource)({project_id:"project"===c?f.$route.params.id:"",type:l,name:o.name,size:o.size,resource_file_type:i}));case 3:s=t.sent,f.hasMessage||(f.$message("小提示: 文件上传过程中请勿关闭页面"),f.hasMessage=!0,setTimeout(function(){f.hasMessage=!1},2e3)),"project"===c?f.$LogReport.sendCustomEvent("editor_resource_project_upload_start",{filename:s.boss_path,filesize:Math.ceil(o.size/1048576)}):f.$LogReport.sendCustomEvent("editor_resource_user_upload_start",{filename:s.boss_path,filesize:Math.ceil(o.size/1048576)}),f.$Bus.$emit(f.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),e=new g({id:s.resource_id,title:s.title,progress:0,methods:m.multipleFetch(o,s.upload_urls,s.per_size||5242880).progress(function(t){f.updateUploadProgress({resourceId:s.resource_id,progress:t})}).done(function(e){var i,n,a,r;return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return f.updateUploadProgress({resourceId:s.resource_id,progress:1}),t.next=3,p.default.awrap((0,h.fetchResourceEtagComplete)(s.resource_id,e,s.upload_id));case 3:return t.next=5,p.default.awrap((0,h.transcodeResource)(s.resource_id));case 5:if(2!==l){t.next=24;break}if(i=document.createElement("audio"),"probably"!==(n=i.canPlayType(d))&&"maybe"!==n)return t.prev=9,t.next=12,p.default.awrap((0,h.transcodeResource)(s.resource_id,7));t.next=22;break;case 12:return t.next=14,p.default.awrap((0,h.createRhythm)(s.resource_id,1));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(9),console.error(t.t0),f.$message({text:"生成音频踩点失败",type:"error"});case 20:t.next=24;break;case 22:return t.next=24,p.default.awrap((0,h.createRhythm)(s.resource_id,0).catch(function(t){console.error(t),f.$message({text:"生成音频踩点失败",type:"error"})}));case 24:f.$Bus.$emit(f.$GLEventKey.REQUIRE_RESOURCE_PANEL_REFRESH),a=(new Date-u)/1e3,r=o.size/1024/a,"project"===c?f.$LogReport.sendCustomEvent("editor_resource_project_upload_success",{filename:s.boss_path,filesize:Math.ceil(o.size/1048576),avg_speed:Math.ceil(r)}):f.$LogReport.sendCustomEvent("editor_resource_user_upload_success",{filename:s.boss_path,filesize:Math.ceil(o.size/1048576),avg_speed:Math.ceil(r)});case 28:case"end":return t.stop()}},null,null,[[9,16]])}).catch(function(){f.deleteUploadTask(s.resource_id)})}),f.addUploadTask(e),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(0),-1!==t.t0.message.indexOf("超过上限")&&f.$LogReport.sendCustomEvent("editor_resource_user_storage_space_full_show"),f.$message({text:t.t0.message||"文件上传失败",type:"error"});case 15:case"end":return t.stop()}},null,null,[[0,11]])})},t.prev=8,t.next=11,p.default.awrap((0,h.checkResource)(o.name,l));case 11:n=t.sent,t.next=17;break;case 14:t.prev=14,t.t0=t.catch(8),console.error(t.t0.message);case 17:if(!n.exists){t.next=21;break}this.confirmTasks.push(function(){var t=o.name;20<t.length&&(t=t.substr(0,20)+"..."),f.$LogReport.sendCustomEvent("editor_resource_repeat_tip_show"),f.$confirm('已有 <span style="color: #4388ff">'+t+"</span> 在我的库中，是否重复上传此文件？",function(){return p.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.default.awrap(e());case 2:f.confirmNextResource(),f.$LogReport.sendCustomEvent("editor_resource_repeat_continue_click");case 4:case"end":return t.stop()}})},function(){f.confirmNextResource(),f.$LogReport.sendCustomEvent("editor_resource_repeat_cancel_click")},{showCancel:!0,confirmBtnText:"确定",cancelFirst:!0})}),t.next=23;break;case 21:return t.next=23,p.default.awrap(e());case 23:case"end":return t.stop()}},null,this,[[8,14]])},createInput:function(){this.input&&(document.body.removeChild(this.input),this.input.onchange=null,this.input=null);var t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("style","visibility: hidden;"),t.setAttribute("multiple",!0);var e=[].concat((0,r.default)(this.$GL.videoTypes),(0,r.default)(this.$GL.audioTypes),(0,r.default)(this.$GL.imageTypes));return t.setAttribute("accept",e.map(function(t){return"."+t}).join(",")),document.body.appendChild(t),this.input=t}})};e.default=f},function(t,e,i){"use strict";i.r(e);var n=i(674),a=i(520);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1533);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"b00005e0",null);e.default=o.exports},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=[{title:"素材上传",desc:"您可以上传或拖拽素材至项目资源，导入的素材会同步至我的库中。",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--upload-rect").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom,this.left=t.left,this.right=t.right,this.descPos.top=(this.bottom+this.top)/2-100,this.descPos.left=this.right+50}},{title:"素材与效果",desc:"提供丰富的素材和效果，您可以挑选并添加至视频中",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--features").getBoundingClientRect();this.top=document.getElementById("guide--features").getElementsByTagName("li")[0].getBoundingClientRect().bottom,this.bottom=document.getElementById("guide--features").getElementsByTagName("li")[8].getBoundingClientRect().bottom,this.left=t.left+1,this.right=t.right,this.descPos.top=(this.bottom+this.top)/2-100,this.descPos.left=this.right+50}},{title:"撤销与恢复",desc:"可以撤销、恢复您在编辑轨道上的操作",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--operation-icons").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom,this.left=t.left+1,this.right=t.width/7*2+t.left,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.right+50}},{title:"分割片段",desc:"选中轨道素材，将时间指示线拖动至目标位置，点击此处进行分割",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--operation-icons").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom;var e=(t.right-t.left)/7;this.left=t.left+2*e-8,this.right=this.left+e,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.right+50}},{title:"音轨分离",desc:"选中视频片段，点击此处可将音频与画面分离",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--operation-icons").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom;var e=(t.right-t.left)/7;this.left=t.left+3*e-12,this.right=this.left+e,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.right+50}},{title:"视频定格",desc:"选中视频片段，点击此处可将当前画面进行定格",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--operation-icons").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom;var e=(t.right-t.left)/7;this.left=t.left+4*e-12,this.right=this.left+e,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.right+50}},{title:"删除",desc:"选中轨道上的素材，点击此处进行删除",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--operation-icons").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom;var e=(t.right-t.left)/7;this.left=t.left+5*e-16,this.right=this.left+e,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.right+50}},{title:"快捷键面板",desc:"查看操作快捷键，使用快捷键会让操作更加便捷哦",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"left"},initPos:function(){var t=document.getElementById("guide--operation-icons").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom;var e=(t.right-t.left)/7;this.left=t.left+6*e-18,this.right=this.left+e,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.right+50}},{title:"时间轴缩放",desc:"您既可以在此处缩放时间轴，也可以将鼠标置于标尺上方，然后滚动鼠标滚轮缩放时间轴",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"right"},initPos:function(){var t=document.getElementById("guide--shrink").getBoundingClientRect();this.top=t.top,this.bottom=t.bottom,this.left=t.left-10,this.right=t.right+15,this.descPos.top=(this.bottom+this.top)/2-90,this.descPos.left=this.left-420}},{title:"保存和投稿",desc:"完成创作后，您可以选择立即投稿或者保存草稿",top:10,bottom:100,left:10,right:100,descPos:{top:0,left:0,angleOffset:5,angle:"top"},initPos:function(){var t=document.getElementById("guide--header").getBoundingClientRect();this.top=t.top+2,this.bottom=t.bottom,this.right=t.right-80,this.left=this.right-245,this.descPos.top=this.bottom+40,this.descPos.left=(this.left+this.right)/2-200}}];e.default=n},function(t,e,i){"use strict";var n=i(522);i.n(n).a},function(t,e,i){"use strict";var n=i(523);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(662),a=i(524);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1542);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"271ee014",null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(675),a=i(526);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1537);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"1c5e69e2",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(528);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(676),a=i(529);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1539);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"37b995d9",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(531);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(677),a=i(532);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1541);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"52245ae9",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(534);i.n(n).a},function(t,e,i){"use strict";var n=i(535);i.n(n).a},,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1545)),s=n(i(49)),o=n(i(1566)),c=n(i(1578)),u=n(i(1583)),l=n(i(1584)),d=n(i(1585)),f=n(i(1586));function p(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}e.default=function(){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?p(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):p(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({context:null,timeline:null,liveWindow:null,packageManager:null,timelineData:null,timelineXML:"",timelineRaw:{},currentEditClip:null,hadResumeAudio:!1,VM:null,notSeek:!1,SDKLock:!1,GL:s.default,timelineDataTemplate:c.default,_videoVolArray_:[],_audioVolArray_:[],rawUniqueSuffix:0},r.default,{},u.default,{},l.default,{},o.default,{},d.default,{},f.default)}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=n(i(24)),g=n(i(4)),a=n(i(6)),r=n(i(1546)),s=n(i(1547)),o=n(i(1548)),c=n(i(1549)),u=n(i(1553)),l=n(i(1554)),d=n(i(1555)),p=n(i(1556)),h=n(i(1557)),v=n(i(1558)),m=n(i(1559)),_=n(i(1563)),w=n(i(1564)),b=n(i(1565)),y=i(15);function C(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var T=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?C(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):C(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},r.default,{},s.default,{},o.default,{},c.default,{},u.default,{},d.default,{},l.default,{},_.default,{},p.default,{},h.default,{},v.default,{},m.default,{},w.default,{},b.default,{sortTracks:function(t){return t.forEach(function(t,e){t.index=e}),t},sortTrackClip:function(t){var i=this;return t.clips.sort(function(t,e){return t.inPoint-e.inPoint}),t.clips.forEach(function(t,e){t.index=e,i.sortFx(t.fxs)}),t},sortFx:function(t){t&&t.length&&t.forEach(function(t,e){t.index=e})},getTrackNewClipIndexByInPoint:function(t,e){for(var i=t.clips,n=i.length,a=0;a<i.length;a++){if(i[a].inPoint>e){n=a;break}}return n},getClipIndexInfo:function(t,n){var a=null;if(t.some(function(t,i){return t.clips.some(function(t,e){return a={trackIndex:i,clipIndex:e},n===t})}))return a},showTrack:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m;return g.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setLock(!0),n=this.timelineDataTemplate,a=n.VideoTrack,r=n.AudioTrack,s=n.StickerTrack,o=n.CaptionTrack,c=n.TimelineVideoFxTrack,u=this.getCurrentEditClip(),e.clips.includes(u)&&this.stopEditClip(),e instanceof a)return l=this.timelineData.videoTracks.indexOf(e),t.next=8,g.default.awrap(this.showVideoTrack(l,i));t.next=8;break;case 8:if(e instanceof r)return d=this.timelineData.audioTracks.indexOf(e),t.next=12,g.default.awrap(this.showAudioTrack(d,i));t.next=12;break;case 12:if(e instanceof s)return f=e.isTriple,p=this.getStickerTracks(f).indexOf(e),t.next=17,g.default.awrap(this.showStickerTrack(p,i,f));t.next=17;break;case 17:if(e instanceof o)return h=e.isMusicCaption,v=this.getCaptionTracks(h).indexOf(e),t.next=22,g.default.awrap(this.showCaptionTrack(v,i,h));t.next=22;break;case 22:if(e instanceof c)return m=this.timelineData.timelineVideoFxTracks.indexOf(e),t.next=26,g.default.awrap(this.showTimelineVideoFxTrack(m,i));t.next=26;break;case 26:this.seekCurrentTimeline(),this.setLock(!1);case 28:case"end":return t.stop()}},null,this)},_clearSDK_:function(){return g.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.default.awrap(this.waitEngineCoolDown());case 2:this.timeline.getCurrentThemeId()&&this.timeline.removeCurrentTheme();case 3:if(this.timeline.videoTrackCount())return t.next=6,g.default.awrap(this.waitEngineCoolDown());t.next=9;break;case 6:this.timeline.removeVideoTrack(0),t.next=3;break;case 9:if(this.timeline.audioTrackCount())return t.next=12,g.default.awrap(this.waitEngineCoolDown());t.next=15;break;case 12:this.timeline.removeAudioTrack(0),t.next=9;break;case 15:if(this.timeline.getFirstCaption())return t.next=18,g.default.awrap(this.waitEngineCoolDown());t.next=21;break;case 18:this.timeline.removeCaption(this.timeline.getFirstCaption()),t.next=15;break;case 21:if(this.timeline.getFirstAnimatedSticker())return t.next=24,g.default.awrap(this.waitEngineCoolDown());t.next=27;break;case 24:this.timeline.removeAnimatedSticker(this.timeline.getFirstAnimatedSticker()),t.next=21;break;case 27:if(this.timeline.getFirstTimelineVideoFx())return t.next=30,g.default.awrap(this.waitEngineCoolDown());t.next=33;break;case 30:this.timeline.removeTimelineVideoFx(this.timeline.getFirstTimelineVideoFx()),t.next=27;break;case 33:this.seekCurrentTimeline();case 34:case"end":return t.stop()}},null,this)},redrawSDK:function(e){var i;return g.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.default.awrap(this.waitEngineCoolDown());case 2:return i=this.timelineDataTemplate.TimelineData,this.timelineRaw={},this.timelineData=new i(e.resWidth,e.resHeight),t.next=7,g.default.awrap(this.changeVideoSize(e.videoSize));case 7:return t.next=9,g.default.awrap(this._clearSDK_());case 9:return t.next=11,g.default.awrap(this.createVideoEmptyTrack());case 11:return t.next=13,g.default.awrap(this._rebuildThemeFromTimelineData_(e));case 13:return t.next=15,g.default.awrap(this._rebuildVideoTracksFromTimelineData_(e));case 15:return t.next=17,g.default.awrap(this._rebuildAudioTracksFromTimelineData_(e));case 17:return t.next=19,g.default.awrap(this._rebuildCationTracksFromTimelineData_(e));case 19:return t.next=21,g.default.awrap(this._rebuildCationTracksFromTimelineData_(e,!0));case 21:return t.next=23,g.default.awrap(this._rebuildStickerTracksFromTimelineData_(e));case 23:return t.next=25,g.default.awrap(this._rebuildStickerTracksFromTimelineData_(e,!0));case 25:return t.next=27,g.default.awrap(this._rebuildTimelineVideoFxTracksFromTimelineData_(e));case 27:return t.next=29,g.default.awrap(this.changeTimelineSpeed(e.controlSpeed));case 29:return this.VM.$store.commit("updateTimelineSpeed",e.controlSpeed),t.abrupt("return",this.timelineData);case 31:case"end":return t.stop()}},null,this)},downloadAndEditRelatedAsset:function(e){var i,n,a,r,s,o,c,u,l,d=this;return g.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=[],n=[],a=[],r=[],e.videoTracks.forEach(function(t){t.clips.forEach(function(t){t.fxs.forEach(function(t){"Storyboard"===t.desc&&t.resourceIds.length&&a.push.apply(a,(0,f.default)(t.resourceIds))}),-1===i.indexOf(t.id)&&i.push(t.id)}),t.transitions.forEach(function(t){if(t.packageType===d.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE){var e=t.desc;-1===n.indexOf(e)&&n.push(e)}})}),e.audioTracks.forEach(function(t){t.clips.forEach(function(t){-1===i.indexOf(t.id)&&((0,y.isBossURL)(t.m3u8Url)?i.push(t.id):r.push(d.installM3U8AssetToFS(t.m3u8Url)))})}),e.captionTracks.forEach(function(t){t.clips.forEach(function(t){var e=t.styleDesc||t.id;-1===n.indexOf(e)&&n.push(e)})}),e.musicCaptionTracks.forEach(function(t){t.clips.forEach(function(t){var e=t.styleDesc||t.id;-1===n.indexOf(e)&&n.push(e)})}),e.stickerTracks.forEach(function(t){t.clips.forEach(function(t){var e=t.desc||t.id;-1===n.indexOf(e)&&n.push(e)})}),s=[],e.tripleTracks.forEach(function(t){t.clips.forEach(function(t){var e=t.desc||t.id;-1===s.indexOf(e)&&s.push(e)})}),o=[],e.timelineVideoFxTracks.forEach(function(t){t.clips.forEach(function(t){if(t.packageType===d.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE){var e=t.desc||t.id;-1===n.indexOf(e)&&n.push(e)}if(t.packageType===d.GL.TIMELINE_VIDEO_FX_TYPE_LUT){if(!t.lutFileUrl)return;t.biliLutFileId||(t.biliLutFileId=t.lutFileUrl.split("/").pop().split(".")[0]),t.id||(t.id=t.biliLutFileId);var i=t.biliLutFileId;-1===n.indexOf(i)&&(n.push(i),o.push(i))}})}),e.theme&&(c=e.theme.id,-1===n.indexOf(c)&&n.push(c)),u=[],i.length)return t.next=18,g.default.awrap(this.VM.$api.resources.fetchResourceList({project_id:this.VM.$route.params.id,resource_ids:i.join(",")}).then(function(t){return u=(u=t.list).filter(function(t){return i.includes(t.resource_id)}),Promise.all(u.map(function(t){return d.installM3U8AssetToFS(t.m3u8_download_url,t.resource_id)}))}));t.next=18;break;case 18:if(l=[],s.length)return t.next=22,g.default.awrap(this.VM.$api.materials.fetchTripleMaterialIds(s).then(function(t){return t=t.filter(function(t){return s.includes(t.material_id)}),l.push.apply(l,(0,f.default)(t)),Promise.all(t.map(function(e){return d.installDescAssetToFS(e.package_url).then(function(t){e.material_id=t})}))}));t.next=22;break;case 22:if(n.length)return t.next=25,g.default.awrap(this.VM.$api.materials.fetchMaterialIds(n.join(",")).then(function(t){return t=t.filter(function(t){return n.includes(t.material_id)}),l.push.apply(l,(0,f.default)(t)),Promise.all(t.map(function(e){if(!o.includes(e.material_id))return d.installDescAssetToFS(e.package_url).then(function(t){e.material_id=t})}))}));t.next=25;break;case 25:if(a.length)return t.next=28,g.default.awrap(this.VM.$api.materials.fetchMaterialIds(a.join(",")).then(function(t){return t=t.filter(function(t){return a.includes(t.material_id)}),l.push.apply(l,(0,f.default)(t)),Promise.all(t.map(function(t){return d.installStoryBoardAssetToFS(t.package_url)}))}));t.next=28;break;case 28:if(r.length)return t.next=31,g.default.awrap(Promise.all(r));t.next=31;break;case 31:this._relatedEditAsset_(u,l,e);case 32:case"end":return t.stop()}},null,this)},_relatedEditAsset_:function(a,r,e){var s=this,o=[];e.videoTracks.forEach(function(t){var i=[];t.clips.forEach(function(e){var t=a.find(function(t){return t.resource_id===e.id});t&&(e.m3u8Url=t.m3u8_download_url,e.path=t.download_url,e.videoHeight=t.video_height||0,e.videoWidth=t.video_width||0,e.displayName=t.title,e.displayNamezhCN=t.title,i.push(e))}),t.clips=i,s.sortTrackClip(t);var n=[];t.transitions.forEach(function(e){if(e.packageType!==s.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN){var t=r.find(function(t){return t.material_id===e.desc});t&&(e.displayName=t.name,e.displayNamezhCN=t.name,n.push(e))}else n.push(e)}),t.transitions=n,t.clips.length&&o.push(t)}),e.videoTracks=o,this.sortTracks(e.videoTracks);var n=[];e.audioTracks.forEach(function(t){var i=[];t.clips.forEach(function(e){var t=a.find(function(t){return t.resource_id===e.id});if(!(0,y.isBossURL)(e.m3u8Url))return e.displayName=t.title,e.displayNamezhCN=t.title,void i.push(e);t&&(e.m3u8Url=t.m3u8_download_url,e.path=t.download_url,e.displayName=t.title,e.displayNamezhCN=t.title,i.push(e))}),t.clips=i,s.sortTrackClip(t),t.clips.length&&n.push(t)}),e.audioTracks=n,this.sortTracks(e.audioTracks);var c=[];e.captionTracks.forEach(function(t){var i=[];t.clips.forEach(function(e){var t=r.find(function(t){return t.material_id===e.styleDesc});t&&(e.displayName=t.name,e.displayNamezhCN=t.name,i.push(e))}),t.clips=i,s.sortTrackClip(t),t.clips.length&&c.push(t)}),e.captionTracks=c,this.sortTracks(e.captionTracks);var u=[];e.musicCaptionTracks.forEach(function(t){var i=[];t.clips.forEach(function(e){var t=r.find(function(t){return t.material_id===e.styleDesc});t&&(e.displayName=t.name,e.displayNamezhCN=t.name,i.push(e))}),t.clips=i,s.sortTrackClip(t),t.clips.length&&u.push(t)}),e.musicCaptionTracks=u,this.sortTracks(e.musicCaptionTracks);var l=[];e.tripleTracks.forEach(function(t){var i=[];t.clips.forEach(function(e){var t=r.find(function(t){return t.material_id===e.desc});t&&(e.displayName=t.name,e.displayNamezhCN=t.name,i.push(e))}),t.clips=i,s.sortTrackClip(t),t.clips.length&&l.push(t)}),e.tripleTracks=l,this.sortTracks(e.tripleTracks);var d=[];e.stickerTracks.forEach(function(t){var i=[];t.clips.forEach(function(e){var t=r.find(function(t){return t.material_id===e.desc});t&&(e.displayName=t.name,e.displayNamezhCN=t.name,i.push(e))}),t.clips=i,s.sortTrackClip(t),t.clips.length&&d.push(t)}),e.stickerTracks=d,this.sortTracks(e.stickerTracks);var i=[];if(e.timelineVideoFxTracks.forEach(function(t){var n=[];t.clips.forEach(function(e){if(e.packageType===s.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN)return e.desc===s.GL.MOSAIC_DESC&&(e.displayName="马赛克"),e.desc===s.GL.GAUSSIAN_BLUR_DESC&&(e.displayName="模糊"),e.desc===s.GL.MASK_DESC&&(e.displayName="遮罩"),void n.push(e);if(e.packageType===s.GL.TIMELINE_VIDEO_FX_TYPE_LUT){var t=r.find(function(t){return t.material_id===e.biliLutFileId});return e.displayName=t.name,void n.push(e)}var i=r.find(function(t){return t.material_id===e.desc});i&&(e.displayName=i.name,e.displayNamezhCN=i.name,e.clipSubType=i.formatted_type,n.push(e))}),t.clips=n,s.sortTrackClip(t),t.clips.length&&i.push(t)}),e.timelineVideoFxTracks=i,this.sortTracks(e.timelineVideoFxTracks),e.theme){var t=r.find(function(t){return t.material_id===e.theme.desc});t?(e.theme.displayName=t.name,e.theme.displayNamezhCN=t.name):e.theme=void 0}},setCurrentEditClip:function(t){this.currentEditClip=t},getCurrentEditClip:function(){return this.currentEditClip},stopEditClip:function(){this.VM.$Bus.$emit(this.VM.$GLEventKey.HIDE_EDIT_PANEL)},calculateClipInTimelinePosition:function(t,e){var i=t.inPoint,n=t.outPoint;return i<=e&&e<=n},generateRawId:function(){for(var t=[],e="0123456789abcdef",i=0;i<36;i++)t[i]=e.substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")+this.rawUniqueSuffix++},ensureTransitionAndPosition:function(){this._rebindVideoClipTransition_();function t(t,e){t.speed=e.getSpeed()}this._rebindResourcesPosition_(this.timelineData.videoTracks,t),this._rebindResourcesPosition_(this.timelineData.audioTracks,t)},bindRaw:function(t,e){t.rawId&&this.timelineRaw[t.rawId]&&this.unbindRaw(t);var i=this.generateRawId();return t.rawId=i,this.timelineRaw[i]=e},unbindRaw:function(t){if(t){var e=t.rawId;e&&(this.timelineRaw[e]=null,delete this.timelineRaw[e])}},getRaw:function(t){return this.timelineRaw[t]},sleep:function(e){return new Promise(function(t){setTimeout(t,e)})},setLock:function(t){this.queueLock&&!t||(this.SDKLock=t,this.VM.$Bus.$emit(this.VM.$GLEventKey.LOCK_OPERATION_TRACKS,t),this.VM.$store.commit("updateSDKAllLock",t))}});e.default=T},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var f=n(i(4)),a=i(53),r={createContext:function(){var e,i,n,a,r,s=this;return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.context=window.nvsGetStreamingContextInstance(),this.context.onWebRequestWaitStatusChange=function(t,e){s.VM.$store.commit("updateStreamingWaiting",e),s.VM.$Bus.$emit(s.VM.$GLEventKey.onWebRequestWaitStatusChange,t,e)},this.context.onPlaybackTimelinePosition=function(t,e){s.clearMonitorEdit(),s.VM.$store.commit("updateCurrentTimelinePosition",e),s.VM.$Bus.$emit(s.VM.$GLEventKey.onPlaybackTimelinePosition,t,e);var i=s.getCurrentEditClip();i&&(s.calculateClipInTimelinePosition(i,e)||s.stopEditClip())},this.context.onPlaybackStopped=function(t){s.VM.$Bus.$emit(s.VM.$GLEventKey.onPlaybackStopped,t),s.VM.$store.commit("setIsContextPlaying",!1)},this.context.onPlaybackEOF=function(t){s.VM.$store.commit("updateCurrentTimelinePosition",s.getTimelineDuration()),s.VM.$Bus.$emit(s.VM.$GLEventKey.onPlaybackEOF,t),s.VM.$store.commit("setIsContextPlaying",!1)},this.context.onImageGrabbedArrived=function(t,e){s.VM.$Bus.$emit(s.VM.$GLEventKey.onImageGrabbedArrived,t,e)},this.context.onWebRequestAuthFinish=function(t){s.VM.$Bus.$emit(s.VM.$GLEventKey.onAuthFinished,t)},this.context.setUseChineseLanguageOnly(!0),t.next=10,f.default.awrap(this.authSDK());case 10:this.createPackageManager(),e=this.createTimeline(),i=e.timeline,n=e.timelineData,this.timeline=i,this.timelineData=n,a=this.timeline.getVideoRes(),r=a.imageWidth/a.imageHeight,this.VM.$store.commit("updateRatio",r);case 17:case"end":return t.stop()}},null,this)},createTimeline:function(){var t,e,i=this.timelineDataTemplate.TimelineData,n=sessionStorage.getItem(this.GL.PROJECT_CREATE_SIZE)||"16:9";"9:16"===n?(t=this.GL.RES_HEIGHT,e=this.GL.RES_WIDTH):"16:9"===n?(t=this.GL.RES_WIDTH,e=this.GL.RES_HEIGHT):"1:1"===n?(t=this.GL.RES_WIDTH,e=this.GL.RES_WIDTH):"3:4"===n?(t=this.GL.RES_WIDTH,e=4*this.GL.RES_WIDTH/3):"4:3"===n?(t=this.GL.RES_WIDTH,e=3*this.GL.RES_WIDTH/4):"2:1"===n?(t=this.GL.RES_WIDTH,e=this.GL.RES_WIDTH/2):"1:2"===n&&(t=this.GL.RES_WIDTH/2,e=this.GL.RES_WIDTH);var a=this.context.createTimeline(new window.NvsVideoResolution(t,e),new window.NvsRational(25,1),new window.NvsAudioResolution(44100,2)),r=new i(t,e);return r.videoSize=n,{timeline:a,timelineData:r}},createPackageManager:function(){var a=this;this.packageManager=this.context.getAssetPackageManager(),this.packageManager.onFinishAssetPackageInstallation=function(t,e,i,n){a.VM.$Bus.$emit(a.VM.$GLEventKey.onFinishAssetPackageInstallation+e,t,e,i,n)}},waitEngineCoolDown:function(){return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.default.awrap(this.context.streamingEngineReadyForTimelineModification());case 2:case"end":return t.stop()}},null,this)},grabImageFromTimeline:function(){var e,i=this,n=arguments;return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<n.length&&void 0!==n[0]?n[0]:this.GL.SECOND_CONVERT,this.seekCurrentTimeline(),t.next=4,f.default.awrap(this.waitEngineCoolDown());case 4:if(this.getTimelinePositionClip(e).length){t.next=7;break}return t.abrupt("return",{});case 7:return this.context.grabImageFromTimeline(this.timeline,e,new window.NvsRational(1,1),0),t.abrupt("return",new Promise(function(a){i.VM.$Bus.$once(i.VM.$GLEventKey.onImageGrabbedArrived,function(e){var i=new Blob([new Uint8Array(e)]),n=new FileReader;n.onload=function(){var t=n.result;a({imageData:e,imageBlob:i,imageDataUrl:t})},n.readAsDataURL(i)})}));case 9:case"end":return t.stop()}},null,this)},transformCoverImage:function(t){if(t)return new Promise(function(l){var d=new Image;d.src=t,d.onload=function(){var e,i,n,a,r,s,o,c,u;return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=document.createElement("canvas"),i=e.getContext("2d"),n=d.width,a=d.height,c=o=0,u=(s=n)/(r=a),t.t0=u,t.next=t.t0===9/16?11:.75===t.t0?15:t.t0===4/3?19:1===t.t0?23:2===t.t0?27:.5===t.t0?31:35;break;case 11:case 15:case 19:case 23:return o=((s=(r=a)*(16/9))-n)/2,t.abrupt("break",35);case 27:return c=((r=(s=n)*(9/16))-a)/2,t.abrupt("break",35);case 31:return o=((s=(r=a)*(16/9))-n)/2,t.abrupt("break",35);case 35:e.width=s,e.height=r,i.fillStyle="#000",i.fillRect(0,0,s,r),i.drawImage(d,o,c),l(e.toDataURL());case 41:case"end":return t.stop()}})}})},playContext:function(){var e,i,n;return f.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.VM.$store.state.streamingWaiting)return t.abrupt("return");t.next=2;break;case 2:if(this.VM.$store.state.monitorLock)return t.abrupt("return");t.next=4;break;case 4:if(this.SDKLock)return t.abrupt("return");t.next=6;break;case 6:if(this._ensureAudio_(),this.VM.$store.state.timelineDuration){t.next=9;break}return t.abrupt("return");case 9:if(e=this.context.getStreamingEngineState(),i=this.getTimelineDuration()){t.next=13;break}return t.abrupt("return");case 13:if((n=this.getCurrentTimelinePosition())===i)return t.abrupt("return");t.next=16;break;case 16:if(3!==e){t.next=21;break}this.context.stop(),this.VM.$store.commit("setIsContextPlaying",!1),t.next=25;break;case 21:return t.next=23,f.default.awrap(this.waitEngineCoolDown());case 23:this.context.playbackTimeline(this.timeline,n,-1,window.NvsVideoPreviewSizeModeEnum.LiveWindowSize,!0,0),this.VM.$store.commit("setIsContextPlaying",!0);case 25:case"end":return t.stop()}},null,this)},_ensureAudio_:function(){this.hadResumeAudio||(window.nvsResumeAudioContext(),this.hadResumeAudio=!0)},stopContext:function(){this.context&&3===this.context.getStreamingEngineState()&&this.context.stop()},muteAudioOutput:function(){for(var t=this.timeline.videoTrackCount(),e=0;e<t;e++){var i=this.timeline.getVideoTrackByIndex(e);this._videoVolArray_.push(i.getVolumeGain()),i.setVolumeGain(0,0)}for(var n=this.timeline.audioTrackCount(),a=0;a<n;a++){var r=this.timeline.getAudioTrackByIndex(a);this._audioVolArray_.push(r.getVolumeGain()),r.setVolumeGain(0,0)}this.timelineData.theme&&this.timelineData.theme.show&&this.timeline.setThemeMusicVolumeGain(0,0)},resumeAudioOutput:function(){for(var t=0;t<this._videoVolArray_.length;t++){var e=this.timeline.getVideoTrackByIndex(t);if(void 0!==e){var i=this._videoVolArray_[t];e.setVolumeGain(i.leftVolume,i.rightVolume)}}for(var n=0;n<this._audioVolArray_.length;n++){var a=this.timeline.getAudioTrackByIndex(n);if(void 0!==a){var r=this._audioVolArray_[n];a.setVolumeGain(r.leftVolume,r.rightVolume)}}this._videoVolArray_=[],this._audioVolArray_=[],this.timelineData.theme&&this.timelineData.theme.show&&this.timeline.setThemeMusicVolumeGain(this.timelineData.theme.volumeValue,this.timelineData.theme.volumeValue)},authSDK:function(){var t=this;return new Promise(function(e,i){t.VM.$Bus.$once(t.VM.$GLEventKey.onAuthFinished,function(t){t?(console.log("加载成功",t),e()):i(new Error("鉴权失败"))}),t.context.verifySdkLicenseFileWithExtraUserData("https://api.bilibili.com/studio/video-editor-interface/ms/auth",{headers:{type:"application/x-www-form-urlencoded"},data:{csrf:(0,a.getCookie)("bili_jct")},withCredentials:!0,method:"POST"})})}};e.default=r},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(4)),a={changeEmptyTrackOutPoint:function(e){var i;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(this.waitEngineCoolDown());case 2:i=this.timeline.getVideoTrackByIndex(0),this.getTimelineDuration()<e&&(i.changeOutPoint(0,e),this.timelineData.duration=e,this.VM.$store.commit("updateTimelineDuration",e));case 5:case"end":return t.stop()}},null,this)},changeThemeTrackOutPoint:function(){var e,i,n,a,r,s;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0,this.timelineData.videoTracks.forEach(function(t){t.show&&t.clips.forEach(function(t){t.outPoint>e&&(e=t.outPoint)})}),0===e&&(e+=1),i=this.timeline.getVideoTrackByIndex(1),n=i.getClipCount(),t.next=7,o.default.awrap(this.waitEngineCoolDown());case 7:2<=n?(a=i.getClipByIndex(0),r=a.getOutPoint(),a.getRoleInTheme()===window.NvsClipRoleInThemeEnum.Title?(i.removeClip(1,!1),(s=e-r)<=0&&(s=1),i.insertClip2(":/footage/default_black.png",0,s,1)):(i.removeClip(0,!1),i.insertClip2(":/footage/default_black.png",0,e,0))):(i.removeClip(0,!1),i.insertClip2(":/footage/default_black.png",0,e,0)),this.timelineData.theme&&this.timelineData.theme.rawId&&this.setThemeAttribute(this.timelineData.theme);case 9:case"end":return t.stop()}},null,this)},changeTimelineDuration:function(){var e,i,n,a=arguments;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<a.length&&void 0!==a[0]?a[0]:{ignoreThemeTrack:!1},t.next=3,o.default.awrap(this.waitEngineCoolDown());case 3:if(e.ignoreThemeTrack){t.next=6;break}return t.next=6,o.default.awrap(this.changeThemeTrackOutPoint());case 6:if(i=this.timeline.getVideoTrackByIndex(0),n=this.getTimelineDuration(),i.changeOutPoint(0,n),this.timelineData.duration=n,this.VM.$store.commit("updateTimelineDuration",n),n<this.VM.$store.state.currentTimelinePosition)return this.seekTimeline(n-this.GL.SECOND_CONVERT,!0),t.next=15,o.default.awrap(this.waitEngineCoolDown());t.next=17;break;case 15:t.next=18;break;case 17:this.seekCurrentTimeline();case 18:case"end":return t.stop()}},null,this)},getTimelineDuration:function(t){function e(t){t.show&&t.clips.forEach(function(t){t.outPoint>n&&(n=t.outPoint)})}var i=0<arguments.length&&void 0!==t?t:{},n=0;return this.timelineData.timelineVideoFxTracks.forEach(e),this.timelineData.stickerTracks.forEach(e),this.timelineData.tripleTracks.forEach(e),this.timelineData.captionTracks.forEach(e),this.timelineData.musicCaptionTracks.forEach(e),this.timelineData.audioTracks.forEach(e),this.timelineData.videoTracks.forEach(e),!i.ignoreTheme&&this.timelineData.theme&&this.timelineData.theme.show&&this.timelineData.theme.trailerOutPoint&&this.timelineData.theme.trailerOutPoint>n&&(n=this.timelineData.theme.trailerOutPoint),n},getTimelinePositionClip:function(e){function t(t){t.show&&t.clips.forEach(function(t){t.outPoint>=e&&t.inPoint<=e&&i.push(t)})}var i=[];return this.timelineData.timelineVideoFxTracks.forEach(t),this.timelineData.stickerTracks.forEach(t),this.timelineData.captionTracks.forEach(t),this.timelineData.musicCaptionTracks.forEach(t),this.timelineData.tripleTracks.forEach(t),this.timelineData.videoTracks.forEach(t),i},seekCurrentTimeline:function(){if(!this.notSeek&&!this.inBatchProcess&&!this.inControllerBatchProcess&&this.VM.$store.state.SDKReadyToWork){var t=this.getCurrentTimelinePosition();this.context.seekTimeline(this.timeline,t,window.NvsVideoPreviewSizeModeEnum.LiveWindowSize,window.NvsSeekFlagEnum.ShowCaptionPoster|window.NvsSeekFlagEnum.ShowAnimatedStickerPoster),this.VM.$store.commit("updateCurrentTimelinePosition",t),this.VM.$Bus.$emit(this.VM.$GLEventKey.onPlaybackSeek,t)}},seekTimeline:function(e,i){var n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e<0&&(e=0),e&&this.SDKLock&&!i)return t.abrupt("return");t.next=3;break;case 3:return e>this.timelineData.duration&&(e=this.timelineData.duration),this.stopContext(),t.next=7,o.default.awrap(this.waitEngineCoolDown());case 7:if(this.context.seekTimeline(this.timeline,e,window.NvsVideoPreviewSizeModeEnum.LiveWindowSize,window.NvsSeekFlagEnum.ShowCaptionPoster|window.NvsSeekFlagEnum.ShowAnimatedStickerPoster),this.VM.$store.commit("updateCurrentTimelinePosition",e),this.VM.$store.commit("updateStreamingWaiting",!1),this.VM.$Bus.$emit(this.VM.$GLEventKey.onPlaybackSeek,e),n=this.getCurrentEditClip()){t.next=14;break}return t.abrupt("return");case 14:this.calculateClipInTimelinePosition(n,e)||this.stopEditClip();case 15:case"end":return t.stop()}},null,this)},getCurrentTimelinePosition:function(){return this.context.getTimelineCurrentPosition(this.timeline)},changeVideoSize:function(e){var i,n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(this.waitEngineCoolDown());case 2:"9:16"===e?(i=this.GL.RES_HEIGHT,n=this.GL.RES_WIDTH,this.VM.$store.commit("updateRatio",9/16)):"16:9"===e?(i=this.GL.RES_WIDTH,n=this.GL.RES_HEIGHT,this.VM.$store.commit("updateRatio",16/9),e="16:9"):"1:1"===e?(i=this.GL.RES_WIDTH,n=this.GL.RES_WIDTH,this.VM.$store.commit("updateRatio",1),e="1:1"):"4:3"===e?(i=this.GL.RES_WIDTH,n=3*this.GL.RES_WIDTH/4,this.VM.$store.commit("updateRatio",4/3),e="4:3"):"3:4"===e?(i=this.GL.RES_WIDTH,n=4*this.GL.RES_WIDTH/3,this.VM.$store.commit("updateRatio",.75),e="3:4"):"1:2"===e?(i=this.GL.RES_WIDTH/2,n=this.GL.RES_WIDTH,this.VM.$store.commit("updateRatio",.5),e="1:2"):"2:1"===e&&(i=this.GL.RES_WIDTH,n=this.GL.RES_WIDTH/2,this.VM.$store.commit("updateRatio",2),e="2:1"),sessionStorage.setItem(this.GL.PROJECT_CREATE_SIZE,e),this.timeline.changeVideoSize2(i,n),this.timelineData.videoSize=e,this.timelineData.resWidth=i,this.timelineData.resHeight=n,this.seekCurrentTimeline(),this.clearMonitorEdit();case 10:case"end":return t.stop()}},null,this)},changeTimelineSpeed:function(e){var i,n;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.default.awrap(this.waitEngineCoolDown());case 2:i=new window.NvsVectorVal,(n=new window.NvsPlaybackRateControlRegion).endTime=this.VM.$store.state.timelineDuration,n.playbackRate=e,i.push_back(n),this.timelineData.controlSpeed=e,this.timeline.setPlaybackRateControl(i),this.seekCurrentTimeline();case 10:case"end":return t.stop()}},null,this)}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={createLiveWindow:function(t,e){e=e||this.timeline,this.liveWindow&&this.context.removeLiveWindow(this.liveWindow),t=t||this.GL.LIVE_WINDOW_CANVAS_ID;var i=this.context.createLiveWindow(t);i.setFillMode(window.NvsLiveWindowFillModeEnum.PreserveAspectFit),this.liveWindow=i,this.context.connectTimelineWithLiveWindow(e,this.liveWindow),this.seekCurrentTimeline()},NToV:function(t,e,i){return(i=i||this.liveWindow).mapNormalizedToView({x:t,y:e})},VToN:function(t,e,i){return(i=i||this.liveWindow).mapViewToNormalized({x:t,y:e})},CToV:function(t,e,i){return(i=i||this.liveWindow).mapCanonicalToView({x:t,y:e})},VToC:function(t,e,i){return(i=i||this.liveWindow).mapViewToCanonical({x:t,y:e})},drawMonitorEdit:function(){var t=this.currentEditClip;if(t){var e=this.timelineDataTemplate,i=e.VideoClip,n=e.StickerClip,a=e.CaptionClip,r=e.TimelineVideoFxClip;switch(!0){case t instanceof i:return void this._selectMonitorVideoClipEdit_(t);case t instanceof n:return void this._selectMonitorStickerClipEdit_(t);case t instanceof a:return void this._selectMonitorCaptionClipEdit_(t);case t instanceof r:return void(this._isRegionalTimelineVideoFx_(t)?this._selectMonitorEffectTimelineVideoFxClipEdit_(t):this.clearMonitorEdit());default:return void this.clearMonitorEdit()}}},clearMonitorEdit:function(){this.VM.$MonitorScreen.clearLayer()}};e.default=n},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var h=a(i(4)),c=a(i(638)),u=a(i(33)),s=n(i(27)),r={_removeResourceTrack_:function(t,e){var i=this;e.clips.forEach(function(t){i.unbindRaw(t),i._removeResourceFxs_(t)}),t.splice(e.index,1),this.unbindRaw(e),this.sortTracks(t)},_removeResourceFxs_:function(t){var e=this;t.fxs&&t.fxs.length&&t.fxs.forEach(function(t){e.unbindRaw(t)})},_removeResourceClip_:function(e,i,n){var a,r,s,o;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.clips[i]){t.next=2;break}throw new Error("resourceClip not find clipIndex");case 2:return a=this.timelineRaw[e.rawId],t.next=5,h.default.awrap(this.waitEngineCoolDown());case 5:if(a.removeClip(i,!0),r=e.clips.splice(i,1),s=(0,c.default)(r,1),o=s[0],this.unbindRaw(o),this.sortTrackClip(e),this._removeResourceFxs_(o),n)return t.next=13,h.default.awrap(this.changeTimelineDuration());t.next=15;break;case 13:t.next=16;break;case 15:this.seekCurrentTimeline();case 16:case"end":return t.stop()}},null,this)},_loadResourceM3U8FilePath_:function(e,i){var n,a,r;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.awrap(this.installM3U8AssetToFS(e,i).catch(function(t){console.error(t)}));case 2:if(n=t.sent){t.next=16;break}return t.next=6,h.default.awrap(s.fetchResourceList({resource_ids:i}));case 6:if(a=t.sent,(r=a.list)&&r[0])return e=r[0].m3u8_download_url,t.next=12,h.default.awrap(this.installM3U8AssetToFS(e,i));t.next=15;break;case 12:n=t.sent,t.next=16;break;case 15:throw new Error("audioClip FSFilePath Error");case 16:return t.abrupt("return",{FSFilePath:n,m3u8Url:e});case 17:case"end":return t.stop()}},null,this)},_resourceTrackRefreshAndCoverClip_:function(t,e){var n=this;this.sortTrackClip(t);var a=[e],r=[],s=e.inPoint,o=e.outPoint;return t.clips.forEach(function(t){if(t.inPoint>=s&&t.outPoint<=o)n.unbindRaw(t);else if(t.inPoint<s&&t.outPoint>o){var e=(0,u.default)(t);e.outPoint=s;var i=(0,u.default)(t);i.inPoint=o,a.push(e),a.push(i),r.push(e,i)}else t.inPoint>=s&&t.inPoint<o&&t.outPoint>o?(t.inPoint=o,a.push(t),r.push(t)):t.inPoint<s&&t.outPoint<=o&&t.outPoint>s?(t.outPoint=s,a.push(t),r.push(t)):a.push(t)}),t.clips=a,this.sortTrackClip(t),this._rebindResourceTrackClipsRaw_(t),r},_resourceTrackRefreshAndCoverSpeedClip_:function(t,e){var i=e.outPoint,n=[];return t.forEach(function(t){if(t.inPoint>=i)n.push(t);else if(t.outPoint>i){var e=i-t.inPoint;t.inPoint=t.inPoint+e,1!==t.speed?t.trimIn=t.trimIn+e*t.speed:t.trimIn=t.trimIn+e,n.push(t)}}),n},_rebindResourcesPositionByThemeTitleWidth_:function(t,e){for(var i=0;i<t.length;i++){t[i].clips.forEach(function(t){t.inPoint+=e,t.outPoint+=e})}},_rebindResourcesPosition_:function(t,e){for(var i=0;i<t.length;i++)t[i].show&&this._rebindResourcePosition_(t[i],e)},_rebindResourcePosition_:function(t,i){var n=this;t.clips.forEach(function(t){var e=n.timelineRaw[t.rawId];t.inPoint=e.getInPoint(),t.outPoint=e.getOutPoint(),t.trimIn=e.getTrimIn(),t.trimOut=e.getTrimOut(),i&&"function"==typeof i&&i(t,e)})},_removeResourceTrackClipRawBySpeed_:function(e,i){var n,a,r,s;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.awrap(this.waitEngineCoolDown());case 2:for(n=this.timelineRaw[e.rawId],a=this.timelineRaw[i.rawId],r=n.getClipCount(),s=r-1;0<=s;s--)n.getClipByIndex(s).getInPoint()>a.getInPoint()&&n.removeClip(s,!0);return t.next=8,h.default.awrap(this.waitEngineCoolDown());case 8:case"end":return t.stop()}},null,this)},_getResourceTrackCoveredSpeedClip_:function(t,e){var i=this,n=[],a=[];return t.clips.forEach(function(t){t.inPoint>=e.inPoint?(a.push(t),i.unbindRaw(t)):t.outPoint>e.outPoint?(n.push(t),a.push((0,u.default)(t))):n.push(t)}),t.clips=n,a},_rebindResourceTrackClipsRaw_:function(t){var n=this,a=this.timelineRaw[t.rawId];return t.clips.forEach(function(t,e){n.unbindRaw(t);var i=a.getClipByIndex(e);n.bindRaw(t,i),t.inPoint=i.getInPoint(),t.outPoint=i.getOutPoint(),t.trimIn=i.getTrimIn(),t.trimOut=i.getTrimOut(),t.fxs.forEach(function(t){n.unbindRaw(t);var e=i.getFxByIndex(t.index);e&&n.bindRaw(t,e)})}),t},_rebuildResourceClipsPrototype_:function(e){var i,n,a,r,s,o,c,u,l;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=this.timelineDataTemplate,n=i.VideoClip,a=i.AudioClip,s=!(r=!0),o=void 0,t.prev=4,c=e[Symbol.iterator]();case 6:if(r=(u=c.next()).done){t.next=17;break}if((l=u.value)instanceof n)return t.next=11,h.default.awrap(this._rebuildVideoClipPrototype_(l,l));t.next=11;break;case 11:if(l instanceof a)return t.next=14,h.default.awrap(this._rebuildAudioClipPrototype_(l,l));t.next=14;break;case 14:r=!0,t.next=6;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(4),s=!0,o=t.t0;case 23:t.prev=23,t.prev=24,r||null==c.return||c.return();case 26:if(t.prev=26,s)throw o;t.next=29;break;case 29:return t.finish(26);case 30:return t.finish(23);case 31:case"end":return t.stop()}},null,this,[[4,19,23,31],[24,,26,30]])},_changeResourceClipTrimIn_:function(e,i,n){var a,r,s;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.inPoint,(r=this.timelineRaw[e.rawId]).internalObj){t.next=4;break}return t.abrupt("return");case 4:return this.setLock(!0),t.next=7,h.default.awrap(this.waitEngineCoolDown());case 7:return i.inPoint>a&&r.removeRange(a,i.inPoint,!0),s=this.timelineRaw[i.rawId],r.changeInPoint(s.getIndex(),a),i.trimIn=s.getTrimIn(),i.inPoint=s.getInPoint(),this._resourceTrackRefreshAndCoverClip_(e,i),this.seekCurrentTimeline(),t.next=16,h.default.awrap(this.changeTimelineDuration());case 16:return this.setLock(!1),t.abrupt("return",i);case 18:case"end":return t.stop()}},null,this)},_changeResourceClipTrimOut_:function(e,i,n){var a,r,s;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=n.outPoint,(r=this.timelineRaw[e.rawId]).internalObj){t.next=4;break}return t.abrupt("return");case 4:return this.setLock(!0),t.next=7,h.default.awrap(this.waitEngineCoolDown());case 7:return a>i.outPoint&&r.removeRange(i.outPoint,a,!0),s=this.timelineRaw[i.rawId],r.changeOutPoint(s.getIndex(),a),i.trimOut=s.getTrimOut(),i.outPoint=s.getOutPoint(),this._resourceTrackRefreshAndCoverClip_(e,i),this.seekCurrentTimeline(),t.next=16,h.default.awrap(this.changeTimelineDuration());case 16:return this.setLock(!1),t.abrupt("return",i);case 18:case"end":return t.stop()}},null,this)},_changeResourceClipSpeed_:function(e,i,n){var a,r,s,o,c;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.targetSpeed,r=void 0===a?1:a,i.speed=r,t.next=4,h.default.awrap(this._changeResourceClipSpeedSingle_(i,r));case 4:for(s=i.index+1;s<e.clips.length;s++)o=e.clips[s],c=this.timelineRaw[o.rawId],o.inPoint=c.getInPoint(),o.outPoint=c.getOutPoint();return t.abrupt("return",i);case 6:case"end":return t.stop()}},null,this)},_changeResourceClipSpeedSingle_:function(e,i){var n;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.speed=i,t.next=3,h.default.awrap(this.waitEngineCoolDown());case 3:(n=this.timelineRaw[e.rawId]).changeSpeed(e.speed,!0),e.inPoint=n.getInPoint(),e.outPoint=n.getOutPoint();case 7:case"end":return t.stop()}},null,this)},_getResourceClipSpeed_:function(t){var e=this.timelineRaw[t.rawId].getSpeed();return t.speed=e},_changeResourceTrackVolume_:function(e,i){var n;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.targetVolume,e.volume=n,t.next=4,h.default.awrap(this.waitEngineCoolDown());case 4:return this.timelineRaw[e.rawId].setVolumeGain(e.volume,e.volume),this.seekCurrentTimeline(),t.abrupt("return",e);case 8:case"end":return t.stop()}},null,this)},_getResourceTrackVolume_:function(t){return t.volume},_removeResourceFx_:function(t,e,i){var n=t.fxs.find(function(t){return t.packageType===e&&t.desc===i});n&&(this.unbindRaw(n),t.fxs.splice(n.index,1),this.sortFx(t.fxs))},_removeResourceAllFx_:function(e){var i,n,a,r,s,o,c,u,l,d,f,p=this;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.timelineDataTemplate,n=i.VideoClip,a=i.AudioClip,t.next=3,h.default.awrap(this.waitEngineCoolDown());case 3:if(r=this.timelineRaw[e.rawId],e instanceof n&&(r.removeAllFx(),e.fxs.forEach(function(t){p.unbindRaw(t)})),!(e instanceof a)){t.next=25;break}for(o=!(s=!0),c=void 0,t.prev=9,u=e.fxs[Symbol.iterator]();!(s=(l=u.next()).done);s=!0)d=l.value,(f=this.timelineRaw[d.rawId])&&(r.removeFx(f.getIndex()),this.unbindRaw(d));t.next=17;break;case 13:t.prev=13,t.t0=t.catch(9),o=!0,c=t.t0;case 17:t.prev=17,t.prev=18,s||null==u.return||u.return();case 20:if(t.prev=20,o)throw c;t.next=23;break;case 23:return t.finish(20);case 24:return t.finish(17);case 25:e.fxs=[],this.seekCurrentTimeline();case 27:case"end":return t.stop()}},null,this,[[9,13,17,25],[18,,20,24]])},_getResourceClipFx_:function(t,e,i){return t.fxs.find(function(t){return t.packageType===e&&t.desc===i})},_setResourceClipVolume_:function(t,e){return this.timelineRaw[t.rawId].setVolumeGain(e,e),t.volume=e,t},_getResourceClipVolume_:function(t){var e=this.timelineRaw[t.rawId].getVolumeGain().leftVolume;return t.volume=e},_getResourceClipFadeInTime_:function(t){var e=this.timelineRaw[t.rawId].getFadeInDuration();return t.fadeInDuration=e},_setResourceClipFadeInTime_:function(t,e){return this.timelineRaw[t.rawId].setFadeInDuration(e),t.fadeInDuration=e,t},_getResourceClipFadeOutTime_:function(t){var e=this.timelineRaw[t.rawId].getFadeOutDuration();return t.fadeOutDuration=e},_setResourceClipFadeOutTime_:function(t,e){return this.timelineRaw[t.rawId].setFadeOutDuration(e),t.fadeOutDuration=e,t},getResourceClipAmount:function(){var e=0;return this.timelineData.videoTracks.forEach(function(t){t.show&&(e+=t.clips.length)}),this.timelineData.audioTracks.forEach(function(t){t.show&&(e+=t.clips.length)}),e},_emptyResourceTrackRaw_:function(e){var i=this;return h.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,h.default.awrap(this.waitEngineCoolDown());case 2:this.timelineRaw[e.rawId].removeAllClips(),e.clips.forEach(function(t){i.unbindRaw(t)});case 5:case"end":return t.stop()}},null,this)},_reSeekTimelinePositionByResourceClip_:function(t){var e=this.getCurrentTimelinePosition();(e>t.outPoint||e<t.inPoint)&&this.seekTimeline(t.inPoint+(t.outPoint-t.inPoint)/2,!0)}};e.default=r},,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var v=n(i(4)),s=n(i(638)),c=n(i(33)),a={_removeMaterialClip_:function(t,e){var i=t.clips[e];if(!i)throw new Error("material clip not found");var n=this.timelineRaw[i.rawId],a=t.clips.splice(e,1),r=(0,s.default)(a,1)[0];return this.unbindRaw(r),this.sortTrackClip(t),n},_removeMaterialTrack_:function(e,i){var n=this;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i.clips.forEach(function(t){n.unbindRaw(t)}),e.splice(i.index,1),this.sortTracks(e),t.next=5,v.default.awrap(this._sortMaterialTrackZValue_(e));case 5:case"end":return t.stop()}},null,this)},_sortMaterialTrackZValue_:function(e){var i,n,a,r,s,o,c,u,l,d,f,p,h;return v.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.default.awrap(this.waitEngineCoolDown());case 2:n=!(i=!0),a=void 0,t.prev=5,r=e[Symbol.iterator]();case 7:if(i=(s=r.next()).done){t.next=31;break}for(o=s.value,u=!(c=!0),l=void 0,t.prev=12,d=o.clips[Symbol.iterator]();!(c=(f=d.next()).done);c=!0)p=f.value,(h=this.timelineRaw[p.rawId])&&h.setZValue&&h.setZValue(e.length-o.index);t.next=20;break;case 16:t.prev=16,t.t0=t.catch(12),u=!0,l=t.t0;case 20:t.prev=20,t.prev=21,c||null==d.return||d.return();case 23:if(t.prev=23,u)throw l;t.next=26;break;case 26:return t.finish(23);case 27:return t.finish(20);case 28:i=!0,t.next=7;break;case 31:t.next=37;break;case 33:t.prev=33,t.t1=t.catch(5),n=!0,a=t.t1;case 37:t.prev=37,t.prev=38,i||null==r.return||r.return();case 40:if(t.prev=40,n)throw a;t.next=43;break;case 43:return t.finish(40);case 44:return t.finish(37);case 45:this.seekCurrentTimeline();case 46:case"end":return t.stop()}},null,this,[[5,33,37,45],[12,16,20,28],[21,,23,27],[38,,40,44]])},_materialTrackRefreshAndCoverClip_:function(t,e,i){this.sortTrackClip(t);var n=[e],a=[],r=[],s=e.inPoint,o=e.outPoint;return i?t.clips.forEach(function(t){if(o>t.inPoint&&o<t.outPoint){var e=(0,c.default)(t);r.push(e),t.inPoint=o,t.outPoint=o+5e6,n.push(t),a.push(t)}else n.push(t)}):t.clips.forEach(function(t){if(t.inPoint>=s&&t.outPoint<=o)r.push(t);else if(t.inPoint<s&&t.outPoint>o){var e=(0,c.default)(t);e.outPoint=s;var i=(0,c.default)(t);i.inPoint=o,n.push(e),n.push(i),a.push(e,i)}else t.inPoint>=s&&t.inPoint<o&&t.outPoint>o?(t.inPoint=o,n.push(t),a.push(t)):t.inPoint<s&&t.outPoint<=o&&t.outPoint>s?(t.outPoint=s,n.push(t),a.push(t)):n.push(t)}),t.clips=n,this.sortTrackClip(t),{coveredClips:a,removedCoveredClips:r}}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var L=n(i(4)),$=n(i(33)),a={createAudioTrack:function(e){var i,n,a,r;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.timelineData.audioTracks,n=this.timelineDataTemplate.AudioTrack,this.setLock(!0),t.next=5,L.default.awrap(this.waitEngineCoolDown());case 5:return a=this.timeline.insertAudioTrack(i.length-e),this.seekCurrentTimeline(),r=new n(e),this.bindRaw(r,a),i.splice(e,0,r),this.sortTracks(i),this.setLock(!1),t.abrupt("return",r);case 13:case"end":return t.stop()}},null,this)},getAudioTrack:function(t){return this.timelineData.audioTracks[t]},removeAudioTrack:function(e){var i,n;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setLock(!0),i=this.timelineData.audioTracks,n=i[e]){t.next=5;break}throw new Error("remove audio track not found");case 5:return t.next=7,L.default.awrap(this.waitEngineCoolDown());case 7:return this.timeline.removeAudioTrack(i.length-1-n.index),this.seekCurrentTimeline(),t.next=11,L.default.awrap(this.changeTimelineDuration());case 11:this._removeResourceTrack_(i,n),this.setLock(!1);case 13:case"end":return t.stop()}},null,this)},addAudioClip:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C,T,x,E,k,S,P,O,R,I,D,A=arguments;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<A.length&&void 0!==A[2]?A[2]:{},a=3<A.length&&void 0!==A[3]&&A[3],this.setLock(!0),r=this.timelineDataTemplate.AudioClip,s=i.inPoint,o=i.trimIn,c=i.trimOut,u=i.m3u8Url,l=i.resourceUrl,d=i.resourceId,f=i.displayName,p=i.speed,h=void 0===p?n.speed||1:p,v=i.isRecorder,m=void 0!==v&&v,g=i.orgDuration,u=u||n.m3u8Url,l=l||n.path,d=d||n.id,f=f||n.displayName,n.speed&&(h=n.speed),s<0&&(s=0),o<0&&(o=0),c<0&&(c=0),c){t.next=15;break}throw new Error("音频trimOut不能为0");case 15:return c<o&&(c=o+2*this.GL.SECOND_CONVERT),_=this.timelineRaw[e.rawId],w=c-o,t.next=20,L.default.awrap(this._loadResourceM3U8FilePath_(u,d));case 20:return b=t.sent,y=b.FSFilePath,u=b.m3u8Url,t.next=25,L.default.awrap(this.waitEngineCoolDown());case 25:if(C=_.addClip2(y,s,o,c),this.seekCurrentTimeline(),T=this.getTrackNewClipIndexByInPoint(e,s),n=(0,$.default)(n)||{},(x=new r({clipIndex:T,m3u8Path:y,m3u8Url:u,resourceUrl:l,duration:g||(n.orgDuration?n.orgDuration:w),isRecorder:m})).id=d||n.id,x.inPoint=s,x.outPoint=s+w,x.displayName=f||n.displayName||"",1!==h)return this.bindRaw(x,C),t.next=38,L.default.awrap(this._removeResourceTrackClipRawBySpeed_(e,x));t.next=77;break;case 38:return t.next=40,L.default.awrap(this._changeResourceClipSpeedSingle_(x,h));case 40:E=this._getResourceTrackCoveredSpeedClip_(e,x),e.clips.push(x),this.sortTrackClip(e),this._rebindResourcePosition_(e),E=this._resourceTrackRefreshAndCoverSpeedClip_(E,x),S=!(k=!0),P=void 0,t.prev=48,O=E[Symbol.iterator]();case 50:if(k=(R=O.next()).done){t.next=57;break}return I=R.value,t.next=54,L.default.awrap(this.addAudioClip(e,{m3u8Url:I.m3u8Url,resourceUrl:I.path,inPoint:I.inPoint,trimIn:I.trimIn,trimOut:I.trimOut,resourceId:I.id,isRecorder:!!I.isRecorder,displayName:I.displayName},I,!0));case 54:k=!0,t.next=50;break;case 57:t.next=63;break;case 59:t.prev=59,t.t0=t.catch(48),S=!0,P=t.t0;case 63:t.prev=63,t.prev=64,k||null==O.return||O.return();case 66:if(t.prev=66,S)throw P;t.next=69;break;case 69:return t.finish(66);case 70:return t.finish(63);case 71:return t.next=73,L.default.awrap(this.changeTimelineDuration());case 73:return t.next=75,L.default.awrap(this._rebuildAudioClipPrototype_(x,n));case 75:t.next=84;break;case 77:return D=this._resourceTrackRefreshAndCoverClip_(e,x),t.next=80,L.default.awrap(this.changeTimelineDuration());case 80:return t.next=82,L.default.awrap(this._rebuildAudioClipPrototype_(x,n));case 82:return t.next=84,L.default.awrap(this._rebuildResourceClipsPrototype_(D));case 84:return t.next=86,L.default.awrap(this.waitEngineCoolDown());case 86:return a||this.setLock(!1),t.abrupt("return",x);case 88:case"end":return t.stop()}},null,this,[[48,59,63,71],[64,,66,70]])},getAudioClip:function(t,e){return this.timelineData.audioTracks[t].clips[e]},getAudioClipIndexInfo:function(t){return this.getClipIndexInfo(this.timelineData.audioTracks,t)},removeAudioClip:function(e,i){var n,a=arguments;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(2<a.length&&void 0!==a[2])||a[2],this.setLock(!0),this.stopEditClip(),t.next=5,L.default.awrap(this._removeResourceClip_(e,i,n));case 5:if(!e.clips.length&&n)return t.next=8,L.default.awrap(this.removeAudioTrack(e.index));t.next=8;break;case 8:this.setLock(!1);case 9:case"end":return t.stop()}},null,this)},changeAudioClipPosition:function(e,i){var n,a,r,s,o,c,u,l,d;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetTrackIndex,(a=i.inPoint)<0&&(a=0),a=parseInt(a),r=this.getAudioClipIndexInfo(e)){t.next=6;break}throw new Error("change audio clip not found");case 6:if(s=r.clipIndex,o=r.trackIndex,n===o&&a===e.inPoint)return t.abrupt("return",e);t.next=10;break;case 10:return this.setLock(!0),this.stopEditClip(),c=this.timelineData.audioTracks,u=c[o],t.next=16,L.default.awrap(this.waitEngineCoolDown());case 16:return t.next=18,L.default.awrap(this.removeAudioClip(u,s,!1));case 18:return l=c[n],t.next=21,L.default.awrap(this.addAudioClip(l,{m3u8Url:e.m3u8Url,resourceUrl:e.path,inPoint:a,trimIn:e.trimIn,trimOut:e.trimOut,resourceId:e.id,isRecorder:e.isRecorder,displayName:e.displayName},e));case 21:if(d=t.sent,this.seekCurrentTimeline(),u.clips.length){t.next=26;break}return t.next=26,L.default.awrap(this.removeAudioTrack(u.index));case 26:return this.setLock(!1),t.abrupt("return",d);case 28:case"end":return t.stop()}},null,this)},changeAudioClipTrimIn:function(e,i){var n,a,r,s;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=i.inPoint)<0&&(n=0),n=parseInt(n),e.inPoint===n)return t.abrupt("return",e);t.next=5;break;case 5:return this.stopEditClip(),a=this.timelineData.audioTracks,r=this.getAudioClipIndexInfo(e),s=a[r.trackIndex],t.abrupt("return",this._changeResourceClipTrimIn_(s,e,{inPoint:n}));case 10:case"end":return t.stop()}},null,this)},changeAudioClipTrimOut:function(e,i){var n,a,r,s;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.outPoint,n=parseInt(n),e.outPoint===n)return t.abrupt("return",e);t.next=4;break;case 4:return this.stopEditClip(),a=this.timelineData.audioTracks,r=this.getAudioClipIndexInfo(e),s=a[r.trackIndex],t.abrupt("return",this._changeResourceClipTrimOut_(s,e,{outPoint:n}));case 9:case"end":return t.stop()}},null,this)},_rebuildAudioTracksFromTimelineData_:function(e){var i,n,a,r;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=[],e.audioTracks.forEach(function(t){t.clips&&t.clips.length&&i.push(t)}),this.sortTracks(i),e.audioTracks=i,n=0;case 5:if(n<e.audioTracks.length)return a=e.audioTracks[n],t.next=9,L.default.awrap(this.createAudioTrack(n));t.next=18;break;case 9:return r=t.sent,t.next=12,L.default.awrap(this._rebuildAudioTrack_(r,a));case 12:if(r.show){t.next=15;break}return t.next=15,L.default.awrap(this._emptyResourceTrackRaw_(r));case 15:n++,t.next=5;break;case 18:return t.next=20,L.default.awrap(this.changeTimelineDuration());case 20:case"end":return t.stop()}},null,this)},_rebuildAudioTrack_:function(e,i){var n,a,r,s,o,c;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.show=i.show,e.volume=i.volume,t.next=4,L.default.awrap(this.changeAudioTrackVolume(e,{targetVolume:e.volume}));case 4:a=!(n=!0),r=void 0,t.prev=7,s=i.clips[Symbol.iterator]();case 9:if(n=(o=s.next()).done){t.next=16;break}return c=o.value,t.next=13,L.default.awrap(this.addAudioClip(e,{m3u8Url:c.m3u8Url,resourceUrl:c.path,inPoint:c.inPoint,trimIn:c.trimIn,trimOut:c.trimOut,resourceId:c.id,isRecorder:!!c.isRecorder,displayName:c.displayName},c,!0));case 13:n=!0,t.next=9;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(7),a=!0,r=t.t0;case 22:t.prev=22,t.prev=23,n||null==s.return||s.return();case 25:if(t.prev=25,a)throw r;t.next=28;break;case 28:return t.finish(25);case 29:return t.finish(22);case 30:case"end":return t.stop()}},null,this,[[7,18,22,30],[23,,25,29]])},showAudioTrack:function(e,i){var n,a;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.timelineData.audioTracks[e]).show===i)return t.abrupt("return");t.next=3;break;case 3:return n.show=i,t.next=6,L.default.awrap(this.waitEngineCoolDown());case 6:if(i)return a=(0,$.default)(n),n.clips=[],n.transitions=[],t.next=12,L.default.awrap(this._rebuildAudioTrack_(n,a));t.next=14;break;case 12:t.next=16;break;case 14:return t.next=16,L.default.awrap(this._emptyResourceTrackRaw_(n));case 16:return t.next=18,L.default.awrap(this.changeTimelineDuration());case 18:return t.next=20,L.default.awrap(this.waitEngineCoolDown());case 20:case"end":return t.stop()}},null,this)},changeAudioClipSpeed:function(e,i){var n,a,r,s;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetSpeed,a=void 0===n?1:n,e.speed===a)return t.abrupt("return",e);t.next=3;break;case 3:return r=this.getAudioClipIndexInfo(e),s=this.timelineData.audioTracks[r.trackIndex],t.next=7,L.default.awrap(this._changeResourceClipSpeed_(s,e,{targetSpeed:a}));case 7:return e=t.sent,this._reSeekTimelinePositionByResourceClip_(e),t.next=11,L.default.awrap(this.changeTimelineDuration());case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},null,this)},getAudioClipSpeed:function(t){return this._getResourceClipSpeed_(t)},changeAudioTrackVolume:function(e,i){var n;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.targetVolume,t.abrupt("return",this._changeResourceTrackVolume_(e,{targetVolume:n}));case 2:case"end":return t.stop()}},null,this)},getAudioTrackVolume:function(t){return this._getResourceTrackVolume_(t)},setAudioClipVolume:function(e,i){return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:return this._setResourceClipVolume_(e,i),this.seekCurrentTimeline(),t.abrupt("return",e);case 5:case"end":return t.stop()}},null,this)},setAudioClipFadeInTime:function(e,i){return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:return this._setResourceClipFadeInTime_(e,i),this.seekCurrentTimeline(),t.abrupt("return",e);case 5:case"end":return t.stop()}},null,this)},setAudioClipFadeOutTime:function(e,i){return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:return this._setResourceClipFadeOutTime_(e,i),this.seekCurrentTimeline(),t.abrupt("return",e);case 5:case"end":return t.stop()}},null,this)},getAudioClipVolume:function(t){return this._getResourceClipVolume_(t)},getAudioClipFadeInTime:function(t){return this._getResourceClipFadeInTime_(t)},getAudioClipFadeOutTime:function(t){return this._getResourceClipFadeOutTime_(t)},_rebuildAudioClipPrototype_:function(e,i){var n;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,$.default)(i)),t.next=3,L.default.awrap(this._setAudioClipFxs_(e,i));case 3:if(n=this.timelineDataTemplate.AudioClip,i instanceof n)return t.next=7,L.default.awrap(this.setAudioClipVolume(e,i.volume));t.next=11;break;case 7:return t.next=9,L.default.awrap(this.setAudioClipFadeInTime(e,i.fadeInDuration));case 9:return t.next=11,L.default.awrap(this.setAudioClipFadeOutTime(e,i.fadeOutDuration));case 11:case"end":return t.stop()}},null,this)},_setAudioClipFxs_:function(e,i){return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,$.default)(i)),this.sortFx(e.fxs),this.sortFx(i.fxs),t.next=5,L.default.awrap(this._removeResourceAllFx_(e));case 5:return t.next=7,L.default.awrap(this.changeAudioClipFx(e,this.getAudioClipFx(i)));case 7:case"end":return t.stop()}},null,this)},changeAudioClipFx:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:for(n=this.timelineDataTemplate.AudioFx,a=this.timelineRaw[e.rawId],s=!(r=!0),o=void 0,t.prev=7,c=e.fxs[Symbol.iterator]();!(r=(u=c.next()).done);r=!0)l=u.value,(d=this.timelineRaw[l.rawId])&&a.removeFx(d.getIndex()),this.unbindRaw(l);t.next=15;break;case 11:t.prev=11,t.t0=t.catch(7),s=!0,o=t.t0;case 15:t.prev=15,t.prev=16,r||null==c.return||c.return();case 18:if(t.prev=18,s)throw o;t.next=21;break;case 21:return t.finish(18);case 22:return t.finish(15);case 23:e.fxs=[],i&&(f=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,p=new n(f,e.fxs.length,i),e.fxs.push(p),this.sortFx(e.fxs),h=a.appendFx(i),this.bindRaw(p,h)),this.seekCurrentTimeline();case 26:case"end":return t.stop()}},null,this,[[7,11,15,23],[16,,18,22]])},getAudioClipFx:function(t){return t instanceof this.timelineDataTemplate.AudioClip&&t.fxs.length?t.fxs[0].desc:this.GL.AUDIO_FX_RAW}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),st=n(i(4)),ot=n(i(33)),u=i(885),r={createVideoEmptyTrack:function(){var e;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setLock(!0),t.next=3,st.default.awrap(this.waitEngineCoolDown());case 3:return(e=this.timeline.insertVideoTrack(0)).appendClip(":/footage/default_black.png"),e.setAvailableInTheme(!1),this.timeline.appendVideoTrack().appendClip(":/footage/default_black.png"),this.seekCurrentTimeline(),t.next=11,st.default.awrap(this.changeTimelineDuration());case 11:this.setLock(!1);case 12:case"end":return t.stop()}},null,this)},createVideoTrack:function(e){var i,n;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setLock(!0),t.next=3,st.default.awrap(this.waitEngineCoolDown());case 3:return i=this.timeline.insertVideoTrack(this.timelineData.videoTracks.length-e+2),this.seekCurrentTimeline(),n=new this.timelineDataTemplate.VideoTrack(e),this.bindRaw(n,i),this.timelineData.videoTracks.splice(e,0,n),t.next=10,st.default.awrap(this.waitEngineCoolDown());case 10:return this.sortTracks(this.timelineData.videoTracks),this.setLock(!1),t.abrupt("return",n);case 13:case"end":return t.stop()}},null,this)},getVideoTrack:function(t){return this.timelineData.videoTracks[t]},removeVideoTrack:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setLock(!0),n=this.timelineData.videoTracks[e]){t.next=4;break}throw new Error("remove video track not found");case 4:return t.next=6,st.default.awrap(this.waitEngineCoolDown());case 6:if(this.timelineData.theme&&(this.timeline.removeCurrentTheme(),this.unbindRaw(this.timelineData.theme),this.unbindRaw(this.timelineData.theme.titleCaption),this.unbindRaw(this.timelineData.theme.trailerCaption),this._removeTransitionByTheme_()),this.timeline.removeVideoTrack(this.timelineData.videoTracks.length-n.index+1),this._removeResourceTrack_(this.timelineData.videoTracks,n),this.timelineData.theme)return a=(0,ot.default)(this.timelineData.videoTracks),t.next=13,st.default.awrap(this.addTheme({materialId:this.timelineData.theme.id,packageUrl:"",displayName:this.timelineData.theme.displayName,desc:this.timelineData.theme.desc},this.timelineData.theme,{ignoreRedrawUI:!0}));t.next=65;break;case 13:s=!(r=!0),o=void 0,t.prev=16,c=a[Symbol.iterator]();case 18:if(r=(u=c.next()).done){t.next=51;break}l=u.value,f=!(d=!0),p=void 0,t.prev=23,h=l.transitions[Symbol.iterator]();case 25:if(d=(v=h.next()).done){t.next=34;break}if((m=v.value).isThemeTransition)return t.abrupt("continue",31);t.next=29;break;case 29:return t.next=31,st.default.awrap(this.addVideoClipTransition(l.index,m.index,{packageType:m.packageType,packageUrl:"",displayName:m.displayName,desc:m.desc,duration:m.duration},!0));case 31:d=!0,t.next=25;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t.catch(23),f=!0,p=t.t0;case 40:t.prev=40,t.prev=41,d||null==h.return||h.return();case 43:if(t.prev=43,f)throw p;t.next=46;break;case 46:return t.finish(43);case 47:return t.finish(40);case 48:r=!0,t.next=18;break;case 51:t.next=57;break;case 53:t.prev=53,t.t1=t.catch(16),s=!0,o=t.t1;case 57:t.prev=57,t.prev=58,r||null==c.return||c.return();case 60:if(t.prev=60,s)throw o;t.next=63;break;case 63:return t.finish(60);case 64:return t.finish(57);case 65:return this.seekCurrentTimeline(),t.next=68,st.default.awrap(this.changeTimelineDuration());case 68:return this._rebindVideoClipTransition_(),t.next=71,st.default.awrap(this.waitEngineCoolDown());case 71:i&&this.setLock(!1);case 72:case"end":return t.stop()}},null,this,[[16,53,57,65],[23,36,40,48],[41,,43,47],[58,,60,64]])},addVideoClip:function(et,it){var nt,at,rt=this,e=arguments;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return nt=2<e.length&&void 0!==e[2]?e[2]:{},at=3<e.length&&void 0!==e[3]&&e[3],t.next=4,st.default.awrap(this.doControllerBatchProcess(function(){var e,i,n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C,T,x,E,k,S,P,O,R,I,D,A,L,$,F,M,V,B,N,j,G,U,z,K,W,H,X,Y,q,Q,J,Z,tt;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(rt.setLock(!0),e=it.inPoint,i=it.trimIn,n=it.trimOut,a=it.m3u8Url,r=it.resourceUrl,s=it.videoType,o=it.resourceId,c=it.displayName,u=it.orgDuration,l=it.speed,d=void 0===l?nt.speed||1:l,f=it.speedCurve,p=void 0===f?nt.speedCurve||"":f,h=it.speedCurveName,v=void 0===h?nt.speedCurveName||"":h,m=it.videoWidth,g=it.videoHeight,_=it.isFreezeVideo,w=it.freezePoint,a=a||nt.m3u8Url,r=r||nt.path,s=s||nt.videoType,o=o||nt.id,c=c||nt.displayName,e<0&&(e=0),rt.timelineData.theme&&e<rt.timelineData.theme.titleWidth&&(e=rt.timelineData.theme.titleWidth),i<0&&(i=0),n<0&&(n=0),n){t.next=13;break}throw new Error("视频trimOut不能为0");case 13:return n<i&&(n=i+2*rt.GL.SECOND_CONVERT),nt.speed&&(d=nt.speed),nt.speedCurve&&(p=nt.speedCurve),nt.speedCurveName&&(v=nt.speedCurveName),nt.isFreezeVideo&&(_=nt.isFreezeVideo,w=nt.freezePoint),_&&(d=1,v=p=""),b=1!==d,y=!!p,C=rt.timelineRaw[et.rawId],T=n-i,x=rt.timelineDataTemplate.VideoClip,t.next=26,st.default.awrap(rt._loadResourceM3U8FilePath_(a,o));case 26:if(E=t.sent,k=E.FSFilePath,a=E.m3u8Url,!y&&!b){t.next=35;break}if(S=e+nt.outPoint-nt.inPoint,P=et.clips.find(function(t){return t.inPoint<S&&t.outPoint>S}))return t.next=35,st.default.awrap(rt.splitVideoClip(et,{inPoint:S},P));t.next=35;break;case 35:return t.next=37,st.default.awrap(rt.waitEngineCoolDown());case 37:if(O=C.addClip2(k,e,i,n),R=rt.getTrackNewClipIndexByInPoint(et,e),nt=(0,ot.default)(nt)||{},I=u||(nt.orgDuration?nt.orgDuration:T),2===s&&(I=rt.GL.DEFAULT_IMAGE_ORG_DURATION),(D=new x({clipIndex:R,videoType:s,m3u8Path:k,m3u8Url:a,resourceUrl:r,duration:I})).id=o||nt.id,D.inPoint=e,D.outPoint=O.getOutPoint(),D.displayName=c||nt.displayName||"",D.videoWidth=m||nt.videoWidth||0,D.videoHeight=g||nt.videoHeight||0,D.isFreezeVideo=_||!1,D.freezePoint=w,A=(0,ot.default)(et.transitions),y||b)return rt._rebindVideoClipTransition_(),L=[],rt.bindRaw(D,O),t.next=58,st.default.awrap(rt._removeResourceTrackClipRawBySpeed_(et,D));t.next=134;break;case 58:if(y)return t.next=61,st.default.awrap(rt.changeVideoClipCurveSpeedSingle(D,{curve:p,name:v}));t.next=63;break;case 61:t.next=65;break;case 63:return t.next=65,st.default.awrap(rt._changeResourceClipSpeedSingle_(D,d));case 65:for($=rt._getResourceTrackCoveredSpeedClip_(et,D),et.clips.push(D),rt.sortTrackClip(et),rt._rebindResourcePosition_(et),F=rt._resourceTrackRefreshAndCoverSpeedClip_($,D),V=!(M=!0),B=void 0,t.prev=73,N=function(){var e=G.value,t=A.find(function(t){return t.inPoint===e.outPoint});t&&(e._transition_=t)},j=F[Symbol.iterator]();!(M=(G=j.next()).done);M=!0)N();t.next=82;break;case 78:t.prev=78,t.t0=t.catch(73),V=!0,B=t.t0;case 82:t.prev=82,t.prev=83,M||null==j.return||j.return();case 85:if(t.prev=85,V)throw B;t.next=88;break;case 88:return t.finish(85);case 89:return t.finish(82);case 90:z=!(U=!0),K=void 0,t.prev=93,W=F[Symbol.iterator]();case 95:if(U=(H=W.next()).done){t.next=105;break}return X=H.value,t.next=99,st.default.awrap(rt.addVideoClip(et,{m3u8Url:X.m3u8Url,resourceUrl:X.path,videoType:X.videoType,inPoint:X.inPoint,trimIn:X.trimIn,trimOut:X.trimOut,resourceId:X.id,displayName:X.displayName},X,!0));case 99:Y=t.sent,rt.sortTrackClip(et),X._transition_&&((q=X._transition_).index=Y.index,L.push(q));case 102:U=!0,t.next=95;break;case 105:t.next=111;break;case 107:t.prev=107,t.t1=t.catch(93),z=!0,K=t.t1;case 111:t.prev=111,t.prev=112,U||null==W.return||W.return();case 114:if(t.prev=114,z)throw K;t.next=117;break;case 117:return t.finish(114);case 118:return t.finish(111);case 119:Q=0,J=L;case 120:if(Q<J.length)return Z=J[Q],t.next=124,st.default.awrap(rt.addVideoClipTransition(et.index,Z.index,{packageType:Z.packageType,packageUrl:"",displayName:Z.displayName,desc:Z.desc,duration:Z.duration},!0));t.next=127;break;case 124:Q++,t.next=120;break;case 127:return rt._rebindVideoClipTransition_(),t.next=130,st.default.awrap(rt.changeTimelineDuration());case 130:return t.next=132,st.default.awrap(rt._rebuildVideoClipPrototype_(D,nt));case 132:t.next=144;break;case 134:return tt=rt._resourceTrackRefreshAndCoverClip_(et,D),t.next=137,st.default.awrap(rt.changeTimelineDuration());case 137:return rt.notSeek=!0,t.next=140,st.default.awrap(rt._rebuildVideoClipPrototype_(D,nt));case 140:return t.next=142,st.default.awrap(rt._rebuildResourceClipsPrototype_(tt));case 142:rt._rebindVideoClipTransition_(),rt.notSeek=!1;case 144:return t.next=146,st.default.awrap(rt.waitEngineCoolDown());case 146:return t.next=148,st.default.awrap(rt._reAddVideoTransitions_(A,et));case 148:return t.next=150,st.default.awrap(rt.waitEngineCoolDown());case 150:return rt.seekCurrentTimeline(),at||rt.setLock(!1),t.abrupt("return",D);case 153:case"end":return t.stop()}},null,null,[[73,78,82,90],[83,,85,89],[93,107,111,119],[112,,114,118]])}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},null,this)},splitVideoClip:function(e,i,n){var a,r,s,o,c,u,l,d;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setLock(!0),a=this.timelineDataTemplate.VideoClip,r=i.inPoint,s=e.clips.indexOf(n),o=this.getTrackNewClipIndexByInPoint(e,r),c=this.timelineRaw[e.rawId],t.next=8,st.default.awrap(this.waitEngineCoolDown());case 8:return c.splitClip(s,r),u=c.getClipByIndex(o-1),n.speed=u.getSpeed(),n.speedCurve=u.getClipVariableSpeedCurvesString(),(l=new a({clipIndex:o,videoType:n.videoType,m3u8Path:n.m3u8Path,m3u8Url:n.m3u8Url,resourceUrl:n.path,duration:n.orgDuration})).id=n.id,l.inPoint=r,l.displayName=n.displayName,l.videoWidth=n.videoWidth,l.videoHeight=n.videoHeight,d=c.getClipByIndex(o),l.speed=d.getSpeed(),l.speedCurve=d.getClipVariableSpeedCurvesString(),l.speedCurveName=n.speedCurveName,l.isFreezeVideo=n.isFreezeVideo,l.freezePoint=n.freezePoint,this.bindRaw(l,d),e.clips.push(l),this.sortTrackClip(e),this._rebindResourcePosition_(e),this._rebindVideoClipTransition_(),t.next=31,st.default.awrap(this._rebuildVideoClipPrototype_(l,n));case 31:this.seekCurrentTimeline(),this.setLock(!1);case 33:case"end":return t.stop()}},null,this)},getVideoClipIndexInfo:function(t){return this.getClipIndexInfo(this.timelineData.videoTracks,t)},getVideoClip:function(t,e){return this.timelineData.videoTracks[t].clips[e]},removeVideoClip:function(e,i){var n,a,r=arguments;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(2<r.length&&void 0!==r[2])||r[2],a=3<r.length?r[3]:void 0,this.setLock(!0),this.stopEditClip(),t.next=6,st.default.awrap(this._removeResourceClip_(e,i,n));case 6:if(this._rebindVideoClipTransition_(),!e.clips.length&&n)return t.next=10,st.default.awrap(this.removeVideoTrack(e.index,a));t.next=10;break;case 10:return t.next=12,st.default.awrap(this.waitEngineCoolDown());case 12:a&&this.setLock(!1);case 13:case"end":return t.stop()}},null,this)},changeVideoClipPosition:function(e,i){var n,a,r,s,o,c,u,l;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetTrackIndex,(a=i.inPoint)<0&&(a=0),this.timelineData.theme&&a<this.timelineData.theme.titleWidth&&(a=this.timelineData.theme.titleWidth),a=parseInt(a),r=this.getVideoClipIndexInfo(e)){t.next=7;break}throw new Error("change video clip not found");case 7:if(s=r.clipIndex,o=r.trackIndex,n===o&&a===e.inPoint)return t.abrupt("return",e);t.next=11;break;case 11:return this.setLock(!0),this.stopEditClip(),c=this.timelineData.videoTracks[o],t.next=16,st.default.awrap(this.waitEngineCoolDown());case 16:return t.next=18,st.default.awrap(this.removeVideoClip(c,s,!1,!0));case 18:return u=this.timelineData.videoTracks[n],t.next=21,st.default.awrap(this.addVideoClip(u,{m3u8Url:e.m3u8Url,resourceUrl:e.path,videoType:e.videoType,inPoint:a,trimIn:e.trimIn,trimOut:e.trimOut,resourceId:e.id,displayName:e.displayName},e,!0));case 21:if(l=t.sent,c.clips.length){t.next=25;break}return t.next=25,st.default.awrap(this.removeVideoTrack(c.index,!0));case 25:return t.next=27,st.default.awrap(this.waitEngineCoolDown());case 27:return this._rebindVideoClipTransition_(),this.seekCurrentTimeline(),this.setLock(!1),t.abrupt("return",l);case 31:case"end":return t.stop()}},null,this)},changeVideoClipTrimIn:function(e,i){var n,a,r;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=i.inPoint)<0&&(n=0),this.timelineData.theme&&n<this.timelineData.theme.titleWidth&&(n=this.timelineData.theme.titleWidth),n=parseInt(n),e.inPoint===n)return t.abrupt("return",e);t.next=6;break;case 6:return this.stopEditClip(),a=this.getVideoClipIndexInfo(e),r=this.timelineData.videoTracks[a.trackIndex],this._rebindVideoClipTransition_(),t.next=12,st.default.awrap(this._changeResourceClipTrimIn_(r,e,{inPoint:n}));case 12:return e=t.sent,this._rebindVideoClipTransition_(),e.keyFrames.length&&this.setVideoClipKeyFramesByClip(e,e),t.abrupt("return",e);case 16:case"end":return t.stop()}},null,this)},changeVideoClipTrimOut:function(e,i){var n,a,r,s,o;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.outPoint,n=parseInt(n),e.outPoint===n)return t.abrupt("return",e);t.next=4;break;case 4:return this.stopEditClip(),a=this.getVideoClipIndexInfo(e),r=this.timelineData.videoTracks[a.trackIndex],this._rebindVideoClipTransition_(),t.next=10,st.default.awrap(this._changeResourceClipTrimOut_(r,e,{outPoint:n}));case 10:for(e=t.sent,this._rebindVideoClipTransition_(),s=0;s<r.clips.length;s++)(o=r.clips[s]).inPoint===e.outPoint&&o.keyFrames&&o.keyFrames.length&&this.setVideoClipKeyFramesByClip(o,o);return t.abrupt("return",e);case 14:case"end":return t.stop()}},null,this)},_rebuildVideoTracksFromTimelineData_:function(e){var i,n,a,r;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.setLock(!0),i=[],e.videoTracks.forEach(function(t){t.clips&&t.clips.length&&i.push(t)}),this.sortTracks(i),e.videoTracks=i,n=0;case 6:if(n<e.videoTracks.length)return a=e.videoTracks[n],t.next=10,st.default.awrap(this.createVideoTrack(n));t.next=19;break;case 10:return r=t.sent,t.next=13,st.default.awrap(this._rebuildVideoTrack_(r,a));case 13:if(r.show){t.next=16;break}return t.next=16,st.default.awrap(this._emptyResourceTrackRaw_(r));case 16:n++,t.next=6;break;case 19:return t.next=21,st.default.awrap(this.changeTimelineDuration());case 21:this.setLock(!1);case 22:case"end":return t.stop()}},null,this)},_rebuildVideoTrack_:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setLock(!0),e.show=i.show,e.volume=i.volume,t.next=5,st.default.awrap(this.changeVideoTrackVolume(e,{targetVolume:e.volume}));case 5:a=!(n=!0),r=void 0,t.prev=8,s=i.clips[Symbol.iterator]();case 10:if(n=(o=s.next()).done){t.next=17;break}return c=o.value,t.next=14,st.default.awrap(this.addVideoClip(e,{m3u8Url:c.m3u8Url,resourceUrl:c.path,videoType:c.videoType,inPoint:c.inPoint,trimIn:c.trimIn,trimOut:c.trimOut,resourceId:c.id,displayName:c.displayName},c,!0));case 14:n=!0,t.next=10;break;case 17:t.next=23;break;case 19:t.prev=19,t.t0=t.catch(8),a=!0,r=t.t0;case 23:t.prev=23,t.prev=24,n||null==s.return||s.return();case 26:if(t.prev=26,a)throw r;t.next=29;break;case 29:return t.finish(26);case 30:return t.finish(23);case 31:l=!(u=!0),d=void 0,t.prev=34,f=i.transitions[Symbol.iterator]();case 36:if(u=(p=f.next()).done){t.next=45;break}if((h=p.value).isThemeTransition)return t.abrupt("continue",42);t.next=40;break;case 40:return t.next=42,st.default.awrap(this.addVideoClipTransition(e.index,h.index,{packageType:h.packageType,packageUrl:"",displayName:h.displayName,desc:h.desc,duration:h.duration},!0));case 42:u=!0,t.next=36;break;case 45:t.next=51;break;case 47:t.prev=47,t.t1=t.catch(34),l=!0,d=t.t1;case 51:t.prev=51,t.prev=52,u||null==f.return||f.return();case 54:if(t.prev=54,l)throw d;t.next=57;break;case 57:return t.finish(54);case 58:return t.finish(51);case 59:this.setLock(!1);case 60:case"end":return t.stop()}},null,this,[[8,19,23,31],[24,,26,30],[34,47,51,59],[52,,54,58]])},showVideoTrack:function(e,i){var n,a;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.timelineData.videoTracks[e]).show===i)return t.abrupt("return");t.next=3;break;case 3:return n.show=i,t.next=6,st.default.awrap(this.waitEngineCoolDown());case 6:if(i)return a=(0,ot.default)(n),n.clips=[],n.transitions=[],t.next=12,st.default.awrap(this._rebuildVideoTrack_(n,a));t.next=14;break;case 12:t.next=19;break;case 14:return t.next=16,st.default.awrap(this._emptyResourceTrackRaw_(n));case 16:if(this.timelineData.videoTracks.find(function(t){return t.show})){t.next=19;break}return t.next=19,st.default.awrap(this.removeTheme());case 19:return t.next=21,st.default.awrap(this.changeTimelineDuration());case 21:return t.next=23,st.default.awrap(this.waitEngineCoolDown());case 23:case"end":return t.stop()}},null,this)},separateVideoClipAV:function(e){var i,n;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.noAudio)return t.abrupt("return",null);t.next=2;break;case 2:if(this.stopEditClip(),e.noAudio=!0,e.volume=0,i=this.timelineRaw[e.rawId],n=i.getVolumeGain(),0!==n.leftVolume)return t.next=10,st.default.awrap(this.waitEngineCoolDown());t.next=11;break;case 10:i.setVolumeGain(0,0);case 11:return this.seekCurrentTimeline(),t.abrupt("return",{resourceId:e.id,inPoint:e.inPoint,outPoint:e.outPoint,trimIn:e.trimIn,trimOut:e.trimOut,speed:e.speed,displayName:e.displayName,m3u8Url:e.m3u8Url,resourceUrl:e.path});case 13:case"end":return t.stop()}},null,this)},getClipCanBeAVSeparated:function(t){if(t instanceof this.timelineDataTemplate.VideoClip){if(1!==t.videoType)return!1;var e=(t.displayName||"").split(".").pop();return!this.GL.imageTypes.includes(e)&&!t.noAudio}return!1},getVideoClipCurvePosByTrim:function(t,e){return(this.timelineRaw[t.rawId].getTimelinePosByClipPosCurvesVariableSpeed(e)-t.inPoint)/(t.outPoint-t.inPoint)},getVideoClipTimelinePosByTrim:function(t,e){return this.timelineRaw[t.rawId].getTimelinePosByClipPosCurvesVariableSpeed(e)},getVideoClipCurveTrimByTimelinePos:function(t,e){return this.timelineRaw[t.rawId].getClipPosByTimelinePosCurvesVariableSpeed(e)},getVideoClipSpeedCurve:function(t){return this.timelineRaw[t.rawId].getClipVariableSpeedCurvesString()},changeVideoClipCurveSpeedSingle:function(e,i){var n,a,r;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.curve,a=i.name,t.next=3,st.default.awrap(this.waitEngineCoolDown());case 3:(r=this.timelineRaw[e.rawId]).changeCurvesVariableSpeed(n,!0),e.inPoint=r.getInPoint(),e.outPoint=r.getOutPoint(),e.speedCurve=r.getClipVariableSpeedCurvesString(),e.speedCurveName=a,e.speed=r.getSpeed();case 10:case"end":return t.stop()}},null,this)},changeVideoClipCurveSpeed:function(e,i){var n,a,r,s,o,c,u;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.curve,a=i.name,e.speedCurve===n)return t.abrupt("return",e);t.next=3;break;case 3:return r=this.getVideoClipIndexInfo(e),s=this.timelineData.videoTracks[r.trackIndex],t.next=7,st.default.awrap(this.waitEngineCoolDown());case 7:return t.next=9,st.default.awrap(this.changeVideoClipCurveSpeedSingle(e,{curve:n,name:a}));case 9:for(o=e.index+1;o<s.clips.length;o++)c=s.clips[o],u=this.timelineRaw[c.rawId],c.inPoint=u.getInPoint(),c.outPoint=u.getOutPoint();return t.next=12,st.default.awrap(this.waitEngineCoolDown());case 12:return this._reSeekTimelinePositionByResourceClip_(e),this.changeTimelineDuration(),t.abrupt("return",e);case 15:case"end":return t.stop()}},null,this)},changeVideoClipSpeed:function(e,i){var n,a,r,s,o,c;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetSpeed,a=void 0===n?1:n,r=i.seek,s=void 0===r||r,e.speed===a)return t.abrupt("return",e);t.next=3;break;case 3:return o=this.getVideoClipIndexInfo(e),c=this.timelineData.videoTracks[o.trackIndex],t.next=7,st.default.awrap(this._changeResourceClipSpeed_(c,e,{targetSpeed:a}));case 7:return e=t.sent,s&&this._reSeekTimelinePositionByResourceClip_(e),t.next=11,st.default.awrap(this.changeTimelineDuration());case 11:return t.abrupt("return",e);case 12:case"end":return t.stop()}},null,this)},getVideoClipSpeed:function(t){return this._getResourceClipSpeed_(t)},changeVideoTrackVolume:function(e,i){var n,a,r,s,o,c,u;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.targetVolume,t.next=3,st.default.awrap(this._changeResourceTrackVolume_(e,{targetVolume:n}));case 3:r=!(a=!0),s=void 0,t.prev=6,o=e.clips[Symbol.iterator]();case 8:if(a=(c=o.next()).done){t.next=16;break}if((u=c.value).noAudio)return t.next=13,st.default.awrap(this.separateVideoClipAV(u));t.next=13;break;case 13:a=!0,t.next=8;break;case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(6),r=!0,s=t.t0;case 22:t.prev=22,t.prev=23,a||null==o.return||o.return();case 25:if(t.prev=25,r)throw s;t.next=28;break;case 28:return t.finish(25);case 29:return t.finish(22);case 30:case"end":return t.stop()}},null,this,[[6,18,22,30],[23,,25,29]])},getVideoTrackVolume:function(t){return this._getResourceTrackVolume_(t)},_setVideoClipFxs_:function(e,i){return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,ot.default)(i)),this.sortFx(e.fxs),this.sortFx(i.fxs),t.next=5,st.default.awrap(this._removeResourceAllFx_(e));case 5:return t.next=7,st.default.awrap(this._initVideoClipVignette_(e,i,!0));case 7:return t.next=9,st.default.awrap(this._initVideoClipTransform2D_(e,i,!0));case 9:return t.next=11,st.default.awrap(this._initVideoClipColorProperty_(e,i,!0));case 11:return t.next=13,st.default.awrap(this._initVideoClipSharpen_(e,i,!0));case 13:return t.next=15,st.default.awrap(this.changeVideoClipBgBlur(e,i.bgBlur,!0));case 15:return t.next=17,st.default.awrap(this._initVideoClipCartoonFilter_(e,i,!0));case 17:return t.next=19,st.default.awrap(this._initVideoClipStoryboard_(e,i,!0));case 19:this.seekCurrentTimeline();case 20:case"end":return t.stop()}},null,this)},getVideoClipBackgroundResourceId:function(t){var e=this,i=t.fxs.find(function(t){return t.desc===e.GL.STORYBOARD_DESC&&t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN});return i?i.resourceIds[0]:null},changeVideoClipBackgroundByClone:function(e,i){var n,a,r,s,o=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:i=(0,ot.default)(i),n=this.timelineRaw[e.rawId],a=this.GL.STORYBOARD_DESC,r=n.appendBuiltinFx(a),i.rawId=null,s=null,i.params.forEach(function(t){t.key!==o.GL.STORYBOARD_RESOURCE_DIR?t.key===o.GL.STORYBOARD_DESCRIPTION_STRING&&(s=t.value):t.value=o.GL.FS_STORYBOARD_FOLDER}),this.bindRaw(i,r),e.fxs.push(i),r.setStringVal(this.GL.STORYBOARD_RESOURCE_DIR,this.GL.FS_STORYBOARD_FOLDER),r.setBooleanVal(this.GL.STORYBOARD_NO_BACKGROUND,!0),r.setStringVal(this.GL.STORYBOARD_DESCRIPTION_STRING,s);case 14:case"end":return t.stop()}},null,this)},changeVideoClipBackground:function(e,i,n){var a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.timelineDataTemplate,r=a.VideoFx,s=a.FxParam,o=this.timelineRaw[e.rawId],c=this.GL.STORYBOARD_DESC,t.next=5,st.default.awrap(this.waitEngineCoolDown());case 5:if((u=e.fxs.find(function(t){return t.desc===c&&t.packageType===b.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN}))&&(l=this.timelineRaw[u.rawId],o.removeFx(l.getIndex()),this._removeResourceFx_(e,u.packageType,u.desc)),i)return t.next=10,st.default.awrap(this.installStoryBoardAssetToFS(i));t.next=34;break;case 10:(u=new r(this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,e.fxs.length,this.GL.STORYBOARD_DESC)).intensity=1,u.resourceIds.push(n),e.fxs.push(u),this.sortFx(e.fxs),d=o.appendBuiltinFx(c),f=this.timeline.getVideoRes(),p=f.imageWidth,h=f.imageHeight,v=p,m=h,g=i.split("/").pop(),_=Math.max(p,h),1,0,w='<?xml version="1.0" encoding="UTF-8"?>\n      <storyboard sceneWidth="'.concat(v,'" sceneHeight="').concat(m,'">\n        <track source="').concat(g,'" width="').concat(_,'" height="').concat(_,'" clipStart="0" clipDuration="1" repeat="true">\n        </track>\n        <track source=":1" clipStart="0" clipDuration="1" repeat="true">\n          <effect name="transform">\n            <param name="scaleX" value="').concat(1,'"/>\n            <param name="scaleY" value="').concat(1,'"/>\n            <param name="rotationZ" value="').concat(0,'"/>\n            <param name="transX" value="').concat(0,'"/>\n            <param name="transY" value="').concat(0,'"/>\n          </effect>\n        </track>\n      </storyboard>'),u.params.push(new s("string",this.GL.STORYBOARD_RESOURCE_DIR,this.GL.FS_STORYBOARD_FOLDER)),u.params.push(new s("bool",this.GL.STORYBOARD_NO_BACKGROUND,"true")),u.params.push(new s("string",this.GL.STORYBOARD_DESCRIPTION_STRING,w)),d.setStringVal(this.GL.STORYBOARD_RESOURCE_DIR,this.GL.FS_STORYBOARD_FOLDER),d.setBooleanVal(this.GL.STORYBOARD_NO_BACKGROUND,!0),d.setStringVal(this.GL.STORYBOARD_DESCRIPTION_STRING,w),this.bindRaw(u,d);case 34:this.seekCurrentTimeline();case 35:case"end":return t.stop()}},null,this)},changeVideoClipCartoonFilter:function(e,i){var n,a,r,s,o,c,u,l,d,f=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.timelineDataTemplate,a=n.VideoFx,r=n.FxParam,s=this.timelineRaw[e.rawId],o=this.GL.CARTOON_DESC,t.next=5,st.default.awrap(this.waitEngineCoolDown());case 5:(c=e.fxs.find(function(t){return t.desc===o&&t.packageType===f.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN}))&&(u=this.timelineRaw[c.rawId],s.removeFx(u.getIndex()),this._removeResourceFx_(e,c.packageType,c.desc)),i&&(c=new a(this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,e.fxs.length,this.GL.CARTOON_DESC),e.fxs.push(c),this.sortFx(e.fxs),l=s.appendBuiltinFx(o),d=l.getFilterIntensity(),l.setFilterIntensity(d),c.intensity=d,i===this.GL.CARTOON_TYPE_MONO_CHROME?(l.setBooleanVal(this.GL.CARTOON_STROKE_ONLY,!1),l.setBooleanVal(this.GL.CARTOON_GRAY_SCALE,!0),c.params.push(new r(this.GL.CARTOON_PARAM_TYPE,this.GL.CARTOON_STROKE_ONLY,!1)),c.params.push(new r(this.GL.CARTOON_PARAM_TYPE,this.GL.CARTOON_GRAY_SCALE,!0))):i===this.GL.CARTOON_TYPE_INK_PAINTING?(l.setBooleanVal(this.GL.CARTOON_STROKE_ONLY,!0),l.setBooleanVal(this.GL.CARTOON_GRAY_SCALE,!0),c.params.push(new r(this.GL.CARTOON_PARAM_TYPE,this.GL.CARTOON_STROKE_ONLY,!0)),c.params.push(new r(this.GL.CARTOON_PARAM_TYPE,this.GL.CARTOON_GRAY_SCALE,!0))):(l.setBooleanVal(this.GL.CARTOON_STROKE_ONLY,!1),l.setBooleanVal(this.GL.CARTOON_GRAY_SCALE,!1),c.params.push(new r(this.GL.CARTOON_PARAM_TYPE,this.GL.CARTOON_STROKE_ONLY,!1)),c.params.push(new r(this.GL.CARTOON_PARAM_TYPE,this.GL.CARTOON_GRAY_SCALE,!1))),this.bindRaw(c,l)),this.seekCurrentTimeline();case 9:case"end":return t.stop()}},null,this)},getVideoClipCartoonFilter:function(t){var e=this,i=this.GL.CARTOON_DESC,n=t.fxs.find(function(t){return t.desc===i&&t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN});if(!n)return this.GL.CARTOON_TYPE_NULL;var a=n.params.find(function(t){return t.key===e.GL.CARTOON_STROKE_ONLY}),r=n.params.find(function(t){return t.key===e.GL.CARTOON_GRAY_SCALE});return a.value&&r.value?this.GL.CARTOON_TYPE_INK_PAINTING:!a.value&&r.value?this.GL.CARTOON_TYPE_MONO_CHROME:this.GL.CARTOON_TYPE_RAW},changeVideoClipScale:function(e,i){return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:return t.next=4,st.default.awrap(this._changeVideoClipScaleX_(e,i,!1,!0));case 4:return t.next=6,st.default.awrap(this._changeVideoClipScaleY_(e,i,!1,!0));case 6:return this.seekCurrentTimeline(),t.abrupt("return",e);case 8:case"end":return t.stop()}},null,this)},_changeVideoClipScaleX_:function(e,i){var n,a,r,s,o,c,u=this,l=arguments;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<l.length&&void 0!==l[2]&&l[2],3<l.length&&void 0!==l[3]&&l[3]){t.next=5;break}return t.next=5,st.default.awrap(this.waitEngineCoolDown());case 5:if(a=this.timelineDataTemplate.FxParam,r=e.fxs.find(function(t){return t.desc===u.GL.TRANSFORM_2D_DESC})){t.next=9;break}return t.abrupt("return");case 9:return s=this.timelineRaw[r.rawId],o=s.getFloatVal(this.GL.TRANSFORM_2D_SCALE_X),n||(i=Math.abs(i),i=o<0?-i:i),c=new a(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_SCALE_X,i),this._setFxParam_(r.params,c),s.setFloatVal(this.GL.TRANSFORM_2D_SCALE_X,c.value),t.abrupt("return",e);case 16:case"end":return t.stop()}},null,this)},_changeVideoClipScaleY_:function(e,i){var n,a,r,s,o,c,u=this,l=arguments;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<l.length&&void 0!==l[2]&&l[2],3<l.length&&void 0!==l[3]&&l[3]){t.next=5;break}return t.next=5,st.default.awrap(this.waitEngineCoolDown());case 5:if(a=this.timelineDataTemplate.FxParam,r=e.fxs.find(function(t){return t.desc===u.GL.TRANSFORM_2D_DESC})){t.next=9;break}return t.abrupt("return");case 9:return s=this.timelineRaw[r.rawId],o=s.getFloatVal(this.GL.TRANSFORM_2D_SCALE_Y),n||(i=Math.abs(i),i=o<0?-i:i),c=new a(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_SCALE_Y,i),this._setFxParam_(r.params,c),s.setFloatVal(this.GL.TRANSFORM_2D_SCALE_Y,c.value),t.abrupt("return",e);case 16:case"end":return t.stop()}},null,this)},resetVideoClipRotation:function(e){var i,n,a,r,s=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:return t.next=4,st.default.awrap(this.changeVideoClipRotation(e,0));case 4:if(i=e.fxs.find(function(t){return t.desc===s.GL.TRANSFORM_2D_DESC})){t.next=7;break}return t.abrupt("return");case 7:if(n=this.timelineRaw[i.rawId],a=n.getFloatVal(this.GL.TRANSFORM_2D_SCALE_X),r=n.getFloatVal(this.GL.TRANSFORM_2D_SCALE_Y),a<0)return t.next=13,st.default.awrap(this._changeVideoClipScaleX_(e,-a,!0));t.next=13;break;case 13:if(r<0)return t.next=16,st.default.awrap(this._changeVideoClipScaleY_(e,-r,!0));t.next=16;break;case 16:this.seekCurrentTimeline();case 17:case"end":return t.stop()}},null,this)},changeVideoClipRotation:function(e,i,n){var a,r,s,o,c=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(a=this.timelineDataTemplate.FxParam,r=e.fxs.find(function(t){return t.desc===c.GL.TRANSFORM_2D_DESC})){t.next=6;break}return t.abrupt("return");case 6:s=this.timelineRaw[r.rawId],o=s.getFloatVal(this.GL.TRANSFORM_2D_ROTATION),t.t0=i,t.next="horizontal"===t.t0?11:"vertical"===t.t0?16:"to-right-90"===t.t0?21:"to-left-90"===t.t0?24:27;break;case 11:return i=s.getFloatVal(this.GL.TRANSFORM_2D_SCALE_X),t.next=14,st.default.awrap(this._changeVideoClipScaleX_(e,-i,!0));case 14:return n||this.seekCurrentTimeline(),t.abrupt("return");case 16:return i=s.getFloatVal(this.GL.TRANSFORM_2D_SCALE_Y),t.next=19,st.default.awrap(this._changeVideoClipScaleY_(e,-i,!0));case 19:return n||this.seekCurrentTimeline(),t.abrupt("return");case 21:return(o-=90)<=-360&&(o=0),t.abrupt("break",29);case 24:return 360<=(o+=90)&&(o=0),t.abrupt("break",29);case 27:return o=parseFloat(i.toFixed(2))||0,t.abrupt("break",29);case 29:return s.setFloatVal(this.GL.TRANSFORM_2D_ROTATION,o),this._setFxParam_(r.params,new a(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_ROTATION,o)),n||this.seekCurrentTimeline(),t.abrupt("return",e);case 33:case"end":return t.stop()}},null,this)},changeVideoClipXYPosition:function(e,i,n){var a,r,s,o,c,u,l=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=i.x,r=i.y,t.next=3,st.default.awrap(this.waitEngineCoolDown());case 3:if(s=this.timelineDataTemplate.FxParam,o=e.fxs.find(function(t){return t.desc===l.GL.TRANSFORM_2D_DESC})){t.next=7;break}return t.abrupt("return");case 7:return c=this.timelineRaw[o.rawId],u=this.VToC(a,r),c.setFloatVal(this.GL.TRANSFORM_2D_TRANS_X,u.x),c.setFloatVal(this.GL.TRANSFORM_2D_TRANS_Y,u.y),this._setFxParam_(o.params,new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_TRANS_X,u.x)),this._setFxParam_(o.params,new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_TRANS_Y,u.y)),n||this.seekCurrentTimeline(),t.abrupt("return",e);case 15:case"end":return t.stop()}},null,this)},changeVideoClipOpacity:function(e,i,n){var a,r,s=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(a=this.timelineDataTemplate.FxParam,r=e.fxs.find(function(t){return t.desc===s.GL.TRANSFORM_2D_DESC})){t.next=6;break}return t.abrupt("return");case 6:return this.timelineRaw[r.rawId].setFloatVal(this.GL.TRANSFORM_2D_OPACITY,i),this._setFxParam_(r.params,new a(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_OPACITY,i)),n||this.seekCurrentTimeline(),t.abrupt("return",e);case 11:case"end":return t.stop()}},null,this)},changeVideoClipBgBlur:function(e,i){var n;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.timelineRaw[e.rawId]){t.next=5;break}return t.abrupt("return");case 5:return i=!!i,e.bgBlur=i,n.setSourceBackgroundMode(i?1:0),this.seekCurrentTimeline(),t.abrupt("return",e);case 10:case"end":return t.stop()}},null,this)},changeVideoClipDegree:function(e,i,n){var a,r,s,o,c,u;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(a=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,r=this.GL.VIGNETTE,s=this.GL.VIGNETTE_DEGREE,o=this.GL.VIGNETTE_PARAM_TYPE,c=this.timelineDataTemplate.FxParam,u=this._getResourceClipFx_(e,a,r)){t.next=10;break}return t.abrupt("return");case 10:this.timelineRaw[u.rawId].setFloatVal(s,i),n||this.seekCurrentTimeline(),this._setFxParam_(u.params,new c(o,s,i));case 14:case"end":return t.stop()}},null,this)},changeVideoClipBrightness:function(e,i){var n,a,r,s,o,c;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,a=this.GL.COLOR_PROPERTY,r=this.GL.COLOR_PROPERTY_BRIGHTNESS,s=this.GL.COLOR_PROPERTY_PARAM_TYPE,o=this.timelineDataTemplate.FxParam,c=this._getResourceClipFx_(e,n,a)){t.next=10;break}return t.abrupt("return");case 10:this.timelineRaw[c.rawId].setFloatVal(r,i),this.seekCurrentTimeline(),this._setFxParam_(c.params,new o(s,r,i));case 14:case"end":return t.stop()}},null,this)},getVideoClipBrightness:function(t){var e=this.timelineDataTemplate.FxParam,i=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,n=this.GL.COLOR_PROPERTY,a=this.GL.COLOR_PROPERTY_BRIGHTNESS,r=this.GL.COLOR_PROPERTY_PARAM_TYPE,s=this._getResourceClipFx_(t,i,n);if(s){var o=this.timelineRaw[s.rawId].getFloatVal(a);return this._setFxParam_(s.params,new e(r,a,o)),o}},changeVideoClipSaturation:function(e,i){var n,a,r,s,o,c;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,a=this.GL.COLOR_PROPERTY,r=this.GL.COLOR_PROPERTY_SATURATION,s=this.GL.COLOR_PROPERTY_PARAM_TYPE,o=this.timelineDataTemplate.FxParam,c=this._getResourceClipFx_(e,n,a)){t.next=10;break}return t.abrupt("return");case 10:this.timelineRaw[c.rawId].setFloatVal(r,i),this.seekCurrentTimeline(),this._setFxParam_(c.params,new o(s,r,i));case 14:case"end":return t.stop()}},null,this)},getVideoClipSaturation:function(t){var e=this.timelineDataTemplate.FxParam,i=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,n=this.GL.COLOR_PROPERTY,a=this.GL.COLOR_PROPERTY_SATURATION,r=this.GL.COLOR_PROPERTY_PARAM_TYPE,s=this._getResourceClipFx_(t,i,n);if(s){var o=this.timelineRaw[s.rawId].getFloatVal(a);return this._setFxParam_(s.params,new e(r,a,o)),o}},changeVideoClipContrast:function(e,i){var n,a,r,s,o,c;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,a=this.GL.COLOR_PROPERTY,r=this.GL.COLOR_PROPERTY_CONTRAST,s=this.GL.COLOR_PROPERTY_PARAM_TYPE,o=this.timelineDataTemplate.FxParam,c=this._getResourceClipFx_(e,n,a)){t.next=10;break}return t.abrupt("return");case 10:this.timelineRaw[c.rawId].setFloatVal(r,i),this.seekCurrentTimeline(),this._setFxParam_(c.params,new o(s,r,i));case 14:case"end":return t.stop()}},null,this)},changeVideoClipSharpen:function(e,i){var n,a,r,s,o,c;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,a=this.GL.SHARPEN,r=this.GL.SHARPEN_AMOUNT,s=this.GL.SHARPEN_PARAM_TYPE,o=this.timelineDataTemplate.FxParam,c=this._getResourceClipFx_(e,n,a)){t.next=10;break}return t.abrupt("return");case 10:this.timelineRaw[c.rawId].setFloatVal(r,i),this.seekCurrentTimeline(),this._setFxParam_(c.params,new o(s,r,i));case 14:case"end":return t.stop()}},null,this)},getVideoClipSharpen:function(t){var e=this.timelineDataTemplate.FxParam,i=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,n=this.GL.SHARPEN,a=this.GL.SHARPEN_AMOUNT,r=this.GL.SHARPEN_PARAM_TYPE,s=this._getResourceClipFx_(t,i,n);if(s){var o=this.timelineRaw[s.rawId].getFloatVal(a);return this._setFxParam_(s.params,new e(r,a,o)),o}},getVideoClipContrast:function(t){var e=this.timelineDataTemplate.FxParam,i=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,n=this.GL.COLOR_PROPERTY,a=this.GL.COLOR_PROPERTY_CONTRAST,r=this.GL.COLOR_PROPERTY_PARAM_TYPE,s=this._getResourceClipFx_(t,i,n);if(s){var o=this.timelineRaw[s.rawId].getFloatVal(a);return this._setFxParam_(s.params,new e(r,a,o)),o}},getVideoClipDegree:function(t){var e=this.timelineDataTemplate.FxParam,i=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,n=this.GL.VIGNETTE,a=this.GL.VIGNETTE_DEGREE,r=this.GL.VIGNETTE_PARAM_TYPE,s=this._getResourceClipFx_(t,i,n);if(s){var o=this.timelineRaw[s.rawId].getFloatVal(a);return this._setFxParam_(s.params,new e(r,a,o)),o}},getVideoClipScale:function(t){var e=this,i=this.timelineDataTemplate.FxParam,n=t.fxs.find(function(t){return t.desc===e.GL.TRANSFORM_2D_DESC});if(n){var a=this.timelineRaw[n.rawId],r=a.getFloatVal(this.GL.TRANSFORM_2D_SCALE_X),s=a.getFloatVal(this.GL.TRANSFORM_2D_SCALE_Y);return this._setFxParam_(n.params,new i(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_SCALE_X,r)),this._setFxParam_(n.params,new i(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_SCALE_Y,s)),Math.abs(r)}},getVideoClipRotation:function(t){var e=this,i=this.timelineDataTemplate.FxParam,n=t.fxs.find(function(t){return t.desc===e.GL.TRANSFORM_2D_DESC});if(n){var a=this.timelineRaw[n.rawId].getFloatVal(this.GL.TRANSFORM_2D_ROTATION);return this._setFxParam_(n.params,new i(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_ROTATION,a)),a}},getVideoClipXYPosition:function(t){var e=this,i=this.timelineDataTemplate.FxParam,n=t.fxs.find(function(t){return t.desc===e.GL.TRANSFORM_2D_DESC});if(n){var a=this.timelineRaw[n.rawId],r=a.getFloatVal(this.GL.TRANSFORM_2D_TRANS_X),s=a.getFloatVal(this.GL.TRANSFORM_2D_TRANS_Y);return this._setFxParam_(n.params,new i(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_TRANS_X,r)),this._setFxParam_(n.params,new i(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_TRANS_Y,s)),this.CToV(r,s)}},getVideoClipOpacity:function(t){var e=this,i=this.timelineDataTemplate.FxParam,n=t.fxs.find(function(t){return t.desc===e.GL.TRANSFORM_2D_DESC});if(n){var a=this.timelineRaw[n.rawId].getFloatVal(this.GL.TRANSFORM_2D_OPACITY);return this._setFxParam_(n.params,new i(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_OPACITY,a)),a}},getVideoClipBgBlur:function(t){var e=this.timelineRaw[t.rawId];if(e){var i=!!e.getSourceBackgroundMode();return t.bgBlur=i}},_rebuildVideoClipPrototype_:function(e,i){var n;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,ot.default)(i)),n=this.timelineDataTemplate.VideoClip,t.next=4,st.default.awrap(this.initVideoClipImageMotion(e,i));case 4:return t.next=6,st.default.awrap(this._setVideoClipFxs_(e,i));case 6:return t.next=8,st.default.awrap(this.setVideoClipExtraRotation(e,i));case 8:return t.next=10,st.default.awrap(this.setVideoClipKeyFramesByClip(e,i));case 10:if(e.isFreezeVideo)return t.next=13,st.default.awrap(this.setVideoClipFreezeFrame(e));t.next=13;break;case 13:if(i instanceof n&&!e.isFreezeVideo)return t.next=16,st.default.awrap(this.setVideoClipVolume(e,i.volume));t.next=23;break;case 16:return t.next=18,st.default.awrap(this.setVideoClipFadeInTime(e,i.fadeInDuration));case 18:return t.next=20,st.default.awrap(this.setVideoClipFadeOutTime(e,i.fadeOutDuration));case 20:if(i.noAudio)return t.next=23,st.default.awrap(this.separateVideoClipAV(e));t.next=23;break;case 23:case"end":return t.stop()}},null,this)},setVideoClipFreezeFrame:function(e){var i;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:(i=this.timelineRaw[e.rawId]).enableClipFreezeFrame(!0),i.setClipFreezeFrameTrimPosition(e.freezePoint||0);case 5:case"end":return t.stop()}},null,this)},_selectMonitorVideoClipEdit_:function(t){this.VM.$MonitorScreen.drawVideoClip(t)},_initVideoClipFx_:function(e,i,n){var a,r,s,o,c;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.timelineDataTemplate.VideoFx,r=this.timelineRaw[e.rawId],s=new a(i,e.fxs.length,n),e.fxs.push(s),this.sortFx(e.fxs),t.next=7,st.default.awrap(this.waitEngineCoolDown());case 7:return o=r.appendBuiltinFx(n),c=o.getFilterIntensity(),o.setFilterIntensity(c),s.intensity=c,this.bindRaw(s,o),t.abrupt("return",{fx:s,fxRaw:o});case 13:case"end":return t.stop()}},null,this)},_initVideoClipVignette_:function(e,i,n){var a,r,s,o,c,u,l,d,f,p,h,v=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.timelineDataTemplate,r=a.VideoClip,s=a.FxParam,o=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,c=this.GL.VIGNETTE,t.next=5,st.default.awrap(this._initVideoClipFx_(e,o,c));case 5:if(u=t.sent,l=u.fx,d=u.fxRaw,f=new s(this.GL.VIGNETTE_PARAM_TYPE,this.GL.VIGNETTE_DEGREE,d.getFloatVal(this.GL.VIGNETTE_DEGREE)),this._setFxParam_(l.params,f),!(i instanceof r)){t.next=18;break}if(p=this._getResourceClipFx_(i,o,c)){t.next=14;break}return t.abrupt("return");case 14:if((h=p.params.find(function(t){return t.key===v.GL.VIGNETTE_DEGREE})).value!==f.value)return t.next=18,st.default.awrap(this.changeVideoClipDegree(e,h.value,n));t.next=18;break;case 18:case"end":return t.stop()}},null,this)},_initVideoClipTransform2D_:function(e,i,n){var a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C,T,x,E,k,S,P=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return a=this.timelineDataTemplate,r=a.VideoClip,s=a.FxParam,o=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,c=this.GL.TRANSFORM_2D_DESC,t.next=5,st.default.awrap(this._initVideoClipFx_(e,o,c));case 5:if(u=t.sent,l=u.fx,d=u.fxRaw,f=d,p=l,h=new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_SCALE_X,f.getFloatVal(this.GL.TRANSFORM_2D_SCALE_X)),v=new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_SCALE_Y,f.getFloatVal(this.GL.TRANSFORM_2D_SCALE_Y)),m=new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_ROTATION,f.getFloatVal(this.GL.TRANSFORM_2D_ROTATION)),g=new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_TRANS_X,f.getFloatVal(this.GL.TRANSFORM_2D_TRANS_X)),_=new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_TRANS_Y,f.getFloatVal(this.GL.TRANSFORM_2D_TRANS_Y)),w=new s(this.GL.TRANSFORM_2D_PARAM_TYPE,this.GL.TRANSFORM_2D_OPACITY,f.getFloatVal(this.GL.TRANSFORM_2D_OPACITY)),this._setFxParam_(p.params,h),this._setFxParam_(p.params,v),this._setFxParam_(p.params,m),this._setFxParam_(p.params,g),this._setFxParam_(p.params,_),this._setFxParam_(p.params,w),!(i instanceof r)){t.next=48;break}if(b=this._getResourceClipFx_(i,o,c)){t.next=26;break}return t.abrupt("return");case 26:if(y=b.params.find(function(t){return t.key===P.GL.TRANSFORM_2D_SCALE_X}),C=b.params.find(function(t){return t.key===P.GL.TRANSFORM_2D_SCALE_Y}),T=b.params.find(function(t){return t.key===P.GL.TRANSFORM_2D_ROTATION}),x=b.params.find(function(t){return t.key===P.GL.TRANSFORM_2D_TRANS_X}),E=b.params.find(function(t){return t.key===P.GL.TRANSFORM_2D_TRANS_Y}),k=b.params.find(function(t){return t.key===P.GL.TRANSFORM_2D_OPACITY}),y.value!==h.value)return t.next=35,st.default.awrap(this._changeVideoClipScaleX_(e,y.value,!0,n));t.next=35;break;case 35:if(C.value!==v.value)return t.next=38,st.default.awrap(this._changeVideoClipScaleY_(e,C.value,!0,n));t.next=38;break;case 38:if(T.value!==m.value)return t.next=41,st.default.awrap(this.changeVideoClipRotation(e,T.value,n));t.next=41;break;case 41:if(x.value!==g.value||E.value!==_.value)return S=this.CToV(x.value,E.value),t.next=45,st.default.awrap(this.changeVideoClipXYPosition(e,S,n));t.next=45;break;case 45:if(k.value!==w.value)return t.next=48,st.default.awrap(this.changeVideoClipOpacity(e,k.value,n));t.next=48;break;case 48:n||this.seekCurrentTimeline();case 49:case"end":return t.stop()}},null,this)},_initVideoClipColorProperty_:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.timelineDataTemplate,a=n.VideoClip,r=n.FxParam,s=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,o=this.GL.COLOR_PROPERTY,t.next=5,st.default.awrap(this._initVideoClipFx_(e,s,o));case 5:if(c=t.sent,u=c.fx,l=c.fxRaw,d=new r(this.GL.COLOR_PROPERTY_PARAM_TYPE,this.GL.COLOR_PROPERTY_BRIGHTNESS,l.getFloatVal(this.GL.COLOR_PROPERTY_BRIGHTNESS)),f=new r(this.GL.COLOR_PROPERTY_PARAM_TYPE,this.GL.COLOR_PROPERTY_SATURATION,l.getFloatVal(this.GL.COLOR_PROPERTY_SATURATION)),p=new r(this.GL.COLOR_PROPERTY_PARAM_TYPE,this.GL.COLOR_PROPERTY_CONTRAST,l.getFloatVal(this.GL.COLOR_PROPERTY_CONTRAST)),this._setFxParam_(u.params,d),this._setFxParam_(u.params,f),this._setFxParam_(u.params,p),!(i instanceof a)){t.next=30;break}if(h=this._getResourceClipFx_(i,s,o)){t.next=18;break}return t.abrupt("return");case 18:if(v=h.params.find(function(t){return t.key===_.GL.COLOR_PROPERTY_BRIGHTNESS}),m=h.params.find(function(t){return t.key===_.GL.COLOR_PROPERTY_SATURATION}),g=h.params.find(function(t){return t.key===_.GL.COLOR_PROPERTY_CONTRAST}),v.value!==d.value)return t.next=24,st.default.awrap(this.changeVideoClipBrightness(e,v.value));t.next=24;break;case 24:if(m.value!==f.value)return t.next=27,st.default.awrap(this.changeVideoClipSaturation(e,m.value));t.next=27;break;case 27:if(g.value!==p.value)return t.next=30,st.default.awrap(this.changeVideoClipContrast(e,g.value));t.next=30;break;case 30:case"end":return t.stop()}},null,this)},_initVideoClipSharpen_:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.timelineDataTemplate,a=n.VideoClip,r=n.FxParam,s=this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,o=this.GL.SHARPEN,t.next=5,st.default.awrap(this._initVideoClipFx_(e,s,o));case 5:return c=t.sent,u=c.fx,l=c.fxRaw,t.next=10,st.default.awrap(this.changeVideoClipSharpen(e,0));case 10:if(d=new r(this.GL.SHARPEN_PARAM_TYPE,this.GL.SHARPEN_AMOUNT,l.getFloatVal(this.GL.SHARPEN_AMOUNT)),this._setFxParam_(u.params,d),!(i instanceof a)){t.next=20;break}if(f=this._getResourceClipFx_(i,s,o)){t.next=16;break}return t.abrupt("return");case 16:if((p=f.params.find(function(t){return t.key===h.GL.SHARPEN_AMOUNT})).value!==d.value)return t.next=20,st.default.awrap(this.changeVideoClipSharpen(e,p.value));t.next=20;break;case 20:case"end":return t.stop()}},null,this)},_initVideoClipCartoonFilter_:function(e,i){var n,a,r=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.timelineDataTemplate.VideoClip,a=this.GL.CARTOON_DESC,!(i instanceof n)){t.next=8;break}if(i.fxs.find(function(t){return t.desc===a&&t.packageType===r.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN})){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,st.default.awrap(this.changeVideoClipCartoonFilter(e,this.getVideoClipCartoonFilter(i)));case 8:this.seekCurrentTimeline();case 9:case"end":return t.stop()}},null,this)},_initVideoClipStoryboard_:function(e,i){var n,a,r,s=this;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.timelineDataTemplate.VideoClip,a=this.GL.STORYBOARD_DESC,!(i instanceof n)){t.next=8;break}if(r=i.fxs.find(function(t){return t.desc===a&&t.packageType===s.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN})){t.next=6;break}return t.abrupt("return");case 6:return t.next=8,st.default.awrap(this.changeVideoClipBackgroundByClone(e,r));case 8:this.seekCurrentTimeline();case 9:case"end":return t.stop()}},null,this)},getVideoClipVolume:function(t){return this._getResourceClipVolume_(t)},setVideoClipVolume:function(e,i){return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:return e.noAudio=!1,this._setResourceClipVolume_(e,i),this.seekCurrentTimeline(),t.abrupt("return",e);case 6:case"end":return t.stop()}},null,this)},setVideoClipFadeInTime:function(e,i){return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:return this._setResourceClipFadeInTime_(e,i),this.seekCurrentTimeline(),t.abrupt("return",e);case 5:case"end":return t.stop()}},null,this)},getVideoClipFadeInTime:function(t){return this._getResourceClipFadeInTime_(t)},setVideoClipFadeOutTime:function(e,i){return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:return this._setResourceClipFadeOutTime_(e,i),this.seekCurrentTimeline(),t.abrupt("return",e);case 5:case"end":return t.stop()}},null,this)},getVideoClipFadeOutTime:function(t){return this._getResourceClipFadeOutTime_(t)},getImageMotionEnabled:function(t){var e=this.timelineRaw[t.rawId];return!!e&&(2===t.videoType&&e.isImageMotionAnimationEnabled())},setImageMotionEnabled:function(e,i){var n;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.timelineRaw[e.rawId]){t.next=5;break}return t.abrupt("return");case 5:2===e.videoType&&(e.enableMotion=i,n.setImageMotionAnimationEnabled(i));case 6:case"end":return t.stop()}},null,this)},setImageMotionMode:function(e,i){var n;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.timelineRaw[e.rawId]){t.next=5;break}return t.abrupt("return");case 5:2===e.videoType&&(e.motionMode=i,n.setImageMotionMode(i));case 6:case"end":return t.stop()}},null,this)},getImageMotionMode:function(t){var e=this.timelineRaw[t.rawId];if(e)return 2===t.videoType?e.getImageMotionMode():void 0},initVideoClipImageMotion:function(e,i){var n,a;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.timelineDataTemplate.VideoClip,(a=this.timelineRaw[e.rawId])&&2===e.videoType){t.next=6;break}return t.abrupt("return");case 6:return i instanceof n&&(e.enableMotion=i.enableMotion,e.motionMode=i.motionMode),a.setImageMotionAnimationEnabled(e.enableMotion),a.setImageMotionMode(e.motionMode),t.abrupt("return",e);case 10:case"end":return t.stop()}},null,this)},setVideoClipExtraRotation:function(e,i){var n,a;return st.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,st.default.awrap(this.waitEngineCoolDown());case 2:n=this.timelineDataTemplate.VideoClip,a=this.timelineRaw[e.rawId],i instanceof n&&(e.extraRotation=i.extraRotation),a.setExtraVideoRotation(e.extraRotation);case 5:case"end":return t.stop()}},null,this)},getVideoKeyFrameAttrType:function(t){var e;return(e={},(0,a.default)(e,this.GL.KEYFRAME_VIDEO_SCALE_X,"float"),(0,a.default)(e,this.GL.KEYFRAME_VIDEO_SCALE_Y,"float"),(0,a.default)(e,this.GL.KEYFRAME_VIDEO_X,"float"),(0,a.default)(e,this.GL.KEYFRAME_VIDEO_Y,"float"),(0,a.default)(e,this.GL.KEYFRAME_VIDEO_ROTATION,"float"),e)[t]},getVideoKeyFrameAttrKeys:function(){var t=this.GL;return[t.KEYFRAME_VIDEO_SCALE_X,t.KEYFRAME_VIDEO_SCALE_Y,t.KEYFRAME_VIDEO_X,t.KEYFRAME_VIDEO_Y,t.KEYFRAME_VIDEO_ROTATION]},freezeVideoKeyFrameToCopyClip:function(t,e,i){var n=this,a=this.getVideoValueAtTime(t,{time:i,attribute:this.GL.KEYFRAME_VIDEO_X}),r=this.getVideoValueAtTime(t,{time:i,attribute:this.GL.KEYFRAME_VIDEO_Y}),s=this.getVideoKeyFrameRotation(t,i),o=this.getVideoKeyFrameScale(t,i),c=e.fxs.find(function(t){return t.desc===n.GL.TRANSFORM_2D_DESC}),u=c.params.find(function(t){return t.key===n.GL.TRANSFORM_2D_SCALE_X}),l=c.params.find(function(t){return t.key===n.GL.TRANSFORM_2D_SCALE_Y}),d=c.params.find(function(t){return t.key===n.GL.TRANSFORM_2D_ROTATION}),f=c.params.find(function(t){return t.key===n.GL.TRANSFORM_2D_TRANS_X}),p=c.params.find(function(t){return t.key===n.GL.TRANSFORM_2D_TRANS_Y});u.value=o,l.value=o,d.value=s,f.value=a,p.value=r,e.keyFrames=[]},removeVideoAllKeyFramesFromRaw:function(t){var e=this,i=this.getVideoKeyFrameAttrKeys(),n=t.fxs.find(function(t){return t.desc===e.GL.TRANSFORM_2D_DESC});if(n){var a=this.timelineRaw[n.rawId];i.forEach(function(t){a.removeAllKeyframe(t)})}},setVideoClipKeyFramesByClip:function(t,e){t!==e&&e instanceof u.VideoClip||(e=(0,ot.default)(t)),this.removeVideoAllKeyFramesFromRaw(t);var i=e,n=i.keyFrames,a=i.keyFrameFromInPoint,r=i.keyFrameFromDuration,s=0;void 0!==a&&r&&r!==t.outPoint-t.inPoint&&a+r===t.outPoint&&(s=t.inPoint-a,e.keyFrameFromInPoint=null,e.keyFrameFromDuration=null,t.keyFrameFromInPoint=null,t.keyFrameFromDuration=null),t.keyFrames=[];for(var o=0;o<n.length;o++){var c=n[o];this.setVideoValueAtTime(t,{time:c.time-s,attribute:c.key,value:c.value},!1)}this.seekCurrentTimeline()},updateVideoKeyFrameData:function(t,e){var i=e.time,n=e.attribute,a=e.value,r=this.getVideoKeyFrameAttrType(n),s=t.keyFrames.find(function(t){return t.time===i&&t.type===r&&t.key===n});s?s.value=a:t.keyFrames.push({time:i,type:r,key:n,value:a})},setVideoValueAtTime:function(t,e,i){var n=this,a=e.time,r=e.attribute,s=e.value,o=!(2<arguments.length&&void 0!==i)||i,c=t.fxs.find(function(t){return t.desc===n.GL.TRANSFORM_2D_DESC});if(c){var u=this.timelineRaw[c.rawId],l=this.getVideoKeyFrameAttrType(r);({int:u.setIntValAtTime,float:u.setFloatValAtTime,boolean:u.setBooleanValAtTime,string:u.setStringValAtTime,color:u.setColorValAtTime})[l].bind(u)(r,s,a),this.updateVideoKeyFrameData(t,{time:a,attribute:r,value:s}),o&&this.seekCurrentTimeline()}},getVideoValueAtTime:function(t,e){var i=this,n=e.time,a=e.attribute,r=t.fxs.find(function(t){return t.desc===i.GL.TRANSFORM_2D_DESC});if(r){var s=this.timelineRaw[r.rawId],o=this.getVideoKeyFrameAttrType(a);return{int:s.getIntValAtTime,float:s.getFloatValAtTime,boolean:s.getBooleanValAtTime,string:s.getStringValAtTime,color:s.getColorValAtTime}[o].bind(s)(a,n)}},getVideoKeyFramePosition:function(t,e){var i=this.GL.KEYFRAME_VIDEO_X,n=this.GL.KEYFRAME_VIDEO_Y,a=this.getVideoValueAtTime(t,{time:e,attribute:i}),r=this.getVideoValueAtTime(t,{time:e,attribute:n});return this.CToV(a,r)},getVideoKeyFrameScale:function(t,e){return this.getVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_SCALE_X})},getVideoKeyFrameRotation:function(t,e){return this.getVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_ROTATION})},recordVideoAllKeyFrameAtTime:function(i,n){var a=this;this.getVideoKeyFrameAttrKeys().forEach(function(t){var e=a.getVideoValueAtTime(i,{time:n,attribute:t});a.setVideoValueAtTime(i,{time:n,attribute:t,value:e},!1)}),this.seekCurrentTimeline()},removeVideoAllKeyFrameAtTime:function(e,i){var n=this;this.getVideoKeyFrameAttrKeys().forEach(function(t){n.removeVideoKeyFrameAtTime(e,{time:i,attribute:t},!1)}),this.seekCurrentTimeline()},setVideoKeyFramePosition:function(t,e,i){var n=i.x,a=i.y,r=this.VToC(n,a);this.setVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_X,value:r.x},!1),this.setVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_Y,value:r.y},!1),this.recordVideoAllKeyFrameAtTime(t,e)},setVideoKeyFrameScale:function(t,e,i){this.setVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_SCALE_X,value:i},!1),this.setVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_SCALE_Y,value:i},!1),this.recordVideoAllKeyFrameAtTime(t,e)},setVideoKeyFrameRotation:function(t,e,i){this.setVideoValueAtTime(t,{time:e,attribute:this.GL.KEYFRAME_VIDEO_ROTATION,value:i},!1),this.recordVideoAllKeyFrameAtTime(t,e)},removeVideoKeyFrameAtTime:function(t,e,i){var n=this,a=e.time,r=e.attribute,s=!(2<arguments.length&&void 0!==i)||i,o=t.fxs.find(function(t){return t.desc===n.GL.TRANSFORM_2D_DESC});if(o){this.timelineRaw[o.rawId].removeKeyframeAtTime(r,a);var c=t.keyFrames.findIndex(function(t){return t.time===a&&t.key===r});-1!==c&&t.keyFrames.splice(c,1),s&&this.seekCurrentTimeline()}}};e.default=r},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),x=n(i(4)),E=n(i(24)),k=n(i(33)),p=i(15),u=i(886);function r(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?r(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var s={getCaptionTracks:function(t){return t?this.timelineData.musicCaptionTracks:this.timelineData.captionTracks},getMusicCaptionClips:function(){return this.getCaptionTracks(!0)[0].clips},musicCaptionBatch:function(a,r){var s=this;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.doControllerBatchProcess(function(){var e,i,n;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e=s.getMusicCaptionClips(),i=0;case 2:if(i<e.length)return n=e[i],t.next=6,x.default.awrap(a.bind(s).apply(void 0,[n].concat((0,E.default)(r))));t.next=9;break;case 6:i++,t.next=2;break;case 9:case"end":return t.stop()}})}));case 2:case"end":return t.stop()}},null,this)},doControllerBatchProcess:function(e){var i;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.inControllerBatchProcess=!0,t.next=3,x.default.awrap(e());case 3:return i=t.sent,this.inControllerBatchProcess=!1,this.setLock(!1),this.seekCurrentTimeline(),t.abrupt("return",i);case 8:case"end":return t.stop()}},null,this)},doBatchProcess:function(e){var i;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.inBatchProcess=!0,t.next=3,x.default.awrap(e());case 3:return i=t.sent,this.inBatchProcess=!1,this.setLock(!1),this.seekCurrentTimeline(),t.abrupt("return",i);case 8:case"end":return t.stop()}},null,this)},createCaptionTrack:function(e){var i,n,a,r,s=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<s.length&&void 0!==s[1]&&s[1],n=this.getCaptionTracks(i),this.setLock(!0),a=this.timelineDataTemplate.CaptionTrack,r=new a(e,i),n.splice(e,0,r),this.sortTracks(n),t.next=9,x.default.awrap(this._sortMaterialTrackZValue_(n));case 9:return this.setLock(!1),t.abrupt("return",r);case 11:case"end":return t.stop()}},null,this)},applyCaptionStyle:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.applyMusicCaptionStyle(e,i));case 2:case"end":return t.stop()}},null,this)},applyMusicCaptionStyle:function(e,i){var n,a,r,s,o,c,u;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.packageUrl,a=i.displayName,t.next=3,x.default.awrap(this.installDescAssetToFS(n));case 3:return r=t.sent,e.displayName=a,e.styleDesc=r,e.id=r,s=this.timelineRaw[e.rawId],o=this.VM.$MonitorScreen,c=o.getCaptionClipPositionInfo(e),t.next=12,x.default.awrap(this.waitEngineCoolDown());case 12:return t.next=14,x.default.awrap(this.setCaptionClipColor(e,e.color,!0));case 14:return t.next=16,x.default.awrap(s.applyCaptionStyle(r,!0));case 16:return t.next=18,x.default.awrap(this.changeCaptionClipScale(e,e.scaleX,!0));case 18:return u=o.getCaptionClipPositionInfo(e),t.next=21,x.default.awrap(this.setCaptionClipFontFamily(e,e.bsFontId||this.VM.$store.state.captionFonts[0].bsFontId,!0));case 21:return t.next=23,x.default.awrap(this.changeCaptionClipRotation(e,e.rotation,!0));case 23:return t.next=25,x.default.awrap(this.changeCaptionClipOffsetTranslateXY(e,new window.NvsPointF(c.oCanonical.x-u.oCanonical.x,c.oCanonical.y-u.oCanonical.y)));case 25:return t.next=27,x.default.awrap(this.setCaptionClipText(e,e.text));case 27:return t.next=29,x.default.awrap(this.setCaptionClipFontSize(e,e.fontSize));case 29:return t.next=31,x.default.awrap(this.setCaptionClipShadow(e,e.shadow));case 31:return t.next=33,x.default.awrap(this.setCaptionClipBold(e,e.bold));case 33:return t.next=35,x.default.awrap(this.setCaptionClipItalic(e,e.italic));case 35:return t.next=37,x.default.awrap(this.setCaptionClipTextAlign(e,e.align));case 37:return t.next=39,x.default.awrap(this.setCaptionClipOutline(e,e.outline));case 39:return t.next=41,x.default.awrap(this.setCaptionClipOutlineColor(e,e.outlineColor));case 41:return t.next=43,x.default.awrap(this.setCaptionClipOutlineWidth(e,e.outlineWidth));case 43:this.seekCurrentTimeline();case 44:case"end":return t.stop()}},null,this)},getCaptionTrack:function(t,e){var i=1<arguments.length&&void 0!==e&&e;return this.getCaptionTracks(i)[t]},removeCaptionTrack:function(e){var i,n,a,r,s,o,c,u,l,d,f=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1<f.length&&void 0!==f[1]&&f[1],this.setLock(!0),n=this.getCaptionTracks(i),a=n[e]){t.next=6;break}throw new Error("remove caption track not found");case 6:s=!(r=!0),o=void 0,t.prev=9,c=a.clips[Symbol.iterator]();case 11:if(r=(u=c.next()).done){t.next=21;break}if(l=u.value,d=this.timelineRaw[l.rawId])return t.next=17,x.default.awrap(this.waitEngineCoolDown());t.next=18;break;case 17:this.timeline.removeCaption(d);case 18:r=!0,t.next=11;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(9),s=!0,o=t.t0;case 27:t.prev=27,t.prev=28,r||null==c.return||c.return();case 30:if(t.prev=30,s)throw o;t.next=33;break;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.next=37,x.default.awrap(this._removeMaterialTrack_(n,a));case 37:return t.next=39,x.default.awrap(this.changeTimelineDuration());case 39:this.setLock(!1);case 40:case"end":return t.stop()}},null,this,[[9,23,27,35],[28,,30,34]])},addCaptionClip:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C,T=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<T.length&&void 0!==T[2]?T[2]:{},a=3<T.length&&void 0!==T[3]&&T[3],r=4<T.length&&void 0!==T[4]&&T[4],this.setLock(!0),s=this.getCaptionTracks(r),n=n||{},o=i.text,c=i.inPoint,u=i.outPoint,l=i.packageUrl,d=i.materialType,f=i.materialId,p=i.desc,h=i.displayName,v=r?"":"bilibili-哔哩哔哩",o=o||(n.text||v),l=l||"",d||0===d||(d=n.captionType),f=f||n.id,p=p||n.styleDesc,h=h||n.displayName,c<0&&(c=0),u<0&&(u=0),u<c&&(u=c+2*this.GL.SECOND_CONVERT),m=this.timelineDataTemplate.CaptionClip,g=this.getTrackNewClipIndexByInPoint(e,c),n&&n.styleDesc&&(p=n.styleDesc),p){t.next=24;break}return t.next=23,x.default.awrap(this.installDescAssetToFS(l));case 23:p=t.sent;case 24:if(this.VM.$store.state.captionFonts[0]){t.next=27;break}return t.next=27,x.default.awrap(this.VM.$store.dispatch("fetchCaptionFonts"));case 27:return n=(0,k.default)(n)||{},(_=new m(g,o,d,p,r)).id=f||n.id,_.inPoint=c,_.outPoint=u,_.displayName=h||n.displayName||"",w=this._materialTrackRefreshAndCoverClip_(e,_),b=w.coveredClips,y=w.removedCoveredClips,t.next=36,x.default.awrap(this.changeTimelineDuration());case 36:return t.next=38,x.default.awrap(this.changeEmptyTrackOutPoint(u));case 38:return t.next=40,x.default.awrap(this._clearCaptionClipRaws_([_].concat((0,E.default)(b),(0,E.default)(y))));case 40:return C=r?-1:s.length-e.index,t.next=43,x.default.awrap(this._resurfaceCaptionClip_(_,n,C));case 43:return t.next=45,x.default.awrap(this._resurfaceCaptionClips_(b,C));case 45:return t.next=47,x.default.awrap(this.waitEngineCoolDown());case 47:return this.seekCurrentTimeline(),a||this.setLock(!1),t.abrupt("return",_);case 50:case"end":return t.stop()}},null,this)},_resurfaceCaptionClips_:function(e,i){var n,a,r,s,o,c;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:a=!(n=!0),r=void 0,t.prev=3,s=e[Symbol.iterator]();case 5:if(n=(o=s.next()).done){t.next=12;break}return c=o.value,t.next=9,x.default.awrap(this._resurfaceCaptionClip_(c,c,i));case 9:n=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),a=!0,r=t.t0;case 18:t.prev=18,t.prev=19,n||null==s.return||s.return();case 21:if(t.prev=21,a)throw r;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},null,this,[[3,14,18,26],[19,,21,25]])},_resurfaceCaptionClip_:function(e,i,n){var a,r;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,k.default)(e)),a=e.outPoint-e.inPoint,this.unbindRaw(e),t.next=5,x.default.awrap(this.waitEngineCoolDown());case 5:return!e.text?(r=this.timeline.addCaption(" ",e.inPoint,a,e.styleDesc,!1)).setText(""):r=this.timeline.addCaption(e.text,e.inPoint,a,e.styleDesc,!1),r.setZValue(n),this.bindRaw(e,r),e.inPoint=r.getInPoint(),e.outPoint=r.getOutPoint(),t.next=13,x.default.awrap(this._rebuildCaptionClipPrototype_(e,i));case 13:case"end":return t.stop()}},null,this)},_rebuildCaptionClipPrototype_:function(e,i){var n;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:if(i=(0,k.default)(i),n=this.timelineDataTemplate.CaptionClip,i instanceof n)return t.next=7,x.default.awrap(this.setCaptionClipFontFamily(e,i.bsFontId||this.VM.$store.state.captionFonts[0].bsFontId,!0));t.next=39;break;case 7:return t.next=9,x.default.awrap(this.changeCaptionClipRotation(e,i.rotation,!0));case 9:return t.next=11,x.default.awrap(this.changeCaptionClipTranslateXY(e,this.CToV(i.translationX,i.translationY),!0));case 11:return t.next=13,x.default.awrap(this.changeCaptionClipScale(e,i.scaleX,!0));case 13:return t.next=15,x.default.awrap(this.setCaptionClipText(e,i.text));case 15:return t.next=17,x.default.awrap(this.setCaptionClipFontSize(e,i.fontSize));case 17:return t.next=19,x.default.awrap(this.buildCaptionRenderer(e,i.rendererId));case 19:return t.next=21,x.default.awrap(this.setCaptionClipColor(e,i.color));case 21:return t.next=23,x.default.awrap(this.setCaptionClipShadow(e,i.shadow));case 23:return t.next=25,x.default.awrap(this.setCaptionClipBold(e,i.bold));case 25:return t.next=27,x.default.awrap(this.setCaptionClipItalic(e,i.italic));case 27:return t.next=29,x.default.awrap(this.setCaptionClipTextAlign(e,i.align));case 29:return t.next=31,x.default.awrap(this.setCaptionClipOutline(e,i.outline));case 31:return t.next=33,x.default.awrap(this.setCaptionClipOutlineColor(e,i.outlineColor));case 33:return t.next=35,x.default.awrap(this.setCaptionClipOutlineWidth(e,i.outlineWidth));case 35:return t.next=37,x.default.awrap(this.setCaptionClipKeyFramesByClip(e,i));case 37:t.next=58;break;case 39:return this.getCaptionClipText(e),this.getCaptionClipFontSize(e),this.getCaptionClipColor(e),e.defaultColor=e.color,this.getCaptionClipBold(e),this.getCaptionClipShadow(e),this.getCaptionClipItalic(e),this.getCaptionClipTextAlign(e),this.getCaptionClipOutline(e),this.getCaptionClipOutlineColor(e),this.getCaptionClipOutlineWidth(e),t.next=52,x.default.awrap(this.setCaptionClipOutline(e,e.outline));case 52:return t.next=54,x.default.awrap(this.setCaptionClipText(e,e.text));case 54:return t.next=56,x.default.awrap(this.setCaptionClipFontFamily(e,e.bsFontId||this.VM.$store.state.captionFonts[0].bsFontId));case 56:return t.next=58,x.default.awrap(this.buildCaptionRenderer(e,e.rendererId));case 58:case"end":return t.stop()}},null,this)},_clearCaptionClipRaws_:function(e){var i,n,a,r,s,o;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(i=!0),a=void 0,t.prev=3,r=e[Symbol.iterator]();case 5:if(i=(s=r.next()).done){t.next=12;break}return o=s.value,t.next=9,x.default.awrap(this._clearCaptionClipRaw_(o));case 9:i=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,a=t.t0;case 18:t.prev=18,t.prev=19,i||null==r.return||r.return();case 21:if(t.prev=21,n)throw a;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},null,this,[[3,14,18,26],[19,,21,25]])},_clearCaptionClipRaw_:function(e){var i;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineRaw[e.rawId])return t.next=4,x.default.awrap(this.waitEngineCoolDown());t.next=6;break;case 4:this.timeline.removeCaption(i),this.unbindRaw(e);case 6:case"end":return t.stop()}},null,this)},setMusicCaptionClipFontFamily:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipFontFamily,[e]));case 2:case"end":return t.stop()}},null,this)},setMusicCaptionClipRenderer:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionRenderer,[e]));case 2:case"end":return t.stop()}},null,this)},buildCaptionRenderer:function(e,i){var n;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i){t.next=2;break}return t.abrupt("return");case 2:return n={},t.next=5,x.default.awrap(this.VM.$api.materials.fetchMaterialIds(i).then(function(t){n=t[0]||{}}));case 5:return t.next=7,x.default.awrap(this.setCaptionRenderer(e,n,!0));case 7:case"end":return t.stop()}},null,this)},setCaptionRenderer:function(e,i){var n,a,r,s,o,c,u,l,d,f=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<f.length&&void 0!==f[2]&&f[2],a="",i.package_url)return t.next=5,x.default.awrap(this.installDescAssetToFS(i.package_url));t.next=6;break;case 5:a=t.sent;case 6:return r=this.timelineRaw[e.rawId],s="rgba(0, 0, 0, 0)",e.color=s,t.next=11,x.default.awrap(this.waitEngineCoolDown());case 11:return o=(0,p.RGBAToNvsColor)(s),r.setRecordingUserOperation(!1),t.next=15,x.default.awrap(r.setTextColor(o));case 15:return r.setRecordingUserOperation(!0),t.next=18,x.default.awrap(r.applyModularCaptionRenderer(a));case 18:return e.rendererId=a,e.scale=r.getScaleX()||r.getScaleY(),e.fontSize=r.getFontSize(),t.next=23,x.default.awrap(this.waitEngineCoolDown());case 23:n||this.seekCurrentTimeline(),c=e.rendererId,u=e.scale,l=e.fontSize,d=e.outline,this.VM.$store.commit("updateCurrentEditPanelData",h({},this.VM.$store.state.currentEditPanelData,{scale:u,fontSize:l,scaleMutiFontSize:Math.round(u*l),color:s,outline:!c&&d,rendererId:c}));case 26:case"end":return t.stop()}},null,this)},getCaptionRendererId:function(t){return t.rendererId},setCaptionClipFontFamily:function(e,i){var n,a,r,s,o,c=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<c.length&&void 0!==c[2]&&c[2],i){t.next=3;break}throw new Error("bsFontId undefined");case 3:if(a=this.VM.$store.state.captionFonts,r=(r=a.find(function(t){return t.bsFontId===i||t.oldBsFontId&&t.oldBsFontId===i}))||a[0]){t.next=8;break}throw new Error("字体文件丢失");case 8:if(!r.fontFamily){t.next=12;break}s=r.fontFamily,t.next=15;break;case 12:return t.next=14,x.default.awrap(this.installFontFamily(r));case 14:s=t.sent;case 15:return o=this.timelineRaw[e.rawId],t.next=18,x.default.awrap(this.waitEngineCoolDown());case 18:return o.setFontFamily(s),e.fontFamily=s,e.bsFontId=r.bsFontId,t.next=23,x.default.awrap(this.waitEngineCoolDown());case 23:return n||this.seekCurrentTimeline(),t.abrupt("return",e);case 25:case"end":return t.stop()}},null,this)},getCaptionClipFontFamily:function(t){return t.bsFontId},setCaptionClipFontSize:function(e,i){var n;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return-1!==i&&0!==i||(i=this.getCaptionClipFontSize(e)),t.next=3,x.default.awrap(this.waitEngineCoolDown());case 3:return(n=this.timelineRaw[e.rawId]).isFrameCaption()?e.fontSize=0:(e.fontSize=i,n.setFontSize(i)),t.next=7,x.default.awrap(this.waitEngineCoolDown());case 7:return this.seekCurrentTimeline(),t.abrupt("return",e);case 9:case"end":return t.stop()}},null,this)},getCaptionClipFontSize:function(t){var e,i=this.timelineRaw[t.rawId];return i?(e=t instanceof this.timelineDataTemplate.ThemeCaption&&i.isFrameCaption()?0:i.getFontSize(),t.fontSize=e):0},setMusicCaptionClipColor:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipColor,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipColor:function(e,i){var n,a,r,s=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=2<s.length&&void 0!==s[2]&&s[2],t.next=3,x.default.awrap(this.waitEngineCoolDown());case 3:if(a=this.timelineRaw[e.rawId],"#0000000"===(0,p.RGBAToHex)(i))return t.abrupt("return");t.next=6;break;case 6:if(e.color||e.defaultColor||(e.defaultColor=(0,p.NvsColorToRGBA)(a.getTextColor())),i=i||e.defaultColor){t.next=10;break}return t.abrupt("return");case 10:return n&&(i="rgba(0,0,0,0)",this.VM.$store.commit("updateCurrentEditPanelData",h({},this.VM.$store.state.currentEditPanelData,{color:"rgba(0, 0, 0, 0)"}))),e.color=i,r=(0,p.RGBAToNvsColor)(i),a.setRecordingUserOperation(!1),a.setTextColor(r),a.setRecordingUserOperation(!0),this.seekCurrentTimeline(),t.abrupt("return",e);case 18:case"end":return t.stop()}},null,this)},getCaptionClipColor:function(t){var e=this.timelineRaw[t.rawId].getTextColor();return t.color=(0,p.NvsColorToRGBA)(e),t.color},setMusicCaptionClipShadow:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipShadow,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipShadow:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:return this.timelineRaw[e.rawId].setDrawShadow(i),e.shadow=i,this.seekCurrentTimeline(),t.abrupt("return",e);case 7:case"end":return t.stop()}},null,this)},getCaptionClipShadow:function(t){var e=this.timelineRaw[t.rawId].getDrawShadow();return t.shadow=e},setMusicCaptionClipBold:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipBold,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipBold:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:return this.timelineRaw[e.rawId].setBold(i),e.bold=i,this.seekCurrentTimeline(),t.abrupt("return",e);case 7:case"end":return t.stop()}},null,this)},getCaptionClipBold:function(t){var e=this.timelineRaw[t.rawId].getBold();return t.bold=e},setMusicCaptionClipItalic:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipItalic,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipItalic:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:return this.timelineRaw[e.rawId].setItalic(i),e.italic=i,this.seekCurrentTimeline(),t.abrupt("return",e);case 7:case"end":return t.stop()}},null,this)},getCaptionClipItalic:function(t){var e=this.timelineRaw[t.rawId].getItalic();return t.italic=e},setCaptionClipTextAlign:function(e,i){var n,a;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=0,"left"===i&&(n=0),"center"===i&&(n=1),"right"===i&&(n=2),n||(i="left"),t.next=7,x.default.awrap(this.waitEngineCoolDown());case 7:return a=this.timelineRaw[e.rawId],e.align=i,a.setTextAlignment(n),this.seekCurrentTimeline(),t.abrupt("return",e);case 12:case"end":return t.stop()}},null,this)},getCaptionClipTextAlign:function(t){var e=this.timelineRaw[t.rawId].getTextAlignment(),i="";return 0===e&&(i="left"),1===e&&(i="center"),2===e&&(i="right"),t.align=i},setMusicCaptionClipOutline:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipOutline,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipOutline:function(e,i){var n;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:(n=this.timelineRaw[e.rawId])&&n.setDrawOutline(i),e.outline=i,this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)},getCaptionClipOutline:function(t){var e=this.timelineRaw[t.rawId].getDrawOutline();return t.outline=e},setMusicCaptionClipOutlineColor:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipOutlineColor,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipOutlineColor:function(e,i){var n,a;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.timelineRaw[e.rawId],t.next=3,x.default.awrap(this.waitEngineCoolDown());case 3:if(e.outlineColor||e.outlineDefaultColor||(e.outlineDefaultColor=(0,p.NvsColorToRGBA)(n.getOutlineColor())),i=i||e.outlineColor){t.next=7;break}return t.abrupt("return");case 7:e.outlineColor=i,a=(0,p.RGBAToNvsColor)(i),n.setOutlineColor(a),this.seekCurrentTimeline();case 11:case"end":return t.stop()}},null,this)},getCaptionClipOutlineColor:function(t){var e=this.timelineRaw[t.rawId].getOutlineColor();return t.outlineColor=(0,p.NvsColorToRGBA)(e),t.outlineColor},setMusicCaptionClipOutlineWidth:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.setCaptionClipOutlineWidth,[e]));case 2:case"end":return t.stop()}},null,this)},setCaptionClipOutlineWidth:function(e,i){var n;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:n=this.timelineRaw[e.rawId],e.outlineWidth=i,n&&n.setOutlineWidth(i),this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)},getCaptionClipOutlineWidth:function(t){var e=this.timelineRaw[t.rawId].getOutlineWidth();return t.outlineWidth=e},setCaptionClipText:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:this.timelineRaw[e.rawId].setText(i||" "),e.text=i,this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)},getCaptionClipText:function(t){var e=this.timelineRaw[t.rawId].getText().trim();return t.text=e},getCaptionClipIndexInfo:function(t,e){var i=1<arguments.length&&void 0!==e&&e;return this.getClipIndexInfo(this.getCaptionTracks(i),t)},getCaptionClip:function(t,e,i){var n=2<arguments.length&&void 0!==i&&i;return this.getCaptionTrack(t,n).clips[e]},removeCaptionClip:function(e,i){var n,a,r,s=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(2<s.length&&void 0!==s[2])||s[2],(!(a=3<s.length&&void 0!==s[3]&&s[3])||this.getMusicCaptionClips().length<=1)&&this.stopEditClip(),t.next=5,x.default.awrap(this.waitEngineCoolDown());case 5:if(r=this._removeMaterialClip_(e,i),this.timeline.removeCaption(r),this.seekCurrentTimeline(),n)return t.next=11,x.default.awrap(this.changeTimelineDuration());t.next=11;break;case 11:if(!e.clips.length&&n)return t.next=14,x.default.awrap(this.removeCaptionTrack(e.index,a));t.next=14;break;case 14:case"end":return t.stop()}},null,this)},changeCaptionClipPosition:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetTrackIndex,a=i.inPoint,r=2<h.length&&void 0!==h[2]&&h[2],a<0&&(a=0),s=this.getCaptionTracks(r),o=this.getCaptionClipIndexInfo(e,r)){t.next=7;break}throw new Error("change caption clip not found");case 7:if(c=o.clipIndex,u=o.trackIndex,n===u&&a===e.inPoint)return t.abrupt("return",e);t.next=11;break;case 11:return this.setLock(!0),this.stopEditClip(),l=s[u],t.next=16,x.default.awrap(this.waitEngineCoolDown());case 16:return t.next=18,x.default.awrap(this.removeCaptionClip(l,c,!1,r));case 18:return d=s[n],f=a-e.inPoint,e.inPoint=a,e.outPoint+=f,t.next=24,x.default.awrap(this.addCaptionClip(d,{text:e.text,inPoint:e.inPoint,outPoint:e.outPoint,packageUrl:"",materialType:e.captionType,materialId:e.id,desc:e.styleDesc,displayName:e.displayName},e,!1,r));case 24:if(p=t.sent,this.seekCurrentTimeline(),l.clips.length){t.next=29;break}return t.next=29,x.default.awrap(this.removeCaptionTrack(l.index,r));case 29:return this.setLock(!1),t.abrupt("return",p);case 31:case"end":return t.stop()}},null,this)},changeCaptionClipTrimIn:function(e,i){var n,a,r,s,o,c=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.inPoint,a=2<c.length&&void 0!==c[2]&&c[2],r=this.getCaptionTracks(a),n<0&&(n=0),e.inPoint===n)return t.abrupt("return",e);t.next=6;break;case 6:return a||this.stopEditClip(),s=this.getCaptionClipIndexInfo(e,a),o=r[s.trackIndex],e.inPoint=n,t.abrupt("return",this.addCaptionClip(o,{text:e.text,inPoint:e.inPoint,outPoint:e.outPoint,packageUrl:"",materialType:e.captionType,materialId:e.id,desc:e.styleDesc,displayName:e.displayName},e,!1,a));case 11:case"end":return t.stop()}},null,this)},changeCaptionClipTrimOut:function(e,i){var n,a,r,s,o,c=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.outPoint,a=2<c.length&&void 0!==c[2]&&c[2],r=this.getCaptionTracks(a),e.outPoint===n)return t.abrupt("return",e);t.next=5;break;case 5:return this.stopEditClip(),s=this.getCaptionClipIndexInfo(e,a),o=r[s.trackIndex],e.outPoint=n,t.abrupt("return",this.addCaptionClip(o,{text:e.text,inPoint:e.inPoint,outPoint:e.outPoint,packageUrl:"",materialType:e.captionType,materialId:e.id,desc:e.styleDesc,displayName:e.displayName},e,!1,a));case 10:case"end":return t.stop()}},null,this)},_rebuildCationTracksFromTimelineData_:function(e){var i,n,a,r,s,o,c=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],e[a=(i=1<c.length&&void 0!==c[1]&&c[1])?"musicCaptionTracks":"captionTracks"].forEach(function(t){t.clips&&t.clips.length&&n.push(t)}),this.sortTracks(n),e[a]=n,r=0;case 7:if(r<e[a].length)return s=e[a][r],t.next=11,x.default.awrap(this.createCaptionTrack(r,i));t.next=20;break;case 11:return o=t.sent,t.next=14,x.default.awrap(this._rebuildCaptionTrack_(o,s,i));case 14:if(o.show){t.next=17;break}return t.next=17,x.default.awrap(this._clearCaptionClipRaws_(o.clips));case 17:r++,t.next=7;break;case 20:return t.next=22,x.default.awrap(this.changeTimelineDuration());case 22:case"end":return t.stop()}},null,this)},_rebuildCaptionTrack_:function(e,i){var n,a,r,s,o,c,u,l=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=2<l.length&&void 0!==l[2]&&l[2],e.show=i.show,r=!(a=!0),s=void 0,t.prev=5,o=i.clips[Symbol.iterator]();case 7:if(a=(c=o.next()).done){t.next=14;break}return u=c.value,t.next=11,x.default.awrap(this.addCaptionClip(e,{text:u.text,inPoint:u.inPoint,outPoint:u.outPoint,packageUrl:"",materialType:u.captionType,materialId:u.id,desc:u.styleDesc,displayName:u.displayName},u,!0,n));case 11:a=!0,t.next=7;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(5),r=!0,s=t.t0;case 20:t.prev=20,t.prev=21,a||null==o.return||o.return();case 23:if(t.prev=23,r)throw s;t.next=26;break;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},null,this,[[5,16,20,28],[21,,23,27]])},_selectMonitorCaptionClipEdit_:function(t){this.VM.$MonitorScreen.drawCaptionClip(t)},showCaptionTrack:function(e,i){var n,a,r,s=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<s.length&&void 0!==s[2]&&s[2],(a=this.getCaptionTrack(e,n)).show===i)return t.abrupt("return");t.next=4;break;case 4:return a.show=i,t.next=7,x.default.awrap(this.waitEngineCoolDown());case 7:if(i)return r=(0,k.default)(a),a.clips=[],t.next=12,x.default.awrap(this._rebuildCaptionTrack_(a,r,n));t.next=14;break;case 12:t.next=16;break;case 14:return t.next=16,x.default.awrap(this._clearCaptionClipRaws_(a.clips));case 16:return t.next=18,x.default.awrap(this.changeTimelineDuration());case 18:return t.next=20,x.default.awrap(this.waitEngineCoolDown());case 20:case"end":return t.stop()}},null,this)},getScale:function(t){var e=this.timelineRaw[t.rawId];return e.getScaleX()||e.getScaleY()},changeCaptionClipScale:function(e,i){var n,a,r=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=2<r.length&&void 0!==r[2]&&r[2],t.next=3,x.default.awrap(this.waitEngineCoolDown());case 3:(a=this.timelineRaw[e.rawId]).setScaleX(i),a.setScaleY(i),e.scaleX=a.getScaleX(),e.scaleY=a.getScaleY(),n||this.seekCurrentTimeline();case 9:case"end":return t.stop()}},null,this)},getCaptionCenterPoint:function(t){var e=this.VM.$MonitorScreen.getCaptionClipPositionInfo(t),i=e.width,n=e.height,a=e.drawX,r=e.drawY;return this.VToC(a+i/2,r+n/2)},changeMusicCaptionClipOffsetScale:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.changeCaptionClipOffsetScale,[e,i]));case 2:case"end":return t.stop()}},null,this)},changeCaptionClipOffsetScale:function(e,i,n){var a,r;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:if(n){t.next=6;break}return t.next=5,x.default.awrap(this.getCaptionCenterPoint(e));case 5:n=t.sent;case 6:(a=this.timelineRaw[e.rawId]).scaleCaption(i,n),e.scaleX=a.getScaleX(),e.scaleY=a.getScaleY(),r=a.getCaptionTranslation(),e.translationX=r.x,e.translationY=r.y,this.seekCurrentTimeline();case 14:case"end":return t.stop()}},null,this)},changeCaptionClipRotation:function(e,i){var n,a,r=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=2<r.length&&void 0!==r[2]&&r[2],t.next=3,x.default.awrap(this.waitEngineCoolDown());case 3:(a=this.timelineRaw[e.rawId]).setRotationZ(i),e.rotation=a.getRotationZ(),n||this.seekCurrentTimeline();case 7:case"end":return t.stop()}},null,this)},changeMusicCaptionClipOffsetRotation:function(e,i){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.changeCaptionClipOffsetRotation,[e,i]));case 2:case"end":return t.stop()}},null,this)},changeCaptionClipOffsetRotation:function(e,i,n){var a,r,s;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:return(a=this.timelineRaw[e.rawId]).rotateCaption(i,n),e.rotation=a.getRotationZ(),r=this.VToC(0,0),s=this.VToC(0,0),t.next=9,x.default.awrap(this.changeCaptionClipOffsetTranslateXY(e,new window.NvsPointF(r.x-s.x,r.y-s.y)));case 9:this.seekCurrentTimeline();case 10:case"end":return t.stop()}},null,this)},changeMusicCaptionClipTranslateXY:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.changeCaptionClipTranslateXY,[e]));case 2:case"end":return t.stop()}},null,this)},changeCaptionClipTranslateXY:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m=arguments;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=2<m.length&&void 0!==m[2]&&m[2],t.next=3,x.default.awrap(this.waitEngineCoolDown());case 3:if(a=this.timelineRaw[e.rawId],!(i instanceof window.NvsPointF)){t.next=11;break}a.setCaptionTranslation(this.VToC(i.x,i.y)),r=a.getCaptionTranslation(),e.translationX=r.x,e.translationY=r.y,t.next=20;break;case 11:return s=this.VM.$MonitorScreen,o=s.getCaptionClipPositionInfo(e),c=o.width,u=o.height,l=o.drawX,d=o.drawY,f=this.VToC(l+c/2,d+u/2),p=s.getTranslateTarget(c,u,i),h=p.targetCanonical,t.next=17,x.default.awrap(this.changeCaptionClipOffsetTranslateXY(e,new window.NvsPointF(h.x-f.x,h.y-f.y)));case 17:v=a.getCaptionTranslation(),e.translationX=v.x,e.translationY=v.y;case 20:n||this.seekCurrentTimeline();case 21:case"end":return t.stop()}},null,this)},changeMusicCaptionClipOffsetTranslateXY:function(e){return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.musicCaptionBatch(this.changeCaptionClipOffsetTranslateXY,[e]));case 2:case"end":return t.stop()}},null,this)},changeCaptionClipOffsetTranslateXY:function(e,i){var n,a;return x.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.default.awrap(this.waitEngineCoolDown());case 2:(n=this.timelineRaw[e.rawId]).translateCaption(i),a=n.getCaptionTranslation(),e.translationX=a.x,e.translationY=a.y,this.seekCurrentTimeline();case 8:case"end":return t.stop()}},null,this)},getCaptionKeyFrameAttrType:function(t){var e;return(e={},(0,a.default)(e,this.GL.KEYFRAME_CAPTION_SCALE_X,"float"),(0,a.default)(e,this.GL.KEYFRAME_CAPTION_SCALE_Y,"float"),(0,a.default)(e,this.GL.KEYFRAME_CAPTION_X,"float"),(0,a.default)(e,this.GL.KEYFRAME_CAPTION_Y,"float"),(0,a.default)(e,this.GL.KEYFRAME_CAPTION_ROTATION,"float"),e)[t]},getCaptionKeyFrameAttrKeys:function(){var t=this.GL;return[t.KEYFRAME_CAPTION_SCALE_X,t.KEYFRAME_CAPTION_SCALE_Y,t.KEYFRAME_CAPTION_X,t.KEYFRAME_CAPTION_Y,t.KEYFRAME_CAPTION_ROTATION]},removeCaptionAllKeyFramesFromRaw:function(t){var e=this.getCaptionKeyFrameAttrKeys(),i=this.timelineRaw[t.rawId];e.forEach(function(t){i.removeAllKeyframe(t)})},setCaptionClipKeyFramesByClip:function(t,e){t!==e&&e instanceof u.CaptionClip||(e=(0,k.default)(t)),this.removeCaptionAllKeyFramesFromRaw(t);var i=e,n=i.keyFrames,a=i.keyFrameFromInPoint,r=i.keyFrameFromDuration,s=0;void 0!==a&&r&&r!==t.outPoint-t.inPoint&&a+r===t.outPoint&&(s=t.inPoint-a,e.keyFrameFromInPoint=null,e.keyFrameFromDuration=null,t.keyFrameFromInPoint=null,t.keyFrameFromDuration=null),t.keyFrames=[];for(var o=0;o<n.length;o++){var c=n[o];this.setCaptionValueAtTime(t,{time:c.time-s,attribute:c.key,value:c.value},!1)}this.seekCurrentTimeline()},updateCaptionKeyFrameData:function(t,e){var i=e.time,n=e.attribute,a=e.value,r=this.getCaptionKeyFrameAttrType(n),s=t.keyFrames.find(function(t){return t.time===i&&t.type===r&&t.key===n});s?s.value=a:t.keyFrames.push({time:i,type:r,key:n,value:a})},recordCaptionAllKeyFrameAtTime:function(i,n,t){var a=this,e=!(2<arguments.length&&void 0!==t)||t;this.getCaptionKeyFrameAttrKeys().forEach(function(t){var e=a.getCaptionValueAtTime(i,{time:n,attribute:t});a.setCaptionValueAtTime(i,{time:n,attribute:t,value:e},!1)}),e&&this.seekCurrentTimeline()},setCaptionValueAtTime:function(t,e,i){var n=e.time,a=e.attribute,r=e.value,s=!(2<arguments.length&&void 0!==i)||i,o=this.timelineRaw[t.rawId];if(a===this.GL.KEYFRAME_CAPTION_X)o.setCurrentKeyFrameTime(n),o.setCaptionTranslation(new window.NvsPointF(r,o.getCaptionTranslation().y));else if(a===this.GL.KEYFRAME_CAPTION_Y)o.setCurrentKeyFrameTime(n),o.setCaptionTranslation(new window.NvsPointF(o.getCaptionTranslation().x,r));else{var c=this.getCaptionKeyFrameAttrType(a);({int:o.setIntValAtTime,float:o.setFloatValAtTime,boolean:o.setBooleanValAtTime,string:o.setStringValAtTime,color:o.setColorValAtTime})[c].bind(o)(a,r,n)}this.updateCaptionKeyFrameData(t,{time:n,attribute:a,value:r}),s&&this.seekCurrentTimeline()},getCaptionValueAtTime:function(t,e){var i=e.time,n=e.attribute,a=this.timelineRaw[t.rawId];if(n===this.GL.KEYFRAME_CAPTION_X)return a.setCurrentKeyFrameTime(i),a.getCaptionTranslation().x;if(n===this.GL.KEYFRAME_CAPTION_Y)return a.setCurrentKeyFrameTime(i),a.getCaptionTranslation().y;var r=this.getCaptionKeyFrameAttrType(n);return{int:a.getIntValAtTime,float:a.getFloatValAtTime,boolean:a.getBooleanValAtTime,string:a.getStringValAtTime,color:a.getColorValAtTime}[r].bind(a)(n,i)},removeCaptionKeyFrameAtTime:function(t,e,i){var n=e.time,a=e.attribute,r=!(2<arguments.length&&void 0!==i)||i;this.timelineRaw[t.rawId].removeKeyframeAtTime(a,n);var s=t.keyFrames.findIndex(function(t){return t.time===n&&t.key===a});-1!==s&&t.keyFrames.splice(s,1),r&&this.seekCurrentTimeline()},removeCaptionAllKeyFrameAtTime:function(e,i){var n=this;this.getCaptionKeyFrameAttrKeys().forEach(function(t){n.removeCaptionKeyFrameAtTime(e,{time:i,attribute:t},!1)}),this.seekCurrentTimeline()},startSetCaptionKeyFrame:function(t,e){this.timelineRaw[t.rawId].setCurrentKeyFrameTime(e)}};e.default=s},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),C=n(i(24)),T=n(i(4)),x=n(i(33)),u=i(887),r={getStickerTracks:function(t){return t?this.timelineData.tripleTracks:this.timelineData.stickerTracks},createStickerTrack:function(e){var i,n,a,r,s=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<s.length&&void 0!==s[1]&&s[1],n=this.getStickerTracks(i),this.setLock(!0),a=this.timelineDataTemplate.StickerTrack,r=new a(e,i),n.splice(e,0,r),this.sortTracks(n),t.next=9,T.default.awrap(this._sortMaterialTrackZValue_(n));case 9:return this.setLock(!1),t.abrupt("return",r);case 11:case"end":return t.stop()}},null,this)},getStickerTrack:function(t,e){return 1<arguments.length&&void 0!==e&&e?this.timelineData.tripleTracks[t]:this.timelineData.stickerTracks[t]},removeStickerTrack:function(e){var i,n,a,r,s,o,c,u,l,d,f=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1<f.length&&void 0!==f[1]&&f[1],this.setLock(!0),n=this.getStickerTracks(i),a=n[e]){t.next=6;break}throw new Error("remove sticker track not found");case 6:s=!(r=!0),o=void 0,t.prev=9,c=a.clips[Symbol.iterator]();case 11:if(r=(u=c.next()).done){t.next=21;break}if(l=u.value,d=this.timelineRaw[l.rawId])return t.next=17,T.default.awrap(this.waitEngineCoolDown());t.next=18;break;case 17:this.timeline.removeAnimatedSticker(d);case 18:r=!0,t.next=11;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(9),s=!0,o=t.t0;case 27:t.prev=27,t.prev=28,r||null==c.return||c.return();case 30:if(t.prev=30,s)throw o;t.next=33;break;case 33:return t.finish(30);case 34:return t.finish(27);case 35:return t.next=37,T.default.awrap(this._removeMaterialTrack_(n,a));case 37:return t.next=39,T.default.awrap(this.changeTimelineDuration());case 39:this.setLock(!1);case 40:case"end":return t.stop()}},null,this,[[9,23,27,35],[28,,30,34]])},addStickerClip:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<y.length&&void 0!==y[2]?y[2]:{},a=3<y.length&&void 0!==y[3]&&y[3],r=4<y.length&&void 0!==y[4]&&y[4],s=5<y.length&&void 0!==y[5]&&y[5],this.setLock(!0),o=this.getStickerTracks(s),c=i.inPoint,u=i.outPoint,l=i.packageUrl,d=i.materialId,f=i.displayName,p=i.desc,l=l||"",d=d||n.id,f=f||n.displayName,p=p||n.desc,c<0&&(c=0),u<0&&(u=0),u<c&&(u=c+2*this.GL.SECOND_CONVERT),h=this.timelineDataTemplate.StickerClip,v=this.getTrackNewClipIndexByInPoint(e,c),n&&n.desc&&(p=n.desc),r||!p)return t.next=20,T.default.awrap(this.installDescAssetToFS(l));t.next=21;break;case 20:p=t.sent;case 21:return n=(0,x.default)(n)||{},(m=new h(v,p,s)).id=d||n.id,m.inPoint=c,m.outPoint=u,m.displayName=f||n.displayName||"",m.displayNamezhCN=f||n.displayName||"",g=this._materialTrackRefreshAndCoverClip_(e,m,s),_=g.coveredClips,w=g.removedCoveredClips,t.next=31,T.default.awrap(this.changeTimelineDuration());case 31:return t.next=33,T.default.awrap(this._clearStickerClipRaws_([m].concat((0,C.default)(_),(0,C.default)(w))));case 33:return b=s?999:o.length-e.index,t.next=36,T.default.awrap(this.changeEmptyTrackOutPoint(u));case 36:return t.next=38,T.default.awrap(this._resurfaceStickerClip_(m,n,b));case 38:return t.next=40,T.default.awrap(this._resurfaceStickerClips_(_,b));case 40:if(s)return t.next=43,T.default.awrap(this.changeStickerClipScale(m,.6));t.next=43;break;case 43:return t.next=45,T.default.awrap(this.waitEngineCoolDown());case 45:return this.seekCurrentTimeline(),a||this.setLock(!1),t.abrupt("return",m);case 48:case"end":return t.stop()}},null,this)},_resurfaceStickerClips_:function(e,i){var n,a,r,s,o,c;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:a=!(n=!0),r=void 0,t.prev=3,s=e[Symbol.iterator]();case 5:if(n=(o=s.next()).done){t.next=12;break}return c=o.value,t.next=9,T.default.awrap(this._resurfaceStickerClip_(c,c,i));case 9:n=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),a=!0,r=t.t0;case 18:t.prev=18,t.prev=19,n||null==s.return||s.return();case 21:if(t.prev=21,a)throw r;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},null,this,[[3,14,18,26],[19,,21,25]])},_resurfaceStickerClip_:function(e,i,n){var a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,x.default)(e)),a=e.outPoint-e.inPoint,this.unbindRaw(e),t.next=5,T.default.awrap(this.waitEngineCoolDown());case 5:return(r=this.timeline.addAnimatedSticker(e.inPoint,a,e.desc,!1,!1,"")).setZValue(n),this.bindRaw(e,r),e.inPoint=r.getInPoint(),e.outPoint=r.getOutPoint(),t.next=12,T.default.awrap(this._rebuildStickerClipPrototype_(e,i));case 12:case"end":return t.stop()}},null,this)},_clearStickerClipRaws_:function(e){var i,n,a,r,s,o;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(i=!0),a=void 0,t.prev=3,r=e[Symbol.iterator]();case 5:if(i=(s=r.next()).done){t.next=12;break}return o=s.value,t.next=9,T.default.awrap(this._clearStickerClipRaw_(o));case 9:i=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,a=t.t0;case 18:t.prev=18,t.prev=19,i||null==r.return||r.return();case 21:if(t.prev=21,n)throw a;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},null,this,[[3,14,18,26],[19,,21,25]])},_clearStickerClipRaw_:function(e){var i;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineRaw[e.rawId])return t.next=4,T.default.awrap(this.waitEngineCoolDown());t.next=6;break;case 4:this.timeline.removeAnimatedSticker(i),this.unbindRaw(e);case 6:case"end":return t.stop()}},null,this)},_rebuildStickerClipPrototype_:function(e,i){var n,a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,x.default)(i),t.next=3,T.default.awrap(this.waitEngineCoolDown());case 3:if(n=this.timelineDataTemplate.StickerClip,i instanceof n)return a=new window.NvsPointF(i.translationX,i.translationY),r=this.CToV(a.x,a.y),t.next=9,T.default.awrap(this.changeStickerClipTranslateXY(e,r,!0));t.next=19;break;case 9:return t.next=11,T.default.awrap(this.changeStickerClipRotation(e,i.rotation,!0));case 11:return t.next=13,T.default.awrap(this.changeStickerHorizontal(e,i.horizontalFlip,!0));case 13:return t.next=15,T.default.awrap(this.changeStickerVertical(e,i.verticalFlip));case 15:return t.next=17,T.default.awrap(this.changeStickerClipScale(e,i.scale));case 17:return t.next=19,T.default.awrap(this.setStickerClipKeyFramesByClip(e,i));case 19:case"end":return t.stop()}},null,this)},getStickerClipIndexInfo:function(t,e){var i=1<arguments.length&&void 0!==e&&e;return this.getClipIndexInfo(this.getStickerTracks(i),t)},getStickerClip:function(t,e,i){return this.getStickerTrack(t,i).clips[e]},removeStickerClip:function(e,i){var n,a,r,s,o=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(2<o.length&&void 0!==o[2])||o[2],a=3<o.length&&void 0!==o[3]&&o[3],r=4<o.length&&void 0!==o[4]&&o[4],this.setLock(!0),a||this.stopEditClip(),t.next=7,T.default.awrap(this.waitEngineCoolDown());case 7:if(s=this._removeMaterialClip_(e,i),this.timeline.removeAnimatedSticker(s),this.seekCurrentTimeline(),n)return t.next=13,T.default.awrap(this.changeTimelineDuration());t.next=13;break;case 13:if(!e.clips.length&&n)return t.next=16,T.default.awrap(this.removeStickerTrack(e.index,r));t.next=16;break;case 16:this.setLock(!1);case 17:case"end":return t.stop()}},null,this)},changeStickerClipPosition:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetTrackIndex,a=i.inPoint,r=2<h.length&&void 0!==h[2]&&h[2],a<0&&(a=0),s=this.getStickerTracks(r),o=this.getStickerClipIndexInfo(e,r)){t.next=7;break}throw new Error("change sticker clip not found");case 7:if(c=o.clipIndex,u=o.trackIndex,n===u&&a===e.inPoint)return t.abrupt("return",e);t.next=11;break;case 11:return this.setLock(!0),this.stopEditClip(),l=s[u],t.next=16,T.default.awrap(this.waitEngineCoolDown());case 16:return t.next=18,T.default.awrap(this.removeStickerClip(l,c,!1,r));case 18:return d=s[n],f=a-e.inPoint,e.inPoint=a,e.outPoint+=f,t.next=24,T.default.awrap(this.addStickerClip(d,{inPoint:e.inPoint,outPoint:e.outPoint,packageUrl:"",materialType:e.stickerType,materialId:e.id,desc:e.desc,displayName:e.displayName},e,!1,!1,r));case 24:if(p=t.sent,this.seekCurrentTimeline(),l.clips.length){t.next=29;break}return t.next=29,T.default.awrap(this.removeStickerTrack(l.index));case 29:return this.setLock(!1),t.abrupt("return",p);case 31:case"end":return t.stop()}},null,this)},changeStickerClipTrimIn:function(e,i){var n,a,r,s,o,c=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.inPoint,a=2<c.length&&void 0!==c[2]&&c[2],n<0&&(n=0),e.inPoint===n)return t.abrupt("return",e);t.next=5;break;case 5:return this.setLock(!0),this.stopEditClip(),r=this.getStickerTracks(a),s=this.getStickerClipIndexInfo(e,a),o=r[s.trackIndex],e.inPoint=n,this.setLock(!1),t.abrupt("return",this.addStickerClip(o,{inPoint:e.inPoint,outPoint:e.outPoint,packageUrl:"",materialType:e.stickerType,materialId:e.id,desc:e.desc,displayName:e.displayName},e,!1,!1,a));case 13:case"end":return t.stop()}},null,this)},changeStickerClipTrimOut:function(e,i){var n,a,r,s,o,c=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.outPoint,a=2<c.length&&void 0!==c[2]&&c[2],e.outPoint===n)return t.abrupt("return",e);t.next=4;break;case 4:return r=this.getStickerTracks(a),this.setLock(!0),this.stopEditClip(),s=this.getStickerClipIndexInfo(e,a),o=r[s.trackIndex],e.outPoint=n,this.setLock(!1),t.abrupt("return",this.addStickerClip(o,{inPoint:e.inPoint,outPoint:e.outPoint,packageUrl:"",materialType:e.stickerType,materialId:e.id,desc:e.desc,displayName:e.displayName},e,!1,!1,a));case 12:case"end":return t.stop()}},null,this)},_rebuildStickerTracksFromTimelineData_:function(e){var i,n,a,r,s,o=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=[],e[(i=1<o.length&&void 0!==o[1]&&o[1])?"tripleTracks":"stickerTracks"].forEach(function(t){t.clips&&t.clips.length&&n.push(t)}),this.sortTracks(n),e.stickerTracks=n,a=0;case 7:if(a<e.stickerTracks.length)return r=e.stickerTracks[a],t.next=11,T.default.awrap(this.createStickerTrack(a,i));t.next=20;break;case 11:return s=t.sent,t.next=14,T.default.awrap(this._rebuildStickerTrack_(s,r,i));case 14:if(s.show){t.next=17;break}return t.next=17,T.default.awrap(this._clearStickerClipRaws_(s.clips));case 17:a++,t.next=7;break;case 20:return t.next=22,T.default.awrap(this.changeTimelineDuration());case 22:case"end":return t.stop()}},null,this)},_rebuildStickerTrack_:function(e,i){var n,a,r,s,o,c,u,l=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=2<l.length&&void 0!==l[2]&&l[2],e.show=i.show,r=!(a=!0),s=void 0,t.prev=5,o=i.clips[Symbol.iterator]();case 7:if(a=(c=o.next()).done){t.next=14;break}return u=c.value,t.next=11,T.default.awrap(this.addStickerClip(e,{inPoint:u.inPoint,outPoint:u.outPoint,packageUrl:"",materialType:u.stickerType,materialId:u.id,desc:u.desc,displayName:u.displayName},u,!0,!1,n));case 11:a=!0,t.next=7;break;case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(5),r=!0,s=t.t0;case 20:t.prev=20,t.prev=21,a||null==o.return||o.return();case 23:if(t.prev=23,r)throw s;t.next=26;break;case 26:return t.finish(23);case 27:return t.finish(20);case 28:case"end":return t.stop()}},null,this,[[5,16,20,28],[21,,23,27]])},showStickerTrack:function(e,i){var n,a,r,s=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<s.length&&void 0!==s[2]&&s[2],(a=this.getStickerTrack(e,n)).show===i)return t.abrupt("return");t.next=4;break;case 4:return a.show=i,t.next=7,T.default.awrap(this.waitEngineCoolDown());case 7:if(i)return r=(0,x.default)(a),a.clips=[],t.next=12,T.default.awrap(this._rebuildStickerTrack_(a,r,n));t.next=14;break;case 12:t.next=16;break;case 14:return t.next=16,T.default.awrap(this._clearStickerClipRaws_(a.clips));case 16:return t.next=18,T.default.awrap(this.changeTimelineDuration());case 18:return t.next=20,T.default.awrap(this.waitEngineCoolDown());case 20:case"end":return t.stop()}},null,this)},_selectMonitorStickerClipEdit_:function(t){this.VM.$MonitorScreen.drawStickerClip(t)},changeStickerClipScale:function(e,i){var n;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.awrap(this.waitEngineCoolDown());case 2:(n=this.timelineRaw[e.rawId]).setScale(i),e.scale=n.getScale(),this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)},changeStickerClipTranslateXY:function(e,i,n){var a,r,s,o,c,u,l,d,f,p;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.awrap(this.waitEngineCoolDown());case 2:a=this.timelineRaw[e.rawId],i instanceof window.NvsPointF?(r=i,a.setTranslation(this.VToC(r.x,r.y)),s=a.getTranslation(),e.translationX=s.x,e.translationY=s.y):(o=this.VM.$MonitorScreen,c=o.getStickerClipPositionInfo(e),u=c.width,l=c.height,d=o.getTranslateTarget(u,l,i),f=d.targetCanonical,a.setTranslation(f),p=a.getTranslation(),e.translationX=p.x,e.translationY=p.y),n||this.seekCurrentTimeline();case 5:case"end":return t.stop()}},null,this)},changeStickerClipRotation:function(e,i,n){var a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.awrap(this.waitEngineCoolDown());case 2:if(a=this.timelineRaw[e.rawId],"number"!=typeof i){t.next=8;break}a.setRotationZ(i),e.rotation=a.getRotationZ(),t.next=29;break;case 8:t.t0=i,t.next="horizontal"===t.t0?11:"vertical"===t.t0?15:"to-right-90"===t.t0?19:"to-left-90"===t.t0?24:29;break;case 11:return r=a.getHorizontalFlip(),t.next=14,T.default.awrap(this.changeStickerHorizontal(e,!r));case 14:return t.abrupt("break",29);case 15:return r=a.getVerticalFlip(),t.next=18,T.default.awrap(this.changeStickerVertical(e,!r));case 18:return t.abrupt("break",29);case 19:return(r=a.getRotationZ()-90)<-360&&(r+=360),a.setRotationZ(r),e.rotation=r,t.abrupt("break",29);case 24:return 360<(r=a.getRotationZ()+90)&&(r-=360),a.setRotationZ(r),e.rotation=r,t.abrupt("break",29);case 29:n||this.seekCurrentTimeline();case 30:case"end":return t.stop()}},null,this)},changeStickerHorizontal:function(e,i){return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.awrap(this.waitEngineCoolDown());case 2:this.timelineRaw[e.rawId].setHorizontalFlip(i),e.horizontalFlip=i;case 5:case"end":return t.stop()}},null,this)},changeStickerVertical:function(e,i){return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.awrap(this.waitEngineCoolDown());case 2:this.timelineRaw[e.rawId].setVerticalFlip(i),e.verticalFlip=i;case 5:case"end":return t.stop()}},null,this)},getStickerKeyFrameAttrType:function(t){var e;return(e={},(0,a.default)(e,this.GL.KEYFRAME_STICKER_SCALE,"float"),(0,a.default)(e,this.GL.KEYFRAME_STICKER_X,"float"),(0,a.default)(e,this.GL.KEYFRAME_STICKER_Y,"float"),(0,a.default)(e,this.GL.KEYFRAME_STICKER_ROTATION,"float"),e)[t]},getStickerKeyFrameAttrKeys:function(){var t=this.GL;return[t.KEYFRAME_STICKER_SCALE,t.KEYFRAME_STICKER_X,t.KEYFRAME_STICKER_Y,t.KEYFRAME_STICKER_ROTATION]},removeStickerAllKeyFramesFromRaw:function(t){var e=this.getStickerKeyFrameAttrKeys(),i=this.timelineRaw[t.rawId];e.forEach(function(t){i.removeAllKeyframe(t)})},setStickerClipKeyFramesByClip:function(t,e){t!==e&&e instanceof u.StickerClip||(e=(0,x.default)(t)),this.removeStickerAllKeyFramesFromRaw(t);var i=e,n=i.keyFrames,a=i.keyFrameFromInPoint,r=i.keyFrameFromDuration,s=0;void 0!==a&&r&&r!==t.outPoint-t.inPoint&&a+r===t.outPoint&&(s=t.inPoint-a,e.keyFrameFromInPoint=null,e.keyFrameFromDuration=null,t.keyFrameFromInPoint=null,t.keyFrameFromDuration=null),t.keyFrames=[];for(var o=0;o<n.length;o++){var c=n[o];this.setStickerValueAtTime(t,{time:c.time-s,attribute:c.key,value:c.value},!1)}this.seekCurrentTimeline()},updateStickerKeyFrameData:function(t,e){var i=e.time,n=e.attribute,a=e.value,r=this.getStickerKeyFrameAttrType(n),s=t.keyFrames.find(function(t){return t.time===i&&t.type===r&&t.key===n});s?s.value=a:t.keyFrames.push({time:i,type:r,key:n,value:a})},recordStickerAllKeyFrameAtTime:function(i,n,t){var a=this,e=!(2<arguments.length&&void 0!==t)||t;this.getStickerKeyFrameAttrKeys().forEach(function(t){var e=a.getStickerValueAtTime(i,{time:n,attribute:t});a.setStickerValueAtTime(i,{time:n,attribute:t,value:e},!1)}),e&&this.seekCurrentTimeline()},setStickerValueAtTime:function(t,e,i){var n=e.time,a=e.attribute,r=e.value,s=!(2<arguments.length&&void 0!==i)||i,o=this.timelineRaw[t.rawId];if(a===this.GL.KEYFRAME_STICKER_X)o.setCurrentKeyFrameTime(n),o.setTranslation(new window.NvsPointF(r,o.getTranslation().y));else if(a===this.GL.KEYFRAME_STICKER_Y)o.setCurrentKeyFrameTime(n),o.setTranslation(new window.NvsPointF(o.getTranslation().x,r));else{var c=this.getStickerKeyFrameAttrType(a);({int:o.setIntValAtTime,float:o.setFloatValAtTime,boolean:o.setBooleanValAtTime,string:o.setStringValAtTime,color:o.setColorValAtTime})[c].bind(o)(a,r,n)}this.updateStickerKeyFrameData(t,{time:n,attribute:a,value:r}),s&&this.seekCurrentTimeline()},getStickerValueAtTime:function(t,e){var i=e.time,n=e.attribute,a=this.timelineRaw[t.rawId];if(n===this.GL.KEYFRAME_STICKER_X)return a.setCurrentKeyFrameTime(i),a.getTranslation().x;if(n===this.GL.KEYFRAME_STICKER_Y)return a.setCurrentKeyFrameTime(i),a.getTranslation().y;var r=this.getStickerKeyFrameAttrType(n);return{int:a.getIntValAtTime,float:a.getFloatValAtTime,boolean:a.getBooleanValAtTime,string:a.getStringValAtTime,color:a.getColorValAtTime}[r].bind(a)(n,i)},removeStickerKeyFrameAtTime:function(t,e,i){var n=e.time,a=e.attribute,r=!(2<arguments.length&&void 0!==i)||i;this.timelineRaw[t.rawId].removeKeyframeAtTime(a,n);var s=t.keyFrames.findIndex(function(t){return t.time===n&&t.key===a});-1!==s&&t.keyFrames.splice(s,1),r&&this.seekCurrentTimeline()},removeStickerAllKeyFrameAtTime:function(e,i){var n=this;this.getStickerKeyFrameAttrKeys().forEach(function(t){n.removeStickerKeyFrameAtTime(e,{time:i,attribute:t},!1)}),this.seekCurrentTimeline()},startSetStickerKeyFrame:function(t,e){this.timelineRaw[t.rawId].setCurrentKeyFrameTime(e)}};e.default=r},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var w=n(i(4)),a={addVideoClipTransition:function(e,i,n){var a,r,s,o,c,u,l,d,f,p,h,v,m,g,_=arguments;return w.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(a=3<_.length&&void 0!==_[3]&&_[3],this.setLock(!0),r=this.timelineData.videoTracks[e],s=this.timelineRaw[r.rawId],o=n.packageType,c=n.packageUrl,u=n.displayName,l=void 0===u?"":u,d=n.duration,f=void 0===d?1*this.GL.SECOND_CONVERT:d,p=n.desc){t.next=13;break}if(o===this.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE)return t.next=9,w.default.awrap(this.installDescAssetToFS(c));t.next=12;break;case 9:p=t.sent,t.next=13;break;case 12:p=c;case 13:return h=this.getVideoClipTransition(e,i),v=this.timelineDataTemplate.Transition,m=new v(o,i,p,l,l),t.next=18,w.default.awrap(this.waitEngineCoolDown());case 18:return g=o===this.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE?s.setPackagedTransition(i,p):s.setBuiltinTransition(i,p),o===this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN&&(m.isThemeTransition=!0),m.displayName=l,this.bindRaw(m,g),h&&h.isThemeTransition&&(this.unbindRaw(h),m.coveredThemeTransition=h),r.transitions.push(m),this._rebindVideoClipTransition_(),t.next=27,w.default.awrap(this.changeTransitionDuration(m,f));case 27:return t.next=29,w.default.awrap(this.waitEngineCoolDown());case 29:return this.seekCurrentTimeline(),a||this.setLock(!1),t.abrupt("return",m);case 32:case"end":return t.stop()}},null,this)},getVideoClipTransition:function(t,e){var i=this.timelineData.videoTracks[t],n=this.timelineRaw[i.rawId].getTransitionBySourceClipIndex(e),a=i.transitions.findIndex(function(t){return t.index===e});return n?i.transitions[a]:-1===a||i.show?null:i.transitions[a]},_reAddVideoTransitions_:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g;return w.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=i.index,t.next=3,w.default.awrap(this.waitEngineCoolDown());case 3:s=!(r=!(a=!1)),o=void 0,t.prev=7,c=i.clips[Symbol.iterator]();case 9:if(r=(u=c.next()).done){t.next=45;break}l=u.value,d=l.index,p=!(f=!0),h=void 0,t.prev=15,v=e[Symbol.iterator]();case 17:if(f=(m=v.next()).done){t.next=28;break}if((g=m.value).inPoint!==l.outPoint){t.next=25;break}if(this.getVideoClipTransition(n,d)){t.next=24;break}return a=!0,t.next=24,w.default.awrap(this.addVideoClipTransition(n,d,{packageType:g.packageType,packageUrl:"",displayName:g.displayName,desc:g.desc,duration:g.duration},!0));case 24:return t.abrupt("break",28);case 25:f=!0,t.next=17;break;case 28:t.next=34;break;case 30:t.prev=30,t.t0=t.catch(15),p=!0,h=t.t0;case 34:t.prev=34,t.prev=35,f||null==v.return||v.return();case 37:if(t.prev=37,p)throw h;t.next=40;break;case 40:return t.finish(37);case 41:return t.finish(34);case 42:r=!0,t.next=9;break;case 45:t.next=51;break;case 47:t.prev=47,t.t1=t.catch(7),s=!0,o=t.t1;case 51:t.prev=51,t.prev=52,r||null==c.return||c.return();case 54:if(t.prev=54,s)throw o;t.next=57;break;case 57:return t.finish(54);case 58:return t.finish(51);case 59:return a&&this._rebindVideoClipTransition_(),t.next=62,w.default.awrap(this.waitEngineCoolDown());case 62:case"end":return t.stop()}},null,this,[[7,47,51,59],[15,30,34,42],[35,,37,41],[52,,54,58]])},removeVideoClipTransition:function(e,i){var n,a,r,s;return w.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.stopEditClip(),n=this.timelineData.videoTracks[e],a=this.timelineRaw[n.rawId],t.next=5,w.default.awrap(this.waitEngineCoolDown());case 5:if(r=this.getVideoClipTransition(e,i),this.unbindRaw(r),r&&r.coveredThemeTransition)return s=r.coveredThemeTransition,t.next=11,w.default.awrap(this.addVideoClipTransition(e,i,{packageType:s.packageType,packageUrl:"",displayName:s.displayName,desc:s.desc,duration:s.duration}));t.next=13;break;case 11:t.next=15;break;case 13:a.setBuiltinTransition(i,""),this._rebindVideoClipTransition_();case 15:case"end":return t.stop()}},null,this)},removeAllVideoClipTransition:function(e){var i,n,a,r,s,o=this;return w.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.default.awrap(this.waitEngineCoolDown());case 2:for(i=this.timeline.videoTrackCount(),n=0;n<i;n++)for(a=this.timeline.getVideoTrackByIndex(n),r=a.getClipCount(),s=0;s<r;s++)a.getTransitionBySourceClipIndex(s)&&a.setBuiltinTransition(s,"");e.forEach(function(t){t.transitions.forEach(function(t){o.unbindRaw(t)}),t.transitions=[]});case 5:case"end":return t.stop()}},null,this)},_rebindVideoClipTransition_:function(){var o=this,t=this.timelineData.videoTracks;if(t.forEach(function(t){if(t.show){var e=t.clips,i=t.transitions,r=o.timelineRaw[t.rawId],s=[];i.forEach(function(n){var a=o.timelineRaw[n.rawId];e.forEach(function(t){var e=o.timelineRaw[t.rawId];t.index=e.getIndex();var i=r.getTransitionBySourceClipIndex(t.index);i&&a===i&&(n.index=t.index,n.inPoint=t.outPoint,s.push(n))})}),t.transitions=s}}),this.timelineData.theme){var s=this.timelineDataTemplate.Transition;t.forEach(function(a){if(a.show){var r=o.timelineRaw[a.rawId];a.clips.forEach(function(e){var t=r.getTransitionBySourceClipIndex(e.index);if(t&&0===t.getVideoTransitionType()&&!a.transitions.find(function(t){return t.index===e.index})){var i=t.getBuiltinVideoTransitionName(),n=new s(o.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN,e.index,i,"主题转场","主题转场");n.isThemeTransition=!0,n.inPoint=e.outPoint,n.duration=t.getVideoTransitionDuration(),o.bindRaw(n,t),a.transitions.push(n)}}),a.transitions.sort(function(t,e){return t.index-e.index})}})}return t},changeTransitionDuration:function(e,i){var n;return w.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.timelineRaw[e.rawId]){t.next=5;break}return t.abrupt("return");case 5:return n.setVideoTransitionDuration(i,0),e.duration=i,this.seekCurrentTimeline(),t.abrupt("return",e);case 9:case"end":return t.stop()}},null,this)}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var C=n(i(24)),T=n(i(4)),a=n(i(6)),x=n(i(33)),r=n(i(1560)),s=n(i(1561)),o=n(i(1562));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var u=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},r.default,{},s.default,{},o.default,{createTimelineVideoFxTrack:function(e){var i,n;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this.setLock(!0),i=this.timelineDataTemplate.TimelineVideoFxTrack,n=new i(e),this.timelineData.timelineVideoFxTracks.splice(e,0,n),this.sortTracks(this.timelineData.timelineVideoFxTracks),t.next=7,T.default.awrap(this._sortMaterialTrackZValue_(this.timelineData.timelineVideoFxTracks));case 7:return this.setLock(!1),t.abrupt("return",n);case 9:case"end":return t.stop()}},null,this)},getTimelineVideoFxTrack:function(t){return this.timelineData.timelineVideoFxTracks[t]},removeTimelineVideoFxTrack:function(e){var i,n,a,r,s,o,c,u;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setLock(!0),i=this.timelineData.timelineVideoFxTracks[e]){t.next=4;break}throw new Error("timeline video fx track not found");case 4:a=!(n=!0),r=void 0,t.prev=7,s=i.clips[Symbol.iterator]();case 9:if(n=(o=s.next()).done){t.next=19;break}if(c=o.value,u=this.timelineRaw[c.rawId])return t.next=15,T.default.awrap(this.waitEngineCoolDown());t.next=16;break;case 15:this.timeline.removeTimelineVideoFx(u);case 16:n=!0,t.next=9;break;case 19:t.next=25;break;case 21:t.prev=21,t.t0=t.catch(7),a=!0,r=t.t0;case 25:t.prev=25,t.prev=26,n||null==s.return||s.return();case 28:if(t.prev=28,a)throw r;t.next=31;break;case 31:return t.finish(28);case 32:return t.finish(25);case 33:return t.next=35,T.default.awrap(this._removeMaterialTrack_(this.timelineData.timelineVideoFxTracks,i));case 35:return t.next=37,T.default.awrap(this.changeTimelineDuration());case 37:this.setLock(!1);case 38:case"end":return t.stop()}},null,this,[[7,21,25,33],[26,,28,32]])},addTimelineVideoFxClip:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=2<y.length&&void 0!==y[2]?y[2]:{},a=3<y.length&&void 0!==y[3]&&y[3],r=4<y.length&&void 0!==y[4]&&y[4],this.setLock(!0),n=n||{},s=i.inPoint,o=i.outPoint,c=i.packageType,u=i.packageUrl,l=i.materialType,d=i.displayName,f=i.materialId,p=i.desc,c=c||n.packageType,u=u||"",l=l||n.clipSubType,d=d||n.displayName,f=f||n.id,p=p||n.desc,s<0&&(s=0),o<0&&(o=0),o<s&&(o=s+2*this.GL.SECOND_CONVERT),h=this.timelineDataTemplate.TimelineVideoFxClip,v=this.getTrackNewClipIndexByInPoint(e,s),n&&n.desc&&(p=n.desc),p&&!r){t.next=26;break}if(c===this.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE)return t.next=22,T.default.awrap(this.installDescAssetToFS(u));t.next=25;break;case 22:p=t.sent,t.next=26;break;case 25:p=c===this.GL.TIMELINE_VIDEO_FX_TYPE_LUT?"":u;case 26:if(n=(0,x.default)(n)||{},(m=new h(v,c,p)).clipSubType=l||n.clipSubType,m.inPoint=s,m.outPoint=o,m.displayName=d||n.displayName||"",m.id=p||f||n.desc,m.packageType===this.GL.TIMELINE_VIDEO_FX_TYPE_LUT)return g=u||n.lutFileUrl,t.next=37,T.default.awrap(this.installLutAssetToFS(g));t.next=40;break;case 37:m.lutFilePath=t.sent,m.lutFileUrl=g,m.biliLutFileId=f||n.id||n.biliLutFileId;case 40:return _=this._materialTrackRefreshAndCoverClip_(e,m),w=_.coveredClips,b=_.removedCoveredClips,t.next=43,T.default.awrap(this.changeTimelineDuration());case 43:return t.next=45,T.default.awrap(this._clearTimelineVideoFxClipRaws_([m].concat((0,C.default)(w),(0,C.default)(b))));case 45:return t.next=47,T.default.awrap(this.changeEmptyTrackOutPoint(o));case 47:return t.next=49,T.default.awrap(this._resurfaceTimelineVideoFxClip_(m,n));case 49:return t.next=51,T.default.awrap(this._resurfaceTimelineVideoFxClips_(w));case 51:return t.next=53,T.default.awrap(this.waitEngineCoolDown());case 53:return this.seekCurrentTimeline(),a||this.setLock(!1),t.abrupt("return",m);case 56:case"end":return t.stop()}},null,this)},_clearTimelineVideoFxClipRaws_:function(e){var i,n,a,r,s,o;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(i=!0),a=void 0,t.prev=3,r=e[Symbol.iterator]();case 5:if(i=(s=r.next()).done){t.next=12;break}return o=s.value,t.next=9,T.default.awrap(this._clearTimelineVideoFxClipRaw_(o));case 9:i=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,a=t.t0;case 18:t.prev=18,t.prev=19,i||null==r.return||r.return();case 21:if(t.prev=21,n)throw a;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},null,this,[[3,14,18,26],[19,,21,25]])},_clearTimelineVideoFxClipRaw_:function(e){var i;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineRaw[e.rawId])return t.next=4,T.default.awrap(this.waitEngineCoolDown());t.next=6;break;case 4:this.timeline.removeTimelineVideoFx(i),this.unbindRaw(e);case 6:case"end":return t.stop()}},null,this)},_resurfaceTimelineVideoFxClips_:function(e){var i,n,a,r,s,o;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:n=!(i=!0),a=void 0,t.prev=3,r=e[Symbol.iterator]();case 5:if(i=(s=r.next()).done){t.next=12;break}return o=s.value,t.next=9,T.default.awrap(this._resurfaceTimelineVideoFxClip_(o,o));case 9:i=!0,t.next=5;break;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(3),n=!0,a=t.t0;case 18:t.prev=18,t.prev=19,i||null==r.return||r.return();case 21:if(t.prev=21,n)throw a;t.next=24;break;case 24:return t.finish(21);case 25:return t.finish(18);case 26:case"end":return t.stop()}},null,this,[[3,14,18,26],[19,,21,25]])},_resurfaceTimelineVideoFxClip_:function(e,i){var n,a;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e===i&&(i=(0,x.default)(e)),n=e.outPoint-e.inPoint,this.unbindRaw(e),t.next=5,T.default.awrap(this.waitEngineCoolDown());case 5:if(a=null,e.packageType===this.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE?a=this.timeline.addPackagedTimelineVideoFx(e.inPoint,n,e.desc):e.packageType===this.GL.TIMELINE_VIDEO_FX_TYPE_LUT?(a=this.timeline.addBuiltinTimelineVideoFx(e.inPoint,n,"Lut")).setStringVal("Data File Path",e.lutFilePath):a=e.desc===this.GL.MASK_DESC?this.timeline.addBuiltinTimelineVideoFx(e.inPoint,n,this.GL.MOSAIC_DESC):this.timeline.addBuiltinTimelineVideoFx(e.inPoint,n,e.desc),a){t.next=9;break}throw new Error("invalid timeline video fx desc");case 9:if(a.setFilterIntensity(e.intensity),this.bindRaw(e,a),e.inPoint=a.getInPoint(),e.outPoint=a.getOutPoint(),e.desc===this.GL.MOSAIC_DESC)return t.next=16,T.default.awrap(this._initMosaic_(e,i));t.next=18;break;case 16:t.next=35;break;case 18:if(e.desc===this.GL.GAUSSIAN_BLUR_DESC)return t.next=21,T.default.awrap(this._initGaussianBlur_(e,i));t.next=23;break;case 21:t.next=35;break;case 23:if(e.desc===this.GL.MASK_DESC)return t.next=26,T.default.awrap(this._initMask_(e,i));t.next=28;break;case 26:t.next=35;break;case 28:if(this._isParticle_(e))return t.next=31,T.default.awrap(this._initParticle_(e,i));t.next=33;break;case 31:t.next=35;break;case 33:return t.next=35,T.default.awrap(this._initFilter_(e,i));case 35:case"end":return t.stop()}},null,this)},_setFxParam_:function(t,e){var i=t.find(function(t){return t.key===e.key});i?(i.type=e.type,i.value=e.value):t.push(e)},getTimelineVideoFxClipIndexInfo:function(t){return this.getClipIndexInfo(this.timelineData.timelineVideoFxTracks,t)},getTimelineVideoFxClip:function(t,e){return this.timelineData.timelineVideoFxTracks[t].clips[e]},removeTimelineVideoFxClip:function(e,i){var n,a,r=arguments;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=!(2<r.length&&void 0!==r[2])||r[2],3<r.length&&void 0!==r[3]&&r[3]||this.stopEditClip(),t.next=5,T.default.awrap(this.waitEngineCoolDown());case 5:if(a=this._removeMaterialClip_(e,i),this.timeline.removeTimelineVideoFx(a),this.seekCurrentTimeline(),n)return t.next=11,T.default.awrap(this.changeTimelineDuration());t.next=11;break;case 11:if(!e.clips.length&&n)return t.next=14,T.default.awrap(this.removeTimelineVideoFxTrack(e.index));t.next=14;break;case 14:case"end":return t.stop()}},null,this)},changeTimelineVideoFxClipPosition:function(e,i){var n,a,r,s,o,c,u,l,d;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.targetTrackIndex,(a=i.inPoint)<0&&(a=0),r=this.getTimelineVideoFxClipIndexInfo(e)){t.next=5;break}throw new Error("change timeline video fx clip not found");case 5:if(s=r.clipIndex,o=r.trackIndex,n===o&&a===e.inPoint)return t.abrupt("return",e);t.next=9;break;case 9:return this.setLock(!0),this.stopEditClip(),c=this.timelineData.timelineVideoFxTracks[o],t.next=14,T.default.awrap(this.waitEngineCoolDown());case 14:return t.next=16,T.default.awrap(this.removeTimelineVideoFxClip(c,s,!1));case 16:return u=this.timelineData.timelineVideoFxTracks[n],l=a-e.inPoint,e.inPoint=a,e.outPoint+=l,t.next=22,T.default.awrap(this.addTimelineVideoFxClip(u,{inPoint:e.inPoint,outPoint:e.outPoint,packageType:e.packageType,packageUrl:"",materialType:e.clipSubType,displayName:e.displayName,materialId:e.id,desc:e.desc},e));case 22:if(d=t.sent,this.seekCurrentTimeline(),c.clips.length){t.next=27;break}return t.next=27,T.default.awrap(this.removeTimelineVideoFxTrack(c.index));case 27:return this.setLock(!1),t.abrupt("return",d);case 29:case"end":return t.stop()}},null,this)},changeTimelineVideoFxClipTrimIn:function(e,i){var n,a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=i.inPoint)<0&&(n=0),e.inPoint===n)return t.abrupt("return",e);t.next=4;break;case 4:return this.stopEditClip(),a=this.getTimelineVideoFxClipIndexInfo(e),r=this.timelineData.timelineVideoFxTracks[a.trackIndex],e.inPoint=n,t.abrupt("return",this.addTimelineVideoFxClip(r,{inPoint:e.inPoint,outPoint:e.outPoint,packageType:e.packageType,packageUrl:"",materialType:e.clipSubType,displayName:e.displayName,materialId:e.id,desc:e.desc},e));case 9:case"end":return t.stop()}},null,this)},changeTimelineVideoFxClipTrimOut:function(e,i){var n,a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.outPoint,e.outPoint===n)return t.abrupt("return",e);t.next=3;break;case 3:return this.stopEditClip(),a=this.getTimelineVideoFxClipIndexInfo(e),r=this.timelineData.timelineVideoFxTracks[a.trackIndex],e.outPoint=n,t.abrupt("return",this.addTimelineVideoFxClip(r,{inPoint:e.inPoint,outPoint:e.outPoint,packageType:e.packageType,packageUrl:"",materialType:e.clipSubType,displayName:e.displayName,materialId:e.id,desc:e.desc},e));case 8:case"end":return t.stop()}},null,this)},_rebuildTimelineVideoFxTracksFromTimelineData_:function(e){var i,n,a,r;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:i=[],e.timelineVideoFxTracks.forEach(function(t){t.clips&&t.clips.length&&i.push(t)}),this.sortTracks(i),e.timelineVideoFxTracks=i,n=0;case 5:if(n<e.timelineVideoFxTracks.length)return a=e.timelineVideoFxTracks[n],t.next=9,T.default.awrap(this.createTimelineVideoFxTrack(n));t.next=18;break;case 9:return r=t.sent,t.next=12,T.default.awrap(this._rebuildTimelineVideoFxTrack_(r,a));case 12:if(r.show){t.next=15;break}return t.next=15,T.default.awrap(this._clearTimelineVideoFxClipRaws_(r.clips));case 15:n++,t.next=5;break;case 18:return t.next=20,T.default.awrap(this.changeTimelineDuration());case 20:case"end":return t.stop()}},null,this)},_rebuildTimelineVideoFxTrack_:function(e,i){var n,a,r,s,o,c;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:e.show=i.show,a=!(n=!0),r=void 0,t.prev=4,s=i.clips[Symbol.iterator]();case 6:if(n=(o=s.next()).done){t.next=13;break}return c=o.value,t.next=10,T.default.awrap(this.addTimelineVideoFxClip(e,{inPoint:c.inPoint,outPoint:c.outPoint,packageType:c.packageType,packageUrl:"",materialType:c.clipSubType,materialId:c.id,desc:c.desc,displayName:c.displayName},c,!0));case 10:n=!0,t.next=6;break;case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),a=!0,r=t.t0;case 19:t.prev=19,t.prev=20,n||null==s.return||s.return();case 22:if(t.prev=22,a)throw r;t.next=25;break;case 25:return t.finish(22);case 26:return t.finish(19);case 27:case"end":return t.stop()}},null,this,[[4,15,19,27],[20,,22,26]])},showTimelineVideoFxTrack:function(e,i){var n,a;return T.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if((n=this.timelineData.timelineVideoFxTracks[e]).show===i)return t.abrupt("return");t.next=3;break;case 3:return n.show=i,t.next=6,T.default.awrap(this.waitEngineCoolDown());case 6:if(i)return a=(0,x.default)(n),n.clips=[],t.next=11,T.default.awrap(this._rebuildTimelineVideoFxTrack_(n,a));t.next=13;break;case 11:t.next=15;break;case 13:return t.next=15,T.default.awrap(this._clearTimelineVideoFxClipRaws_(n.clips));case 15:return t.next=17,T.default.awrap(this.changeTimelineDuration());case 17:return t.next=19,T.default.awrap(this.waitEngineCoolDown());case 19:case"end":return t.stop()}},null,this)},_isRegionalTimelineVideoFx_:function(t){return t.desc===this.GL.MOSAIC_DESC||t.desc===this.GL.GAUSSIAN_BLUR_DESC||t.desc===this.GL.MASK_DESC},getTimelineVideoFxClipIntensity:function(t){var e=this.timelineRaw[t.rawId];if(t.desc!==this.GL.MOSAIC_DESC)return t.intensity=e.getFilterIntensity(),t.intensity;var i=this.timelineDataTemplate.FxParam,n=e.getFloatVal("Unit Size");return this._setFxParam_(t.params,new i("float","Unit Size",n)),n}});e.default=u},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var L=n(i(4)),o=n(i(33)),a={setEffectRegion:function(e){var i,n,a,r,s;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:return i=this.timelineRaw[e.rawId],n=this.getEffectRegion(e),a=n.value,r=[a.x1,a.y1,a.x2,a.y2,a.x3,a.y3,a.x4,a.y4],s=new window.NvsVectorFloat,r.forEach(function(t){s.push_back(t)}),e.isRegional=!0,i.setRegional(!0),i.setRegion(s),this.seekCurrentTimeline(),t.abrupt("return",n);case 13:case"end":return t.stop()}},null,this)},setEffectEllipseRegion:function(e){var i,n,a;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:return i=this.timelineRaw[e.rawId],n=this.getEffectEllipseRegion(e),e.isRegional=!0,i.setRegional(!0),a=new window.NvsPointF(n.value.centerX,n.value.centerY),i.setEllipseRegion(a,n.value.a,n.value.b,n.value.angle),e.regionalFeatherWidth=2,i.setRegionalFeatherWidth(e.regionalFeatherWidth),this.seekCurrentTimeline(),t.abrupt("return",n);case 12:case"end":return t.stop()}},null,this)},setVPointToRegion:function(t,e,i,n,a){var r=this.VToN(e.x,e.y),s=this.VToN(i.x,i.y),o=this.VToN(n.x,n.y),c=this.VToN(a.x,a.y),u=this.timelineDataTemplate.FxParam;this._setFxParam_(t.params,new u("object","region",{x1:r.x,y1:r.y,x2:s.x,y2:s.y,x3:o.x,y3:o.y,x4:c.x,y4:c.y}))},setVEllipseToEllipseRegion:function(t,e,i,n){var a=this.VToN(e.x,e.y),r=this.VToN(e.x-i,e.y-n),s=this.VToN(e.x+i,e.y+n),o=this.timelineDataTemplate.FxParam;this._setFxParam_(t.params,new o("object","ellipseRegion",{centerX:a.x,centerY:a.y,a:(s.x-r.x)/2,b:(s.y-r.y)/2,angle:0}))},getEffectVRegion:function(t){var e=this.getEffectRegion(t),i=e.value;return{vPoint1:this.NToV(i.x1,i.y1),vPoint2:this.NToV(i.x2,i.y2),vPoint3:this.NToV(i.x3,i.y3),vPoint4:this.NToV(i.x4,i.y4),region:e}},getEffectEllipseVRegion:function(t){var e=this.getEffectEllipseRegion(t),i=e.value,n=this.NToV(i.centerX,i.centerY),a=this.NToV(i.centerX-i.a,i.centerY-i.b);return{centerPoint:n,radiusX:n.x-a.x,radiusY:n.y-a.y,ellipseRegion:e}},getEffectRegion:function(t){var e=t.params.find(function(t){return"region"===t.key}),i=t.params.find(function(t){return"ellipseRegion"===t.key});if(i){t.params.splice(t.params.indexOf(i),1);var n=i.value;return e=new this.timelineDataTemplate.FxParam("object","region",{x1:n.centerX-n.a,y1:n.centerY-n.b,x2:n.centerX-n.a,y2:n.centerY+n.b,x3:n.centerX+n.a,y3:n.centerY+n.b,x4:n.centerX+n.a,y4:n.centerY-n.b}),t.params.push(e),e}return e||(e=this.getDefaultEffectRegion(),t.params.push(e),e)},getEffectEllipseRegion:function(t){var e=t.params.find(function(t){return"region"===t.key}),i=t.params.find(function(t){return"ellipseRegion"===t.key});return e?(i=this.getDefaultEffectEllipseRegion(e),t.params.splice(t.params.indexOf(e),1),t.params.push(i),i):i||(i=this.getDefaultEffectEllipseRegion(),t.params.push(i),i)},getDefaultEffectRegion:function(){var t=this.timelineDataTemplate.FxParam,e=this.VM.$MonitorScreen.getScreenInfo(),i=e.screenWidth,n=e.screenHeight,a=e.screenCenterX,r=e.screenCenterY,s=.25*i,o=.25*n,c=a-s,u=a-s,l=a+s,d=a+s,f=r-o,p=r+o,h=r+o,v=r-o,m=this.VToN(c,f),g=this.VToN(u,p),_=this.VToN(l,h),w=this.VToN(d,v);return new t("object","region",{x1:m.x,y1:m.y,x2:g.x,y2:g.y,x3:_.x,y3:_.y,x4:w.x,y4:w.y})},getDefaultEffectEllipseRegion:function(t){var e=this.timelineDataTemplate.FxParam,i=(t=t||this.getDefaultEffectRegion()).value;return new e("object","ellipseRegion",{centerX:i.x1+(i.x4-i.x1)/2,centerY:i.y1+(i.y3-i.y4)/2,a:(i.x4-i.x1)/2,b:(i.y3-i.y4)/2,angle:0})},changeMosaicStrength:function(e){var i,n,a,r,s=arguments;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<s.length&&void 0!==s[1]?s[1]:this.GL.DEFAULT_MOSAIC_STRENGTH,n=2<s.length&&void 0!==s[2]?s[2]:{notSync:!1},t.next=4,L.default.awrap(this.waitEngineCoolDown());case 4:return a=this.timelineDataTemplate.FxParam,(r=this.timelineRaw[e.rawId]).setFloatVal("Unit Size",i),this._setFxParam_(e.params,new a("float","Unit Size",i)),e.intensity=1,r.setFilterIntensity(1),n.notSync||this.seekCurrentTimeline(),t.abrupt("return",i);case 12:case"end":return t.stop()}},null,this)},changeGaussianBlurStrength:function(e){var i,n,a=arguments;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<a.length&&void 0!==a[1]?a[1]:this.GL.DEFAULT_GAUSSIAN_BLUR_STRENGTH,t.next=3,L.default.awrap(this.waitEngineCoolDown());case 3:return n=this.timelineRaw[e.rawId],e.intensity=i,n.setFilterIntensity(e.intensity),this.seekCurrentTimeline(),t.abrupt("return",i);case 8:case"end":return t.stop()}},null,this)},setMaskAttribute:function(e){var i;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:(i=this.timelineRaw[e.rawId]).setIgnoreBackground(e.isIgnoreBackground),i.setInverseRegion(e.isInverseRegion),this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)},changeMaskShape:function(e,i){return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=i,t.next="ellipse"===t.t0?3:(t.t0,8);break;case 3:return e.shape="ellipse",t.next=6,L.default.awrap(this.setEffectEllipseRegion(e));case 6:return this.drawMonitorEdit(),t.abrupt("return");case 8:return e.shape="rect",t.next=11,L.default.awrap(this.setEffectRegion(e));case 11:return this.drawMonitorEdit(),t.abrupt("return");case 13:case"end":return t.stop()}},null,this)},inverseMask:function(e,i){return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e.isInverseRegion=i,t.next=3,L.default.awrap(this.waitEngineCoolDown());case 3:return this.timelineRaw[e.rawId].setInverseRegion(e.isInverseRegion),this.seekCurrentTimeline(),t.abrupt("return",e);case 7:case"end":return t.stop()}},null,this)},_selectMonitorEffectTimelineVideoFxClipEdit_:function(t){this.VM.$MonitorScreen.drawRegionEffectClip(t)},_initMosaic_:function(e,i){var n,a,r,s;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,o.default)(i),t.next=3,L.default.awrap(this.waitEngineCoolDown());case 3:if(n=this.timelineDataTemplate.TimelineVideoFxClip,i instanceof n)return a=this.getEffectVRegion(i),this.setVPointToRegion(e,a.vPoint1,a.vPoint2,a.vPoint3,a.vPoint4),t.next=9,L.default.awrap(this.setEffectRegion(e));t.next=15;break;case 9:return r=i.params.find(function(t){return"Unit Size"===t.key}),s=r?r.value:this.GL.DEFAULT_MOSAIC_STRENGTH,t.next=13,L.default.awrap(this.changeMosaicStrength(e,s));case 13:t.next=19;break;case 15:return t.next=17,L.default.awrap(this.setEffectRegion(e));case 17:return t.next=19,L.default.awrap(this.changeMosaicStrength(e,this.GL.DEFAULT_MOSAIC_STRENGTH));case 19:this.seekCurrentTimeline();case 20:case"end":return t.stop()}},null,this)},_initGaussianBlur_:function(e,i){var n,a,r;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,o.default)(i),t.next=3,L.default.awrap(this.waitEngineCoolDown());case 3:if(n=this.timelineDataTemplate.TimelineVideoFxClip,i instanceof n)return a=this.getEffectVRegion(i),this.setVPointToRegion(e,a.vPoint1,a.vPoint2,a.vPoint3,a.vPoint4),t.next=9,L.default.awrap(this.setEffectRegion(e));t.next=14;break;case 9:return r=i.intensity,t.next=12,L.default.awrap(this.changeGaussianBlurStrength(e,r));case 12:t.next=18;break;case 14:return t.next=16,L.default.awrap(this.setEffectRegion(e));case 16:return t.next=18,L.default.awrap(this.changeGaussianBlurStrength(e,this.GL.DEFAULT_GAUSSIAN_BLUR_STRENGTH));case 18:case"end":return t.stop()}},null,this)},_initMask_:function(e,i){var n,a,r;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,o.default)(i),t.next=3,L.default.awrap(this.waitEngineCoolDown());case 3:return n=this.timelineDataTemplate.TimelineVideoFxClip,e.isIgnoreBackground=!0,t.next=7,L.default.awrap(this.changeMosaicStrength(e,0,{notSync:!0}));case 7:if(i instanceof n)return e.isInverseRegion=i.isInverseRegion,t.next=11,L.default.awrap(this.setMaskAttribute(e));t.next=26;break;case 11:if(i.params.find(function(t){return"ellipseRegion"===t.key})&&(i.shape="ellipse"),e.shape=i.shape,"rect"===i.shape)return a=this.getEffectVRegion(i),this.setVPointToRegion(e,a.vPoint1,a.vPoint2,a.vPoint3,a.vPoint4),t.next=19,L.default.awrap(this.setEffectRegion(e));t.next=19;break;case 19:if("ellipse"===i.shape)return r=this.getEffectEllipseVRegion(i),this.setVEllipseToEllipseRegion(e,r.centerPoint,r.radiusX,r.radiusY),t.next=24,L.default.awrap(this.setEffectEllipseRegion(e));t.next=24;break;case 24:t.next=31;break;case 26:return e.isInverseRegion=!1,t.next=29,L.default.awrap(this.setMaskAttribute(e));case 29:return t.next=31,L.default.awrap(this.setEffectRegion(e));case 31:case"end":return t.stop()}},null,this)},translateEffectTimelineVideoFxClip:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C,T,x,E,k,S,P,O,R,I,D,A;return L.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,L.default.awrap(this.waitEngineCoolDown());case 2:if(n=this.VM.$MonitorScreen,"ellipse"===e.shape)return a=this.getEffectEllipseVRegion(e),r=a.centerPoint,s=a.radiusX,o=a.radiusY,c=a.ellipseRegion,u=new window.NvsPointF(r.x-s,r.y-o),l=new window.NvsPointF(r.x-s,r.y+o),d=new window.NvsPointF(r.x+s,r.y+o),f=new window.NvsPointF(r.x+s,r.y-o),p=n._getRectClipPositionInfo_(u,l,d,f,0),h=p.width,v=p.height,m=p.oNDC,g=n.getTranslateTarget(h,v,i),_=g.targetNDC,w=new window.NvsPointF(_.x-m.x,_.y-m.y),c.value.centerX+=w.x,c.value.centerY+=w.y,t.next=16,L.default.awrap(this.setEffectEllipseRegion(e));t.next=18;break;case 16:t.next=33;break;case 18:return b=this.getEffectVRegion(e),y=b.vPoint1,C=b.vPoint2,T=b.vPoint3,x=b.vPoint4,E=b.region,k=n._getRectClipPositionInfo_(y,C,T,x,0),S=k.width,P=k.height,O=k.oNDC,R=n.getTranslateTarget(S,P,i),I=R.targetNDC,D=new window.NvsPointF(I.x-O.x,I.y-O.y),(A=E.value).x1+=D.x,A.x2+=D.x,A.x3+=D.x,A.x4+=D.x,A.y1+=D.y,A.y2+=D.y,A.y3+=D.y,A.y4+=D.y,t.next=33,L.default.awrap(this.setEffectRegion(e));case 33:case"end":return t.stop()}},null,this)}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=n(i(4)),a=n(i(33)),r={drawParticleCurve:function(t,e,i,n){var a=this.timelineDataTemplate.FxParam,r=this._getParticleOperator_(t),s=r.timelineVideoFxClipRaw,o=r.particleCtx,c=r.emitterList,u=this.VToC(e,i),l=s.mapPointFromCanonicalToParticleSystem(u);t.params.push(new a("object","curvePoint",{timeSec:n,x:l.x,y:l.y}));for(var d=0;d<c.length;d++)o.appendPositionToEmitterPositionCurve(c[d],n,l.x,l.y);this.seekCurrentTimeline()},changeParticleEmitterRateGain:function(e){var i,n,a,r,s,o,c=arguments;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<c.length&&void 0!==c[1]?c[1]:this.GL.DEFAULT_PARTICLE_RATE_GAIN,t.next=3,d.default.awrap(this.waitEngineCoolDown());case 3:for(n=this.timelineDataTemplate.FxParam,a=this._getParticleOperator_(e),r=a.particleCtx,s=a.emitterList,o=0;o<s.length;o++)r.setEmitterRateGain(s[o],i);this._setFxParam_(e.params,new n("float","rateGain",i));case 7:case"end":return t.stop()}},null,this)},changeParticleEmitterSizeGain:function(e){var i,n,a,r,s,o,c=arguments;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=1<c.length&&void 0!==c[1]?c[1]:this.GL.DEFAULT_PARTICLE_SIZE_GAIN,t.next=3,d.default.awrap(this.waitEngineCoolDown());case 3:for(n=this.timelineDataTemplate.FxParam,a=this._getParticleOperator_(e),r=a.particleCtx,s=a.emitterList,o=0;o<s.length;o++)r.setEmitterParticleSizeGain(s[o],i);this._setFxParam_(e.params,new n("float","sizeGain",i));case 7:case"end":return t.stop()}},null,this)},_getParticleOperator_:function(t){var e=this.timelineRaw[t.rawId],i=e.getParticleSystemContext(),n=this.packageManager.getVideoFxAssetPackageDescription(t.desc),a=new window.NvsAssetPackageParticleDescParser(n),r=a.getParticlePartitionEmitter(0);return{timelineVideoFxClipRaw:e,particleCtx:i,description:n,descriptionParser:a,emitterList:r}},_isParticle_:function(t){return t.clipSubType===this.GL.PARTICLE_FILTER||t.clipSubType===this.GL.PARTICLE_GRAFFITI},_initParticle_:function(e,i){var n;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,a.default)(i),t.next=3,d.default.awrap(this.waitEngineCoolDown());case 3:if(n=this.timelineDataTemplate.TimelineVideoFxClip,i instanceof n)return t.next=7,d.default.awrap(this.changeParticleEmitterRateGain(e,this.getParticleRateGainStrength(i)));t.next=14;break;case 7:return t.next=9,d.default.awrap(this.changeParticleEmitterSizeGain(e,this.getParticleSizeGainStrength(i)));case 9:if(e.clipSubType===this.GL.PARTICLE_GRAFFITI)return t.next=12,d.default.awrap(this._initParticleGraffitiCurvePoint_(e,i.params));t.next=12;break;case 12:t.next=18;break;case 14:return t.next=16,d.default.awrap(this.changeParticleEmitterRateGain(e,this.GL.DEFAULT_PARTICLE_RATE_GAIN));case 16:return t.next=18,d.default.awrap(this.changeParticleEmitterSizeGain(e,this.GL.DEFAULT_PARTICLE_SIZE_GAIN));case 18:case"end":return t.stop()}},null,this)},getParticleRateGainStrength:function(t){var e=t.params.find(function(t){return"rateGain"===t.key});return e?e.value:this.GL.DEFAULT_PARTICLE_RATE_GAIN},getParticleSizeGainStrength:function(t){var e=t.params.find(function(t){return"sizeGain"===t.key});return e?e.value:this.GL.DEFAULT_PARTICLE_SIZE_GAIN},startParticleGraffiti:function(e,i,n,a,r){var s;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return this._clearParticleGraffitiCurve_(e),e.inPoint=i,e.outPoint=n,(s=this.timelineRaw[e.rawId]).changeInPoint(i),s.changeOutPoint(n),t.next=8,d.default.awrap(this.waitEngineCoolDown());case 8:this.setParticleGraffitiCurvePoint(e,a,r,0);case 9:case"end":return t.stop()}},null,this)},stopParticleGraffiti:function(e,i){return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.awrap(this.waitEngineCoolDown());case 2:e.outPoint=i,this.timelineRaw[e.rawId].changeOutPoint(i),this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)},_clearParticleGraffitiCurve_:function(t){var e=[];t.params.forEach(function(t){"curvePoint"!==t.key&&e.push(t)}),t.params=e},setParticleGraffitiCurvePoint:function(t,e,i,n){var a=this._getParticleOperator_(t),r=a.particleCtx,s=a.emitterList,o=this.VToC(e,i),c=this.timelineDataTemplate.FxParam;t.params.push(new c("object","curvePoint",{timeSec:n,x:o.x,y:o.y}));for(var u=0;u<s.length;u++)r.appendPositionToEmitterPositionCurve(s[u],n,o.x,o.y);this.seekCurrentTimeline()},_initParticleGraffitiCurvePoint_:function(e,i){var n,a,r,s,o,c,u,l;return d.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.default.awrap(this.waitEngineCoolDown());case 2:for(n=i.filter(function(t){return"object"===t.type&&"curvePoint"===t.key}),r=!(a=!0),s=void 0,t.prev=6,o=n[Symbol.iterator]();!(a=(c=o.next()).done);a=!0)u=c.value,l=this.CToV(u.value.x,u.value.y),this.setParticleGraffitiCurvePoint(e,l.x,l.y,u.value.timeSec);t.next=14;break;case 10:t.prev=10,t.t0=t.catch(6),r=!0,s=t.t0;case 14:t.prev=14,t.prev=15,a||null==o.return||o.return();case 17:if(t.prev=17,r)throw s;t.next=20;break;case 20:return t.finish(17);case 21:return t.finish(14);case 22:this.seekCurrentTimeline();case 23:case"end":return t.stop()}},null,this,[[6,10,14,22],[15,,17,21]])}};e.default=r},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(33)),s={_initFilter_:function(e,i){var n;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=(0,r.default)(i),n=this.timelineDataTemplate.TimelineVideoFxClip,i instanceof n)return t.next=5,a.default.awrap(this.changeFilterStrength(e,i.intensity));t.next=5;break;case 5:case"end":return t.stop()}},null,this)},changeFilterStrength:function(e,i){return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(this.waitEngineCoolDown());case 2:this.timelineRaw[e.rawId].setFilterIntensity(i),e.intensity=i,this.seekCurrentTimeline();case 6:case"end":return t.stop()}},null,this)}};e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={_mediaNode_:null,_mediaStream_:null,_jsNode_:null,_audioFileWriter_:null,_audioRecordAssetName_:"",_audioRecordAssetPath_:"",_audioRecordProgressCount_:0,_audioRecordNeedWriteTime_:0,clearAudioRecord:function(){this._mediaNode_=null,this._jsNode_=null,this._audioFileWriter_=null,this._audioRecordAssetName_="",this._audioRecordAssetPath_="",this._audioRecordProgressCount_=0,this._audioRecordNeedWriteTime_=0},beginAudioRecord:function(t){this.clearAudioRecord(),this._mediaStream_=t;var e=new(window.AudioContext||window.webkitAudioContext);this._mediaNode_=e.createMediaStreamSource(t);var i=e.createScriptProcessor;i=i.bind(e),this._jsNode_=i(1024,2,2),this._jsNode_.connect(e.destination),this._jsNode_.onaudioprocess=this.onAudioProcess.bind(this),this._mediaNode_.connect(this._jsNode_),this._audioRecordAssetName_=this.generateAssetName("m4a"),this._audioRecordAssetPath_=this.GL.FS_AUDIO_RECORD_FOLDER+"/"+this._audioRecordAssetName_;var n=t.getAudioTracks()[0].getSettings();this._audioFileWriter_=new window.NvsAudioFileWriter(n.sampleRate,2,this._audioRecordAssetPath_)},onAudioProcess:function(t){if(this._audioRecordProgressCount_++,!(this._audioRecordProgressCount_<=16)){for(var e=t.inputBuffer,i=e.getChannelData(0),n=e.getChannelData(1),a=i.length+n.length,r=new Float32Array(a),s=0;s<i.length;s++){var o=2*s;r[o]=i[s],r[1+o]=n[s]}this._audioFileWriter_.writeAudioData(r)}},stopAudioRecord:function(){this._mediaStream_.getAudioTracks()[0].stop(),this._mediaNode_.disconnect(),this._jsNode_.disconnect(),this._audioFileWriter_.close();var t=this.readFromFS(this._audioRecordAssetPath_);return{blob:new File([new Uint8Array(t)],this._audioRecordAssetName_,{type:"audio/m4a"}),name:this._audioRecordAssetName_}}};e.default=n},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var S=n(i(4)),c=i(15),P=n(i(33)),a={addTheme:function(e,i){var n,a,r,s,o,c,u,l,d,f,p,h,v,m,g,_,w,b,y,C,T,x,E,k=arguments;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return n=2<k.length&&void 0!==k[2]?k[2]:{ignoreRedrawUI:!1},t.next=3,S.default.awrap(this.removeTheme({notSync:!0}));case 3:if(this.setLock(!0),a=e.materialId,r=e.packageUrl,s=e.displayName,o=e.desc,c=e.biliId,u=void 0===c?"":c,l=this.timelineDataTemplate.Theme,o){t.next=11;break}return t.next=9,S.default.awrap(this.installDescAssetToFS(r));case 9:o=t.sent,a=o;case 11:return d=new l({desc:o,id:a,biliId:u,displayName:s}),this.timelineData.theme=d,t.next=15,S.default.awrap(this.waitEngineCoolDown());case 15:return this.unbindRaw(d),t.next=18,S.default.awrap(this.changeThemeTrackOutPoint());case 18:return f=(0,P.default)(this.timelineData.videoTracks),t.next=21,S.default.awrap(this.removeAllVideoClipTransition(this.timelineData.videoTracks));case 21:return p=this.timeline.applyTheme(d.id),this.bindRaw(d,p),this.setThemeAttribute(d),t.next=26,S.default.awrap(this.setThemeCaptions(d));case 26:return this._rebindResourcesPositionByThemeTitleWidth_(this.timelineData.videoTracks,d.titleWidth||0),t.next=29,S.default.awrap(this.changeTimelineDuration({ignoreThemeTrack:!0}));case 29:if(!(i instanceof l)){t.next=50;break}if(i.titleCaption)return t.next=33,S.default.awrap(this.setThemeTitleCaptionText(i.titleCaption.text));t.next=39;break;case 33:return t.next=35,S.default.awrap(this.setThemeTitleCaptionFontSize(i.titleCaption.fontSize));case 35:return t.next=37,S.default.awrap(this.setThemeTitleCaptionFontFamily(i.titleCaption.bsFontId));case 37:return t.next=39,S.default.awrap(this.setThemeTitleCaptionColor(i.titleCaption.color));case 39:if(i.trailerCaption)return t.next=42,S.default.awrap(this.setThemeTrailerCaptionText(i.trailerCaption.text));t.next=48;break;case 42:return t.next=44,S.default.awrap(this.setThemeTrailerCaptionFontSize(i.trailerCaption.fontSize));case 44:return t.next=46,S.default.awrap(this.setThemeTrailerCaptionFontFamily(i.trailerCaption.bsFontId));case 46:return t.next=48,S.default.awrap(this.setThemeTrailerCaptionColor(i.trailerCaption.color));case 48:return t.next=50,S.default.awrap(this.changeThemeVolume(i.volumeValue));case 50:this._redrawTransitionByTheme_(),v=!(h=!0),m=void 0,t.prev=54,g=f[Symbol.iterator]();case 56:if(h=(_=g.next()).done){t.next=87;break}w=_.value,y=!(b=!0),C=void 0,t.prev=61,T=w.transitions[Symbol.iterator]();case 63:if(b=(x=T.next()).done){t.next=70;break}return E=x.value,t.next=67,S.default.awrap(this.addVideoClipTransition(w.index,E.index,{packageType:E.packageType,packageUrl:"",displayName:E.displayName,desc:E.desc,duration:E.duration}));case 67:b=!0,t.next=63;break;case 70:t.next=76;break;case 72:t.prev=72,t.t0=t.catch(61),y=!0,C=t.t0;case 76:t.prev=76,t.prev=77,b||null==T.return||T.return();case 79:if(t.prev=79,y)throw C;t.next=82;break;case 82:return t.finish(79);case 83:return t.finish(76);case 84:h=!0,t.next=56;break;case 87:t.next=93;break;case 89:t.prev=89,t.t1=t.catch(54),v=!0,m=t.t1;case 93:t.prev=93,t.prev=94,h||null==g.return||g.return();case 96:if(t.prev=96,v)throw m;t.next=99;break;case 99:return t.finish(96);case 100:return t.finish(93);case 101:return t.next=103,S.default.awrap(this.waitEngineCoolDown());case 103:return this.seekCurrentTimeline(),this.setLock(!1),n.ignoreRedrawUI||this.VM.$Bus.$emit(this.VM.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.timelineData),t.abrupt("return",d);case 107:case"end":return t.stop()}},null,this,[[54,89,93,101],[61,72,76,84],[77,,79,83],[94,,96,100]])},_redrawTransitionByTheme_:function(){var o=this,t=this.timelineData.videoTracks,c=this.timelineDataTemplate.Transition;t.forEach(function(r){if(r.show){r.transitions.forEach(function(t){return o.unbindRaw(t)}),r.transitions=[];var s=o.timelineRaw[r.rawId];r.clips.forEach(function(t){var e=s.getTransitionBySourceClipIndex(t.index);if(e){var i=e.getVideoTransitionType()?o.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE:o.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN;if(i===o.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE)return;var n=e.getBuiltinVideoTransitionName(),a=new c(i,t.index,n,"主题转场","主题转场");a.isThemeTransition=!0,a.inPoint=t.outPoint,a.duration=e.getVideoTransitionDuration(),o.bindRaw(a,e),r.transitions.push(a)}})}})},canAddTheme:function(){var t=this.timelineData.videoTracks;return!(!t.length||!t.some(function(t){return t.show}))},getThemeTitleAndTrailer:function(){for(var t=this.timeline.videoTrackCount(),e={title:null,trailer:null},i=0;i<t;i++){var n=this.timeline.getVideoTrackByIndex(i),a=n.getClipCount();if(n.isAvailableInTheme()&&0<a){var r=n.getClipByIndex(a-1);r.getRoleInTheme()===window.NvsClipRoleInThemeEnum.Trailer&&(e.trailer=r);var s=n.getClipByIndex(0);s.getRoleInTheme()===window.NvsClipRoleInThemeEnum.Title&&(e.title=s)}}return e},setThemeAttribute:function(t){if(!this.timelineRaw[t.rawId])throw new Error("set theme attribute raw null");for(var e=this.timeline.videoTrackCount(),i=0;i<e;i++){var n=this.timeline.getVideoTrackByIndex(i),a=n.getClipCount();if(n.isAvailableInTheme()&&0<a){var r=n.getClipByIndex(a-1);r.getRoleInTheme()===window.NvsClipRoleInThemeEnum.Trailer&&(t.trailerInPoint=r.getInPoint(),t.trailerOutPoint=r.getOutPoint(),t.trailerWidth=t.trailerOutPoint-t.trailerInPoint,t.trailerTrackIndex=i);var s=n.getClipByIndex(0);s.getRoleInTheme()===window.NvsClipRoleInThemeEnum.Title&&(t.titleInPoint=0,t.titleOutPoint=s.getOutPoint(),t.titleWidth=t.titleOutPoint-t.titleInPoint,t.titleTrackIndex=i)}}var o=this.timeline.getThemeMusicVolumeGain()||{};t.volumeValue=o.leftVolume||0;var c=this.timeline.getVideoTrackByIndex(1),u=c.getClipCount(),l=c.getClipByIndex(u-1).getOutPoint();this.VM.$store.commit("updateThemeDuration",l),t.duration=l},setThemeCaptions:function(e){var i,n,a,r,s,o=this;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.default.awrap(this.waitEngineCoolDown());case 2:for(i=this.timeline.getFirstCaption(),r=this.timelineDataTemplate.ThemeCaption;i;)i.getRoleInTheme()===window.NvsCaptionRoleInThemeEnum.Title&&(e.titleCaption=new r,this.bindRaw(e.titleCaption,i),n=i),i.getRoleInTheme()===window.NvsCaptionRoleInThemeEnum.Trailer&&(e.trailerCaption=new r,this.bindRaw(e.trailerCaption,i),a=i),i=this.timeline.getNextCaption(i);if(s=function(e,i){var n,a;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(o.VM.$store.state.captionFonts[0]){t.next=3;break}return t.next=3,S.default.awrap(o.VM.$store.dispatch("fetchCaptionFonts"));case 3:if(!(n=o.VM.$store.state.captionFonts[0]).fontFamily){t.next=8;break}a=n.fontFamily,t.next=11;break;case 8:return t.next=10,S.default.awrap(o.installFontFamily(n));case 10:a=t.sent;case 11:i.setFontFamily(a),e.fontFamily=a,e.bsFontId=n.bsFontId,e.text=i.getText()||"",o.getCaptionClipFontSize(e),e.color=(0,c.NvsColorToRGBA)(i.getTextColor())||"",e.defaultColor=e.color;case 18:case"end":return t.stop()}})},n)return t.next=9,S.default.awrap(s(e.titleCaption,n));t.next=9;break;case 9:if(a)return t.next=12,S.default.awrap(s(e.trailerCaption,a));t.next=12;break;case 12:case"end":return t.stop()}},null,this)},getTheme:function(){return this.timelineData.theme},getThemeTitleCaption:function(){return this.timelineData.theme?this.timelineData.theme.titleCaption:void 0},getThemeTrailerCaption:function(){return this.timelineData.theme?this.timelineData.theme.trailerCaption:void 0},setThemeTitleCaptionText:function(e){var i,n;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timelineData.theme){t.next=2;break}throw new Error("无主题");case 2:if(this.timelineData.theme.titleCaption){t.next=4;break}throw new Error("无片头字幕");case 4:if(i=this.timelineData.theme.titleCaption,n=this.timelineRaw[i.rawId]){t.next=8;break}throw new Error("无片头字幕");case 8:return t.next=10,S.default.awrap(this._setThemeCaptionText_(i,n,e));case 10:case"end":return t.stop()}},null,this)},setThemeTrailerCaptionText:function(e){var i,n;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.timelineData.theme){t.next=2;break}throw new Error("无主题");case 2:if(this.timelineData.theme.trailerCaption){t.next=4;break}throw new Error("无片尾字幕");case 4:if(i=this.timelineData.theme.trailerCaption,n=this.timelineRaw[i.rawId]){t.next=8;break}throw new Error("无片尾字幕");case 8:return t.next=10,S.default.awrap(this._setThemeCaptionText_(i,n,e));case 10:case"end":return t.stop()}},null,this)},_setThemeCaptionText_:function(e,i,n){return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.default.awrap(this.waitEngineCoolDown());case 2:return i.setText(n),e.text=n,t.next=6,S.default.awrap(this.waitEngineCoolDown());case 6:this.seekCurrentTimeline();case 7:case"end":return t.stop()}},null,this)},setThemeTitleCaptionFontFamily:function(e){var i;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineData.theme){t.next=3;break}throw new Error("无主题");case 3:if(i.titleCaption){t.next=5;break}throw new Error("无片头字幕");case 5:return t.next=7,S.default.awrap(this.setCaptionClipFontFamily(i.titleCaption,e));case 7:case"end":return t.stop()}},null,this)},setThemeTrailerCaptionFontFamily:function(e){var i;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineData.theme){t.next=3;break}throw new Error("无主题");case 3:if(i.trailerCaption){t.next=5;break}throw new Error("无片尾字幕");case 5:return t.next=7,S.default.awrap(this.setCaptionClipFontFamily(i.trailerCaption,e));case 7:case"end":return t.stop()}},null,this)},setThemeTitleCaptionFontSize:function(e){var i;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineData.theme){t.next=3;break}throw new Error("无主题");case 3:if(i.titleCaption){t.next=5;break}throw new Error("无片头字幕");case 5:return t.next=7,S.default.awrap(this.setCaptionClipFontSize(i.titleCaption,e));case 7:case"end":return t.stop()}},null,this)},setThemeTrailerCaptionFontSize:function(e){var i;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineData.theme){t.next=3;break}throw new Error("无主题");case 3:if(i.trailerCaption){t.next=5;break}throw new Error("无片尾字幕");case 5:return t.next=7,S.default.awrap(this.setCaptionClipFontSize(i.trailerCaption,e));case 7:case"end":return t.stop()}},null,this)},setThemeTitleCaptionColor:function(e){var i;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineData.theme){t.next=3;break}throw new Error("无主题");case 3:if(i.titleCaption){t.next=5;break}throw new Error("无片头字幕");case 5:return t.next=7,S.default.awrap(this.setCaptionClipColor(i.titleCaption,e));case 7:case"end":return t.stop()}},null,this)},setThemeTrailerCaptionColor:function(e){var i;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.timelineData.theme){t.next=3;break}throw new Error("无主题");case 3:if(i.trailerCaption){t.next=5;break}throw new Error("无片尾字幕");case 5:return t.next=7,S.default.awrap(this.setCaptionClipColor(i.trailerCaption,e));case 7:case"end":return t.stop()}},null,this)},changeThemeVolume:function(e){var i,n,a,r;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.default.awrap(this.waitEngineCoolDown());case 2:if(i=this.timelineData.theme){t.next=5;break}throw new Error("无主题");case 5:return i.volumeValue=e,this.timeline.setThemeMusicVolumeGain(e,e),n=this.getThemeTitleAndTrailer(),a=n.title,r=n.trailer,a&&a.setVolumeGain(e,e),r&&r.setVolumeGain(e,e),t.next=12,S.default.awrap(this.waitEngineCoolDown());case 12:this.seekCurrentTimeline();case 13:case"end":return t.stop()}},null,this)},removeTheme:function(){var e,i,n=arguments;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=0<n.length&&void 0!==n[0]?n[0]:{},this.setLock(!0),this.timelineData.theme)return this.VM.$store.commit("updateThemeDuration",0),t.next=6,S.default.awrap(this.waitEngineCoolDown());t.next=21;break;case 6:return this.timeline.removeCurrentTheme(),this.unbindRaw(this.timelineData.theme),this.unbindRaw(this.timelineData.theme.titleCaption),this.unbindRaw(this.timelineData.theme.trailerCaption),i=this.timelineData.theme,this.timelineData.theme=void 0,this._rebindResourcesPositionByThemeTitleWidth_(this.timelineData.videoTracks,-i.titleWidth),t.next=15,S.default.awrap(this._removeTransitionByTheme_());case 15:return t.next=17,S.default.awrap(this.changeTimelineDuration());case 17:return t.next=19,S.default.awrap(this.waitEngineCoolDown());case 19:e.notSync||this.VM.$Bus.$emit(this.VM.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.timelineData),this.seekCurrentTimeline();case 21:e.notSync||this.setLock(!1);case 22:case"end":return t.stop()}},null,this)},_removeTransitionByTheme_:function(){var n=this;return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.default.awrap(this.waitEngineCoolDown());case 2:this.timelineData.videoTracks.forEach(function(t){var e=t.transitions.filter(function(t){return t.isThemeTransition});if(e.forEach(function(t){n.unbindRaw(t)}),t.show){var i=n.timelineRaw[t.rawId];e.forEach(function(t){i.setBuiltinTransition(t.index,"")})}t.transitions=t.transitions.filter(function(t){return t.coveredThemeTransition=null,!t.isThemeTransition})});case 4:case"end":return t.stop()}},null,this)},_rebuildThemeFromTimelineData_:function(e){return S.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.theme)return t.next=3,S.default.awrap(this.addTheme({materialId:e.theme.id,packageUrl:"",displayName:e.theme.displayName,desc:e.theme.desc},e.theme,{ignoreRedrawUI:!0}));t.next=3;break;case 3:case"end":return t.stop()}},null,this)}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(4)),a={timeCountStart:function(t){var e=this;this.timeCount={};var i;t.forEach(function(t){e.timeCount[t]=0}),i="temp",t.forEach(function(r){var s=i+r;e[s]||(e[s]=e[r]),e[r]=function(){var e,i,n,a=arguments;return o.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return e=Date.now(),t.next=3,o.default.awrap(this[s].apply(this,Array.prototype.slice.call(a)));case 3:return i=t.sent,n=Date.now()-e,this.timeCount[r]+=n,t.abrupt("return",i);case 7:case"end":return t.stop()}},null,this)}.bind(e)})},timeCountEnd:function(){console.log(this.timeCount)}};e.default=a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(24)),s=a(i(4)),o=a(i(6)),c=a(i(1567)),u=a(i(1568)),l=a(i(1569)),d=a(i(1570)),f=a(i(1571)),p=a(i(1572)),h=a(i(1573)),v=a(i(1574)),m=a(i(1575)),g=a(i(1576)),_=a(i(1577)),w=n(i(69)),b=n(i(95));function y(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var C=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?y(Object(i),!0).forEach(function(t){(0,o.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):y(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({xmlStreamReader:null,xmlStreamWriter:null},c.default,{},u.default,{},l.default,{},d.default,{},f.default,{},p.default,{},v.default,{},m.default,{},g.default,{},_.default,{},h.default,{xmlCache:"",setXMLCache:function(t){this.xmlCache=t},getXMLCache:function(){return this.xmlCache},uploadXML:function(){var e,i,n,a;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.readFromFS(this.GL.XML_FS_PATH,{encoding:"utf8"})){t.next=3;break}return t.abrupt("return");case 3:return e=this.xmlClean(e),i=new Blob([e],{type:"text/xml"}),n=this.VM.$route.params.id,t.next=8,s.default.awrap(b.updateXML(n,i.size));case 8:return a=t.sent,t.next=11,s.default.awrap(new Promise(function(t,e){w.upload(i,a.upload_url).done(t).catch(e)}));case 11:return t.next=13,s.default.awrap(b.updateXMLCallback(n,a.version,i.size).catch(function(t){return"125206"===t.message?"":Promise.reject(t)}));case 13:return t.abrupt("return",e);case 14:case"end":return t.stop()}},null,this)},removeXMLInvalidChars:function(t,e){var i=!(1<arguments.length&&void 0!==e)||e,n=/((?:[\0-\x08\x0B\f\x0E-\x1F\uFFFD\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/g;return t=t.replace(n,""),i&&(n=new RegExp("([\\x7F-\\x84]|[\\x86-\\x9F]|[\\uFDD0-\\uFDEF]|(?:\\uD83F[\\uDFFE\\uDFFF])|(?:\\uD87F[\\uDFFE\\uDFFF])|(?:\\uD8BF[\\uDFFE\\uDFFF])|(?:\\uD8FF[\\uDFFE\\uDFFF])|(?:\\uD93F[\\uDFFE\\uDFFF])|(?:\\uD97F[\\uDFFE\\uDFFF])|(?:\\uD9BF[\\uDFFE\\uDFFF])|(?:\\uD9FF[\\uDFFE\\uDFFF])|(?:\\uDA3F[\\uDFFE\\uDFFF])|(?:\\uDA7F[\\uDFFE\\uDFFF])|(?:\\uDABF[\\uDFFE\\uDFFF])|(?:\\uDAFF[\\uDFFE\\uDFFF])|(?:\\uDB3F[\\uDFFE\\uDFFF])|(?:\\uDB7F[\\uDFFE\\uDFFF])|(?:\\uDBBF[\\uDFFE\\uDFFF])|(?:\\uDBFF[\\uDFFE\\uDFFF])(?:[\\0-\\t\\x0B\\f\\x0E-\\u2027\\u202A-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]))","g"),t=t.replace(n,"")),t},downloadXMLUrl:function(e){var i,n,a;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.VM.$store.state.projectXMLDownloadPath){t.next=3;break}return t.abrupt("return","");case 3:return t.next=5,s.default.awrap(this.VM.$axios.get(i));case 5:if((n=t.sent)&&n.data)return a=this.xmlClean(n.data),e&&this.writeToFS(this.GL.XML_FS_PATH,a),t.abrupt("return",n.data);t.next=12;break;case 12:throw new Error("编辑内容加载失败，请刷新重试~");case 13:case"end":return t.stop()}},null,this)},xmlClean:function(t){function e(t,e){var i=t.split(e),n=i.shift();return i=i.map(function(t){return t.slice(t.indexOf('"'))}),[n].concat((0,r.default)(i)).join(e)}return t=(t=e(t=e(t,'displayName="'),'displayNamezhCN="')).replace(/\/storyboardDir/g,"/usr/local/mshe/background"),t=this.removeXMLInvalidChars(t)},readTimelineDataFromXml:function(){var e,i,n,a,r;return s.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.xmlStreamReader=new window.NvsXmlStreamReader(this.GL.XML_FS_PATH),(e=this.xmlStreamReader).open()){t.next=4;break}return t.abrupt("return",null);case 4:i=null,n=this.timelineDataTemplate.TimelineData;case 6:if(e.atEnd()||e.hasError()){t.next=29;break}if(e.readNext(),e.isStartDocument())return t.abrupt("continue",6);t.next=10;break;case 10:if(!e.isStartElement()){t.next=27;break}if("timeline"!==e.name()){t.next=26;break}if(e.getAttributeValue("resWidth")){t.next=14;break}return t.abrupt("break",29);case 14:if(e.getAttributeValue("resHeight")){t.next=16;break}return t.abrupt("break",29);case 16:if(e.getAttributeValue("duration")){t.next=18;break}return t.abrupt("break",29);case 18:a=parseInt(e.getAttributeValue("resWidth")),r=parseInt(e.getAttributeValue("resHeight")),(i=new n(a,r)).duration=parseInt(e.getAttributeValue("duration")),i.videoSize=e.getAttributeValue("videoSize")+"",i.controlSpeed=parseFloat(e.getAttributeValue("controlSpeed")),t.next=27;break;case 26:"videoTracks"===e.name()?this.parseVideoTracks(i):"audioTracks"===e.name()?this.parseAudioTracks(i):"captionTracks"===e.name()?this.parseCaptionTracks(i):"musicLyricsTracks"===e.name()?this.parseMusicCaptionTracks(i):"stickerTracks"===e.name()?this.parseStickerTracks(i):"tripleTracks"===e.name()?this.parseTripleTracks(i):"timelineVideoFxTracks"===e.name()?this.parseTimelineVideoFxTracks(i):"theme"===e.name()&&this.parseTheme(i);case 27:t.next=6;break;case 29:if(e.hasError())throw new Error("编辑内容解析失败。");t.next=31;break;case 31:return e.close(),i.theme&&this._rebindResourcesPositionByThemeTitleWidth_(i.videoTracks,i.theme.titleWidth||0),t.abrupt("return",i);case 34:case"end":return t.stop()}},null,this)},writeTimelineDataToXml:function(t,e){var i=0<arguments.length&&void 0!==t&&t,n=1<arguments.length&&void 0!==e?e:1080;this.ensureTransitionAndPosition();var a=this.timelineData;this.xmlStreamWriter=new window.NvsXmlStreamWriter(this.GL.XML_FS_PATH);var r=this.xmlStreamWriter;if(!r.open())return"";var s=0;s+=a.timelineVideoFxTracks.length,s+=a.stickerTracks.length,s+=a.tripleTracks.length,s+=a.captionTracks.length,s+=a.audioTracks.length,s+=a.videoTracks.length,s+=a.musicCaptionTracks.length,r.writeStartDocument(),r.writeStartElement("timeline"),r.writeAttribute("resWidth",a.resWidth+""),r.writeAttribute("resHeight",a.resHeight+""),r.writeAttribute("duration",a.duration+""),r.writeAttribute("videoSize",a.videoSize+""),r.writeAttribute("controlSpeed",a.controlSpeed+""),r.writeAttribute("trackCount",s+""),r.writeAttribute("noCaptions",i+"");var o=0,c=!1;return a.videoTracks.forEach(function(t){t.show&&t.clips.forEach(function(t){if(c)o=0;else{var e=0;if(!(e=t.videoWidth>t.videoHeight?t.videoHeight:t.videoWidth))return c=!0,void(o=0);o<e&&(o=e)}})}),n=o?o<=480?480:o<=720?Math.abs(o-720)>Math.abs(o-480)?480:720:o<=1080&&Math.abs(o-1080)>Math.abs(o-720)?720:1080:1080,r.writeAttribute("sizeLevel",n+""),r.writeAttribute("fps",this.GL.FRAME+""),r.writeAttribute("videoBitrate","5000000"),r.writeAttribute("audioBitrate","64000"),this.writeBiliVideoData(),this.writeVideoTracks(),this.writeAudioTracks(),this.writeCaptionTracks(),this.writeMusicCaptionTracks(),this.writeStickerTracks(),this.writeTripleTracks(),this.writeTimelineVideoFxTracks(),this.writeTheme(),r.writeEndElement(),r.writeEndDocument(),r.close(),this.readFromFS(this.GL.XML_FS_PATH,{encoding:"utf8"})}});e.default=C},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(24)),a={writeResources:function(){var e=this,t=this.xmlStreamWriter,i=this.timelineData.videoTracks,n=this.timelineData.audioTracks;if(i.length||n.length){t.writeStartElement("resources");var a=[],r=[];i.slice().reverse().forEach(function(t){var e=t.clips;a.push.apply(a,(0,s.default)(e))}),n.slice().reverse().forEach(function(t){var e=t.clips;a.push.apply(a,(0,s.default)(e))}),a.forEach(function(t){-1===r.indexOf(t.id)&&(e.writeResourceItem(t),r.push(t.id))}),t.writeEndElement()}},writeResourceItem:function(t){var e=this.xmlStreamWriter;e.writeStartElement("resource"),e.writeAttribute("id",t.id+""),e.writeAttribute("path",t.path||""),e.writeEndElement()}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={writeVideoTracks:function(){var e=this,i=this.xmlStreamWriter,n=this.timelineData.videoTracks.slice();n.length&&(i.writeStartElement("videoTracks"),n.reverse().forEach(function(t){i.writeStartElement("videoTrack"),i.writeAttribute("index",n.length-1-t.index+""),i.writeAttribute("volume",t.volume+""),i.writeAttribute("show",t.show+""),e.writeVideoClips(t.clips),e.writeTransitions(t.transitions),i.writeEndElement()}),i.writeEndElement())},writeVideoClips:function(t){var e=this,i=this.xmlStreamWriter;t.length&&(i.writeStartElement("videos"),t.forEach(function(t){i.writeStartElement("video"),i.writeAttribute("id",t.id+""),i.writeAttribute("index",t.index+""),i.writeAttribute("type",t.videoType+""),i.writeAttribute("m3u8Path",t.m3u8Path+""),i.writeAttribute("m3u8Url",t.m3u8Url+""),i.writeAttribute("path",t.path||""),e.timelineData.theme?(i.writeAttribute("inPoint",t.inPoint-e.timelineData.theme.titleWidth+""),i.writeAttribute("outPoint",t.outPoint-e.timelineData.theme.titleWidth+"")):(i.writeAttribute("inPoint",t.inPoint+""),i.writeAttribute("outPoint",t.outPoint+"")),i.writeAttribute("trimIn",t.trimIn+""),i.writeAttribute("trimOut",t.trimOut+""),i.writeAttribute("orgDuration",t.orgDuration+""),i.writeAttribute("volume",t.volume+""),t.speedCurve?(i.writeAttribute("curvesSpeedString",t.speedCurve),i.writeAttribute("speedCurveName",t.speedCurveName),i.writeAttribute("keepAudioPitch","true"),i.writeAttribute("speed","1")):i.writeAttribute("speed",t.speed+""),i.writeAttribute("bgBlur",t.bgBlur+""),i.writeAttribute("fadeInDuration",t.fadeInDuration+""),i.writeAttribute("fadeOutDuration",t.fadeOutDuration+""),i.writeAttribute("extraRotation",t.extraRotation+""),i.writeAttribute("reverse",t.reverse+""),i.writeAttribute("noAudio",t.noAudio+""),i.writeAttribute("displayName",encodeURIComponent(t.displayName+"")),i.writeAttribute("videoWidth",t.videoWidth+""),i.writeAttribute("videoHeight",t.videoHeight+""),i.writeAttribute("enableMotion",t.enableMotion+""),i.writeAttribute("motionMode",t.motionMode+""),t.isFreezeVideo&&(i.writeAttribute("enableClipFreezeFrame",t.isFreezeVideo+""),i.writeAttribute("freezeFrameTrimPos",t.freezePoint+"")),e.writeVideoClipFxs(t.fxs,t),i.writeEndElement()}),i.writeEndElement())},parseVideoTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.VideoTrack,n=null;!e.isEndElement()||"videoTracks"!==e.name();)e.isStartElement()&&("videoTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")))).volume=parseFloat(e.getAttributeValue("volume")),n.show="true"===e.getAttributeValue("show"),t.videoTracks.push(n)),"videos"===e.name()&&n&&(this.parseVideoClips(n.clips),this.sortTrackClip(n)),"transitions"===e.name()&&n&&this.parseTransitions(n.transitions)),e.readNext();t.videoTracks.reverse(),this.sortTracks(t.videoTracks)},parseVideoClips:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.VideoClip,n=null;!e.isEndElement()||"videos"!==e.name();){if(e.isStartElement()){if("video"===e.name()){var a=parseInt(e.getAttributeValue("index")),r=parseInt(e.getAttributeValue("type")),s=e.getAttributeValue("path")+"";(n=new i({clipIndex:a,videoType:r,m3u8Path:e.getAttributeValue("m3u8Path")+"",m3u8Url:e.getAttributeValue("m3u8Url")+"",resourceUrl:s,duration:parseInt(e.getAttributeValue("orgDuration"))})).id=e.getAttributeValue("id")+"",n.inPoint=parseInt(e.getAttributeValue("inPoint")),n.outPoint=parseInt(e.getAttributeValue("outPoint")),n.trimIn=parseInt(e.getAttributeValue("trimIn")),n.trimOut=parseInt(e.getAttributeValue("trimOut")),n.volume=parseFloat(e.getAttributeValue("volume")),n.speed=parseFloat(e.getAttributeValue("speed")),n.speedCurve=e.getAttributeValue("curvesSpeedString")||"",n.speedCurveName=e.getAttributeValue("speedCurveName")||"",n.bgBlur="true"===e.getAttributeValue("bgBlur"),n.fadeInDuration=parseInt(e.getAttributeValue("fadeInDuration")),n.fadeOutDuration=parseInt(e.getAttributeValue("fadeOutDuration")),n.extraRotation=parseInt(e.getAttributeValue("extraRotation")),n.reverse="true"===e.getAttributeValue("reverse"),n.noAudio="true"===e.getAttributeValue("noAudio"),n.displayName=decodeURIComponent(e.getAttributeValue("displayName")||""),n.videoHeight=parseInt(e.getAttributeValue("videoHeight"))||0,n.videoWidth=parseInt(e.getAttributeValue("videoWidth"))||0,n.enableMotion="true"===e.getAttributeValue("enableMotion"),n.motionMode=parseInt(e.getAttributeValue("motionMode"))||0,n.isFreezeVideo="true"===e.getAttributeValue("enableClipFreezeFrame"),n.freezePoint=parseFloat(e.getAttributeValue("freezeFrameTrimPos"))||0,t.push(n)}"videoFxs"===e.name()&&n&&this.parseVideoClipFxs(n.fxs,n)}e.readNext()}}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={writeAudioTracks:function(){var e=this,i=this.timelineData.audioTracks.slice();if(i.length){var n=this.xmlStreamWriter;n.writeStartElement("audioTracks"),i.reverse().forEach(function(t){n.writeStartElement("audioTrack"),n.writeAttribute("index",i.length-1-t.index+""),n.writeAttribute("volume",t.volume+""),n.writeAttribute("show",t.show+""),e.writeAudioClips(t.clips),n.writeEndElement()}),n.writeEndElement()}},writeAudioClips:function(t){var e=this,i=this.xmlStreamWriter;t.length&&(i.writeStartElement("audios"),t.forEach(function(t){i.writeStartElement("audio"),i.writeAttribute("id",t.id+""),i.writeAttribute("index",t.index+""),i.writeAttribute("m3u8Path",t.m3u8Path+""),i.writeAttribute("m3u8Url",t.m3u8Url+""),i.writeAttribute("path",t.path||""),i.writeAttribute("inPoint",t.inPoint+""),i.writeAttribute("outPoint",t.outPoint+""),i.writeAttribute("trimIn",t.trimIn+""),i.writeAttribute("trimOut",t.trimOut+""),i.writeAttribute("orgDuration",t.orgDuration+""),i.writeAttribute("volume",t.volume+""),i.writeAttribute("speed",t.speed+""),i.writeAttribute("fadeInDuration",t.fadeInDuration+""),i.writeAttribute("fadeOutDuration",t.fadeOutDuration+""),i.writeAttribute("title",t.title+""),i.writeAttribute("bsIsRecorder",t.isRecorder+""),i.writeAttribute("displayName",encodeURIComponent(t.displayName||"")),e.writeAudioClipFxs(t.fxs),e.writeRhythm(t.id),i.writeEndElement()}),i.writeEndElement())},parseAudioTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.AudioTrack,n=null;!e.isEndElement()||"audioTracks"!==e.name();)e.isStartElement()&&("audioTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")))).volume=parseFloat(e.getAttributeValue("volume")),n.show="true"===e.getAttributeValue("show"),t.audioTracks.push(n)),"audios"===e.name()&&n&&(this.parseAudioClips(n.clips),this.sortTrackClip(n))),e.readNext();t.audioTracks.reverse(),this.sortTracks(t.audioTracks)},parseAudioClips:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.AudioClip,n=null;!e.isEndElement()||"audios"!==e.name();){if(e.isStartElement()){if("audio"===e.name()){var a=parseInt(e.getAttributeValue("index")),r=e.getAttributeValue("path")+"";(n=new i({clipIndex:a,m3u8Path:e.getAttributeValue("m3u8Path")+"",m3u8Url:e.getAttributeValue("m3u8Url")+"",resourceUrl:r,duration:parseInt(e.getAttributeValue("orgDuration")),isRecorder:"true"===e.getAttributeValue("bsIsRecorder")})).id=e.getAttributeValue("id")+"",n.inPoint=parseInt(e.getAttributeValue("inPoint")),n.outPoint=parseInt(e.getAttributeValue("outPoint")),n.trimIn=parseInt(e.getAttributeValue("trimIn")),n.trimOut=parseInt(e.getAttributeValue("trimOut")),n.volume=parseFloat(e.getAttributeValue("volume")),n.speed=parseFloat(e.getAttributeValue("speed")),n.fadeInDuration=parseInt(e.getAttributeValue("fadeInDuration")),n.fadeOutDuration=parseInt(e.getAttributeValue("fadeOutDuration")),n.title=e.getAttributeValue("title")+"",n.displayName=decodeURIComponent(e.getAttributeValue("displayName")+""),this.parseRhythm(e.getAttributeValue("rhythm"),n.id),t.push(n)}"audioFxs"===e.name()&&this.parseAudioClipFxs(n.fxs)}e.readNext()}},writeRhythm:function(e){var t=this.xmlStreamWriter,i=this.VM.$store.state.rhythmWaveData,n=i.findIndex(function(t){return t.resource_id===e});-1<n&&t.writeAttribute("rhythm",i[n].data+"")},parseRhythm:function(t,e){if(t){var i=t.split(",").map(function(t){return+t});this.VM.$store.commit("setRhythmWaveData",{data:i,resource_id:e})}}};e.default=n},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(33)),a=i(15),r={writeCaptionTracks:function(){var i=this,n=this.xmlStreamWriter,a=this.timelineDataTemplate.CaptionClip,r=[];this.timelineData.captionTracks.forEach(function(t){var e=t.clips.filter(function(t){return t instanceof a}),i=(0,s.default)(t);i.clips=e,r.push(i)}),r.length&&(n.writeStartElement("captionTracks"),r.reverse().forEach(function(t){var e=r.length-1-t.index;n.writeStartElement("captionTrack"),n.writeAttribute("index",e+""),n.writeAttribute("show",t.show+""),i.writeCaptionClips(t.clips,1+e),n.writeEndElement()}),n.writeEndElement())},writeCaptionClips:function(t,e){var i=this,n=this.xmlStreamWriter;t.length&&t.forEach(function(t){n.writeStartElement("caption"),n.writeAttribute("id",t.styleDesc+""),n.writeAttribute("index",t.index+""),n.writeAttribute("type","general"),n.writeAttribute("captionType",t.captionType+""),n.writeAttribute("text",t.text+""),n.writeAttribute("inPoint",t.inPoint+""),n.writeAttribute("duration",t.outPoint-t.inPoint+""),n.writeAttribute("scaleX",t.scaleX+""),n.writeAttribute("scaleY",t.scaleY+""),n.writeAttribute("rotation",t.rotation+""),n.writeAttribute("translationX",t.translationX+""),n.writeAttribute("translationY",t.translationY+""),n.writeAttribute("zValue",e+""),n.writeAttribute("font",t.fontFamily+""),n.writeAttribute("bsFontId",t.bsFontId||""),n.writeAttribute("fontSizeRatio",t.fontSize/i.timeline.getVideoRes().imageHeight+""),n.writeAttribute("fontSize",t.fontSize+""),"#0000000"!==(0,a.RGBAToHex)(t.color)&&n.writeAttribute("color",(0,a.RGBAToHex)(t.color)+""),n.writeAttribute("bold",t.bold+""),n.writeAttribute("italic",t.italic+""),n.writeAttribute("align",t.align+""),n.writeAttribute("shadow",t.shadow+""),n.writeAttribute("outline",t.outline+""),n.writeAttribute("outlineColor",(0,a.RGBAToHex)(t.outlineColor)+""),n.writeAttribute("outlineWidth",t.outlineWidth+""),n.writeAttribute("styleId",t.styleDesc+""),n.writeAttribute("displayName",encodeURIComponent(t.displayName||"")),n.writeAttribute("rendererId",t.rendererId||""),i.writeKeyFrames(t.keyFrames),n.writeEndElement()})},parseCaptionTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.CaptionTrack,n=null;!e.isEndElement()||"captionTracks"!==e.name();)e.isStartElement()&&("captionTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")),!1)).show="true"===e.getAttributeValue("show"),t.captionTracks.push(n)),"caption"===e.name()&&n&&(this.parseCaptionClips(n.clips),this.sortTrackClip(n))),e.readNext();t.captionTracks.reverse(),this.sortTracks(t.captionTracks)},parseCaptionClips:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.CaptionClip,n=null;!e.isEndElement()||"caption"!==e.name();){if(e.isStartElement()){if("caption"===e.name())(n=new i(parseInt(e.getAttributeValue("index")),e.getAttributeValue("text")+"","general",e.getAttributeValue("styleId")+"")).id=e.getAttributeValue("styleId")+"",n.captionType=parseInt(e.getAttributeValue("captionType")),n.inPoint=parseInt(e.getAttributeValue("inPoint")),n.inPoint<0&&(n.inPoint=0),n.outPoint=n.inPoint+parseInt(e.getAttributeValue("duration")),n.scaleX=parseFloat(e.getAttributeValue("scaleX")),n.scaleY=parseFloat(e.getAttributeValue("scaleY")),n.rotation=parseFloat(e.getAttributeValue("rotation")),n.translationX=parseFloat(e.getAttributeValue("translationX")),n.translationY=parseFloat(e.getAttributeValue("translationY")),n.fontFamily=e.getAttributeValue("font")+"",n.bsFontId=(e.getAttributeValue("bsFontId")||"")+"",n.rendererId=(e.getAttributeValue("rendererId")||"")+"",n.fontSize=parseFloat(e.getAttributeValue("fontSize")),n.color=e.getAttributeValue("color")?(0,a.ARGBHexToRGBA)(e.getAttributeValue("color")+""):"rgba(0, 0, 0, 0)",n.bold="true"===e.getAttributeValue("bold"),n.italic="true"===e.getAttributeValue("italic"),n.shadow="true"===e.getAttributeValue("shadow"),n.align=e.getAttributeValue("align"),n.outline="true"===e.getAttributeValue("outline"),n.outlineColor=(0,a.ARGBHexToRGBA)(e.getAttributeValue("outlineColor")+""),n.outlineWidth=parseFloat(e.getAttributeValue("outlineWidth")),n.displayName=decodeURIComponent(e.getAttributeValue("displayName")||""),t.push(n);"keyFrames"===e.name()&&n&&this.parseKeyFrames(n.keyFrames)}e.readNext()}}};e.default=r},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(33)),a=i(15),r={writeMusicCaptionTracks:function(){var i=this,n=this.xmlStreamWriter,a=this.timelineDataTemplate.CaptionClip,r=[];this.timelineData.musicCaptionTracks.forEach(function(t){var e=t.clips.filter(function(t){return t instanceof a}),i=(0,s.default)(t);i.clips=e,r.push(i)}),r.length&&(n.writeStartElement("musicLyricsTracks"),r.reverse().forEach(function(t){var e=r.length-1-t.index;n.writeStartElement("musicLyricsTrack"),n.writeAttribute("index",e+""),n.writeAttribute("show",t.show+""),i.writeMusicCaptionClips(t.clips,-1),n.writeEndElement()}),n.writeEndElement())},writeMusicCaptionClips:function(t,e){var i=this,n=this.xmlStreamWriter;t.length&&t.forEach(function(t){n.writeStartElement("musicLyric"),n.writeAttribute("id",t.styleDesc+""),n.writeAttribute("index",t.index+""),n.writeAttribute("type","general"),n.writeAttribute("captionType",t.captionType+""),n.writeAttribute("text",t.text+""),n.writeAttribute("inPoint",t.inPoint+""),n.writeAttribute("duration",t.outPoint-t.inPoint+""),n.writeAttribute("scaleX",t.scaleX+""),n.writeAttribute("scaleY",t.scaleY+""),n.writeAttribute("rotation",t.rotation+""),n.writeAttribute("translationX",t.translationX+""),n.writeAttribute("translationY",t.translationY+""),n.writeAttribute("zValue",e+""),n.writeAttribute("font",t.fontFamily+""),n.writeAttribute("bsFontId",t.bsFontId||""),n.writeAttribute("rendererId",t.rendererId||""),n.writeAttribute("fontSizeRatio",t.fontSize/i.timeline.getVideoRes().imageHeight+""),n.writeAttribute("fontSize",t.fontSize+""),"#0000000"!==(0,a.RGBAToHex)(t.color)&&n.writeAttribute("color",(0,a.RGBAToHex)(t.color)+""),n.writeAttribute("bold",t.bold+""),n.writeAttribute("italic",t.italic+""),n.writeAttribute("align",t.align+""),n.writeAttribute("shadow",t.shadow+""),n.writeAttribute("outline",t.outline+""),n.writeAttribute("outlineColor",(0,a.RGBAToHex)(t.outlineColor)+""),n.writeAttribute("outlineWidth",t.outlineWidth+""),n.writeAttribute("styleId",t.styleDesc+""),n.writeAttribute("displayName",encodeURIComponent(t.displayName||"")),n.writeEndElement()})},parseMusicCaptionTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.CaptionTrack,n=null;!e.isEndElement()||"musicLyricsTracks"!==e.name();)e.isStartElement()&&("musicLyricsTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")),!1)).show="true"===e.getAttributeValue("show"),t.musicCaptionTracks.push(n)),"musicLyric"===e.name()&&n&&(this.parseMusicCaptionClips(n.clips),this.sortTrackClip(n))),e.readNext();t.musicCaptionTracks.reverse(),this.sortTracks(t.musicCaptionTracks)},parseMusicCaptionClips:function(t){var e=this.xmlStreamReader,i=new this.timelineDataTemplate.CaptionClip(parseInt(e.getAttributeValue("index")),e.getAttributeValue("text")+"","general",e.getAttributeValue("styleId")+"",!0);i.id=e.getAttributeValue("styleId")+"",i.captionType=parseInt(e.getAttributeValue("captionType")),i.inPoint=parseInt(e.getAttributeValue("inPoint")),i.inPoint<0&&(i.inPoint=0),i.outPoint=i.inPoint+parseInt(e.getAttributeValue("duration")),i.scaleX=parseFloat(e.getAttributeValue("scaleX")),i.scaleY=parseFloat(e.getAttributeValue("scaleY")),i.rotation=parseFloat(e.getAttributeValue("rotation")),i.translationX=parseFloat(e.getAttributeValue("translationX")),i.translationY=parseFloat(e.getAttributeValue("translationY")),i.fontFamily=e.getAttributeValue("font")+"",i.bsFontId=(e.getAttributeValue("bsFontId")||"")+"",i.rendererId=(e.getAttributeValue("rendererId")||"")+"",i.fontSize=parseFloat(e.getAttributeValue("fontSize")),i.color=e.getAttributeValue("color")?(0,a.ARGBHexToRGBA)(e.getAttributeValue("color")+""):"rgba(0, 0, 0, 0)",i.bold="true"===e.getAttributeValue("bold"),i.italic="true"===e.getAttributeValue("italic"),i.shadow="true"===e.getAttributeValue("shadow"),i.align=e.getAttributeValue("align"),i.outline="true"===e.getAttributeValue("outline"),i.outlineColor=(0,a.ARGBHexToRGBA)(e.getAttributeValue("outlineColor")+""),i.outlineWidth=parseFloat(e.getAttributeValue("outlineWidth")),i.displayName=decodeURIComponent(e.getAttributeValue("displayName")||""),t.push(i)}};e.default=r},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={writeStickerTracks:function(){var i=this,n=this.xmlStreamWriter,a=this.timelineData.stickerTracks.slice();a.length&&(n.writeStartElement("stickerTracks"),a.reverse().forEach(function(t){var e=a.length-1-t.index;n.writeStartElement("stickerTrack"),n.writeAttribute("index",e+""),n.writeAttribute("show",t.show+""),i.writeStickerClips(t.clips,1+e),n.writeEndElement()}),n.writeEndElement())},writeStickerClips:function(t,e){var i=this,n=this.xmlStreamWriter;t.length&&t.forEach(function(t){n.writeStartElement("sticker"),n.writeAttribute("index",t.index+""),n.writeAttribute("type","general"),n.writeAttribute("inPoint",t.inPoint+""),n.writeAttribute("duration",t.outPoint-t.inPoint+""),n.writeAttribute("scale",t.scale+""),n.writeAttribute("rotation",t.rotation+""),n.writeAttribute("translationX",t.translationX+""),n.writeAttribute("translationY",t.translationY+""),n.writeAttribute("horizontalFlip",t.horizontalFlip+""),n.writeAttribute("verticalFlip",t.verticalFlip+""),n.writeAttribute("zValue",e+""),n.writeAttribute("id",t.desc+""),n.writeAttribute("displayName",encodeURIComponent(t.displayName+"")),n.writeAttribute("displayNamezhCN",encodeURIComponent(t.displayNamezhCN+"")),i.writeKeyFrames(t.keyFrames),n.writeEndElement()})},writeKeyFrames:function(t){if(t&&t.length){var r=this.xmlStreamWriter;r.writeStartElement("keyFrames"),t.forEach(function(t){var e=t.key,i=t.time,n=t.type,a=t.value;r.writeStartElement("keyFrame"),r.writeAttribute("time",i+""),r.writeAttribute("type",n+""),r.writeAttribute("key",e+""),r.writeAttribute("value",a+""),r.writeEndElement("keyFrame")}),r.writeEndElement("keyFrames")}},parseStickerTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.StickerTrack,n=null;!e.isEndElement()||"stickerTracks"!==e.name();)e.isStartElement()&&("stickerTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")))).show="true"===e.getAttributeValue("show"),t.stickerTracks.push(n)),"sticker"===e.name()&&n&&(this.parseStickerClips(n.clips),this.sortTrackClip(n))),e.readNext();t.stickerTracks.reverse(),this.sortTracks(t.stickerTracks)},parseStickerClips:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.StickerClip,n=null;!e.isEndElement()||"sticker"!==e.name();){if(e.isStartElement()){if("sticker"===e.name()){var a=parseInt(e.getAttributeValue("index")),r=e.getAttributeValue("id")+"";(n=new i(a,r)).id=r,n.stickerType=e.getAttributeValue("type")+"",n.inPoint=parseInt(e.getAttributeValue("inPoint")),n.outPoint=n.inPoint+parseInt(e.getAttributeValue("duration")),n.scale=parseFloat(e.getAttributeValue("scale")),n.rotation=parseFloat(e.getAttributeValue("rotation")),n.translationX=parseFloat(e.getAttributeValue("translationX")),n.translationY=parseFloat(e.getAttributeValue("translationY")),n.horizontalFlip="true"===e.getAttributeValue("horizontalFlip"),n.verticalFlip="true"===e.getAttributeValue("verticalFlip"),n.displayName=decodeURIComponent(e.getAttributeValue("displayName")+""),n.displayNamezhCN=decodeURIComponent(e.getAttributeValue("displayNamezhCN")+""),t.push(n)}"keyFrames"===e.name()&&n&&this.parseKeyFrames(n.keyFrames)}e.readNext()}},parseKeyFrames:function(t){for(var e=this.xmlStreamReader;!e.isEndElement()||"keyFrames"!==e.name();)e.isStartElement()&&"keyFrame"===e.name()&&t.push({time:parseInt(e.getAttributeValue("time")),type:e.getAttributeValue("type"),key:e.getAttributeValue("key"),value:parseFloat(e.getAttributeValue("value"))}),e.readNext()}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={writeTripleTracks:function(){var i=this,n=this.xmlStreamWriter,a=this.timelineData.tripleTracks.slice();a.length&&(n.writeStartElement("tripleTracks"),a.reverse().forEach(function(t){var e=a.length-1-t.index;n.writeStartElement("stickerTrack"),n.writeAttribute("index",e+""),n.writeAttribute("show",t.show+""),i.writeTripleStickerClips(t.clips,1+e),n.writeEndElement()}),n.writeEndElement())},writeTripleStickerClips:function(t,e){var i=this.xmlStreamWriter;t.length&&t.forEach(function(t){i.writeStartElement("sticker"),i.writeAttribute("index",t.index+""),i.writeAttribute("type","general"),i.writeAttribute("inPoint",t.inPoint+""),i.writeAttribute("duration",t.outPoint-t.inPoint+""),i.writeAttribute("scale","0"),i.writeAttribute("rotation",t.rotation+""),i.writeAttribute("translationX",t.translationX+""),i.writeAttribute("translationY",t.translationY+""),i.writeAttribute("horizontalFlip",t.horizontalFlip+""),i.writeAttribute("verticalFlip",t.verticalFlip+""),i.writeAttribute("zValue",e+""),i.writeAttribute("id",t.desc+""),i.writeAttribute("displayName",encodeURIComponent(t.displayName+"")),i.writeAttribute("displayNamezhCN",encodeURIComponent(t.displayNamezhCN+"")),i.writeEndElement()})},parseTripleTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.StickerTrack,n=null;!e.isEndElement()||"tripleTracks"!==e.name();)e.isStartElement()&&("stickerTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")))).show="true"===e.getAttributeValue("show"),t.tripleTracks.push(n)),"sticker"===e.name()&&n&&(this.parseTripleStickerClips(n.clips),this.sortTrackClip(n))),e.readNext();t.tripleTracks.reverse(),this.sortTracks(t.tripleTracks)},parseTripleStickerClips:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.StickerClip,n=null;!e.isEndElement()||"sticker"!==e.name();){if(e.isStartElement()&&"sticker"===e.name()){var a=parseInt(e.getAttributeValue("index")),r=e.getAttributeValue("id")+"";(n=new i(a,r)).id=r,n.stickerType=e.getAttributeValue("type")+"",n.inPoint=parseInt(e.getAttributeValue("inPoint")),n.outPoint=n.inPoint+parseInt(e.getAttributeValue("duration")),n.scale=1,n.rotation=parseFloat(e.getAttributeValue("rotation")),n.translationX=parseFloat(e.getAttributeValue("translationX")),n.translationY=parseFloat(e.getAttributeValue("translationY")),n.horizontalFlip="true"===e.getAttributeValue("horizontalFlip"),n.verticalFlip="true"===e.getAttributeValue("verticalFlip"),n.displayName=decodeURIComponent(e.getAttributeValue("displayName")+""),n.displayNamezhCN=decodeURIComponent(e.getAttributeValue("displayNamezhCN")+""),t.push(n)}e.readNext()}}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={writeTimelineVideoFxTracks:function(){var i=this,n=this.xmlStreamWriter,a=this.timelineData.timelineVideoFxTracks.slice();a.length&&(n.writeStartElement("timelineVideoFxTracks"),a.reverse().forEach(function(t){var e=a.length-1-t.index;n.writeStartElement("timelineVideoFxTrack"),n.writeAttribute("index",e+""),n.writeAttribute("show",t.show+""),i.writeTimelineVideoFxClips(t.clips),n.writeEndElement()}),n.writeEndElement())},writeVideoClipFxs:function(t,e){var i=this;if(t.length){var n=this.xmlStreamWriter;n.writeStartElement("videoFxs"),t.forEach(function(t){n.writeStartElement("videoFx"),n.writeAttribute("index",t.index+""),n.writeAttribute("type",t.packageType+""),t.packageType===i.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE?n.writeAttribute("id",t.desc+""):t.packageType===i.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN&&n.writeAttribute("name",t.desc+""),n.writeAttribute("intensity",t.intensity+""),t.resourceIds.length&&n.writeAttribute("resourceIds",t.resourceIds.join(",")),i.writeNormalFxParams(t.params),t.packageType===i.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN&&t.desc===i.GL.TRANSFORM_2D_DESC&&e.keyFrames&&e.keyFrames.length&&i.writeKeyFrames(e.keyFrames),n.writeEndElement()}),n.writeEndElement()}},writeAudioClipFxs:function(t){var e=this;if(!(t.length<=0)){var i=this.xmlStreamWriter;i.writeStartElement("audioFxs"),t.forEach(function(t){i.writeStartElement("audioFx"),i.writeAttribute("index",t.index+""),i.writeAttribute("type",t.packageType+""),t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE?i.writeAttribute("id",t.desc+""):t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN&&i.writeAttribute("name",t.desc+""),e.writeNormalFxParams(t.params),i.writeEndElement()}),i.writeEndElement()}},writeTimelineVideoFxClips:function(t){var i=this,n=this.xmlStreamWriter;t.length&&t.forEach(function(t){var e=!1;n.writeStartElement("timelineVideoFx"),n.writeAttribute("index",t.index+""),n.writeAttribute("inPoint",t.inPoint+""),n.writeAttribute("duration",t.outPoint-t.inPoint+""),n.writeAttribute("type",t.packageType+""),n.writeAttribute("clipSubType",t.clipSubType+""),n.writeAttribute("displayName",encodeURIComponent(t.displayName+"")),n.writeAttribute("displayNamezhCN",encodeURIComponent(t.displayName+"")),t.packageType===i.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE?(n.writeAttribute("id",t.desc+""),e=i.packageManager.isParticleFX(t.desc)):t.packageType===i.GL.TIMELINE_VIDEO_FX_TYPE_LUT?(n.writeAttribute("id",t.biliLutFileId+""),n.writeAttribute("biliLutFileId",t.biliLutFileId+""),n.writeAttribute("lutFilePath",t.lutFileUrl+"")):t.desc===i.GL.MASK_DESC?n.writeAttribute("name",i.GL.MOSAIC_DESC+""):n.writeAttribute("name",t.desc+""),n.writeAttribute("intensity",t.intensity+""),n.writeAttribute("isRegional",t.isRegional+""),n.writeAttribute("isIgnoreBackground",t.isIgnoreBackground+""),n.writeAttribute("regionalFeatherWidth",t.regionalFeatherWidth+""),n.writeAttribute("isInverseRegion",t.isInverseRegion+""),e?i.writeParticleFxParams(t.params):t.isRegional?i.writeRegionalFxParams(t.params):i.writeNormalFxParams(t.params),n.writeEndElement()})},writeNormalFxParams:function(t){if(t.length){var e=this.xmlStreamWriter;e.writeStartElement("fxParams"),t.forEach(function(t){e.writeStartElement("fxParam"),e.writeAttribute("type",t.type+""),e.writeAttribute("key",t.key+""),e.writeAttribute("value",t.value+""),e.writeEndElement()}),e.writeEndElement()}},writeParticleFxParams:function(t){if(t.length){var i=this.xmlStreamWriter;i.writeStartElement("fxParams"),t.forEach(function(t){if(i.writeStartElement("fxParam"),i.writeAttribute("type",t.type+""),i.writeAttribute("key",t.key+""),"object"===t.type){i.writeStartElement("objectValue");var e=t.value;i.writeAttribute("timeSec",e.timeSec+""),i.writeAttribute("x",e.x+""),i.writeAttribute("y",e.y+""),i.writeEndElement()}else i.writeAttribute("value",t.value+"");i.writeEndElement()}),i.writeEndElement()}},writeRegionalFxParams:function(t){if(t.length){var n=this.xmlStreamWriter;n.writeStartElement("fxParams"),t.forEach(function(t){if(n.writeStartElement("fxParam"),n.writeAttribute("type",t.type+""),n.writeAttribute("key",t.key+""),"object"===t.type){if(n.writeStartElement("objectValue"),"region"===t.key){var e=t.value;n.writeAttribute("x1",e.x1+""),n.writeAttribute("y1",e.y1+""),n.writeAttribute("x2",e.x2+""),n.writeAttribute("y2",e.y2+""),n.writeAttribute("x3",e.x3+""),n.writeAttribute("y3",e.y3+""),n.writeAttribute("x4",e.x4+""),n.writeAttribute("y4",e.y4+"")}else if("ellipseRegion"===t.key){var i=t.value;n.writeAttribute("centerX",i.centerX+""),n.writeAttribute("centerY",i.centerY+""),n.writeAttribute("a",i.a+""),n.writeAttribute("b",i.b+""),n.writeAttribute("angle",i.angle+"")}n.writeEndElement()}else n.writeAttribute("value",t.value+"");n.writeEndElement()}),n.writeEndElement()}},parseTimelineVideoFxTracks:function(t){for(var e=this.xmlStreamReader,i=this.timelineDataTemplate.TimelineVideoFxTrack,n=null,a=null;!e.isEndElement()||"timelineVideoFxTracks"!==e.name();)e.isStartElement()&&("timelineVideoFxTrack"===e.name()&&((n=new i(parseInt(e.getAttributeValue("index")))).show="true"===e.getAttributeValue("show"),t.timelineVideoFxTracks.push(n)),"timelineVideoFx"===e.name()&&n&&(a=this.parseTimelineVideoFxClips(n.clips),this.sortTrackClip(n)),"fxParams"===e.name()&&a&&this.parseFxParams(a.params)),e.readNext();t.timelineVideoFxTracks.reverse(),this.sortTracks(t.timelineVideoFxTracks)},parseTimelineVideoFxClips:function(t){var e,i=this.xmlStreamReader,n=this.timelineDataTemplate.TimelineVideoFxClip,a=parseInt(i.getAttributeValue("index")),r=i.getAttributeValue("type")+"",s=parseInt(i.getAttributeValue("clipSubType"))||0,o=new n(a,r,e=r===this.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE?i.getAttributeValue("id")+"":r===this.GL.TIMELINE_VIDEO_FX_TYPE_LUT?"":s===this.GL.EFFECT_MASK?this.GL.MASK_DESC:i.getAttributeValue("name")+"");return o.id=e,o.clipSubType=s,o.inPoint=parseInt(i.getAttributeValue("inPoint")+""),o.outPoint=o.inPoint+parseInt(i.getAttributeValue("duration")),o.intensity=parseFloat(i.getAttributeValue("intensity")),o.isRegional="true"===i.getAttributeValue("isRegional"),o.regionalFeatherWidth=parseInt(i.getAttributeValue("regionalFeatherWidth"))||0,o.isInverseRegion="true"===i.getAttributeValue("isInverseRegion"),o.isIgnoreBackground="true"===i.getAttributeValue("isIgnoreBackground"),o.displayName=decodeURIComponent(i.getAttributeValue("displayName")+""),o.displayNamezhCN=decodeURIComponent(i.getAttributeValue("displayNamezhCN")+""),o.packageType===this.GL.TIMELINE_VIDEO_FX_TYPE_LUT&&(o.lutFilePath="",o.lutFileUrl=i.getAttributeValue("lutFilePath")+"",o.biliLutFileId=i.getAttributeValue("biliLutFileId")+"",o.id=o.biliLutFileId),t.push(o),o},parseFxParams:function(t){for(var e,i,n,a=this.xmlStreamReader,r=this.timelineDataTemplate.FxParam;!a.isEndElement()||"fxParams"!==a.name();){if(a.isStartElement()&&("fxParam"===a.name()&&(e=a.getAttributeValue("type")+"",i=a.getAttributeValue("key")+"","float"===e&&(n=parseFloat(a.getAttributeValue("value")+""),t.push(new r(e,i,n))),"string"===e&&(n=a.getAttributeValue("value"),t.push(new r(e,i,n))),"bool"===e&&(n="true"===a.getAttributeValue("value"),t.push(new r(e,i,n)))),"objectValue"===a.name())){if("curvePoint"===i)n={timeSec:parseFloat(a.getAttributeValue("timeSec")),x:parseFloat(a.getAttributeValue("x")),y:parseFloat(a.getAttributeValue("y"))};if("region"===i)n={x1:parseFloat(a.getAttributeValue("x1")),y1:parseFloat(a.getAttributeValue("y1")),x2:parseFloat(a.getAttributeValue("x2")),y2:parseFloat(a.getAttributeValue("y2")),x3:parseFloat(a.getAttributeValue("x3")),y3:parseFloat(a.getAttributeValue("y3")),x4:parseFloat(a.getAttributeValue("x4")),y4:parseFloat(a.getAttributeValue("y4"))};if("ellipseRegion"===i)n={centerX:parseFloat(a.getAttributeValue("centerX")),centerY:parseFloat(a.getAttributeValue("centerY")),a:parseFloat(a.getAttributeValue("a")),b:parseFloat(a.getAttributeValue("b")),angle:parseFloat(a.getAttributeValue("angle"))};t.push(new r(e,i,n))}a.readNext()}},parseVideoClipFxs:function(t,e){for(var i,n=this.xmlStreamReader,a=this.timelineDataTemplate.VideoFx;!n.isEndElement()||"videoFxs"!==n.name();){if(n.isStartElement())if("videoFx"===n.name()){var r=parseInt(n.getAttributeValue("index")+""),s=n.getAttributeValue("type")+"",o=void 0;s===this.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN?o=n.getAttributeValue("name")+"":s===this.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE&&(o=n.getAttributeValue("id")+""),(i=new a(s,r,o)).intensity=parseFloat(n.getAttributeValue("intensity")+""),n.getAttributeValue("resourceIds")&&(i.resourceIds=n.getAttributeValue("resourceIds").split(",")),t.push(i)}else"fxParams"===n.name()?this.parseFxParams(i.params):"keyFrames"===n.name()&&this.parseKeyFrames(e.keyFrames);n.readNext()}},parseAudioClipFxs:function(t){for(var e,i=this.xmlStreamReader,n=this.timelineDataTemplate.AudioFx;!i.isEndElement()||"audioFxs"!==i.name();){if(i.isStartElement()){if("audioFx"===i.name()){var a=parseInt(i.getAttributeValue("index")+""),r=i.getAttributeValue("type")+"",s=void 0;"builtin"==r&&(s=i.getAttributeValue("name").toString()),e=new n(r,a,s),t.push(e)}"fxParams"===i.name()&&this.parseFxParams(e.params)}i.readNext()}}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={writeTransitions:function(t){var e=this;if(t.length){var i=this.xmlStreamWriter;i.writeStartElement("transitions"),t.forEach(function(t){t.isThemeTransition||(i.writeStartElement("transition"),i.writeAttribute("index",t.index+""),i.writeAttribute("type",t.packageType+""),t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_BUILT_IN?i.writeAttribute("name",t.desc+""):t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE&&i.writeAttribute("id",t.desc+""),i.writeAttribute("displayName",encodeURIComponent(t.displayName+"")),i.writeAttribute("displayNamezhCN",encodeURIComponent(t.displayName+"")),i.writeAttribute("duration",t.duration+""),i.writeEndElement())}),i.writeEndElement()}},parseTransitions:function(t){for(var e=this.xmlStreamReader;!e.isEndElement()||"transitions"!==e.name();){if(e.isStartElement()&&"transition"===e.name()){var i=parseInt(e.getAttributeValue("index")),n=e.getAttributeValue("type")+"",a=void 0;"builtin"==n?a=e.getAttributeValue("name")+"":"package"==n&&(a=e.getAttributeValue("id")+"");var r=new this.timelineDataTemplate.Transition(n,i,a);r.displayName=decodeURIComponent(e.getAttributeValue("displayName")+""),r.displayNamezhCN=decodeURIComponent(e.getAttributeValue("displayNamezhCN")+""),r.duration=parseInt(e.getAttributeValue("duration")),t.push(r)}e.readNext()}}};e.default=n},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var y=n(i(24)),s=n(i(33)),a={writeBiliVideoData:function(){var e=this.xmlStreamWriter;e.writeStartElement("biliVideoData");var t=[],i=this.getBiliVideoDataCaptionMaterials(),n=i.captionMaterials,a=i.fonts,r=this.getBiliVideoDataStickerMaterials(),s=this.getBiliVideoDataTransitionMaterials(),o=this.getBiliVideoDataTimelineFxMaterials(),c=o.fxNum,u=o.timelineFxMaterials,l=this.getBiliVideoDataVideoFxMaterials(),d=this.getBiliVideoDataTheme(),f=this.getBiliVideoDataStoryboardFxMaterials(),p=this.getResources(),h=p.videoNum,v=p.audioNum,m=p.resources;if(this.VM.$store.commit("setMaterialsData",{video:h,audio:v,caption:n.length,sticker:r.length,transition:s.length,theme:Number(!!d),fx:c,total:h+v+n.length+r.length+s.length+Number(!!d)+c}),t=(t=(t=(t=(t=t.concat(n)).concat(r)).concat(s)).concat(u)).concat(l),d&&(d.themeMaterial&&t.push(d.themeMaterial),d.fonts&&d.fonts.length&&a.push.apply(a,(0,y.default)(d.fonts))),m.length){e.writeStartElement("resources");var g=[];m.forEach(function(t){g.includes(t.id)||(g.push(t.id),e.writeStartElement("resource"),e.writeAttribute("id",t.id),e.writeEndElement())}),e.writeEndElement()}if(t.length){e.writeStartElement("materials");var _=[];t.forEach(function(t){_.includes(t.id)||(_.push(t.id),e.writeStartElement("material"),e.writeAttribute("id",t.id),e.writeEndElement())}),e.writeEndElement()}if(a.length){e.writeStartElement("fonts");var w=[];a.forEach(function(t){w.includes(t.id)||(w.push(t.id),e.writeStartElement("font"),e.writeAttribute("id",t.id),e.writeEndElement())}),e.writeEndElement()}if(f.length){e.writeStartElement("storyboards");var b=[];f.forEach(function(t){b.includes(t.id)||(b.push(t.id),e.writeStartElement("storyboard"),e.writeAttribute("id",t.id),e.writeEndElement())}),e.writeEndElement()}e.writeEndElement()},getResources:function(){var e=[],i=0,n=0;return this.timelineData.audioTracks.forEach(function(t){t.clips.forEach(function(t){e.push({id:t.id}),n+=1})}),this.timelineData.videoTracks.forEach(function(t){t.clips.forEach(function(t){e.push({id:t.id}),i+=1})}),{resources:e,videoNum:i,audioNum:n}},getBiliVideoDataCaptionMaterials:function(){var e=this,i=[],n=[],a=[],r=this.timelineDataTemplate.CaptionClip;return this.timelineData.captionTracks.forEach(function(t){var e=t.clips.filter(function(t){return t instanceof r}),i=(0,s.default)(t);i.clips=e,a.push(i)}),this.timelineData.musicCaptionTracks.forEach(function(t){var e=t.clips.filter(function(t){return t instanceof r}),i=(0,s.default)(t);i.clips=e,a.push(i)}),a.forEach(function(t){t.clips.forEach(function(t){t.styleDesc&&i.push({id:t.styleDesc}),t.bsFontId!==e.GL.DEFAULT_FONT&&n.push({id:t.bsFontId}),t.rendererId&&i.push({id:t.rendererId})})}),{captionMaterials:i,fonts:n}},getBiliVideoDataStickerMaterials:function(){var e=[];return this.timelineData.stickerTracks.forEach(function(t){t.clips.forEach(function(t){e.push({id:t.desc})})}),this.timelineData.tripleTracks.forEach(function(t){t.clips.forEach(function(t){e.push({id:t.desc})})}),e},getBiliVideoDataTransitionMaterials:function(){var e=this,i=[];return this.timelineData.videoTracks.forEach(function(t){t.transitions.forEach(function(t){t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE&&i.push({id:t.desc})})}),i},getBiliVideoDataTimelineFxMaterials:function(){var e=this,i=[],t=this.timelineData.timelineVideoFxTracks,n=0;return t.forEach(function(t){t.clips.forEach(function(t){n+=1,t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE&&i.push({id:t.desc})})}),{fxNum:n,timelineFxMaterials:i}},getBiliVideoDataStoryboardFxMaterials:function(){var e=this,i=[];return this.timelineData.videoTracks.forEach(function(t){t.clips.forEach(function(t){t.fxs.forEach(function(t){t.desc===e.GL.STORYBOARD_DESC&&i.push.apply(i,(0,y.default)(t.resourceIds.map(function(t){return{id:t}})))})})}),i},getBiliVideoDataVideoFxMaterials:function(){var e=this,i=[];return this.timelineData.videoTracks.forEach(function(t){t.clips.forEach(function(t){t.fxs.forEach(function(t){t.packageType===e.GL.TIMELINE_VIDEO_FX_TYPE_PACKAGE&&i.push({id:t.desc})})})}),i},getBiliVideoDataTheme:function(){if(this.timelineData.theme){var t=this.timelineData.theme,e={};return e.themeMaterial={id:t.id},e.fonts=[],t.titleCaption&&t.titleCaption.rawId&&t.titleCaption.bsFontId!==this.GL.DEFAULT_FONT&&e.fonts.push({id:t.titleCaption.bsFontId}),t.trailerCaption&&t.trailerCaption.rawId&&t.trailerCaption.bsFontId!==this.GL.DEFAULT_FONT&&e.fonts.push({id:t.trailerCaption.bsFontId}),e}}};e.default=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=i(15),n={writeTheme:function(){var t=this.xmlStreamWriter,e=this.timelineData.theme;e&&(t.writeStartElement("theme"),t.writeAttribute("id",e.id+""),t.writeAttribute("biliId",e.biliId+""),t.writeAttribute("displayName",encodeURIComponent(e.displayName+"")),t.writeAttribute("displayNamezhCN",encodeURIComponent(e.displayNamezhCN+"")),t.writeAttribute("titleWidth",e.titleWidth+""),e.titleCaption&&(t.writeAttribute("titleCaptions",e.titleCaption.text+""),t.writeAttribute("titleFontFamily",e.titleCaption.fontFamily+""),t.writeAttribute("titleFontSizeRatio",e.titleCaption.fontSize/this.timeline.getVideoRes().imageHeight+""),t.writeAttribute("titleFontSize",e.titleCaption.fontSize+""),t.writeAttribute("titleFontColor",(0,r.RGBAToHex)(e.titleCaption.color)+""),t.writeAttribute("titleCaptionBsFontId",e.titleCaption.bsFontId+"")),e.trailerCaption&&(t.writeAttribute("trailerCaptions",e.trailerCaption.text+""),t.writeAttribute("trailerFontFamily",e.trailerCaption.fontFamily+""),t.writeAttribute("trailerFontColor",(0,r.RGBAToHex)(e.trailerCaption.color)+""),t.writeAttribute("trailerFontSizeRatio",e.trailerCaption.fontSize/this.timeline.getVideoRes().imageHeight+""),t.writeAttribute("trailerFontSize",e.trailerCaption.fontSize+""),t.writeAttribute("trailerCaptionBsFontId",e.trailerCaption.bsFontId+"")),t.writeAttribute("musicVolume",e.volumeValue+""),t.writeAttribute("titleVolume",e.volumeValue+""),t.writeAttribute("trailerVolume",e.volumeValue+""),t.writeEndElement())},parseTheme:function(t){var e=this.xmlStreamReader,i=this.timelineDataTemplate.Theme,n=this.timelineDataTemplate.ThemeCaption,a=new i({id:e.getAttributeValue("id")+"",desc:e.getAttributeValue("id")+"",biliId:e.getAttributeValue("biliId")+"",displayName:decodeURIComponent(e.getAttributeValue("displayName")+""),displayNamezhCN:decodeURIComponent(e.getAttributeValue("displayNamezhCN")+""),titleWidth:parseInt(e.getAttributeValue("titleWidth"))||0});e.getAttributeValue("titleCaptions")&&(a.titleCaption=new n({text:""+e.getAttributeValue("titleCaptions"),fontFamily:""+e.getAttributeValue("titleFontFamily"),fontSize:parseFloat(e.getAttributeValue("titleFontSize"))||0,color:(0,r.ARGBHexToRGBA)(""+e.getAttributeValue("titleFontColor")),bsFontId:""+e.getAttributeValue("titleCaptionBsFontId")})),e.getAttributeValue("trailerCaptions")&&(a.trailerCaption=new n({text:""+e.getAttributeValue("trailerCaptions"),fontFamily:""+e.getAttributeValue("trailerFontFamily"),fontSize:parseFloat(e.getAttributeValue("trailerFontSize"))||0,color:(0,r.ARGBHexToRGBA)(""+e.getAttributeValue("trailerFontColor")),bsFontId:""+e.getAttributeValue("trailerCaptionBsFontId")})),a.volumeValue=+(e.getAttributeValue("musicVolume")||e.getAttributeValue("volumeValue")||""),t.theme=a}};e.default=n},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i(6));function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var o=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,r.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},n(i(97)),{},n(i(885)),{},n(i(1579)),{},n(i(886)),{},n(i(887)),{},n(i(1580)),{},n(i(1581)),{},n(i(1582)));e.default=o},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.AudioClip=e.AudioTrack=void 0;var l=a(i(8)),d=a(i(51)),f=a(i(45)),r=a(i(52)),s=n(i(97)),o=function(t){function i(t){var e;return(0,l.default)(this,i),(e=(0,d.default)(this,(0,f.default)(i).call(this,"audioTrack",t))).transitions=[],e.isRecorder=!1,e}return(0,r.default)(i,t),i}(s.Track);e.AudioTrack=o;var c=function(t){function u(t){var e,i=t.clipIndex,n=t.m3u8Path,a=t.m3u8Url,r=t.resourceUrl,s=t.duration,o=t.isRecorder,c=void 0!==o&&o;return(0,l.default)(this,u),(e=(0,d.default)(this,(0,f.default)(u).call(this,"audio",i))).m3u8Path=n,e.path=r,e.m3u8Url=a,e.trimIn=0,e.trimOut=s,e.orgDuration=s,e.volume=1,e.speed=1,e.fadeInDuration=0,e.fadeOutDuration=0,e.fxs=[],e.isRecorder=c,e}return(0,r.default)(u,t),u}(s.Clip);e.AudioClip=c},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.Transition=void 0;var s=n(i(8));e.Transition=function t(e,i,n){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"",r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"";(0,s.default)(this,t),this.index=i,this.packageType=e,this.desc=n,this.selected=!1,this.type="transition",this.displayName=a||"",this.displayNamezhCN=r||"",this.duration=1e6,this.inPoint=-1,this.isThemeTransition=!1,this.coveredThemeTransition=null}},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.FxParam=e.AudioFx=e.VideoFx=e.TimelineVideoFxClip=e.TimelineVideoFxTrack=void 0;var r=a(i(8)),s=a(i(51)),o=a(i(45)),c=a(i(52)),u=n(i(97)),l=function(t){function e(t){return(0,r.default)(this,e),(0,s.default)(this,(0,o.default)(e).call(this,"timelineVideoFxTrack",t))}return(0,c.default)(e,t),e}(u.Track);e.TimelineVideoFxTrack=l;var d=function(t){function a(t,e,i){var n;return(0,r.default)(this,a),(n=(0,s.default)(this,(0,o.default)(a).call(this,"timelineVideoFx",t))).packageType=e,n.clipSubType=0,n.desc=i,n.displayName="",n.displayNamezhCN="",n.intensity=1,n.isRegional=!1,n.params=[],n.lutFilePath="",n.lutFileUrl="",n.biliLutFileId="",n.isIgnoreBackground=!1,n.isInverseRegion=!1,n.regionalFeatherWidth=0,n.shape="rect",n}return(0,c.default)(a,t),a}(u.Clip);e.TimelineVideoFxClip=d;e.VideoFx=function t(e,i,n){(0,r.default)(this,t),this.packageType=e,this.desc=n||"",this.index=i,this.intensity=1,this.params=[],this.resourceIds=[]};e.AudioFx=function t(e,i,n){(0,r.default)(this,t),this.packageType=e,this.desc=n,this.index=i,this.params=[]};e.FxParam=function t(e,i,n){(0,r.default)(this,t),this.type=e,this.key=i,this.value=n}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.Theme=e.ThemeCaption=void 0;var a=n(i(8));e.ThemeCaption=function t(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};(0,a.default)(this,t),this.text=e.text||"",this.rawId=e.rawId||"",this.bsFontId=e.bsFontId||"",this.fontFamily=e.fontFamily||"",this.fontSize=e.fontSize||-1,this.color=e.color||"",this.defaultColor=e.defaultColor||""};e.Theme=function t(e){(0,a.default)(this,t),this.id=e.id||"",this.biliId=e.biliId||"",this.desc=e.desc||"",this.displayName=e.displayName||"",this.displayNamezhCN=e.displayName||"",this.titleTrackIndex=e.titleTrackIndex||-1,this.titleWidth=e.titleWidth||0,this.titleInPoint=e.titleInPoint||0,this.titleOutPoint=e.titleOutPoint||0,this.titleCaption=null,this.trailerTrackIndex=e.trailerTrackIndex||-1,this.trailerWidth=e.trailerWidth||0,this.trailerInPoint=e.trailerInPoint||0,this.trailerOutPoint=e.trailerOutPoint||0,this.trailerCaption=null,this.volumeValue=e.volumeValue||"",this.show=e.show||!0,this.duration=e.duration||0}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(638)),m=n(i(4)),g=n(i(49)),_=n(i(93)),s=n(i(637)),w="/studio/static/nv/".concat(g.default.getSdkVersionName(),"/"),b={};function y(){return"undefined"!=typeof WebAssembly}function C(){try{var t=document.createElement("canvas");return!(!window.WebGLRenderingContext||!t.getContext("webgl")&&!t.getContext("experimental-webgl"))}catch(t){return!1}}window.Module=b;var a={SDK_WORKER_PATH:w,EditorCore:function(o){var l=this.VM;o.restartMode=o.restartMode||"DoNotRestart",o.restartLimit=o.restartLimit||10,void 0===o.stdoutEnabled&&(o.stdoutEnabled=!0),void 0===o.stderrEnabled&&(o.stderrEnabled=!0),void 0===o.environment&&(o.environment={});var c={status:void 0};c.loadEmscriptenModule=function(t){if(!y())return u="Error: WebAssembly is not supported",void v("Error");if(!C())return u="Error: WebGL is not supported",void v("Error");if("Loading"===c.status)return;v(d="Loading");var e=void 0;s.default.globalLoading(!0,g.default.EDITOR_START_FETCH_WASM_JS);var i=function(t){return f(t).then(function(t){return t.text()})}(t+".js").then(function(t){e=t}),n=void 0;s.default.globalLoading(!0,g.default.EDITOR_START_FETCH_WASM);var a=function(i){var n,a,r,s,o,c,u;return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m.default.awrap((e=i.split("/").pop(),l.$DBCache.readAssetFromDB(g.default.getSdkVersionName()+"_"+e).catch(function(t){throw console.error("webAssembly 读取DB异常",t),t})));case 2:if(n=t.sent)return d="Compiling",v("Loading"),a=Date.now(),r=WebAssembly.compile(n),_.default.sendCustomEvent("editor_sdk_compile_time",Date.now()-a),t.abrupt("return",r);t.next=10;break;case 10:return s=Date.now(),t.next=13,m.default.awrap(f(i));case 13:if(o=t.sent,_.default.sendCustomEvent("editor_sdk_download_time",Date.now()-s),c=o.clone(),u=Date.now(),void 0!==WebAssembly.compileStreaming)return d="Downloading/Compiling",v("Loading"),t.abrupt("return",WebAssembly.compileStreaming(o).then(function(t){return h(c,i),_.default.sendCustomEvent("editor_sdk_compile_time",Date.now()-u),t}).catch(function(t){return console.error(t),p(o).then(function(t){return h(c,i),_.default.sendCustomEvent("editor_sdk_compile_time",Date.now()-u),t})}));t.next=23;break;case 23:return t.abrupt("return",p(o).then(function(t){return h(c,i),_.default.sendCustomEvent("editor_sdk_compile_time",Date.now()-u),t}));case 24:case"end":return t.stop()}var e})}(t+".wasm").then(function(t){n=t});Promise.all([i,a]).then(function(){s.default.globalLoading(!0,g.default.EDITOR_START_COMPILE_WASM),function(t,e,i){b.instantiateWasm=function(t,e){return WebAssembly.instantiate(i,t).then(function(t){e(t,i)},function(t){u=t,v("Error")}),{}},b.locateFile=b.locateFile||function(t){return w+t},b.setStatus=b.setStatus||function(t){t.startsWith("Running")&&v("Running")},b.monitorRunDependencies=b.monitorRunDependencies||function(){},b.print=b.print||function(t){o.stdoutEnabled&&console.log("stdoutEnabled:",t)},b.printErr=b.printErr||function(t){void 0!==t.startsWith&&t.startsWith("bad name in getProcAddress:")||o.stderrEnabled&&console.log("stderrEnabled:",t)},b.onAbort=b.onAbort||function(t){c.crashed=!0,c.exitText=t,v("Exited")},b.quit=b.quit||function(t,e){"ExitStatus"===e.name?(c.exitText=void 0,c.exitCode=t):(c.exitText=e.toString(),c.crashed=!0),v("Exited")},b.preRun=b.preRun||[],b.preRun.push(function(){for(var t=0,e=Object.entries(o.environment);t<e.length;t++){var i=(0,r.default)(e[t],2),n=i[0],a=i[1];window.ENV[n.toUpperCase()]=a}}),b.mainScriptUrlOrBlob=new Blob([e],{type:"text/javascript"}),o.restart=function(){},c.exitCode=void 0,c.exitText=void 0,c.crashed=!1;try{window.eval(e)}catch(t){throw console.error("eval error",t),t}}(0,e,n)}).catch(function(t){throw u=t,v("Error"),t})};var d="",u="";function f(t){return fetch(w+t).then(function(t){return t.ok?t:(u=t.status+" "+t.statusText+" "+t.url,v("Error"),Promise.reject(u))})}function p(t){return t.arrayBuffer().then(function(t){return d="Compiling",v("Loading"),WebAssembly.compile(t)})}function h(t,e){var i=e.split("/").pop();return t.arrayBuffer().then(function(t){l.$DBCache.saveAssetToDB(g.default.getSdkVersionName()+"_"+i,t)}).catch(function(t){throw console.error("webAssembly 存储DB异常",t),t})}var t=void 0;function e(){"Loading"!==c.status&&t===c.status||(t=c.status,"Error"===c.status?function(){if(void 0!==o.containerElements){var t=!0,e=!1,i=void 0;try{for(var n,a=o.containerElements[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value,s=o.showError(u,r);r.appendChild(s)}}catch(t){e=!0,i=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}}else void 0!==o.showError&&o.showError(u)}():"Loading"===c.status?function(){if(void 0!==o.containerElements){var t=!0,e=!1,i=void 0;try{for(var n,a=o.containerElements[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value,s=o.showLoader(d,r);r.appendChild(s)}}catch(t){e=!0,i=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}}else void 0!==o.showLoader&&o.showLoader(d)}():"Running"===c.status?void 0===o.containerElements&&void 0!==o.loadingFinished&&o.loadingFinished():"Exited"===c.status&&("RestartOnExit"===o.restartMode||"RestartOnCrash"===o.restartMode&&c.crashed?(t=void 0,o.restart()):function(){if("Exited"===c.status)if(void 0!==o.containerElements){if(c.crashed){var t=!0,e=!1,i=void 0;try{for(var n,a=o.containerElements[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var r=n.value,s=o.showExit(c.crashed,c.exitCode,r);void 0!==s&&r.appendChild(s)}}catch(t){e=!0,i=t}finally{try{t||null==a.return||a.return()}finally{if(e)throw i}}}}else void 0!==o.showExit&&o.showExit(c.crashed,c.exitCode)}()),o.statusChanged&&o.statusChanged(c.status))}function v(t){"Loading"!==t&&c.status===t||(c.status=t,setTimeout(function(){e()},0))}return v("Created"),c},loadWASM:function(){var i=this;return new Promise(function(t,e){i.EditorCore({stdoutEnabled:!0,stderrEnabled:!0,showLoader:function(){},showError:function(t){e(new Error(t))},loadingFinished:function(){t()}}).loadEmscriptenModule("NvWasmPlayer")})},editorCoreDefine:function(){return new Promise(function(t,e){var i=document.createElement("script");i.src=w+"NvVariableDefine.js",i.onload=function(){t()},i.onerror=function(){e()},document.head.appendChild(i)})},loadNvStreamingSdk:function(){return new Promise(function(t,e){if(y())if(C()){var i=document.createElement("script");i.src=w+"NvStreamingSdk.js",i.onload=function(){t()},i.onerror=function(){e()},document.head.appendChild(i)}else e(new Error("Error: WebGL is not supported"));else e(new Error("Error: WebAssembly is not supported"))})},loadEditorCore:function(){return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return s.default.globalLoading(!0,g.default.EDITOR_START_DOWNLOAD_FUNCTION_JS),t.next=3,m.default.awrap(this.loadNvStreamingSdk());case 3:return s.default.globalLoading(!0,g.default.EDITOR_START_DOWNLOAD_DEFINE_JS),t.next=6,m.default.awrap(this.editorCoreDefine());case 6:return s.default.globalLoading(!0,g.default.EDITOR_START_DOWNLOAD_SDK),t.next=9,m.default.awrap(this.loadWASM());case 9:return s.default.globalLoading(!0,g.default.EDITOR_START_ENSURE_MODULE),t.next=12,m.default.awrap(this.ensureMEISHEModule());case 12:case"end":return t.stop()}},null,this)},ensureMEISHEModule:function(){return new Promise(function t(e){void 0!==window.Module.Meishe?e():setTimeout(function(){return t(e)},400)})},ensureLiveWindow:function(){return new Promise(function t(e){document.getElementById(g.default.LIVE_WINDOW_CANVAS_ID)?e():setTimeout(function(){return t(e)},400)})},run:function(){return m.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return s.default.globalLoading(!0,g.default.EDITOR_START_DOWNLOAD_SDK),t.next=3,m.default.awrap(this.loadEditorCore());case 3:return this.createAssetFSFolder(),s.default.globalLoading(!0,g.default.EDITOR_START_CREATE_CONTEXT),t.next=7,m.default.awrap(this.createContext());case 7:return g.default.getSDKLowerMem()&&this.context.setMaxVideoFileReaderCount(12),s.default.globalLoading(!0,g.default.EDITOR_START_BIND_LIVE_WINDOW),t.next=11,m.default.awrap(this.ensureLiveWindow());case 11:this.createLiveWindow(g.default.LIVE_WINDOW_CANVAS_ID,this.timeline);case 12:case"end":return t.stop()}},null,this)}};e.default=a},function(t,e,i){"use strict";var n=i(20),a=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var u=a(i(4)),o=n(i(69)),r=i(40),s={createFSDir:function(t){try{window.FS.mkdir(t)}catch(t){return""}},writeToFS:function(t,e){return e instanceof ArrayBuffer&&(e=new Uint8Array(e)),window.FS.writeFile(t,e),t},readFromFS:function(t,e){var i=1<arguments.length&&void 0!==e?e:{};if(window.FS)try{return window.FS.readFile(t,i)}catch(t){return""}},getAssetName:function(t){return new URL(t).pathname.split("/").pop()},generateAssetName:function(t){return(0,r.dateFormat)(new Date,"yyyy-MM-dd hh:mm:ss")+"."+t},readAndSaveAsset:function(e){var i,n,a,r,s=arguments;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=1<s.length&&void 0!==s[1]?s[1]:{responseType:"arraybuffer"},n=this.getAssetName(e),a=this.readFromFS(n))return t.abrupt("return",a);t.next=5;break;case 5:return"m3u8"===n.split(".").pop()&&(i.responseType="text"),t.next=8,u.default.awrap(this.VM.$DBCache.readAssetFromDB(n));case 8:if(a=t.sent)return t.abrupt("return",a);t.next=11;break;case 11:return t.next=13,u.default.awrap(this.VM.$axios.get(e,{responseType:i.responseType}));case 13:if(r=t.sent,a=r.data)return t.next=18,u.default.awrap(this.VM.$DBCache.saveAssetToDB(n,a));t.next=19;break;case 18:return t.abrupt("return",a);case 19:case"end":return t.stop()}},null,this)},installM3U8AssetToFS:function(e,i){var n,a,r,s;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("m3u8Url miss");case 2:if(n=this.getAssetName(e),a=this.getAssetFolder(n),r=a+"/"+n,s=this.readFromFS(r))return t.abrupt("return",r);t.next=8;break;case 8:return t.next=10,u.default.awrap(this.readAndSaveAsset(e));case 10:if((s=t.sent)instanceof ArrayBuffer&&(s=new Uint8Array(s)),s instanceof Uint8Array&&(s=String.fromCharCode.apply(null,s)),s)return t.next=16,u.default.awrap(o.bossM3U8TextReplace(s,i));t.next=19;break;case 16:return s=t.sent,this.writeToFS(r,s),t.abrupt("return",r);case 19:case"end":return t.stop()}},null,this)},installDescAssetToFS:function(e){var s,i,n,a,o,c=this;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.startsWith("http")){t.next=2;break}return t.abrupt("return",e);case 2:if(s=this.getAssetName(e),i=this.getAssetFolder(s),n=i+"/"+s,a=this.readFromFS("/bili_desc_finished"+s))return t.abrupt("return",s.split(".")[0]);t.next=8;break;case 8:return t.next=10,u.default.awrap(this.readAndSaveAsset(e));case 10:if(a=t.sent)return o=this.getDescAssetType(s),this.writeToFS(n,a),t.abrupt("return",new Promise(function(a,r){c.VM.$Bus.$once(c.VM.$GLEventKey.onFinishAssetPackageInstallation+n,function(t,e,i,n){window.FS.truncate(e,0),0===n?(c.writeToFS("/bili_desc_finished"+s,"done"),a(t)):r(n)}),c.packageManager.installAssetPackage(n,"",o)}));t.next=15;break;case 15:case"end":return t.stop()}},null,this)},installLutAssetToFS:function(e){var i,n,a,r;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.getAssetFolder("lut"),n=this.getAssetName(e),a=i+"/"+n,r=this.readFromFS(a))return t.abrupt("return",a);t.next=6;break;case 6:return t.next=8,u.default.awrap(this.readAndSaveAsset(e));case 8:if(r=t.sent)return this.writeToFS(a,r),t.abrupt("return",a);t.next=12;break;case 12:case"end":return t.stop()}},null,this)},installStoryBoardAssetToFS:function(e){var i,n,a;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=this.GL.FS_STORYBOARD_FOLDER,n=i+"/"+e.split("/").pop(),a=this.readFromFS(n))return t.abrupt("return",n);t.next=5;break;case 5:return t.next=7,u.default.awrap(this.readAndSaveAsset(e));case 7:if(a=t.sent)return this.writeToFS(n,a),t.abrupt("return",n);t.next=11;break;case 11:case"end":return t.stop()}},null,this)},getDescAssetType:function(t){switch(t.split(".").pop()){case"videofx":return 0;case"animatedsticker":return 3;case"captionstyle":return 2;case"theme":return 4;case"videotransition":return 1;case"compoundcaption":return 7;case"captionrenderer":return 9}},getAssetFolder:function(t){switch(t.split(".").pop()){case"videofx":return this.GL.FS_VIDEO_FX_FOLDER;case"animatedsticker":return this.GL.FS_STICKER_FOLDER;case"captionstyle":return this.GL.FS_CAPTION_FOLDER;case"theme":return this.GL.FS_THEME_FOLDER;case"videotransition":return this.GL.FS_TRANSITION_FOLDER;case"compoundcaption":return this.GL.FS_COMPOUND_CAPTION_FOLDER;case"m3u8":return this.GL.FS_M3U8_FOLDER;case"lut":return this.GL.FS_LUT_FOLDER;case"captionrenderer":return this.GL.FS_CAPTION_RENDERER_FOLDER}},createAssetFSFolder:function(){this.createFSDir("/bili_desc_finished"),this.createFSDir(this.GL.FS_VIDEO_FX_FOLDER),this.createFSDir(this.GL.FS_STICKER_FOLDER),this.createFSDir(this.GL.FS_CAPTION_FOLDER),this.createFSDir(this.GL.FS_THEME_FOLDER),this.createFSDir(this.GL.FS_TRANSITION_FOLDER),this.createFSDir(this.GL.FS_COMPOUND_CAPTION_FOLDER),this.createFSDir(this.GL.FS_M3U8_FOLDER),this.createFSDir(this.GL.FS_FONT_FOLDER),this.createFSDir(this.GL.FS_AUDIO_RECORD_FOLDER),this.createFSDir(this.GL.FS_LUT_FOLDER),this.createFSDir(this.GL.FS_STORYBOARD_FOLDER),this.createFSDir(this.GL.FS_CAPTION_RENDERER_FOLDER)},installFontFamily:function(e){var i,n,a,r,s,o;return u.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.fontFamily,n=e.bsFontId,a=e.packageUrl,i)return t.abrupt("return",i);t.next=3;break;case 3:if(a){t.next=5;break}throw new Error("字体文件下载地址丢失");case 5:return r=this.getAssetName(a),t.next=8,u.default.awrap(this.readAndSaveAsset(a));case 8:if(s=t.sent)return r=n+r.split(".").pop(),o=this.GL.FS_FONT_FOLDER+r,this.writeToFS(o,s),i=this.context.registerFontByFilePath(o),this.VM.$store.commit("updateCaptionFontFamily",{bsFontId:n,fontFamily:i}),t.abrupt("return",i);t.next=16;break;case 16:case"end":return t.stop()}},null,this)}};e.default=s},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(i(4)),s=n(i(24)),a={queueLock:!1,setQueueLock:function(t){this.queueLock=t,this.setLock(t)},undoQueue:function(){var e,i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.queueLock||this.SDKLock)return t.abrupt("return");t.next=2;break;case 2:if(this.VM.$globalLoading(!0,this.VM.$GL.UNDO_ING),this.setQueueLock(!0),!this.VM.$store.getters.canUndo){t.next=20;break}if(this.stopEditClip(),this.seekTimeline(0),e=this.VM.$store.state.projectUndoQueue.length-1,i=this.VM.$store.state.projectUndoQueue[e],n=this.VM.$store.state.projectUndoQueue[e-1])return this.writeToFS(this.GL.XML_FS_PATH,n),t.next=14,r.default.awrap(this.readTimelineDataFromXml());t.next=18;break;case 14:return a=t.sent,t.next=17,r.default.awrap(this.redrawSDK(a));case 17:this.VM.$Bus.$emit(this.VM.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.timelineData);case 18:this.VM.$store.commit("updateProjectUndoQueue",this.VM.$store.state.projectUndoQueue.slice(0,e)),this.VM.$store.commit("updateProjectRedoQueue",[i].concat((0,s.default)(this.VM.$store.state.projectRedoQueue)));case 20:this.VM.$globalLoading(!1),this.setQueueLock(!1);case 22:case"end":return t.stop()}},null,this)},redoQueue:function(){var e,i;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.queueLock||this.SDKLock)return t.abrupt("return");t.next=2;break;case 2:if(this.VM.$globalLoading(!0,this.VM.$GL.REDO_ING),this.setQueueLock(!0),!this.VM.$store.getters.canRedo){t.next=18;break}if(this.seekTimeline(0),e=this.VM.$store.state.projectRedoQueue[0])return this.writeToFS(this.GL.XML_FS_PATH,e),t.next=11,r.default.awrap(this.readTimelineDataFromXml());t.next=16;break;case 11:return i=t.sent,t.next=14,r.default.awrap(this.redrawSDK(i));case 14:this.VM.$Bus.$emit(this.VM.$GLEventKey.TIMELINE_LOGIC_DATA_READY,this.timelineData),this.stopEditClip();case 16:this.VM.$store.commit("updateProjectUndoQueue",[].concat((0,s.default)(this.VM.$store.state.projectUndoQueue),[e])),this.VM.$store.commit("updateProjectRedoQueue",this.VM.$store.state.projectRedoQueue.slice(1,this.VM.$store.state.projectRedoQueue.length));case 18:this.VM.$globalLoading(!1),this.setQueueLock(!1);case 20:case"end":return t.stop()}},null,this)},saveQueue:function(){var e;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.setQueueLock(!0),e=this.writeTimelineDataToXml(),this.VM.$store.commit("updateProjectRedoQueue",[]),this.VM.$store.state.projectUndoQueue[this.VM.$store.state.projectUndoQueue.length-1]===e)return this.setQueueLock(!1),t.abrupt("return");t.next=7;break;case 7:this.VM.$store.commit("updateProjectUndoQueue",[].concat((0,s.default)(this.VM.$store.state.projectUndoQueue),[e])),this.setQueueLock(!1);case 9:case"end":return t.stop()}},null,this)},clearQueue:function(e){var i,n,a;return r.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:this.setQueueLock(!0),e&&"string"==typeof e?(i=[],n=[],this.VM.$store.state.projectUndoQueue.forEach(function(t){t.includes(e)||i.includes(t)||i.push(t)}),this.VM.$store.state.projectRedoQueue.forEach(function(t){t.includes(e)||n.includes(t)||n.push(t)}),i.length||i.push(this.writeTimelineDataToXml()),this.VM.$store.commit("updateProjectUndoQueue",i),this.VM.$store.commit("updateProjectRedoQueue",n)):(a=this.writeTimelineDataToXml(),this.VM.$store.commit("updateProjectUndoQueue",[a]),this.VM.$store.commit("updateProjectRedoQueue",[])),this.setQueueLock(!1);case 3:case"end":return t.stop()}},null,this)}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(4)),r=n(i(49)),f="/studio/static/nv/ffmpeg-mp4/v".concat(r.default.FFMPEG_VERSION,"/"),p="bs_"+r.default.FFMPEG_VERSION+"_utils.wasm",d="bs_"+r.default.FFMPEG_VERSION+"_ffmpeg-mp4.wasm",s={ffmpegWorkers:[],ffmpegMediaInfoCheckVideo:function(s){var o,c=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(this.VM.$DBCache.readAssetFromDB(p));case 2:return o=t.sent,t.abrupt("return",new Promise(function(n,a){var r=new Worker(f+"utils-worker.js");c.ffmpegWorkers.push(r),r.onmessage=function(t){var e=t.data.action,i=t.data.data;"load"===e?(o&&r.postMessage({action:"read_wasm_arraybuffer",data:o}),r.postMessage({action:"compile_wasm"})):"wasm_compiled"===e?r.postMessage({action:"execute_check_file",data:s}):"terminate"===e?(r.terminate(),c.ffmpegWorkers.splice(c.ffmpegWorkers.indexOf(r),1)):"execute_check_file_result"===e?n(i):"error"===e?a(i):"save_wasm_arraybuffer"===e&&c.VM.$DBCache.saveAssetToDB(p,i)}}));case 4:case"end":return t.stop()}},null,this)},ffmpegMediaInfoSeekImage:function(o,c,u){var l,d=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(this.VM.$DBCache.readAssetFromDB(p));case 2:return l=t.sent,t.abrupt("return",new Promise(function(n,a){var r=new Worker(f+"utils-worker.js");d.ffmpegWorkers.push(r);var s=[];r.onmessage=function(t){var e=t.data.action,i=t.data.data;"load"===e?(l&&r.postMessage({action:"read_wasm_arraybuffer",data:l}),r.postMessage({action:"compile_wasm"})):"wasm_compiled"===e?r.postMessage({action:"execute_seek_image",data:{file:o,timeList:c}}):"terminate"===e?(r.terminate(),d.ffmpegWorkers.splice(d.ffmpegWorkers.indexOf(r),1)):"execute_seek_image_result"===e?(s.push(i),u(i,s.length-1),s.length===c.length&&(n(s),r.terminate())):"error"===e?a(i):"save_wasm_arraybuffer"===e&&d.VM.$DBCache.saveAssetToDB(p,i)}}));case 4:case"end":return t.stop()}},null,this)},flushFFmpegWorker:function(){this.ffmpegWorkers.forEach(function(t){t.terminate()}),this.ffmpegWorkers=[]},ffmpegQuickCutVideo:function(s,o,c){var u,l=this;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("裁剪视频","start: "+o,"duration: "+c),t.next=3,a.default.awrap(this.VM.$DBCache.readAssetFromDB(d));case 3:return u=t.sent,t.abrupt("return",new Promise(function(n,a){var r=new Worker(f+"ffmpeg-mp4-worker.js");l.ffmpegWorkers.push(r),r.onmessage=function(t){var e=t.data.action,i=t.data.data;"load"===e?(u&&r.postMessage({action:"read_wasm_arraybuffer",data:u}),r.postMessage({action:"compile_wasm"})):"wasm_compiled"===e?r.postMessage({action:"execute_quick_cut",data:{file:s,start:o,duration:c}}):"terminate"===e?(r.terminate(),l.ffmpegWorkers.splice(l.ffmpegWorkers.indexOf(r),1)):"execute_result"===e?n(i):"error"===e?a(i):"save_wasm_arraybuffer"===e&&l.VM.$DBCache.saveAssetToDB(d,i)}}));case 5:case"end":return t.stop()}},null,this)}};e.default=s},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(49)),s=n(i(1588)),o=n(i(637)),c=n(i(93));function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}e.default=function(){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({db:null,DB_NAME:"bili_bs_v2",DB_VERSION:r.default.SDK_VERSION+r.default.SDK_LOWER_MEMORY_VERSION+r.default.FFMPEG_VERSION+11,VM:null,GL:r.default},s.default,{createDB:function(){var a=this;return new Promise(function(e,i){o.default.globalLoading(!0,"正在进行数据连接...",!1);var n=setTimeout(function(){o.default.globalLoading(!1),i(new Error("indexDB初始化错误，请重新刷新页面打开")),window.indexedDB.deleteDatabase(a.DB_NAME),c.default.sendCustomEvent("edit-indexdb-connect-timeout")},5e3),t=window.indexedDB.open(a.DB_NAME,a.DB_VERSION);t.onerror=function(t){o.default.globalLoading(!1),clearTimeout(n),console.error(t),i(new Error("indexDB初始化错误，请重新刷新页面打开")),window.indexedDB.deleteDatabase(a.DB_NAME)},t.onsuccess=function(t){o.default.globalLoading(!1),clearTimeout(n),a.db=t.target.result,e()},t.onupgradeneeded=function(t){a.clearDB(t.target.result)}})},clearDB:function(t){t.objectStoreNames.contains(this.GL.RESOURCE_STORE_NAME)&&t.deleteObjectStore(this.GL.RESOURCE_STORE_NAME),t.createObjectStore(this.GL.RESOURCE_STORE_NAME),t.objectStoreNames.contains(this.GL.PROJECT_QUEUE_STORE_NAME)&&t.deleteObjectStore(this.GL.PROJECT_QUEUE_STORE_NAME)}})}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={saveAssetToDB:function(i,n){var a=this;return new Promise(function(t){var e=a.db.transaction(a.GL.RESOURCE_STORE_NAME,"readwrite").objectStore(a.GL.RESOURCE_STORE_NAME).add(n,i);e.onsuccess=function(){t()},e.onerror=function(){t(null)}})},removeAssetFromDB:function(e){var i=this;return new Promise(function(t){i.db.transaction([i.GL.RESOURCE_STORE_NAME],"readwrite").objectStore(i.GL.RESOURCE_STORE_NAME).delete(e).onsuccess=function(){t(null)}})},readAssetFromDB:function(e){var n=this;return new Promise(function(i){var t=n.db.transaction(n.GL.RESOURCE_STORE_NAME,"readwrite").objectStore(n.GL.RESOURCE_STORE_NAME).get(e);t.onsuccess=function(t){var e=t.target.result;i(e)},t.onerror=function(){i(null)}})}};e.default=n},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(47));e.default=function(){return new a.default}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1591)),s=n(i(1592)),o=n(i(1593));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var u=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},r.default,{},s.default,{},o.default);e.default=u},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={FILE_UPLOAD_CLICKED:"FILE_UPLOAD_CLICKED",FILE_DRAG_UPLOAD:"FILE_DRAG_UPLOAD",FILE_QUICK_CUT_UPLOAD:"FILE_QUICK_CUT_UPLOAD",REQUIRE_RESOURCE_PANEL_REFRESH:"REQUIRE_RESOURCE_PANEL_REFRESH",REQUIRE_SAVE_PROJECT:"REQUIRE_SAVE_PROJECT",REMOVE_RESOURCE_FROM_TRACK:"REMOVE_RESOURCE_FROM_TRACK",REMOVE_RESOURCE_FROM_UPLOAD_TASK:"REMOVE_RESOURCE_FROM_UPLOAD_TASK",TIMELINE_LOGIC_DATA_READY:"TIMELINE_LOGIC_DATA_READY",REQUIRE_TRACK_REFRESH:"REQUIRE_TRACK_REFRESH",SHOW_EDIT_PANEL:"SHOW_EDIT_PANEL",HIDE_EDIT_PANEL:"HIDE_EDIT_PANEL",PAUSE_OR_PLAY:"PAUSE_OR_PLAY",DELETE_CLIP:"DELETE_CLIP",PASTE_CLIP:"PASTE_CLIP",COPY_CLIP:"COPY_CLIP",CHANGE_TEMPLATE:"CHANGE_TEMPLATE",UNDO_OPERATION:"UNDO_OPERATION",REDO_OPERATION:"REDO_OPERATION",GO_FORWARD_FRAME:"GO_FORWARD_FRAME",GO_BACKWARD_FRAME:"GO_BACKWARD_FRAME",GO_START_FRAME:"GO_START_FRAME",GO_END_FRAME:"GO_END_FRAME",DRAG_ENTER_BODY:"DRAG_ENTER_BODY",DRAG_LEAVE_BODY:"DRAG_LEAVE_BODY",LOCK_MONITOR_CONTROL:"LOCK_MONITOR_CONTROL",EDITOR_READY_TO_WORK:"EDITOR_READY_TO_WORK",MOUSEDOWN_STOPED:"MOUSEDOWN_STOPED",THEME_DELETE:"THEME_DELETE",THEME_VOLUME_UPDATE:"THEME_VOLUME_UPDATE",WILL_EXPIRE_IDS_NOTIFY:"WILL_EXPIRE_IDS_NOTIFY",EXPIRED_IDS_NOTIFY:"EXPIRED_IDS_NOTIFY",SHOW_RHYTHM_PANEL:"SHOW_RHYTHM_PANEL",ADD_KEY_FRAME:"ADD_KEY_FRAME",REMOVE_KEY_FRAME:"REMOVE_KEY_FRAME",SWITCH_RESOURCE_PANEL:"SWITCH_RESOURCE_PANEL",UPDATE_TRIPLE_STATUS:"UPDATE_TRIPLE_STATUS"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={onWebRequestWaitStatusChange:"onWebRequestWaitStatusChange",onPlaybackTimelinePosition:"onPlaybackTimelinePosition",onPlaybackStopped:"onPlaybackStopped",onPlaybackEOF:"onPlaybackEOF",onFinishAssetPackageInstallation:"onFinishAssetPackageInstallation",onImageGrabbedArrived:"onImageGrabbedArrived",onPlaybackSeek:"onPlaybackSeek",onAuthFinished:"onAuthFinished"}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={CLIP_DRAGGING:"CLIP_DRAGGING",CLIP_START_DRAGGING:"CLIP_START_DRAGGING",CLIP_STOP_DRAGGING:"CLIP_STOP_DRAGGING",CLIP_DIRECT_TO_TRACK:"CLIP_DIRECT_TO_TRACK",LOCK_OPERATION_TRACKS:"LOCK_OPERATION_TRACKS",TRACK_GAP_ACTIVE:"TRACK_GAP_ACTIVE",TRACK_GAP_INACTIVE:"TRACK_GAP_INACTIVE",TRACK_GAP_DELETE:"TRACK_GAP_DELETE",APPLY_MUSIC_CAPTION:"APPLY_MUSIC_CAPTION",APPLY_TRIPLE_STICKER:"APPLY_TRIPLE_STICKER",ADD_MUSIC_CAPTION_TO_CURRENT_TIME:"ADD_MUSIC_CAPTION_TO_CURRENT_TIME",MUSIC_CAPTION_CLIP_SELECTED:"MUSIC_CAPTION_CLIP_SELECTED",CLEAR_ALL_MUSIC_CAPTION:"CLEAR_ALL_MUSIC_CAPTION",APPLY_MUSIC_LYRICS_TO_TRACK:"APPLY_MUSIC_LYRICS_TO_TRACK",APPLY_TEXT_CAPTIONS_TO_TRACK:"APPLY_TEXT_CAPTIONS_TO_TRACK",START_DRAGGING_MUSICCAPTION_OR_THEME:"START_DRAGGING_MUSICCAPTION_OR_THEME",END_DRAGGING_MUSICCAPTION_OR_THEME:"END_DRAGGING_MUSICCAPTION_OR_THEME",RE_RENDER_AUDIO_WAVE:"RE_RENDER_AUDIO_WAVE"}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1595));function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}e.default=function(){return function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({screenWidth:0,screenHeight:0,VM:null,stage:null,layer:null,movingClipCache:null,outerBoxGap:10,screenRect:null},r.default,{getScreenInfo:function(){var t=this.screenWidth,e=this.screenHeight,i=t/2,n=e/2;return{screenHeight:e,screenWidth:t,screenCenterX:i,screenCenterY:n,screenLeftTopX:i-t/2,screenLeftTopY:n-e/2,screenLeftBottomX:i-t/2,screenLeftBottomY:n+e/2,screenRightTopX:i+t/2,screenRightTopY:n-e/2,screenRightBottomX:i+t/2,screenRightBottomY:n+e/2}},getRatioScreen:function(t,e){var i=t.width,n=t.height;return e<i/n?i=n*e:n=i/e,{width:i,height:n}}})}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(639)),s=n(i(1634)),o=n(i(1639)),c=n(i(1640)),u=n(i(1641)),l=n(i(1642));function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var f=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},s.default,{},o.default,{},c.default,{},u.default,{},l.default,{initStage:function(t){this.stage&&this.stage instanceof r.default.Stage&&this.stage.destroy();var e=document.getElementById(t);if(e){var i=e.clientWidth,n=e.clientHeight;this.screenWidth=i,this.screenHeight=n,this.stage=new r.default.Stage({container:t,width:i,height:n}),this.layer=new r.default.Layer,this.stage.add(this.layer)}},clearLayer:function(){if(this.layer){var t=this.layer.getChildren();t&&t.length&&(this.layer.removeChildren(),this.layer.destroyChildren(),this.layer.draw())}}});e.default=f},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(1635)),s=n(i(1636)),o=n(i(1637)),c=n(i(1638));function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}var l=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({},r.default,{},s.default,{},o.default,{},c.default);e.default=l},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={getTranslateTarget:function(t,e,i){var n=this.getScreenInfo(),a=n.screenWidth,r=n.screenHeight,s=n.screenLeftTopX,o=n.screenLeftTopY,c=n.screenRightTopX,u=n.screenLeftBottomX,l=n.screenLeftBottomY,d=n.screenRightBottomX,f=0,p=0;switch(i){case"left-top":f=s+t/2,p=o+e/2;break;case"top":f=s+a/2,p=o+e/2;break;case"right-top":f=c-t/2,p=o+e/2;break;case"left":f=s+t/2,p=o+r/2;break;case"center":f=s+a/2,p=o+r/2;break;case"right":f=c-t/2,p=o+r/2;break;case"left-bottom":f=u+t/2,p=l-e/2;break;case"bottom":f=u+a/2,p=l-e/2;break;case"right-bottom":f=d-t/2,p=l-e/2}return{targetX:f,targetY:p,targetCanonical:this.VM.$BSSdk.VToC(f,p),targetNDC:this.VM.$BSSdk.VToN(f,p)}}}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var x=n(i(639)),a={drawRectShape:function(t){var g=this;this.movingClipCache=null,this.clearLayer();var e=t.x,i=t.y,n=t.width,a=t.height,r=t.rotation,_=void 0===r?0:r,s=t.onScale,o=void 0===s?function(){}:s,c=t.onRotate,u=void 0===c?function(){}:c,l=t.onTranslate,w=void 0===l?function(){}:l,b=t.clip,y=this.VM.$BSSdk,d=!1;void 0===t.rotateEnabled&&(d=!0),b.isTriple&&(d=!1);var C=new window.NvsPointF(e+n/2,i+a/2);this.screenRect=new this.Rect({center:{x:this.screenWidth/2,y:this.screenHeight/2},width:this.screenWidth,height:this.screenHeight,angle:0});var T=new x.default.Rect({x:e,y:i,width:n,height:a,strokeWidth:0,draggable:!0,dragBoundFunc:function(t){var e=T.absolutePosition(),i=e.x,n=e.y,a=t.x,r=t.y;if(a===i&&r===n)return{x:a,y:r};var s=0!==_;if(!g.enableMove(b,t,s))return{x:i,y:n};C.x+=a-i,C.y+=r-n;var o=y.VToC(a,r),c=y.VToC(i,n),u=o.x-c.x,l=o.y-c.y,d=y.VToN(a,r),f=y.VToN(i,n),p=d.x-f.x,h=d.y-f.y,v=a-i,m=r-n;return w(new window.NvsPointF(u,l),new window.NvsPointF(p,h),new window.NvsPointF(v,m),C),{x:a,y:r}}});T.removeEventListener("mouseenter"),T.removeEventListener("mouseleave"),T.on("mouseenter",function(){g.stage.container().style.cursor="move"}),T.on("mouseleave",function(){g.stage.container().style.cursor="default"}),0!==_&&(T.offsetX(T.width()/2),T.offsetY(T.height()/2),T.x(T.x()+T.width()/2),T.y(T.y()+T.height()/2),T.rotation(_));var f=T.width(),p=T.height();void 0===t.keepRatio&&(t.keepRatio=!0);var h,v,m=new x.default.Transformer({node:T,rotateEnabled:d,borderStrokeWidth:2,borderStroke:"white",anchorFill:"#ED2576",anchorSize:18,anchorStroke:"white",anchorCornerRadius:9,rotationSnaps:[0,90,180,270],centeredScaling:!0,keepRatio:t.keepRatio,rotateAnchorOffset:15,enabledAnchors:b.isTriple?[]:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:function(t,e){if(!g.enableScale(b,e))return t;var i=e.width/f,n=e.height/p,a=e.width/t.width;if(n<=.1||i<=.1)return t;1!=a&&o(a,y.VToC(C.x,C.y),i,e);var r=e.rotation-t.rotation;return r&&u(-r,y.VToC(C.x,C.y)),e}});d&&(h=m.findOne(".rotater"),(v=new x.default.Path({fill:"white",data:'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><title>box-configurator-rotate</title><circle cx="8" cy="8" r="8" style="fill:#fff"/><path d="M0.9,0.5c0.1,0,0.3,0.1,0.3,0.3L1.1,2.9c1-1.4,2.6-2.4,4.5-2.4c2.9,0,5.3,2.4,5.3,5.3c0,2.9-2.4,5.3-5.3,5.3c-1.4,0-2.6-0.5-3.6-1.4c-0.1-0.1-0.1-0.3,0-0.4L2.3,9c0.1-0.1,0.3-0.1,0.4,0c0.7,0.7,1.7,1.1,2.8,1.1c2.3,0,4.2-1.9,4.2-4.2S7.8,1.7,5.5,1.7c-1.7,0-3.2,1-3.8,2.5l2.7-0.1c0.1,0,0.3,0.1,0.3,0.3v0.6c0,0.1-0.1,0.3-0.3,0.3H0.3C0.1,5.2,0,5.1,0,4.9V0.8c0-0.1,0.1-0.3,0.3-0.3H0.9z"/></svg>',name:"rotater-icon",listening:!1})).position(h.position()),v.x(h.x()-5),v.y(h.y()-5.5),m.add(v),T.on("transform",function(){m.update(),v.position(h.position()),v.x(h.x()-5),v.y(h.y()-5.5)})),this.layer.add(T),this.layer.add(m),this.layer.draw(m)},_getRectClipPositionInfo_:function(t,e,i,n,a){var r,s,o,c,u=this.VM.$BSSdk;a?(o=Math.sqrt(Math.pow(n.y-t.y,2)+Math.pow(n.x-t.x,2)),c=Math.sqrt(Math.pow(n.x-i.x,2)+Math.pow(i.y-n.y,2)),r=i.x+(t.x-i.x)/2-o/2,s=n.y+(e.y-n.y)/2-c/2):(o=i.x-t.x,c=e.y-t.y,r=0<o?t.x:i.x,s=0<c?t.y:e.y,o=Math.abs(o),c=Math.abs(c));var l=r+o/2,d=s+c/2,f=[l-t.x,d-t.y];return{drawX:r,drawY:s,width:o,height:c,rotation:a,oX:l,oY:d,oCanonical:u.VToC(l,d),oNDC:u.VToN(l,d),leftTopToCenterV:f}}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var d=n(i(639)),a={drawEllipseShape:function(t){var m=this;this.movingClipCache=null,this.clearLayer();var e=t.x,i=t.y,n=t.radiusX,a=t.radiusY,r=t.onScale,s=void 0===r?function(){}:r,o=t.onTranslate,g=void 0===o?function(){}:o,_=t.clip,w=this.VM.$BSSdk,b=new window.NvsPointF(e,i),y=new d.default.Ellipse({x:e,y:i,radiusX:n,radiusY:a,stroke:"white",strokeWidth:2,draggable:!0,dragBoundFunc:function(t){var e=y.absolutePosition(),i=e.x,n=e.y,a=t.x,r=t.y;if(a===i&&r===n)return{x:a,y:r};if(!m.enableMove(_,t,!0))return{x:i,y:n};b.x+=a-i,b.y+=r-n;var s=w.VToC(a,r),o=w.VToC(i,n),c=s.x-o.x,u=s.y-o.y,l=w.VToN(a,r),d=w.VToN(i,n),f=l.x-d.x,p=l.y-d.y,h=a-i,v=r-n;return g(new window.NvsPointF(c,u),new window.NvsPointF(f,p),new window.NvsPointF(h,v),b),{x:a,y:r}}});y.removeEventListener("mouseenter"),y.removeEventListener("mouseleave"),y.on("mouseenter",function(){m.stage.container().style.cursor="move"}),y.on("mouseleave",function(){m.stage.container().style.cursor="default"});var c=2*n,u=2*a,l=new d.default.Transformer({node:y,rotateEnabled:!1,borderStrokeWidth:2,borderStroke:"white",anchorFill:"#ED2576",anchorSize:18,anchorStroke:"white",anchorCornerRadius:9,centeredScaling:!0,keepRatio:!1,enabledAnchors:["top-left","top-right","bottom-left","bottom-right"],boundBoxFunc:function(t,e){var i=e.height/u,n=e.width/c;if(n<=.1||i<=.1)return t;var a=e.width/t.width;return 1!=a&&s(a,w.VToC(b.x,b.y),n,e),e}});this.layer.add(y),this.layer.add(l),this.layer.draw(l)}};e.default=a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(8)),a=n(i(14));function r(t){return t*Math.PI/180}var d=function(){function r(t){(0,s.default)(this,r);var e=t.center,i=t.height,n=t.width,a=t.angle;this.centerPoint=[e.x,e.y],this.halfHeight=i/2,this.halfWidth=n/2,this.setRotation(a)}return(0,a.default)(r,[{key:"getProjectionRadius",value:function(t){var e=this.dot(t,this.axisX),i=this.dot(t,this.axisY);return this.halfWidth*e+this.halfHeight*i}},{key:"dot",value:function(t,e){return Math.abs(t[0]*e[0]+t[1]*e[1])}},{key:"setRotation",value:function(t){var e=t/180*Math.PI;return this.axisX=[Math.cos(e),-Math.sin(e)],this.axisY=[Math.sin(e),Math.cos(e)],this}},{key:"isCollision",value:function(t){for(var e=[this.centerPoint[0]-t.centerPoint[0],this.centerPoint[1]-t.centerPoint[1]],i=[this.axisX,this.axisY,t.axisX,t.axisY],n=0,a=i.length;n<a;n++)if(this.getProjectionRadius(i[n])+t.getProjectionRadius(i[n])<=this.dot(e,i[n]))return!1;return!0}}]),r}(),o={Rect:d,calcRotatedPoint:function(t,e,i){return{x:(t.x-e.x)*Math.cos(r(i))-(t.y-e.y)*Math.sin(r(i))+e.x,y:(t.x-e.x)*Math.sin(r(i))+(t.y-e.y)*Math.cos(r(i))+e.y}},enableMove:function(t,e,i){var n,a,r=this.saveAndReadCache(t),s=r.width,o=r.height,c=r.rotation,u=r.leftTopToCenterV;s>this.outerBoxGap&&(s-=this.outerBoxGap),o>this.outerBoxGap&&(o-=this.outerBoxGap),a=i?(n=e.x,e.y):(n=u[0]+e.x,u[1]+e.y);var l=new d({center:{x:n,y:a},width:s,height:o,angle:c});return!!this.screenRect.isCollision(l)},saveAndReadCache:function(t){var e=null;if(this.movingClipCache)e=this.movingClipCache;else{switch(t.type){case"caption":e=this.getCaptionClipPositionInfo(t);break;case"sticker":e=this.getStickerClipPositionInfo(t);break;case"video":e=this.getVideoClipPositionInfo(t);break;case"timelineVideoFx":e=this.getEffectClipPositionInfo(t)}this.movingClipCache=e}return e},enableScale:function(t,e){var i=e.width,n=e.height;i>this.outerBoxGap&&(i-=this.outerBoxGap),n>this.outerBoxGap&&(n-=this.outerBoxGap);var a=this.saveAndReadCache(t),r=a.rotation,s=a.oX,o=a.oY,c=new d({center:{x:s,y:o},width:i,height:n,angle:r});return!!this.screenRect.isCollision(c)}};e.default=o},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={drawVideoClip:function(o){var r=this;this.clearLayer();var c=this.VM.$BSSdk,u=this.VM.$EditPanelData,l=this.VM.$store;if(o){var d=!!o.keyFrames.length,t=this.getVideoClipPositionInfo(o,d),e=t.drawX,i=t.drawY,s=t.scale,n=t.rotation,a=t.width,f=t.height;this.drawRectShape({x:e,y:i,width:a,height:f,rotation:-n,clip:o,onScale:function(t,e,i){r.movingClipCache=null;var n=parseFloat((s*i).toFixed(2));if(d){var a=l.state.currentTimelinePosition-o.inPoint;c.setVideoKeyFrameScale(o,a,n)}else c.changeVideoClipScale(o,n).then(function(){u.setVideo(l.state.currentEditPanelData,{scale:n})}).catch(function(t){console.error(t)})},onRotate:function(t){if(r.movingClipCache=null,n+=t,d){var e=l.state.currentTimelinePosition-o.inPoint;c.setVideoKeyFrameRotation(o,e,n)}else c.changeVideoClipRotation(o,n).catch(function(t){console.error(t)})},onTranslate:function(t,e,i,n){var a=parseInt(n.x),r=parseInt(n.y);if(d){var s=l.state.currentTimelinePosition-o.inPoint;c.setVideoKeyFramePosition(o,s,new window.NvsPointF(a,r))}else c.changeVideoClipXYPosition(o,new window.NvsPointF(a,r)).then(function(){u.setVideo(l.state.currentEditPanelData,{centerX:a,centerY:r})}).catch(function(t){console.error(t)})}})}},getVideoClipPositionInfo:function(t,e){var i,n,a,r=this.VM.$BSSdk,s=this.VM.$store,o=this.getScreenInfo(),c=o.screenWidth,u=o.screenHeight;if(t.path){var l,d,f=r.context.getAVFileInfo(t.m3u8Path,0).videoStreamInfo,p=s.state.ratio;d=1===f.rotation?(l=f.height,f.width):(l=f.width,f.height),p<=l/d?u=c/l*d:c=u/d*l}if(e){var h=s.state.currentTimelinePosition-t.inPoint;i=r.getVideoKeyFrameScale(t,h),n=r.getVideoKeyFrameRotation(t,h),a=r.getVideoKeyFramePosition(t,h)}else i=r.getVideoClipScale(t),n=r.getVideoClipRotation(t),a=r.getVideoClipXYPosition(t);c*=Math.abs(i),u*=Math.abs(i);var v=a.x-c/2,m=a.y-u/2,g=this.calcRotatedPoint({x:v,y:m},a,-n),_=[a.x-g.x,a.y-g.y];return{drawX:v,drawY:m,oX:a.x,oY:a.y,scale:i,rotation:n,width:c,height:u,leftTopToCenterV:_}}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={drawStickerClip:function(a){var r=this;this.clearLayer();var s=this.VM.$BSSdk,i=this.VM.$store;if(a){var o=!!a.keyFrames.length;o&&s.startSetStickerKeyFrame(a,i.state.currentTimelinePosition-a.inPoint);var t=this.getStickerClipPositionInfo(a),e=t.drawX,n=t.drawY,c=t.width,u=t.height,l=t.rotation,d=t.scale,f=function(t){var e=i.state.currentTimelinePosition-t.inPoint;s.recordStickerAllKeyFrameAtTime(t,e,!1)};this.drawRectShape({x:e,y:n,width:c,height:u,rotation:-l,clip:a,onScale:function(t,e,i){r.movingClipCache=null;var n=d*i;s.changeStickerClipScale(a,n).catch(function(t){console.error(t)}).then(function(){o&&f(a)})},onRotate:function(t){r.movingClipCache=null,l+=t,s.changeStickerClipRotation(a,l).catch(function(t){console.error(t)}).then(function(){o&&f(a)})},onTranslate:function(t,e,i,n){s.changeStickerClipTranslateXY(a,n).catch(function(t){console.error(t)}).then(function(){o&&f(a)})}})}},getStickerClipPositionInfo:function(t){var e=this.VM.$BSSdk,i=e.timelineRaw[t.rawId],n=i.getBoundingRectangleVertices(),a=n.get(0),r=n.get(1),s=n.get(2),o=n.get(3),c=e.CToV(a.x,a.y),u=e.CToV(r.x,r.y),l=e.CToV(s.x,s.y),d=e.CToV(o.x,o.y),f=parseInt(i.getRotationZ()),p=i.getScale(),h=this._getRectClipPositionInfo_(c,u,l,d,f);return{drawX:h.drawX,drawY:h.drawY,width:h.width,height:h.height,rotation:f,scale:p,oX:h.oX,oY:h.oY,oCanonical:h.oCanonical,oNDC:h.oNDC,leftTopToCenterV:h.leftTopToCenterV}}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={drawCaptionClip:function(i){var n=this;this.clearLayer();var a=this.VM.$BSSdk,r=this.VM.$store;if(i){var s=!!i.keyFrames.length;s&&a.startSetCaptionKeyFrame(i,r.state.currentTimelinePosition-i.inPoint);var t=this.getCaptionClipPositionInfo(i),e=t.drawX,o=t.drawY,c=t.width,u=t.height,l=t.rotation,d=function(t){var e=r.state.currentTimelinePosition-t.inPoint;a.recordCaptionAllKeyFrameAtTime(t,e,!1)};this.drawRectShape({x:e,y:o,width:c,height:u,rotation:-l,clip:i,onScale:function(t,e){n.movingClipCache=null,i.isMusicCaption?a.changeMusicCaptionClipOffsetScale(t,e).then(function(){n.updateScale(t,!0)}).catch(function(t){console.error(t)}):a.changeCaptionClipOffsetScale(i,t,e).then(function(){n.updateScale(t),s&&d(i)}).catch(function(t){console.error(t)})},onRotate:function(t,e){n.movingClipCache=null,i.isMusicCaption?a.changeMusicCaptionClipOffsetRotation(t,e).catch(function(t){console.error(t)}):a.changeCaptionClipOffsetRotation(i,t,e).then(function(){s&&d(i)}).catch(function(t){console.error(t)})},onTranslate:function(t){i.isMusicCaption?a.changeMusicCaptionClipOffsetTranslateXY(t).catch(function(t){console.error(t)}):a.changeCaptionClipOffsetTranslateXY(i,t).then(function(){s&&d(i)}).catch(function(t){console.error(t)})}})}},updateScale:function(t,e){var i=1<arguments.length&&void 0!==e&&e,n=this.VM.$EditPanelData,a=this.VM.$store;if(i){var r=a.state.musicCaptionEditData,s=r.scale,o=r.fontSize,c=s*t;n.setCaption(a.state.musicCaptionEditData,{scale:c,scaleMutiFontSize:Math.round(c*o)},!0)}else{var u=a.state.currentEditPanelData,l=u.scale,d=u.fontSize,f=l*t;n.setCaption(a.state.currentEditPanelData,{scale:f,scaleMutiFontSize:Math.round(f*d)})}},getCaptionClipPositionInfo:function(t){var e=this.VM.$BSSdk,i=e.timelineRaw[t.rawId],n=i.getBoundingRectangleVertices(),a=n.get(0),r=n.get(1),s=n.get(2),o=n.get(3),c=e.CToV(a.x,a.y),u=e.CToV(r.x,r.y),l=e.CToV(s.x,s.y),d=e.CToV(o.x,o.y),f=parseInt(i.getRotationZ()),p=i.getScaleX(),h=this._getRectClipPositionInfo_(c,u,l,d,f);return{drawX:h.drawX,drawY:h.drawY,width:h.width,height:h.height,rotation:f,scale:p,oX:h.oX,oY:h.oY,oCanonical:h.oCanonical,oNDC:h.oNDC,leftTopToCenterV:h.leftTopToCenterV}}};e.default=n},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={drawRegionEffectClip:function(s){var o=this;this.clearLayer();var c=this.VM.$BSSdk;if(s)if(s.shape===c.GL.MASK_SHAPE_ELLIPSE){var t=c.getEffectEllipseVRegion(s),a=t.centerPoint,r=t.radiusX,u=t.radiusY;this.drawEllipseShape({x:a.x,y:a.y,radiusX:r,radiusY:u,clip:s,onTranslate:function(t,e,i){a.x+=i.x,a.y+=i.y,c.setVEllipseToEllipseRegion(s,a,r,u),c.setEffectEllipseRegion(s).catch(function(t){console.error(t)})},onScale:function(t,e,i,n){r=n.width/2,u=n.height/2,c.setVEllipseToEllipseRegion(s,a,r,u),c.setEffectEllipseRegion(s).catch(function(t){console.error(t)})}})}else{var e=c.getEffectVRegion(s),l=e.vPoint1,d=e.vPoint2,f=e.vPoint3,p=e.vPoint4,i=this._getRectClipPositionInfo_(l,d,f,p,0),n=i.drawX,h=i.drawY,v=i.width,m=i.height,g=i.oX,_=i.oY,w=new window.NvsPointF(g,_);this.drawRectShape({x:n,y:h,width:v,height:m,rotateEnabled:!1,keepRatio:!1,clip:s,onScale:function(t,e,i,n){o.movingClipCache=null;var a=n.width,r=n.height;l.x=w.x-a/2,d.x=w.x-a/2,f.x=w.x+a/2,p.x=w.x+a/2,l.y=w.y-r/2,d.y=w.y+r/2,f.y=w.y+r/2,p.y=w.y-r/2,c.setVPointToRegion(s,l,d,f,p),c.setEffectRegion(s).catch(function(t){console.error(t)})},onTranslate:function(t,e,i,n){l.x+=i.x,d.x+=i.x,f.x+=i.x,p.x+=i.x,l.y+=i.y,d.y+=i.y,f.y+=i.y,p.y+=i.y,w=n,c.setVPointToRegion(s,l,d,f,p),c.setEffectRegion(s).catch(function(t){console.error(t)})}})}},getEffectClipPositionInfo:function(t){var e=this.VM.$BSSdk.getEffectVRegion(t),i=e.vPoint1,n=e.vPoint2,a=e.vPoint3,r=e.vPoint4,s=this._getRectClipPositionInfo_(i,n,a,r,0);return{drawX:s.drawX,drawY:s.drawY,width:s.width,height:s.height,rotation:0,oX:s.oX,oY:s.oY,leftTopToCenterV:s.leftTopToCenterV}}};e.default=n},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(6)),r=n(i(67));function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach(function(t){(0,a.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}var c={_updatePanel_:function(t,e){var i=0<arguments.length&&void 0!==t?t:{},n=o({},i,{},1<arguments.length&&void 0!==e?e:{});return r.default.commit("updateCurrentEditPanelData",n),i},_updateMusicCaptionEditData_:function(t,e){var i=0<arguments.length&&void 0!==t?t:{},n=o({},i,{},1<arguments.length&&void 0!==e?e:{});return r.default.commit("setMusicCaptionEditData",n),i},setVideo:function(t,e){var i=o({},t);return this._updatePanel_(i,e)},setAudio:function(t,e){var i=o({},t);return this._updatePanel_(i,e)},setSticker:function(t,e){var i=o({},t);return this._updatePanel_(i,e)},setCaption:function(t,e,i){var n=2<arguments.length&&void 0!==i&&i,a=o({},t);return n?this._updateMusicCaptionEditData_(a,e):this._updatePanel_(a,e)},setFilter:function(t,e){var i=o({},t);return this._updatePanel_(i,e)},setParticle:function(t,e){var i=o({},t);return this._updatePanel_(i,e)},setEffect:function(t,e){var i=o({},t);return this._updatePanel_(i,e)},setTheme:function(t,e){var i=o({},t);return this._updatePanel_(i,e)}};e.default=c},function(t,e,i){"use strict";var n=i(3),a=i(20);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(i(610)),a(i(69)),a(i(53)),a(i(31)),a(i(94)),a(i(27)),a(i(137)),a(i(95));var r=n(i(49));e.default=function(t){return{debug:!(0<arguments.length&&void 0!==t)||t,VM:null,GL:r.default}}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(35)),r=n(i(93)),s={install:function(t){t.directive("customClickEvent",{bind:function(t,e){var i=e.value;if(!i)return null;t.$customEvent=i,t.$customClick=function(){var e=this;"object"===(0,a.default)(this.$customEvent)?Object.keys(this.$customEvent).forEach(function(t){e.$customEvent.hasOwnProperty(t)&&r.default.sendCustomEvent(t,e.$customEvent[t])}):r.default.sendCustomEvent(this.$customEvent)},t.addEventListener("click",t.$customClick)},unbind:function(t){t.removeEventListener("click",t.$customClick)}})}};e.default=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={install:function(t){t.prototype.mdStop=function(){this.$Bus.$emit(this.$GLEventKey.MOUSEDOWN_STOPED)}}}},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.generateMobileAccessToken=function(){var e;return a.default.async(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.default.awrap(r.default.get("/studio/video-editor-interface/video-editor/qrcode/token"));case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}})};var a=n(i(4)),r=n(i(53))},function(t,e,i){"use strict";i.r(e);var n=i(644),a=i(536);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1649);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"1f07c014",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(538);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(645),a=i(539);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1651);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(541);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(i(6)),a=n(i(47)),r=n(i(136));function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function c(t,e,i,n){var a=3<arguments.length&&void 0!==n?n:{showCancel:!0,confirmBtnText:"确定",cancelBtnText:"取消",cancelFirst:!1};if("undefined"!=typeof window){var r=new u({propsData:{text:t,width:a.width||"380px",showCancel:a.showCancel,confirmBtnText:a.confirmBtnText,cancelFirst:a.cancelFirst,cancelBtnText:a.cancelBtnText,bodyStyle:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach(function(t){(0,s.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({"background-color":"#090A0B","text-align":"center"},a.bodyStyle)}});r.$mount(),document.body.appendChild(r.$el),r.visible=!0,r.onClose=function(){l.shift(),document.body.removeChild(r.$el),i()},r.onOk=function(){l.shift(),document.body.removeChild(r.$el),e()},l.push(r)}}var u=a.default.extend(r.default),l=[];e.default=c},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=n(i(6)),a=n(i(47)),r=n(i(136));function c(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,n)}return i}function s(t,e,i,n){var a=3<arguments.length&&void 0!==n?n:{showCancel:!0,confirmBtnText:"确定",cancelBtnText:"取消",cancelFirst:!1,inputType:"text",inputValue:""};if("undefined"!=typeof window){var r=new u({propsData:{title:t,text:"textarea"===a.inputType?'<textarea onfocus="this.select()" id="prompt-input" rows="'.concat(a.rows||3,'"></textarea>'):'<input onfocus="this.select()" id="prompt-input"></input>',width:a.width||"380px",showCancel:a.showCancel,confirmBtnText:a.confirmBtnText,cancelFirst:a.cancelFirst,cancelBtnText:a.cancelBtnText,bodyStyle:function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?c(Object(i),!0).forEach(function(t){(0,o.default)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):c(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}({"background-color":"#090A0B","text-align":"center","padding-bottom":"30px"},a.bodyStyle)}});r.$mount(),document.body.appendChild(r.$el);var s=document.getElementById("prompt-input");s.style.backgroundColor="#212122",s.style.color="white",s.style.display="inline-block",s.style.width="60%",s.style.padding="10px",s.style.borderRadius="4px",s.style.margin="20px 0",s.value=a.inputValue,setTimeout(function(){s.focus()},100),r.visible=!0,r.onClose=function(){l.shift(),r.visible=!1,setTimeout(function(){document.body.removeChild(r.$el)},300),i()},r.onOk=function(){s.value.length?(l.shift(),r.visible=!1,setTimeout(function(){document.body.removeChild(r.$el)},300),e(s.value)):r.$message({text:"输入为空",type:"error"})},l.push(r)}}var u=a.default.extend(r.default),l=[];e.default=s},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1655)).default;e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(659),a=i(542);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1656);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"360a1c58",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(544);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i(1658)).default;e.default=a},function(t,e,i){"use strict";i.r(e);var n=i(658),a=i(545);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1661);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=function(t,e,i){t&&e&&i&&(document.addEventListener?t.addEventListener(e,i,!1):t.attachEvent("on"+e,i))},e.off=function(t,e,i){t&&e&&(document.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent("on"+e,i))},e.elementContains=function(t,e){return"function"==typeof t.contains&&t.contains(e)}},function(t,e,i){"use strict";var n=i(547);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Select",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"Option",{enumerable:!0,get:function(){return r.default}});var a=n(i(1663)),r=n(i(1665))},function(t,e,i){"use strict";i.r(e);var n=i(657),a=i(548);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1664);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(550);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(656),a=i(551);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1666);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(553);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(646),a=i(554);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";i.r(e);var n=i(647),a=i(556);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1669);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"65879132",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(558);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(648),a=i(559);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1671);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"2e0f1896",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(561);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(778),a=i(562);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1673);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"67efbe10",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(564);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(649),a=i(565);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1675);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,"6e755f1b",null);e.default=o.exports},function(t,e,i){"use strict";var n=i(567);i.n(n).a},function(t,e,i){"use strict";var n=i(3);Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"SelectLight",{enumerable:!0,get:function(){return a.default}}),Object.defineProperty(e,"OptionLight",{enumerable:!0,get:function(){return r.default}});var a=n(i(1677)),r=n(i(1679))},function(t,e,i){"use strict";i.r(e);var n=i(651),a=i(568);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1678);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(570);i.n(n).a},function(t,e,i){"use strict";i.r(e);var n=i(654),a=i(571);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i(1680);var s=i(0),o=Object(s.a)(a.default,n.a,n.b,!1,null,null,null);e.default=o.exports},function(t,e,i){"use strict";var n=i(573);i.n(n).a},function(t,e,i){"use strict";var n=i(3)(i(24));t.exports=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=(t=t||{}).ignoreErrors||[],i=t.blacklistUrls||[];return Array.isArray(e)||(e=[]),Array.isArray(i)||(i=[]),{ignoreErrors:["$ is not defined","timeout of 0ms exceeded","Network Error"].concat((0,n.default)(e)),blacklistUrls:[/vendor/,/bfs\/seed\/log\/report\/log-reporter.js/,/-extension:\/\//,/file:\/\//].concat((0,n.default)(i))}}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function n(t){function e(){setTimeout(function(){!0===i._options.checkOnLoad&&(!0===i._options.debug&&i._log("onload->eventCallback","A check loading is launched"),null===i._var.bait&&i._creatBait(),setTimeout(function(){i.check()},1))},1)}this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var i=this;void 0!==window.addEventListener?window.addEventListener("load",e,!1):window.attachEvent("onload",e)}n.prototype._options=null,n.prototype._var=null,n.prototype._bait=null,n.prototype._log=function(t,e){console.log("[FuckAdBlock]["+t+"] "+e)},n.prototype.setOption=function(t,e){if(void 0!==e){var i=t;(t={})[i]=e}for(var n in t)this._options[n]=t[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+t[n]+'"');return this},n.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=window.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},n.prototype._destroyBait=function(){window.document.body.removeChild(this._var.bait),!(this._var.bait=null)===this._options.debug&&this._log("_destroyBait","Bait has been removed")},n.prototype.check=function(t){if(void 0===t&&(t=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===t?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var e=this;return!(this._var.loopNumber=0)===t&&(this._var.loop=setInterval(function(){e._checkBait(t)},this._options.loopCheckTime)),setTimeout(function(){e._checkBait(t)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},n.prototype._checkBait=function(t){var e=!1;if(null===this._var.bait&&this._creatBait(),null===window.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!==this._var.bait.offsetHeight&&0!==this._var.bait.offsetLeft&&0!==this._var.bait.offsetTop&&0!==this._var.bait.offsetWidth&&0!==this._var.bait.clientHeight&&0!==this._var.bait.clientWidth||(e=!0),void 0!==window.getComputedStyle){var i=window.getComputedStyle(this._var.bait,null);!i||"none"!=i.getPropertyValue("display")&&"hidden"!=i.getPropertyValue("visibility")||(e=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===e?"positive":"negative")),!0===t&&(this._var.loopNumber++,this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop()),!0===e?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},n.prototype._stopLoop=function(){clearInterval(this._var.loop),this._var.loop=null,!(this._var.loopNumber=0)===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},n.prototype.emitEvent=function(t){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===t?"positive":"negative")+" detection was called");var e=this._var.event[!0===t?"detected":"notDetected"];for(var i in e)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(i)+1)+"/"+e.length),e.hasOwnProperty(i)&&e[i]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},n.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},n.prototype.on=function(t,e){return this._var.event[!0===t?"detected":"notDetected"].push(e),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===t?"detected":"notDetected")+'" was added'),this},n.prototype.onDetected=function(t){return this.on(!0,t)},n.prototype.onNotDetected=function(t){return this.on(!1,t)};var a=n;e.default=a},function(t,e,i){var n={"./bilibiliPink.svg":1684,"./left.svg":1685,"./三连.svg":1686,"./三连高亮.svg":1687,"./上一曲.svg":1688,"./上一步.svg":1689,"./上传.svg":1690,"./下一曲.svg":1691,"./下一步.svg":1692,"./下载.svg":1693,"./主题v2.svg":1694,"./主题v2高亮.svg":1695,"./主题白色.svg":1696,"./关键帧添加.svg":1697,"./关键帧移除.svg":1698,"./关键点.svg":1699,"./关键点选中.svg":1700,"./关闭.svg":1701,"./减少.svg":1702,"./分离.svg":1703,"./创作中心.svg":1704,"./删除.svg":1705,"./刷新.svg":1706,"./剪辑.svg":1707,"./加号2.svg":1708,"./勾.svg":1709,"./变焦拉远.svg":1710,"./变焦推近.svg":1711,"./变焦无.svg":1712,"./右转.svg":1713,"./向左.svg":1714,"./唱词字幕.svg":1715,"./唱词字幕v2.svg":1716,"./唱词字幕v2高亮.svg":1717,"./唱词字幕添加.svg":1718,"./回退.svg":1719,"./垂直翻转.svg":1720,"./增加.svg":1721,"./复制.svg":1722,"./字幕v2.svg":1723,"./字幕v2高亮.svg":1724,"./定格.svg":1725,"./封面-关闭.svg":1726,"./封面-播放.svg":1727,"./封面-暂停.svg":1728,"./展开.svg":1729,"./展开侧边栏.svg":1730,"./左转.svg":1731,"./帮助.svg":1732,"./录音.svg":1733,"./录音v2.svg":1734,"./录音v2高亮.svg":1735,"./快剪上传.svg":1736,"./快捷键.svg":1737,"./快进.svg":1738,"./手机_二维码上传.svg":1739,"./批量管理.svg":1740,"./投稿.svg":1741,"./按钮进入.svg":1742,"./搜索放大镜.svg":1743,"./播放.svg":1744,"./操作栏删除.svg":1745,"./收缩.svg":1746,"./收起.svg":1747,"./收起侧边栏.svg":1748,"./放大.svg":1749,"./放大预览.svg":1750,"./暂停.svg":1751,"./更多.svg":1752,"./更新记录.svg":1753,"./水平翻转.svg":1754,"./添加.svg":1755,"./添加到轨道.svg":1756,"./滤镜.svg":1757,"./滤镜v2.svg":1758,"./滤镜v2高亮.svg":1759,"./特效.svg":1760,"./特效v2.svg":1761,"./特效v2高亮.svg":1762,"./登出.svg":1763,"./稿件管理.svg":1764,"./粒子.svg":1765,"./粒子v2.svg":1766,"./粒子v2高亮.svg":1767,"./编辑.svg":1768,"./缩小.svg":1769,"./联系客服.svg":1770,"./草稿.svg":1771,"./账号下拉.svg":1772,"./账号展开.svg":1773,"./贴纸.svg":1774,"./贴纸v2.svg":1775,"./贴纸v2高亮.svg":1776,"./资源库.svg":1777,"./资源库v2.svg":1778,"./资源库v2高亮.svg":1779,"./资源未选中.svg":1780,"./资源管理删除.svg":1781,"./资源管理取消.svg":1782,"./资源选中.svg":1783,"./轨道不可见.svg":1784,"./轨道主题.svg":1785,"./轨道可见.svg":1786,"./轨道字幕.svg":1787,"./轨道效果.svg":1788,"./轨道视频.svg":1789,"./轨道贴纸.svg":1790,"./轨道音乐.svg":1791,"./轨道音量.svg":1792,"./转场.svg":1793,"./转场v2.svg":1794,"./转场v2高亮.svg":1795,"./转场选中.svg":1796,"./重命名.svg":1797,"./静音.svg":1798,"./音乐.svg":1799,"./音乐v2.svg":1800,"./音乐v2高亮.svg":1801,"./音乐踩点-取消.svg":1802,"./音乐踩点-右箭头.svg":1803,"./音乐踩点-完成.svg":1804,"./音乐踩点-左箭头.svg":1805,"./音乐踩点-播放.svg":1806,"./音乐踩点-暂停.svg":1807,"./音乐踩点-白色.svg":1808,"./音乐踩点-白色删除.svg":1809,"./音乐踩点.svg":1810};function a(t){var e=r(t);return i(e)}function r(t){var e=n[t];if(e+1)return e;var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}a.keys=function(){return Object.keys(n)},a.resolve=r,(t.exports=a).id=1683},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-bilibiliPink",use:"icon-bilibiliPink-usage",viewBox:"0 0 2296 1024",content:'<symbol class="icon" viewBox="0 0 2296 1024" xmlns="http://www.w3.org/2000/svg" id="icon-bilibiliPink"><defs><style></style></defs><path d="M787.404 123.75l104.437-12.89a5.599 5.599 0 016.27 5.085L965.42 908a5.685 5.685 0 01-5.664 6.164h-75.63a6.135 6.135 0 01-6.088-5.384l-95.623-778.644a5.735 5.735 0 014.988-6.388M645.16 542.753l116.8-14.415a5.933 5.933 0 016.616 5.164L819.504 948.2a5.546 5.546 0 01-4.826 6.177l-86.255 10.644a5.135 5.135 0 01-5.66-4.08L640.17 549.665a5.817 5.817 0 014.99-6.913m362.929-6.133h114.996a5.54 5.54 0 015.54 5.542l-.034 418.829a5.35 5.35 0 01-5.348 5.35h-83.217a5.65 5.65 0 01-5.636-5.22l-31.834-418.533a5.546 5.546 0 015.533-5.966M607.758 331.477l49.67-6.13a5.683 5.683 0 016.329 4.884l20.168 149.414a5.696 5.696 0 01-4.947 6.412l-39.432 4.867a5.7 5.7 0 01-6.29-4.54l-29.823-148.919a5.04 5.04 0 014.325-5.988m77.813-3.977l18.408 149.897a5.527 5.527 0 006.163 4.813l45.916-5.665a5.485 5.485 0 004.772-6.114L742.383 320.21a5.305 5.305 0 00-5.913-4.615l-46.039 5.68a5.581 5.581 0 00-4.86 6.226m300.73 1.279l11.653 151.525a5.12 5.12 0 005.107 4.73h40.6a5.276 5.276 0 005.276-5.393l-3.323-151.161a5.498 5.498 0 00-5.498-5.38H991.56a5.274 5.274 0 00-5.258 5.679m79.516-.08l3.318 150.819a5.64 5.64 0 005.638 5.517h43.158a5.57 5.57 0 005.57-5.572l-.077-151.056a5.309 5.309 0 00-5.309-5.306h-46.818a5.483 5.483 0 00-5.478 5.599m561.323 479.317c-66.551 63.96-144.217 103.066-151.315 106.806a5.48 5.48 0 01-8.033-3.428c-2.908-13.938-15.101-101.117-22.08-167.415-.352-3.314 2.272-6.742 6.386-6.175 98.893 17.804 170.329 59.344 173.003 60.803 4.856 2.65 4.63 6.913 2.04 9.41m-341.314 204.815a6.384 6.384 0 005.621 5.869c213.555 24.4 364.25-51.822 432.541-93.894 66.897-41.21 159.1-140.993 26.198-217.01-138.882-79.444-264.456-86.364-371.677-77.333-3.513.297-6.68-2.114-7.141-5.607-39.598-299.12-26.031-565.517-23.3-615.016a5.146 5.146 0 00-6.904-5.129l-173.961 63.249a5.867 5.867 0 00-3.769 6.625c9.436 49.56 87.273 464.98 122.397 938.246M463.811 808.017c-66.549 63.96-144.217 103.066-151.315 106.806a5.48 5.48 0 01-8.031-3.428c-2.907-13.938-15.1-101.117-22.08-167.415-.354-3.314 2.27-6.742 6.386-6.175 98.893 17.804 170.329 59.344 173.003 60.803 4.854 2.65 4.63 6.913 2.04 9.41M122.5 1012.832a6.384 6.384 0 005.621 5.869c213.555 24.4 364.25-51.822 432.54-93.894 66.898-41.21 159.1-140.993 26.197-217.01-138.88-79.444-264.456-86.364-371.675-77.333-3.515.297-6.68-2.114-7.141-5.607-39.598-299.12-26.03-567.714-23.3-617.213a5.146 5.146 0 00-6.904-5.129L3.875 65.765A5.867 5.867 0 00.106 72.39c9.436 49.56 87.273 467.177 122.394 940.443M1953.16 123.75l104.435-12.89a5.601 5.601 0 016.271 5.085L2131.176 908a5.69 5.69 0 01-5.666 6.164h-75.63a6.13 6.13 0 01-6.088-5.384l-95.62-778.644a5.735 5.735 0 014.992-6.388m-142.25 419.005l116.802-14.415a5.933 5.933 0 016.614 5.164l50.927 414.698a5.544 5.544 0 01-4.825 6.177l-86.256 10.644a5.135 5.135 0 01-5.66-4.08l-82.59-411.275a5.817 5.817 0 014.988-6.913M2173.843 536.62h114.995a5.54 5.54 0 015.542 5.542l-.035 418.829a5.35 5.35 0 01-5.35 5.35h-83.217a5.647 5.647 0 01-5.632-5.22l-31.834-418.535a5.546 5.546 0 015.53-5.966M1773.511 331.477l49.671-6.13a5.685 5.685 0 016.329 4.884l20.168 149.414a5.691 5.691 0 01-4.945 6.412l-39.435 4.867a5.702 5.702 0 01-6.289-4.54l-29.82-148.919a5.039 5.039 0 014.321-5.988m77.813-3.977l18.41 149.897a5.524 5.524 0 006.164 4.813l45.915-5.665a5.487 5.487 0 004.773-6.114l-18.45-150.222a5.3 5.3 0 00-5.91-4.615l-46.039 5.68a5.586 5.586 0 00-4.863 6.226m300.731 1.279l11.655 151.525a5.116 5.116 0 005.105 4.73h40.602a5.278 5.278 0 005.276-5.393l-3.325-151.161a5.494 5.494 0 00-5.493-5.38h-48.56a5.274 5.274 0 00-5.26 5.679m79.518-.08l3.316 150.819a5.643 5.643 0 005.639 5.517h43.162a5.57 5.57 0 005.568-5.572l-.077-151.056a5.309 5.309 0 00-5.309-5.306h-46.82a5.478 5.478 0 00-5.476 5.599" fill="#FF6695" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-left",use:"icon-left-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-left"><defs><style></style></defs><path d="M252.032 514.368l322.24-322.624 45.12 45.184-322.24 322.688-45.12-45.248zm45.12-45.184L613.824 786.24l-45.12 45.184-316.672-316.992 45.12-45.248z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-三连",use:"icon-三连-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-三连"><defs><style></style></defs><path d="M232.727 977.455h-70.05A115.945 115.945 0 0146.544 861.696V491.66a115.945 115.945 0 01116.131-115.805h70.051v601.6zm69.818-602.904c94.441-33.931 148.108-120.227 161.048-263.447 5.073-56.087 58.507-79.407 109.382-54.83 50.501 24.39 83.828 85.969 83.828 168.261a654.43 654.43 0 01-18.386 151.32h222.674a116.364 116.364 0 01112.966 144.197L900.608 818.13a209.455 209.455 0 01-203.357 159.326H302.545V374.55z" fill="#8e8f92" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-三连高亮",use:"icon-三连高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-三连高亮"><defs><style></style></defs><path d="M232.727 977.455h-70.05A115.945 115.945 0 0146.544 861.696V491.66a115.945 115.945 0 01116.131-115.805h70.051v601.6zm69.818-602.904c94.441-33.931 148.108-120.227 161.048-263.447 5.073-56.087 58.507-79.407 109.382-54.83 50.501 24.39 83.828 85.969 83.828 168.261a654.43 654.43 0 01-18.386 151.32h222.674a116.364 116.364 0 01112.966 144.197L900.608 818.13a209.455 209.455 0 01-203.357 159.326H302.545V374.55z" fill="#4388ff" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-上一曲",use:"icon-上一曲-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-上一曲"><defs><style></style></defs><path d="M1024 0H0v1024h1024z" fill-opacity="0" /><path d="M361.728 401.6V244.16a89.6 89.6 0 10-179.2 0v537.6a89.6 89.6 0 10179.2 0V660.288L763.264 897.6a70.4 70.4 0 00106.24-60.608V224.96a70.4 70.4 0 00-106.24-60.608L361.728 401.6z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-上一步",use:"icon-上一步-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-上一步"><defs><style></style></defs><path d="M512 170.667a384 384 0 11-384 384 42.667 42.667 0 0185.333 0A298.667 298.667 0 10522.24 256.17L512 256H213.333a42.667 42.667 0 01-4.992-85.035l4.992-.298H512z" /><path d="M311.168 44.8a42.667 42.667 0 0163.659 56.619l-3.328 3.712-108.203 108.202 108.203 108.203a42.667 42.667 0 013.328 56.619l-3.328 3.712a42.667 42.667 0 01-56.619 3.285l-3.712-3.285L172.8 243.499a42.667 42.667 0 01-3.285-56.619l3.285-3.712L311.168 44.8z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-上传",use:"icon-上传-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-上传"><defs><style></style></defs><path d="M328.405 85.333a85.333 85.333 0 0141.174 10.582l6.186 3.754 149.163 99.414h285.739a128 128 0 01127.786 120.49l.214 7.552v227.542a42.667 42.667 0 01-85.035 4.992l-.299-4.992V327.125a42.667 42.667 0 00-37.674-42.41l-4.992-.256H524.928a85.333 85.333 0 01-41.173-10.624l-6.187-3.712-149.163-99.456H213.333a42.667 42.667 0 00-42.368 37.674l-.298 4.992v512a42.667 42.667 0 0037.674 42.368l4.992.299h192a42.667 42.667 0 014.992 85.035l-4.992.298h-192a128 128 0 01-127.786-120.49l-.214-7.51v-512A128 128 0 01205.824 85.547l7.51-.214h115.071z" /><path d="M597.333 938.667a42.667 42.667 0 01-42.368-37.675l-.298-4.992V522.667a42.667 42.667 0 0185.034-4.992l.299 4.992V896a42.667 42.667 0 01-42.667 42.667z" /><path d="M433.664 682.539a42.667 42.667 0 01-60.459-59.947l3.798-3.84 192-170.667a42.667 42.667 0 0152.48-3.285l4.181 3.328 192 170.667a42.667 42.667 0 01-52.48 67.072l-4.181-3.328-163.67-145.366-163.669 145.408z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-下一曲",use:"icon-下一曲-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-下一曲"><defs><style></style></defs><path d="M0 0h1024v1024H0z" fill-opacity="0" /><path d="M662.272 401.6V244.16a89.6 89.6 0 11179.2 0v537.6a89.6 89.6 0 11-179.2 0V660.288L260.736 897.6a70.4 70.4 0 01-106.24-60.608V224.96a70.4 70.4 0 01106.24-60.608L662.272 401.6z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-下一步",use:"icon-下一步-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-下一步"><defs><style></style></defs><path d="M512 170.667a384 384 0 10384 384 42.667 42.667 0 00-85.333 0A298.667 298.667 0 11501.76 256.17L512 256h298.667a42.667 42.667 0 004.992-85.035l-4.992-.298H512z" /><path d="M712.832 44.8a42.667 42.667 0 00-63.659 56.619l3.328 3.712 108.203 108.202-108.203 108.203a42.667 42.667 0 00-3.328 56.619l3.328 3.712a42.667 42.667 0 0056.619 3.285l3.712-3.285L851.2 243.499a42.667 42.667 0 003.285-56.619l-3.285-3.712L712.832 44.8z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-下载",use:"icon-下载-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-下载"><defs><style></style></defs><path d="M102.4 563.2q51.2 0 51.2 51.2v204.8q0 51.2-51.2 51.2t-51.2-51.2V614.4q0-51.2 51.2-51.2zM921.6 563.2q51.2 0 51.2 51.2v204.8q0 51.2-51.2 51.2t-51.2-51.2V614.4q0-51.2 51.2-51.2z" /><path d="M972.8 819.2q0 51.2-51.2 51.2H102.4q-51.2 0-51.2-51.2t51.2-51.2h819.2q51.2 0 51.2 51.2zM512 51.2q51.2 0 51.2 51.2v358.4q0 51.2-51.2 51.2t-51.2-51.2V102.4q0-51.2 51.2-51.2z" /><path d="M500.429 652.39L355.072 486.298a15.36 15.36 0 0111.571-25.498h290.714a15.36 15.36 0 0111.571 25.498L523.52 652.39a15.36 15.36 0 01-23.04 0z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-主题v2",use:"icon-主题v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-主题v2"><defs><style></style></defs><path d="M591.787 810.667l317.952.298c39.552 0 71.594 28.587 71.594 63.83 0 33.194-28.373 60.501-64.682 63.573l-6.912.299-368.811-.299c-39.552 0 33.877-127.659 50.859-127.659z" fill="#4E4E4E" /><path d="M512 85.333c235.648 0 426.667 191.019 426.667 426.667S747.648 938.667 512 938.667 85.333 747.648 85.333 512 276.352 85.333 512 85.333zm0 504.235a116.352 116.352 0 100 232.747 116.352 116.352 0 000-232.747zm-193.92-193.92a116.352 116.352 0 100 232.704 116.352 116.352 0 000-232.704zm387.84 0a116.352 116.352 0 100 232.704 116.352 116.352 0 000-232.704zM512 201.685a116.352 116.352 0 100 232.747 116.352 116.352 0 000-232.747z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-主题v2高亮",use:"icon-主题v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-主题v2高亮"><defs><style></style></defs><path d="M591.787 810.667l317.952.298c39.552 0 71.594 28.587 71.594 63.83 0 33.194-28.373 60.501-64.682 63.573l-6.912.299-368.811-.299c-39.552 0 33.877-127.659 50.859-127.659z" fill="#9EC2FF" /><path d="M512 85.333c235.648 0 426.667 191.019 426.667 426.667S747.648 938.667 512 938.667 85.333 747.648 85.333 512 276.352 85.333 512 85.333zm0 504.235a116.352 116.352 0 100 232.747 116.352 116.352 0 000-232.747zm-193.92-193.92a116.352 116.352 0 100 232.704 116.352 116.352 0 000-232.704zm387.84 0a116.352 116.352 0 100 232.704 116.352 116.352 0 000-232.704zM512 201.685a116.352 116.352 0 100 232.747 116.352 116.352 0 000-232.747z" fill="#4388FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-主题白色",use:"icon-主题白色-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-主题白色"><defs><style></style></defs><path d="M586.24 784.299l287.659.213c35.754 0 64.768 25.856 64.768 57.77 0 30.038-25.686 54.7-58.539 57.515l-6.23.256-333.695-.256c-35.798 0 30.677-115.498 45.994-115.498z" opacity=".5" /><path d="M514.048 128a386.048 386.048 0 110 772.053 386.048 386.048 0 010-772.053zm0 456.235a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56zM338.56 408.747a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56zm350.933 0a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56zM514.048 233.3a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-关键帧添加",use:"icon-关键帧添加-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-关键帧添加"><g stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linejoin="round"><path d="M13.5 4.15L19.189 13 13.5 21.85 7.811 13 13.5 4.15z" fill="none" /><path stroke-linecap="round" d="M5.5 2v7M2 5.5h7" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-关键帧移除",use:"icon-关键帧移除-usage",viewBox:"0 0 24 24",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" id="icon-关键帧移除"><g stroke="#979797" stroke-width="2" fill="none" fill-rule="evenodd" stroke-linejoin="round"><path d="M13.5 4.15L19.189 13 13.5 21.85 7.811 13 13.5 4.15z" fill="none" /><path stroke-linecap="round" d="M2 3.5h7" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-关键点",use:"icon-关键点-usage",viewBox:"0 0 10 14",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14" id="icon-关键点"><path d="M5 .099L9.6 7 5 13.901.4 7 5 .099z" fill="#FFF" fill-rule="nonzero" stroke="#4388FF" stroke-linejoin="round" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-关键点选中",use:"icon-关键点选中-usage",viewBox:"0 0 10 14",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 10 14" id="icon-关键点选中"><path d="M5 .099L9.6 7 5 13.901.4 7 5 .099z" fill="#4388FF" fill-rule="nonzero" stroke="#FFF" stroke-linejoin="round" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-关闭",use:"icon-关闭-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-关闭"><defs><style></style></defs><path d="M180.41 180.41a46.545 46.545 0 0161.44-3.863l4.375 3.863L545.14 479.28a46.545 46.545 0 01-61.44 69.725l-4.421-3.864-298.822-298.915a46.545 46.545 0 010-65.815z" /><path d="M843.59 180.41a46.545 46.545 0 00-61.44-3.863l-4.375 3.863L180.41 777.775a46.545 46.545 0 0061.44 69.678l4.375-3.863L843.59 246.225a46.545 46.545 0 000-65.815zM607.092 607.092a46.545 46.545 0 0161.44-3.863l4.376 3.863L843.59 777.775a46.545 46.545 0 01-61.44 69.678l-4.375-3.863-170.683-170.682a46.545 46.545 0 010-65.816z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-减少",use:"icon-减少-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-减少"><defs><style></style></defs><path d="M616.832 746.24l272.64-389.568A64 64 0 00837.12 256H186.944a64 64 0 00-52.48 100.672l272.64 389.504a128 128 0 00209.728 0z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-分离",use:"icon-分离-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-分离"><defs><style></style></defs><path d="M853.333 213.333a85.333 85.333 0 0185.12 78.934l.214 6.4v426.666a85.333 85.333 0 01-78.934 85.12l-6.4.214H768a42.667 42.667 0 01-4.992-85.035l4.992-.299h85.333V298.667H768a42.667 42.667 0 01-4.992-85.035l4.992-.299h85.333zm-597.333 0a42.667 42.667 0 014.992 85.035l-4.992.299h-85.333v426.666H256a42.667 42.667 0 014.992 85.035l-4.992.299h-85.333a85.333 85.333 0 01-85.12-78.934l-.214-6.4V298.667a85.333 85.333 0 0178.934-85.12l6.4-.214H256z" /><path d="M874.667 469.333v85.334H149.333v-85.334zM436.139 226.176a42.667 42.667 0 01-65.067-54.912l3.413-4.096 106.667-111.36a42.667 42.667 0 0157.6-3.712l4.053 3.712 106.667 111.36a42.667 42.667 0 01-57.685 62.635l-3.926-3.627L512 147.029l-75.861 79.147z" /><path d="M512 422.4a42.667 42.667 0 01-42.368-37.675l-.299-4.949V85.333a42.667 42.667 0 0185.035-4.992l.299 4.992v294.4A42.667 42.667 0 01512 422.4zm-75.861 375.424a42.667 42.667 0 00-65.067 54.912l3.413 4.096 106.667 111.36a42.667 42.667 0 0057.6 3.712l4.053-3.712 106.667-111.36a42.667 42.667 0 00-57.685-62.635l-3.926 3.627L512 876.971l-75.861-79.147z" /><path d="M512 601.6a42.667 42.667 0 00-42.368 37.675l-.299 4.949v294.443a42.667 42.667 0 0085.035 4.992l.299-4.992v-294.4A42.667 42.667 0 00512 601.6z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-创作中心",use:"icon-创作中心-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-创作中心"><defs><style></style></defs><path d="M578.56 912.916a33.26 33.26 0 014.178 66.274l-4.178.286H445.44a33.26 33.26 0 01-4.178-66.355l4.178-.205h133.12zM528.63 7.7a366.06 366.06 0 01366.1 366.06c0 115.22-56.525 226.017-154.46 304.538a33.3 33.3 0 01-41.656-51.938c82.616-66.232 129.556-158.187 129.556-252.6a299.54 299.54 0 00-599.04 0c0 85.115 29.696 155.443 89.948 212.87l9.257 8.519c43.705 38.789 64.676 73.933 66.97 123.29l.205 9.461v28.59c0 34.816 26.747 63.406 60.825 66.314l5.735.246h141.435a24.986 24.986 0 004.096-49.602l-4.096-.328H496.68a33.3 33.3 0 01-4.178-66.314l4.178-.246h106.824a91.505 91.505 0 016.553 182.804l-6.553.246H462.07a133.12 133.12 0 01-132.915-125.583l-.205-7.537V727.9c0-30.597-9.83-50.38-37.93-76.718l-6.84-6.226C203.448 573.317 162.53 482.14 162.53 373.76A366.1 366.1 0 01528.67 7.66zm65.372 314.655c11.796 11.797 12.861 30.31 3.195 43.336l-3.236 3.686-68.117 67.994h86.016c28.836 0 43.377 33.71 25.519 54.64l-3.072 3.195-136.561 124.806a33.3 33.3 0 01-48.046-45.876l3.154-3.276 73.195-66.93H445.44c-28.18 0-43.008-32.358-26.378-53.575l2.867-3.277 125.01-124.764a33.3 33.3 0 0147.104 0z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-删除",use:"icon-删除-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-删除"><defs><style></style></defs><path d="M877.696 222.336a32 32 0 014.352 63.701l-4.352.299h-731.35a32 32 0 01-4.351-63.701l4.352-.299h731.306zm-265.941-99.755a32 32 0 014.309 63.744l-4.31.256H412.246a32 32 0 01-4.309-63.701l4.31-.299h199.509zm208.896 207.83a32 32 0 0131.701 27.648l.299 4.352v398.933a164.992 164.992 0 01-156.502 164.779l-8.533.213H336.384a164.992 164.992 0 01-164.779-156.501l-.213-8.491V362.411a32 32 0 0163.701-4.352l.299 4.352v398.933c0 53.461 41.515 97.195 94.08 100.779l6.912.213h351.317a100.992 100.992 0 00100.736-94.08l.256-6.912V362.411a32 32 0 0132-32z" /><path d="M379.008 446.72a32 32 0 0131.701 27.69l.299 4.353v232.704a32 32 0 01-63.701 4.352l-.299-4.352V478.763a32 32 0 0132-32zm265.984 0a32 32 0 0131.701 27.69l.299 4.353v232.704a32 32 0 01-63.701 4.352l-.299-4.352V478.763a32 32 0 0132-32zm-132.992 0a32 32 0 0131.701 27.69l.299 4.353v232.704a32 32 0 01-63.701 4.352l-.299-4.352V478.763a32 32 0 0132-32z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-刷新",use:"icon-刷新-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-刷新"><defs><style></style></defs><path d="M486.4 153.6a358.605 358.605 0 01325.53 208.23v-93.44a25.6 25.6 0 0120.992-25.139l4.608-.46a25.6 25.6 0 0125.19 20.991l.41 4.608v153.6a25.6 25.6 0 01-20.992 25.19l-4.608.41h-153.6a25.6 25.6 0 01-4.608-50.739l4.608-.46h87.193a307.2 307.2 0 1019.866 156.006 25.6 25.6 0 0150.739 6.656A358.451 358.451 0 11486.4 153.6z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-剪辑",use:"icon-剪辑-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-剪辑"><defs><style></style></defs><path d="M753.237 106.667a155.904 155.904 0 100 311.85 155.904 155.904 0 000-311.85zm0 85.333a70.57 70.57 0 110 141.184 70.57 70.57 0 010-141.184zm0 413.013a155.904 155.904 0 100 311.808 155.904 155.904 0 000-311.85zm0 85.334a70.57 70.57 0 110 141.141 70.57 70.57 0 010-141.184z" /><path d="M112.64 276.95a42.667 42.667 0 0154.059-17.153l4.437 2.304 586.795 348.886a42.667 42.667 0 01-39.168 75.648l-4.438-2.304-586.794-348.886a42.667 42.667 0 01-14.891-58.538z" /><path d="M522.88 547.797l4.437-2.218L757.461 412.8a42.667 42.667 0 00-38.186-76.16l-4.48 2.261-230.102 132.736a42.667 42.667 0 0033.579 77.824l4.608-1.664zM166.741 745.643l4.395-2.304 161.75-96.256a42.667 42.667 0 00-39.211-75.606l-4.395 2.304-161.75 96.256a42.667 42.667 0 0034.646 77.355l4.565-1.707z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-加号2",use:"icon-加号2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-加号2"><defs><style></style></defs><path d="M561.8 462.2V114.3c0-27.4-22.4-49.7-49.8-49.7s-49.6 22.2-49.6 49.7v347.9h-348c-27.5 0-49.8 22.3-49.8 49.7 0 27.5 22.3 49.8 49.8 49.8h348v347.9c0 27.5 22.2 49.7 49.6 49.7 27.5 0 49.8-22.2 49.8-49.7V561.8h347.8c27.5 0 49.7-22.3 49.7-49.8 0-27.4-22.2-49.7-49.7-49.7H561.8z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-勾",use:"icon-勾-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-勾"><defs><style></style></defs><path d="M899.418 297.916l-78.324-78.324-430.119 431.116-188.631-188.093-78.324 78.324 267.805 266.066 77.676-78-.09-.089 430.01-430.999zm0 0z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-变焦拉远",use:"icon-变焦拉远-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-变焦拉远"><defs><style></style></defs><path d="M800 568c20.704 0 37.76 15.744 39.808 35.904L840 608v82.272A149.728 149.728 0 01697.152 839.84l-6.88.16H608a40 40 0 01-4.096-79.808L608 760h82.272c36.832 0 67.008-28.544 69.568-64.736l.16-4.992V608c0-22.08 17.92-40 40-40zm-576 0c20.704 0 37.76 15.744 39.808 35.904L264 608v82.272c0 36.832 28.544 67.008 64.736 69.568l4.992.16H416a40 40 0 014.096 79.808L416 840h-82.272A149.728 149.728 0 01184.16 697.152l-.16-6.88V608c0-22.08 17.92-40 40-40zm384-96a40 40 0 014.096 79.808L608 552H416a40 40 0 01-4.096-79.808L416 472h192zm82.272-288A149.728 149.728 0 01839.84 326.848l.16 6.88V416a40 40 0 01-79.808 4.096L760 416v-82.272c0-36.832-28.544-67.008-64.736-69.568l-4.992-.16H608a40 40 0 01-4.096-79.808L608 184h82.272zM416 184a40 40 0 014.096 79.808L416 264h-82.272c-36.832 0-67.008 28.544-69.568 64.736l-.16 4.992V416a40 40 0 01-79.808 4.096L184 416v-82.272A149.728 149.728 0 01326.848 184.16l6.88-.16H416z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-变焦推近",use:"icon-变焦推近-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-变焦推近"><defs><style></style></defs><path d="M800 568c20.704 0 37.76 15.744 39.808 35.904L840 608v82.272A149.728 149.728 0 01697.152 839.84l-6.88.16H608a40 40 0 01-4.096-79.808L608 760h82.272c36.832 0 67.008-28.544 69.568-64.736l.16-4.992V608c0-22.08 17.92-40 40-40zm-576 0c20.704 0 37.76 15.744 39.808 35.904L264 608v82.272c0 36.832 28.544 67.008 64.736 69.568l4.992.16H416a40 40 0 014.096 79.808L416 840h-82.272A149.728 149.728 0 01184.16 697.152l-.16-6.88V608c0-22.08 17.92-40 40-40zm288-192c20.704 0 37.76 15.744 39.808 35.904L552 416v56h56a40 40 0 014.096 79.808L608 552h-56v56a40 40 0 01-79.808 4.096L472 608v-56h-56a40 40 0 01-4.096-79.808L416 472h56v-56c0-22.08 17.92-40 40-40zm178.272-192A149.728 149.728 0 01839.84 326.848l.16 6.88V416a40 40 0 01-79.808 4.096L760 416v-82.272c0-36.832-28.544-67.008-64.736-69.568l-4.992-.16H608a40 40 0 01-4.096-79.808L608 184h82.272zM416 184a40 40 0 014.096 79.808L416 264h-82.272c-36.832 0-67.008 28.544-69.568 64.736l-.16 4.992V416a40 40 0 01-79.808 4.096L184 416v-82.272A149.728 149.728 0 01326.848 184.16l6.88-.16H416z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-变焦无",use:"icon-变焦无-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-变焦无"><defs><style></style></defs><path d="M512 184c181.12 0 328 146.88 328 328S693.12 840 512 840 184 693.12 184 512s146.88-328 328-328zm201.344 183.2L367.2 713.344a248 248 0 00346.176-346.176zM512 264a248 248 0 00-201.344 392.8L656.8 310.656A246.88 246.88 0 00512 264z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-右转",use:"icon-右转-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-右转"><defs><style></style></defs><path d="M390.4 400.864h384a65.6 65.6 0 0165.6 65.6v281.6a65.6 65.6 0 01-65.6 65.6h-384a65.6 65.6 0 01-65.6-65.6v-281.6a65.6 65.6 0 0165.6-65.6zm14.4 80v252.8H760v-252.8H404.8z" /><path d="M633.216 212.768C337.824 163.296 145.6 315.2 145.6 517.664a40 40 0 0080 0c0-151.68 146.56-267.52 394.4-226.016a40 40 0 1013.216-78.88z" /><path d="M541.536 118.208a40 40 0 00-57.376 55.552l2.88 2.944 83.072 77.504-77.504 83.072a40 40 0 00-.864 53.568l2.88 2.944a40 40 0 0053.568.896l2.944-2.88 104.736-112.32a40 40 0 00.896-53.6l-2.88-2.944-112.32-104.736z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-向左",use:"icon-向左-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-向左"><defs><style></style></defs><path d="M685.4 850.8c25 25 25 65.5 0 90.5s-65.5 25-90.5 0l-384.1-384c-25-25-25-65.5 0-90.5L594.9 82.6c25-25 65.5-25 90.5 0s25 65.5 0 90.5L346.6 512l338.8 338.8z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-唱词字幕",use:"icon-唱词字幕-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-唱词字幕"><defs><style></style></defs><path d="M745.472 138.667A140.032 140.032 0 01885.12 270.592l.213 7.936v466.944A139.99 139.99 0 01753.408 885.12l-7.936.213H278.528A139.99 139.99 0 01138.88 753.408l-.213-7.936V278.528A140.032 140.032 0 01270.592 138.88l7.936-.213h466.944zM736 661.333H266.667a42.667 42.667 0 00-4.992 85.035l4.992.299H736a42.667 42.667 0 004.992-85.035l-4.992-.299zm-256-384H266.667a42.667 42.667 0 00-4.992 85.035l4.992.299h64v192a42.667 42.667 0 0085.034 4.992l.299-4.992v-192h64a42.667 42.667 0 004.992-85.035l-4.992-.299zm256 192H544a42.667 42.667 0 00-4.992 85.035l4.992.299h192a42.667 42.667 0 004.992-85.035l-4.992-.299zm0-192H629.333a42.667 42.667 0 00-4.992 85.035l4.992.299H736a42.667 42.667 0 004.992-85.035l-4.992-.299z" fill="#8E8F92" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-唱词字幕v2",use:"icon-唱词字幕v2-usage",viewBox:"0 0 833 833",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 833 833" id="icon-唱词字幕v2"><path d="M183.6 72.1c-33.1 4.3-65 22.4-85 48.3-14.3 18.6-21.7 34.9-26.3 58.1-1.7 8.5-1.8 21.6-1.8 233v224l3.8 21c4.4 24.1 7.2 32.2 15.5 45.4 22.1 35.1 57.1 57 97.9 61.1 7.6.8 78.5 1 236.3.8l225.5-.4 9.7-2.2c52.5-12.1 90.3-50.2 101.5-102.2 1.7-8.1 1.8-19.9 1.8-241.5s-.1-233.4-1.8-241.5c-5.9-27.5-18.5-50.1-38.6-69.2C704.5 90.1 686 80.2 660 73.7l-8.5-2.1-230.5-.2c-130.2-.1-233.5.2-237.4.7zm220.6 132.2c8.7 4.3 14.2 9.8 18.5 18.6 2.5 5.1 2.8 6.6 2.8 16.6 0 10.2-.2 11.4-3 16.9-5.4 10.7-14.5 18.1-26 21-4.7 1.3-12.2 1.6-37.2 1.6H328v88.2c0 48.6-.4 91.1-.9 94.5-2 13.4-10.1 24.7-22 30.6-6.1 3-7.2 3.2-17.1 3.2-9.9 0-11-.2-17.2-3.3-7.8-3.8-14.9-11-18.7-19.2l-2.6-5.5-.3-94.3-.2-94.2h-30.9c-16.9 0-33.1-.4-36-1-12.1-2.3-23.5-11.3-28.9-22.7-2.4-5.1-2.7-7-2.7-15.8 0-9.2.3-10.6 3.2-16.7 5.1-10.8 15.1-19.1 26-21.7 2.2-.5 50.4-.9 110.4-.8l106.5.2 7.6 3.8zm235.1-1.5c11.4 4.7 21.1 16.4 23.8 29.2 3.5 16.2-5.6 34.7-20.8 42.3-8.8 4.4-12.5 4.7-67.3 4.7-34.6 0-53.7-.4-57.2-1.1-12.1-2.6-21.7-10-27.2-21-7.7-15.3-5.1-32.5 6.7-44.7 5.3-5.4 9.4-8 16.5-10.3 5.3-1.7 9.9-1.8 62.7-1.6l57 .2 5.8 2.3zm-4.2 176.8c14.8 4.4 25.4 16.2 28.1 31.4 1.4 8.4.3 15.8-3.8 23.9-4.2 8.4-10.2 14.2-19.2 18.4l-6.7 3.2-95 .3c-61.5.2-96.7-.1-99.7-.8-7-1.4-13.2-4.7-18.7-9.6-16-14.4-17.3-39.1-3-54.9 5.9-6.4 10.1-9.1 17.7-11.6 5.3-1.7 11.8-1.8 100.3-1.8 84.1-.1 95.1.1 100 1.5zm-.6 177.9c11.4 3 20.4 10.8 25.8 22.4 2.8 5.8 3.1 7.7 3.2 15.6 0 8.1-.3 9.7-3.2 15.7-4.4 9.3-10 15.1-19.1 19.6l-7.6 3.7H180.5l-5.8-2.3c-8.1-3.3-16.8-11.6-20.9-20-3.1-6.2-3.3-7.4-3.3-16.7 0-8.8.3-10.7 2.7-15.7 5.2-11.1 13.2-18.2 24.4-21.8 5.7-1.8 13.2-1.9 228.4-1.9 197.9-.1 223.2.1 228.5 1.4z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-唱词字幕v2高亮",use:"icon-唱词字幕v2高亮-usage",viewBox:"0 0 833 833",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 833 833" id="icon-唱词字幕v2高亮"><path d="M183.6 72.1c-33.1 4.3-65 22.4-85 48.3-14.3 18.6-21.7 34.9-26.3 58.1-1.7 8.5-1.8 21.6-1.8 233v224l3.8 21c4.4 24.1 7.2 32.2 15.5 45.4 22.1 35.1 57.1 57 97.9 61.1 7.6.8 78.5 1 236.3.8l225.5-.4 9.7-2.2c52.5-12.1 90.3-50.2 101.5-102.2 1.7-8.1 1.8-19.9 1.8-241.5s-.1-233.4-1.8-241.5c-5.9-27.5-18.5-50.1-38.6-69.2C704.5 90.1 686 80.2 660 73.7l-8.5-2.1-230.5-.2c-130.2-.1-233.5.2-237.4.7zm220.6 132.2c8.7 4.3 14.2 9.8 18.5 18.6 2.5 5.1 2.8 6.6 2.8 16.6 0 10.2-.2 11.4-3 16.9-5.4 10.7-14.5 18.1-26 21-4.7 1.3-12.2 1.6-37.2 1.6H328v88.2c0 48.6-.4 91.1-.9 94.5-2 13.4-10.1 24.7-22 30.6-6.1 3-7.2 3.2-17.1 3.2-9.9 0-11-.2-17.2-3.3-7.8-3.8-14.9-11-18.7-19.2l-2.6-5.5-.3-94.3-.2-94.2h-30.9c-16.9 0-33.1-.4-36-1-12.1-2.3-23.5-11.3-28.9-22.7-2.4-5.1-2.7-7-2.7-15.8 0-9.2.3-10.6 3.2-16.7 5.1-10.8 15.1-19.1 26-21.7 2.2-.5 50.4-.9 110.4-.8l106.5.2 7.6 3.8zm235.1-1.5c11.4 4.7 21.1 16.4 23.8 29.2 3.5 16.2-5.6 34.7-20.8 42.3-8.8 4.4-12.5 4.7-67.3 4.7-34.6 0-53.7-.4-57.2-1.1-12.1-2.6-21.7-10-27.2-21-7.7-15.3-5.1-32.5 6.7-44.7 5.3-5.4 9.4-8 16.5-10.3 5.3-1.7 9.9-1.8 62.7-1.6l57 .2 5.8 2.3zm-4.2 176.8c14.8 4.4 25.4 16.2 28.1 31.4 1.4 8.4.3 15.8-3.8 23.9-4.2 8.4-10.2 14.2-19.2 18.4l-6.7 3.2-95 .3c-61.5.2-96.7-.1-99.7-.8-7-1.4-13.2-4.7-18.7-9.6-16-14.4-17.3-39.1-3-54.9 5.9-6.4 10.1-9.1 17.7-11.6 5.3-1.7 11.8-1.8 100.3-1.8 84.1-.1 95.1.1 100 1.5zm-.6 177.9c11.4 3 20.4 10.8 25.8 22.4 2.8 5.8 3.1 7.7 3.2 15.6 0 8.1-.3 9.7-3.2 15.7-4.4 9.3-10 15.1-19.1 19.6l-7.6 3.7H180.5l-5.8-2.3c-8.1-3.3-16.8-11.6-20.9-20-3.1-6.2-3.3-7.4-3.3-16.7 0-8.8.3-10.7 2.7-15.7 5.2-11.1 13.2-18.2 24.4-21.8 5.7-1.8 13.2-1.9 228.4-1.9 197.9-.1 223.2.1 228.5 1.4z" fill="#4388ff" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-唱词字幕添加",use:"icon-唱词字幕添加-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-唱词字幕添加"><defs><style></style></defs><path d="M512 170.667a64 64 0 0164 64V448h213.333a64 64 0 010 128H576v213.333a64 64 0 01-128 0V576H234.667a64 64 0 010-128H448V234.667a64 64 0 0164-64z" fill="#8E8F92" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-回退",use:"icon-回退-usage",viewBox:"0 0 1408 1024",content:'<symbol class="icon" viewBox="0 0 1408 1024" xmlns="http://www.w3.org/2000/svg" id="icon-回退"><defs><style></style></defs><path d="M574.08 594.112l455.488 275.712a96 96 0 00145.728-82.112V236.288a96 96 0 00-145.728-82.112L574.08 429.888a96 96 0 000 164.224z" /><path d="M190.08 594.112l455.488 275.712a96 96 0 00145.728-82.112V236.288a96 96 0 00-145.728-82.112L190.08 429.888a96 96 0 000 164.224z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-垂直翻转",use:"icon-垂直翻转-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-垂直翻转"><defs><style></style></defs><path d="M793.568 390.048L319.04 126.4a64 64 0 00-95.04 56V416a64 64 0 0064 64h482.24a48 48 0 0023.328-89.952zM288 182.368L708.512 416H288V182.4zM770.24 576H288a32 32 0 00-32 32v233.6a32 32 0 0047.552 28l474.464-263.616A16 16 0 00770.24 576z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-增加",use:"icon-增加-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-增加"><defs><style></style></defs><path d="M616.832 277.76l272.64 389.568A64 64 0 01837.12 768H186.944a64 64 0 01-52.48-100.672l272.64-389.504a128 128 0 01209.728 0z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-复制",use:"icon-复制-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-复制"><defs><style></style></defs><path d="M640 256H192c-32 0-64 32-64 64v576c0 32 32 64 64 64h448c32 0 64-32 64-64V320c0-32-32-64-64-64zm0 640H192V320h448v576z" /><path d="M288 512h256c19.2 0 32-12.8 32-32s-12.8-32-32-32H288c-19.2 0-32 12.8-32 32s12.8 32 32 32zm0 128h256c19.2 0 32-12.8 32-32s-12.8-32-32-32H288c-19.2 0-32 12.8-32 32s12.8 32 32 32zm0 128h256c19.2 0 32-12.8 32-32s-12.8-32-32-32H288c-19.2 0-32 12.8-32 32s12.8 32 32 32z" /><path d="M832 64H384c-32 0-64 32-64 64v64c0 19.2 12.8 32 32 32s32-12.8 32-32v-64h448v576h-64c-19.2 0-32 12.8-32 32s12.8 32 32 32h64c32 0 64-32 64-64V128c0-32-32-64-64-64z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-字幕v2",use:"icon-字幕v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-字幕v2"><defs><style></style></defs><path d="M778.837 85.333c85.334 0 155.179 67.158 159.574 151.339l.256 8.49v533.675c0 85.334-67.115 155.179-151.339 159.574l-8.49.256H245.162A160 160 0 0185.589 787.328l-.256-8.49V245.162A160 160 0 01236.672 85.589l8.49-.256h533.675zM704 256H320a64 64 0 00-6.144 127.701L320 384h128v341.333a64 64 0 00127.701 6.144l.299-6.144V384h128a64 64 0 006.144-127.701L704 256z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-字幕v2高亮",use:"icon-字幕v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-字幕v2高亮"><defs><style></style></defs><path d="M778.837 85.333c85.334 0 155.179 67.158 159.574 151.339l.256 8.49v533.675c0 85.334-67.115 155.179-151.339 159.574l-8.49.256H245.162A160 160 0 0185.589 787.328l-.256-8.49V245.162A160 160 0 01236.672 85.589l8.49-.256h533.675zM704 256H320a64 64 0 00-6.144 127.701L320 384h128v341.333a64 64 0 00127.701 6.144l.299-6.144V384h128a64 64 0 006.144-127.701L704 256z" fill="#4388FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-定格",use:"icon-定格-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-定格"><defs><style></style></defs><path d="M640 128a85.333 85.333 0 0185.333 85.333v597.334A85.333 85.333 0 01640 896H384a85.333 85.333 0 01-85.333-85.333V213.333A85.333 85.333 0 01384 128zm-490.667 0a42.667 42.667 0 0142.368 37.675l.299 4.992v682.666a42.667 42.667 0 01-85.035 4.992l-.298-4.992V170.667A42.667 42.667 0 01149.333 128zm725.334 0a42.667 42.667 0 0142.368 37.675l.298 4.992v682.666a42.667 42.667 0 01-85.034 4.992l-.299-4.992V170.667A42.667 42.667 0 01874.667 128zM640 213.333H384v597.334h256V213.333z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-封面-关闭",use:"icon-封面-关闭-usage",viewBox:"0 0 20 20",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="icon-封面-关闭"><path fill-rule="evenodd" clip-rule="evenodd" d="M19.691.309c.412.412.412 1.079 0 1.49L11.491 10l8.2 8.2a1.054 1.054 0 01-1.49 1.491L10 11.491l-8.2 8.2a1.054 1.054 0 01-1.491-1.49L8.509 10l-8.2-8.2A1.054 1.054 0 111.799.309L10 8.509l8.2-8.2a1.054 1.054 0 011.491 0z" fill="#737477" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-封面-播放",use:"icon-封面-播放-usage",viewBox:"0 0 16 18",content:'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 18" id="icon-封面-播放"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.192 6.673c1.74 1.063 1.74 3.59 0 4.654L4.149 17.464C2.332 18.574 0 17.267 0 15.137V2.863C0 .733 2.332-.575 4.15.536l10.042 6.137z" fill="#fff" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-封面-暂停",use:"icon-封面-暂停-usage",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="icon-封面-暂停"><g fill="#FFF" fill-rule="evenodd"><rect x="7" y="6" width="4" height="15" rx="2" /><rect x="17" y="6" width="4" height="15" rx="2" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-展开",use:"icon-展开-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-展开"><defs><style></style></defs><path d="M199.373 386.56a43.878 43.878 0 0157.907-3.584l4.147 3.584 258.56 258.662 258.663-258.61a43.878 43.878 0 0157.907-3.687l4.096 3.686a43.878 43.878 0 013.686 57.907l-3.635 4.096-289.638 289.69a43.878 43.878 0 01-57.908 3.635l-4.147-3.635-289.638-289.638a43.878 43.878 0 010-62.055z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-展开侧边栏",use:"icon-展开侧边栏-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-展开侧边栏"><defs><style></style></defs><path d="M512 0c282.77 0 512 229.23 512 512s-229.23 512-512 512S0 794.77 0 512 229.23 0 512 0zm0 54.857C259.51 54.857 54.857 259.511 54.857 512S259.511 969.143 512 969.143 969.143 764.489 969.143 512 764.489 54.857 512 54.857z" /><path d="M495.067 685.312a27.429 27.429 0 01-43.08-33.792l2.303-2.926 128.476-142.701-142.702-128.44a27.429 27.429 0 01-4.315-35.84l2.304-2.925a27.429 27.429 0 0135.803-4.315l2.926 2.304L639.854 483.51a27.429 27.429 0 014.352 35.803l-2.304 2.926-146.835 163.072z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-左转",use:"icon-左转-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-左转"><defs><style></style></defs><path d="M633.6 400.864h-384a65.6 65.6 0 00-65.6 65.6v281.6a65.6 65.6 0 0065.6 65.6h384a65.6 65.6 0 0065.6-65.6v-281.6a65.6 65.6 0 00-65.6-65.6zm-14.4 80v252.8H264v-252.8h355.2z" /><path d="M390.784 212.768C686.176 163.296 878.4 315.2 878.4 517.664a40 40 0 01-80 0c0-151.68-146.56-267.52-394.4-226.016a40 40 0 11-13.216-78.88z" /><path d="M482.464 118.208a40 40 0 0157.376 55.552l-2.88 2.944-83.072 77.504 77.504 83.072a40 40 0 01.864 53.568l-2.88 2.944a40 40 0 01-53.568.896l-2.944-2.88-104.736-112.32a40 40 0 01-.896-53.6l2.88-2.944 112.32-104.736z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-帮助",use:"icon-帮助-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-帮助"><defs><style></style></defs><path d="M512 64a448 448 0 110 896 448 448 0 010-896zm0 76.8a371.2 371.2 0 100 742.4 371.2 371.2 0 000-742.4zm3.38 534.528c15.052 0 27.954 4.3 37.99 14.336a47.616 47.616 0 0115.052 36.557 50.842 50.842 0 01-15.77 37.273c-10.034 9.319-22.937 14.336-37.273 14.336-14.336 0-27.238-5.017-37.273-15.052a49.766 49.766 0 01-15.053-36.557 47.616 47.616 0 0115.053-36.557c10.035-10.035 22.937-14.336 37.273-14.336zM528.281 256c45.875 0 83.148 12.186 111.82 37.99 28.672 25.088 43.008 59.495 43.008 102.503 0 35.123-9.318 64.512-27.238 87.45-6.451 7.884-26.522 26.521-60.211 55.91a119.04 119.04 0 00-30.106 37.273 96.256 96.256 0 00-11.469 47.31v12.185H477.39v-12.186c0-26.521 4.3-49.459 14.336-68.096 9.318-20.07 36.557-49.459 80.998-88.883l12.186-13.62c12.902-16.486 20.07-33.689 20.07-52.326 0-25.088-7.168-44.441-20.787-58.777-14.336-14.336-35.123-21.504-60.928-21.504-32.256 0-55.91 10.035-70.246 30.822-12.903 17.203-19.354 41.575-19.354 73.114H358.4c0-52.327 15.053-93.184 45.158-123.29C433.664 271.053 475.238 256 528.282 256z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-录音",use:"icon-录音-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-录音"><defs><style></style></defs><path d="M698.667 416v51.072a186.667 186.667 0 11-373.334 0V416c0-20.608 16.726-37.333 37.334-37.333h298.666c20.608 0 37.334 16.725 37.334 37.333zM512 72.533A186.667 186.667 0 01698.667 259.2v23.595a37.333 37.333 0 01-37.334 37.333H362.667a37.333 37.333 0 01-37.334-37.333V259.2A186.667 186.667 0 01512 72.533z" /><path d="M810.667 397.355c30.933 0 56.021 25.045 56.021 55.978 0 209.494-155.179 368.043-354.688 368.043S157.312 662.869 157.312 453.333a56.021 56.021 0 01112.043 0c0 148.182 105.514 256 242.645 256 137.13 0 242.688-107.818 242.688-256 0-30.933 25.045-55.978 55.979-55.978z" /><path d="M512 730.88c24.064 0 43.861 18.219 46.379 41.6l.298 5.077v123.776a46.677 46.677 0 01-93.056 5.12l-.298-5.12V777.557c0-25.77 20.906-46.677 46.677-46.677z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-录音v2",use:"icon-录音v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-录音v2"><defs><style></style></defs><path d="M725.333 392.533v58.368a213.333 213.333 0 01-426.666 0v-58.368a42.667 42.667 0 0142.666-42.666h341.334a42.667 42.667 0 0142.666 42.666zM512 0a213.333 213.333 0 01213.333 213.333V240.3a42.667 42.667 0 01-42.666 42.666H341.333a42.667 42.667 0 01-42.666-42.666v-26.966A213.333 213.333 0 01512 0z" fill="#767676" /><path d="M853.333 362.667a64 64 0 0164 64c0 239.445-177.322 420.608-405.333 420.608S106.667 666.112 106.667 426.667a64 64 0 01128 0c0 169.386 120.618 292.608 277.333 292.608s277.333-123.222 277.333-292.608a64 64 0 0164-64z" fill="#4E4E4E" /><path d="M512 775.85a64 64 0 0163.701 57.857l.299 6.144v117.674a64 64 0 01-127.701 6.144l-.299-6.144V839.851a64 64 0 0164-64z" fill="#4E4E4E" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-录音v2高亮",use:"icon-录音v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-录音v2高亮"><defs><style></style></defs><path d="M725.333 392.533v58.368a213.333 213.333 0 01-426.666 0v-58.368a42.667 42.667 0 0142.666-42.666h341.334a42.667 42.667 0 0142.666 42.666zM512 0a213.333 213.333 0 01213.333 213.333V240.3a42.667 42.667 0 01-42.666 42.666H341.333a42.667 42.667 0 01-42.666-42.666v-26.966A213.333 213.333 0 01512 0z" fill="#4388FF" /><path d="M853.333 362.667a64 64 0 0164 64c0 239.445-177.322 420.608-405.333 420.608S106.667 666.112 106.667 426.667a64 64 0 01128 0c0 169.386 120.618 292.608 277.333 292.608s277.333-123.222 277.333-292.608a64 64 0 0164-64z" fill="#9EC2FF" /><path d="M512 775.85a64 64 0 0163.701 57.857l.299 6.144v117.674a64 64 0 01-127.701 6.144l-.299-6.144V839.851a64 64 0 0164-64z" fill="#9EC2FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-快剪上传",use:"icon-快剪上传-usage",viewBox:"0 0 32 32",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="icon-快剪上传"><path d="M21.74 15.89c.574.384.755 1.135.44 1.732l-.07.118-2.261 3.389 4.806-.8c1.11-.185 1.916.994 1.392 1.95l-.064.104-4 6a1.333 1.333 0 01-2.288-1.362l.07-.117 2.26-3.39-4.806.801c-1.11.185-1.917-.994-1.392-1.95l.064-.105 4-6a1.333 1.333 0 011.849-.37zM10.263 2.668c.46 0 .912.119 1.311.344l.168.104 4.662 3.107h8.93a4 4 0 013.994 3.8l.005.2v7.111a1.333 1.333 0 01-2.66.129l-.006-.129v-7.11c0-.694-.53-1.263-1.205-1.328l-.129-.006h-8.93c-.46 0-.912-.12-1.31-.345l-.168-.103-4.662-3.108H6.667c-.693 0-1.263.53-1.328 1.205l-.006.129v16c0 .693.53 1.262 1.205 1.327l.129.006h6a1.333 1.333 0 01.128 2.66l-.128.007h-6a4 4 0 01-3.995-3.8l-.005-.2v-16a4 4 0 013.8-3.995l.2-.005h3.596z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-快捷键",use:"icon-快捷键-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-快捷键"><defs><style></style></defs><path d="M853.333 170.667c67.03 0 123.819 47.573 127.787 110.293l.213 7.04v448c0 63.787-54.357 113.664-120.576 117.12l-7.424.213H682.667a42.667 42.667 0 01-4.992-85.034l4.992-.299h170.666c22.827 0 39.851-13.355 42.368-28.245L896 736V288c0-15.061-15.275-29.568-37.12-31.744l-5.547-.256H170.667c-22.827 0-39.851 13.355-42.368 28.245L128 288v448c0 15.061 15.275 29.568 37.12 31.744l5.547.256h170.666a42.667 42.667 0 014.992 85.035l-4.992.298H170.667c-67.03 0-123.819-47.573-127.787-110.293l-.213-7.04V288c0-63.787 54.357-113.664 120.576-117.12l7.424-.213h682.666z" /><path d="M256 384h42.667q42.666 0 42.666 42.667 0 42.666-42.666 42.666H256q-42.667 0-42.667-42.666Q213.333 384 256 384zM256 554.667h42.667q42.666 0 42.666 42.666 0 42.667-42.666 42.667H256q-42.667 0-42.667-42.667 0-42.666 42.667-42.666zM426.66700000000003 384h42.666Q512 384 512 426.667q0 42.666-42.667 42.666h-42.666q-42.667 0-42.667-42.666Q384 384 426.667 384zM426.66700000000003 554.667h42.666q42.667 0 42.667 42.666Q512 640 469.333 640h-42.666Q384 640 384 597.333q0-42.666 42.667-42.666zM597.3330000000001 384H640q42.667 0 42.667 42.667 0 42.666-42.667 42.666h-42.667q-42.666 0-42.666-42.666 0-42.667 42.666-42.667z" /><path d="M768 384a42.667 42.667 0 0142.368 37.675l.299 4.992v170.666a42.667 42.667 0 01-37.675 42.368L768 640H597.333a42.667 42.667 0 01-4.992-85.035l4.992-.298h128v-128a42.667 42.667 0 0137.675-42.368L768 384z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-快进",use:"icon-快进-usage",viewBox:"0 0 1325 1024",content:'<symbol class="icon" viewBox="0 0 1325 1024" xmlns="http://www.w3.org/2000/svg" id="icon-快进"><defs><style></style></defs><path d="M784.866 464.836L356.17 205.342a90.353 90.353 0 00-137.155 77.282v518.987a90.353 90.353 0 00137.155 77.282L784.866 619.4a90.353 90.353 0 000-154.564z" /><path d="M1146.278 464.836L717.583 205.342a90.353 90.353 0 00-137.156 77.282v518.987a90.353 90.353 0 00137.156 77.282L1146.278 619.4a90.353 90.353 0 000-154.564z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-手机_二维码上传",use:"icon-手机_二维码上传-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-手机_二维码上传"><defs><style></style></defs><path d="M732.635 627.054l3 2.34 136.557 121.38a30.354 30.354 0 01-37.303 47.69l-2.999-2.34-86.089-76.471V947.93a30.354 30.354 0 01-60.452 3.548l-.22-3.548V719.616l-86.052 76.507a30.354 30.354 0 01-43.008-42.642l2.706-2.706 136.558-121.417a30.354 30.354 0 0137.302-2.304zM672 73.143a95.854 95.854 0 0195.817 89.6l.183 6.034v312.686a36.571 36.571 0 01-72.887 4.279l-.256-4.28V168.778a22.638 22.638 0 00-19.456-22.235l-3.401-.256H315.429a22.747 22.747 0 00-22.602 19.2l-.256 3.291v649.874c0 11.228 8.412 20.627 19.456 22.236l3.402.256h175.323a36.571 36.571 0 014.279 72.887l-4.279.256H315.429a95.854 95.854 0 01-95.818-89.6l-.182-6.035V168.777a95.817 95.817 0 0189.965-95.451l5.998-.183h356.571zM548.571 230.4a25.6 25.6 0 013.475 50.98l-3.475.22H438.857a25.6 25.6 0 01-3.474-50.98l3.474-.22h109.714z" fill="#979797" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-批量管理",use:"icon-批量管理-usage",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="icon-批量管理"><g transform="translate(6 8)" fill="#D3D6E0" fill-rule="evenodd"><rect x="10.5" y="4" width="6" height="2" rx="1" /><rect x="10.5" width="6" height="2" rx="1" /><rect x="10.5" y="8" width="6" height="2" rx="1" /><path d="M9.315 2.038a.815.815 0 00-.498-.359.867.867 0 00-.622.077l-.501.272a4.244 4.244 0 00-1.3-.706v-.54C6.394.355 6.028 0 5.576 0H4.424c-.452 0-.818.356-.818.781v.541c-.475.16-.916.399-1.3.706l-.501-.272a.867.867 0 00-.622-.077.815.815 0 00-.498.359l-.575.936a.728.728 0 00-.082.584.778.778 0 00.382.467l.5.27c-.091.466-.091.944 0 1.41l-.5.27a.778.778 0 00-.382.467.728.728 0 00.082.584l.576.936a.815.815 0 00.497.359c.21.052.434.025.622-.077l.502-.272c.384.307.824.546 1.299.706v.54c0 .426.366.782.818.782h1.152c.452 0 .818-.356.818-.781v-.541c.475-.16.916-.399 1.3-.706l.5.272c.189.102.413.13.623.077a.815.815 0 00.497-.359l.576-.936a.728.728 0 00.082-.584.778.778 0 00-.382-.467l-.5-.27c.091-.466.091-.944 0-1.41l.5-.27a.778.778 0 00.382-.467.728.728 0 00-.082-.584l-.575-.936zM5 6.818c-1.183 0-2.143-.916-2.143-2.045 0-1.13.96-2.046 2.143-2.046 1.183 0 2.143.916 2.143 2.046S6.183 6.818 5 6.818z" fill-rule="nonzero" /><rect x=".5" y="12" width="16" height="2" rx="1" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-投稿",use:"icon-投稿-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-投稿"><defs><style></style></defs><path d="M768 512a42.667 42.667 0 0142.368 37.675l.299 4.992v160c0 51.413-41.472 92.458-92.8 95.786l-6.742.214h-398.25c-52.096 0-95.744-38.87-99.328-89.344l-.214-6.656v-160a42.667 42.667 0 0185.035-4.992l.299 4.992v160c0 4.522 4.266 9.13 10.794 10.368l3.414.298h398.25c7.254 0 12.502-3.968 13.867-8.405l.341-2.261v-160A42.667 42.667 0 01768 512zM512 213.333h.853c.982 0 1.963.086 2.987.171l-3.84-.17a43.008 43.008 0 0126.667 9.386l3.498 3.115 128 128a42.667 42.667 0 01-56.32 63.872l-4.01-3.542-55.168-55.125v238.293a42.667 42.667 0 01-85.035 4.992l-.299-4.992V359.04l-55.168 55.125a42.667 42.667 0 01-56.32 3.542l-4.01-3.542a42.667 42.667 0 01-3.542-56.32l3.542-4.01 128-128 3.498-3.115.342-.299-3.84 3.414a43.008 43.008 0 0129.397-12.502H512z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-按钮进入",use:"icon-按钮进入-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-按钮进入"><defs><style></style></defs><path d="M338.8 173.2c-25-25-25-65.5 0-90.5s65.5-25 90.5 0l384.1 384.1c25 25 25 65.5 0 90.5L429.3 941.4c-25 25-65.5 25-90.5 0s-25-65.5 0-90.5L677.6 512 338.8 173.2z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-搜索放大镜",use:"icon-搜索放大镜-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-搜索放大镜"><defs><style></style></defs><path d="M490.667 213.333a277.333 277.333 0 100 554.667 277.333 277.333 0 000-554.667zm0 85.334a192 192 0 110 384 192 192 0 010-384z" /><path d="M652.373 652.587a42.667 42.667 0 0156.32-3.712l4.054 3.541 138.496 137.685a42.667 42.667 0 01-56.15 64.043l-4.01-3.541-138.496-137.686a42.667 42.667 0 01-.171-60.33z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-播放",use:"icon-播放-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-播放"><defs><style></style></defs><path d="M810.88 584.96L385.493 842.453A85.333 85.333 0 01256 769.451V254.549a85.333 85.333 0 01129.536-73.002l425.344 257.45a85.333 85.333 0 010 146.006z" opacity=".9" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-操作栏删除",use:"icon-操作栏删除-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-操作栏删除"><defs><style></style></defs><path d="M711.125 46.208a42.667 42.667 0 014.95 85.077l-4.95.256h-398.25a42.667 42.667 0 01-4.95-85.034l4.95-.299h398.25zm123.52 224l4.95.213a42.667 42.667 0 0138.613 41.558l-.17 4.949-53.76 561.621c0 52.054-39.254 95.488-89.9 98.987l-6.655.256H296.277c-51.541 0-93.013-41.216-96.17-88.96l-.214-6.23-53.93-565.674a42.667 42.667 0 0184.181-13.013l.768 4.906 54.144 569.728c0 6.955 4.01 12.203 8.79 13.568l2.431.342h431.446c4.992 0 9.856-4.438 11.093-13.696l.341-4.267 53.931-565.675a42.667 42.667 0 0141.557-38.613z" /><path d="M611.541 469.333a42.667 42.667 0 0142.411 37.675l.256 4.992v199.125a42.667 42.667 0 01-85.035 4.95l-.298-4.95V512a42.667 42.667 0 0142.666-42.667zm-199.082 0a42.667 42.667 0 0142.368 37.675l.298 4.992v199.125a42.667 42.667 0 01-85.077 4.95l-.256-4.95V512a42.667 42.667 0 0142.667-42.667zm522.666-224a42.667 42.667 0 014.95 85.035l-4.95.299H88.875a42.667 42.667 0 01-4.95-85.035l4.95-.299h846.25z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-收缩",use:"icon-收缩-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-收缩"><defs><style></style></defs><path d="M298.667 640l6.4.213A85.333 85.333 0 01384 725.333V896l-.299 4.992A42.667 42.667 0 01298.667 896V725.333H128l-4.992-.298A42.667 42.667 0 01128 640h170.667zM896 640a42.667 42.667 0 014.992 85.035l-4.992.298H725.333V896a42.667 42.667 0 01-85.034 4.992L640 896V725.333a85.333 85.333 0 0178.933-85.12l6.4-.213H896zM512 384a128 128 0 110 256 128 128 0 010-256zM341.333 85.333a42.667 42.667 0 0142.368 37.675L384 128v170.667a85.333 85.333 0 01-78.933 85.12l-6.4.213H128a42.667 42.667 0 01-4.992-85.035l4.992-.298h170.667V128a42.667 42.667 0 0142.666-42.667zm341.334 0A42.667 42.667 0 01725.333 128v170.667H896l4.992.298A42.667 42.667 0 01896 384H725.333l-6.4-.213A85.333 85.333 0 01640 298.667V128l.299-4.992a42.667 42.667 0 0142.368-37.675z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-收起",use:"icon-收起-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-收起"><defs><style></style></defs><path d="M199.373 637.44a43.878 43.878 0 0057.907 3.584l4.147-3.584 258.56-258.662 258.663 258.61a43.878 43.878 0 0057.907 3.687l4.096-3.686a43.878 43.878 0 003.686-57.907l-3.635-4.096-289.638-289.69a43.878 43.878 0 00-57.908-3.635l-4.147 3.635-289.638 289.638a43.878 43.878 0 000 62.055z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-收起侧边栏",use:"icon-收起侧边栏-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-收起侧边栏"><defs><style></style></defs><path d="M512 0c282.77 0 512 229.23 512 512s-229.23 512-512 512S0 794.77 0 512 229.23 0 512 0zm0 54.857C259.51 54.857 54.857 259.511 54.857 512S259.511 969.143 512 969.143 969.143 764.489 969.143 512 764.489 54.857 512 54.857z" /><path d="M547.767 685.312a27.429 27.429 0 0043.081-33.792l-2.304-2.926-128.512-142.701 142.702-128.44a27.429 27.429 0 004.352-35.84l-2.304-2.925a27.429 27.429 0 00-35.84-4.315l-2.926 2.304L402.981 483.51a27.429 27.429 0 00-4.352 35.803l2.304 2.926 146.834 163.072z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-放大",use:"icon-放大-usage",viewBox:"0 0 1066 1024",content:'<symbol class="icon" viewBox="0 0 1066 1024" xmlns="http://www.w3.org/2000/svg" id="icon-放大"><defs><style></style></defs><path d="M526.933 93.099A387.84 387.84 0 11281.6 781.355L159.36 903.637a38.827 38.827 0 11-54.87-54.869l122.283-122.197a387.84 387.84 0 01300.16-633.472zm0 77.568a310.315 310.315 0 100 620.586 310.315 310.315 0 000-620.586zm0 116.352a38.827 38.827 0 0138.827 38.826l-.043 116.31h116.395a38.827 38.827 0 110 77.61l-116.395-.042v116.394a38.827 38.827 0 11-77.525 0l-.043-116.394H371.797a38.827 38.827 0 010-77.526l116.352-.042V325.803a38.827 38.827 0 0138.827-38.784z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-放大预览",use:"icon-放大预览-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-放大预览"><defs><style></style></defs><path d="M213.333 554.667a42.667 42.667 0 0142.368 37.674l.299 4.992v110.251l140.501-140.416a42.667 42.667 0 0163.872 56.32l-3.541 4.01L316.331 768h110.336a42.667 42.667 0 0142.368 37.675l.298 4.992a42.667 42.667 0 01-37.674 42.368l-4.992.298H211.968l-2.304-.17 3.67.17a43.008 43.008 0 01-26.326-9.088 43.008 43.008 0 01-7.253-7.253l3.413 3.84a43.008 43.008 0 01-12.203-25.173l-.128-1.195a42.923 42.923 0 01-.17-2.944V597.333a42.667 42.667 0 0142.666-42.666zm597.334 0a42.667 42.667 0 0142.368 37.674l.298 4.992v213.334a42.667 42.667 0 01-37.674 42.368l-4.992.298H597.333a42.667 42.667 0 01-4.992-85.034l4.992-.299H768V597.333a42.667 42.667 0 0137.675-42.368l4.992-.298zm-384-384a42.667 42.667 0 014.992 85.034l-4.992.299H256v170.667a42.667 42.667 0 01-37.675 42.368l-4.992.298a42.667 42.667 0 01-42.368-37.674l-.298-4.992V213.333a42.667 42.667 0 0137.674-42.368l4.992-.298h213.334zm384 0h.853c.981 0 1.963.085 2.987.17l-3.84-.17a43.008 43.008 0 0126.325 9.088 44.86 44.86 0 017.253 7.253l-3.413-3.84a43.008 43.008 0 0112.203 25.173l.128 1.28.128 2.347.042 1.365v213.334a42.667 42.667 0 01-85.034 4.992l-.299-4.992V316.33L627.499 456.832a42.667 42.667 0 01-63.872-56.32l3.541-4.01L707.584 256h-110.25a42.667 42.667 0 01-42.369-37.675l-.298-4.992a42.667 42.667 0 0137.674-42.368l4.992-.298h213.334z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-暂停",use:"icon-暂停-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-暂停"><defs><style></style></defs><path d="M384 256a42.667 42.667 0 00-42.667-42.667h-42.666A42.667 42.667 0 00256 256v554.667a42.667 42.667 0 0042.667 42.666h42.666A42.667 42.667 0 00384 810.667V256zm384 0a42.667 42.667 0 00-42.667-42.667h-42.666A42.667 42.667 0 00640 256v554.667a42.667 42.667 0 0042.667 42.666h42.666A42.667 42.667 0 00768 810.667V256z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-更多",use:"icon-更多-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-更多"><defs><style></style></defs><path d="M527.863 759.201c-54.142 0-98.44 44.298-98.44 98.44 0 54.141 44.299 98.44 98.44 98.44 54.142 0 98.439-44.299 98.439-98.44 0-54.142-44.297-98.44-98.44-98.44zm0-492.197c54.142 0 98.439-44.298 98.439-98.439 0-54.142-44.298-98.439-98.44-98.439-54.141 0-98.438 44.298-98.438 98.44s44.298 98.438 98.439 98.438zm0 147.66c-54.142 0-98.44 44.297-98.44 98.44 0 54.141 44.299 98.438 98.44 98.438 54.142 0 98.439-44.298 98.439-98.439 0-54.142-44.297-98.44-98.44-98.44z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-更新记录",use:"icon-更新记录-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-更新记录"><defs><style></style></defs><path d="M554.667 128a384 384 0 11-268.203 658.816 42.667 42.667 0 0159.605-61.056 298.667 298.667 0 10-88.917-240l46.677-46.592a42.667 42.667 0 0156.619-3.328l3.755 3.328a42.667 42.667 0 013.285 56.619l-3.285 3.712-120.704 120.704a42.667 42.667 0 01-56.619 3.285l-3.712-3.285L62.464 499.499a42.667 42.667 0 0156.619-63.659l3.754 3.328 48.598 48.555A384 384 0 01554.667 128z" /><path d="M469.33299999999997 384H640q42.667 0 42.667 42.667 0 42.666-42.667 42.666H469.333q-42.666 0-42.666-42.666 0-42.667 42.666-42.667zM469.33299999999997 554.667H640q42.667 0 42.667 42.666Q682.667 640 640 640H469.333q-42.666 0-42.666-42.667 0-42.666 42.666-42.666z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-水平翻转",use:"icon-水平翻转-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-水平翻转"><defs><style></style></defs><path d="M390.048 230.432L126.4 704.96a64 64 0 0056 95.04H416a64 64 0 0064-64V253.76a48 48 0 00-89.952-23.328zM182.368 736L416 315.488V736H182.4zM576 253.76V736a32 32 0 0032 32h233.6a32 32 0 0028-47.552L605.984 245.984A16 16 0 00576 253.76z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-添加",use:"icon-添加-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-添加"><defs><style></style></defs><path d="M512 128l12.442.205A384 384 0 01896 512c0 212.122-171.878 384-384 384a384 384 0 01-384-384 383.949 383.949 0 01371.558-383.795L512 128zm0 51.2l-11.93.205A332.749 332.749 0 00179.2 512 332.8 332.8 0 00512 844.8a332.8 332.8 0 1011.93-665.395L512 179.2zm0 179.2a25.6 25.6 0 0125.6 25.6v102.4H640a25.6 25.6 0 110 51.2H537.6V640a25.6 25.6 0 11-51.2 0V537.6H384a25.6 25.6 0 110-51.2h102.4V384a25.6 25.6 0 0125.6-25.6z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-添加到轨道",use:"icon-添加到轨道-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-添加到轨道"><defs><style></style></defs><path d="M512 256a25.6 25.6 0 0125.6 25.6v204.8h204.8a25.6 25.6 0 110 51.2H537.549l.051 204.8a25.6 25.6 0 11-51.2 0l-.051-204.8H281.6a25.6 25.6 0 110-51.2h204.8V281.6A25.6 25.6 0 01512 256z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-滤镜",use:"icon-滤镜-usage",viewBox:"0 0 1117 1024",content:'<symbol class="icon" viewBox="0 0 1117 1024" xmlns="http://www.w3.org/2000/svg" id="icon-滤镜"><defs><style></style></defs><path d="M558.545 0a312.785 312.785 0 01304.408 384.884A312.832 312.832 0 11558.545 917.83a312.785 312.785 0 11-304.407-532.946A312.785 312.785 0 01558.545 0zM289.001 471.505l-6.424 2.002a219.788 219.788 0 0094.115 426.403 219.695 219.695 0 00189.533-274.525l-7.68.186a312.646 312.646 0 01-269.544-154.066zm474.344-9.774c-54.365 0-105.192 19.921-144.29 53.993 24.994 39.89 40.727 85.131 45.754 133.027A311.436 311.436 0 01619.1 847.034a219.695 219.695 0 10144.291-385.35zm-204.8-368.64a219.695 219.695 0 00-64.744 429.708A312.506 312.506 0 01763.345 368.64l7.727.14A219.695 219.695 0 00558.545 93.09z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-滤镜v2",use:"icon-滤镜v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-滤镜v2"><defs><style></style></defs><path d="M450.55999999999995 698.027a286.72 286.72 0 10573.44 0 286.72 286.72 0 10-573.44 0z" fill="#505050" /><path d="M245.76 329.387a286.72 286.72 0 10573.44 0 286.72 286.72 0 10-573.44 0z" fill="#3C3C3C" /><path d="M0 698.027a286.72 286.72 0 10573.44 0 286.72 286.72 0 10-573.44 0z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-滤镜v2高亮",use:"icon-滤镜v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-滤镜v2高亮"><defs><style></style></defs><path d="M450.55999999999995 698.027a286.72 286.72 0 10573.44 0 286.72 286.72 0 10-573.44 0z" fill="#256EEC" /><path d="M245.76 329.387a286.72 286.72 0 10573.44 0 286.72 286.72 0 10-573.44 0z" fill="#4388FF" /><path d="M0 698.027a286.72 286.72 0 10573.44 0 286.72 286.72 0 10-573.44 0z" fill="#9EC2FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-特效",use:"icon-特效-usage",viewBox:"0 0 1072 1024",content:'<symbol class="icon" viewBox="0 0 1072 1024" xmlns="http://www.w3.org/2000/svg" id="icon-特效"><defs><style></style></defs><path d="M698.71 14.824a48.762 48.762 0 0170.168 30.573l1.121 5.754 39.059 283.795 206.652 198.46a48.762 48.762 0 01-7.655 76.362l-4.876 2.682-257.853 124.83-124.83 257.853a48.762 48.762 0 01-74.997 16.335l-4.047-3.803L343.04 801.06 59.246 761.954a48.762 48.762 0 01-38.864-65.975l2.487-5.364 135.168-252.538-50.517-281.99a48.762 48.762 0 0156.613-56.564l281.99 50.517zm110.152 764.099l3.365 2.828 186.66 186.66a24.381 24.381 0 01-31.11 37.303l-3.364-2.828-186.66-186.66a24.381 24.381 0 0131.11-37.303zM682.96 133.9L477.184 244.005a48.762 48.762 0 01-25.064 5.705l-6.534-.732-229.766-41.155 41.253 229.718a48.762 48.762 0 01-5.023 31.597L141.848 674.914l231.23 31.841a48.762 48.762 0 0123.698 10.094l4.876 4.388 161.597 168.375 101.717-210.066a48.762 48.762 0 0116.97-19.359l5.656-3.267 210.017-101.717-168.277-161.646a48.762 48.762 0 01-13.215-22.089l-1.316-6.436L682.959 133.9z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-特效v2",use:"icon-特效v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-特效v2"><defs><style></style></defs><path d="M616.15 619.264a59.733 59.733 0 0180.213-3.84l4.266 3.84 223.659 211.712a59.733 59.733 0 01-80.213 88.32l-4.267-3.84-223.659-211.712a59.733 59.733 0 010-84.48z" fill="#4E4E4E" /><path d="M172.288 225.365a44.245 44.245 0 0146.165-52.01l5.206.64 212.778 38.144L627.03 110.08a44.245 44.245 0 0163.702 27.861l1.024 5.12 29.482 214.187 155.947 149.76a44.245 44.245 0 01-6.827 69.12l-4.522 2.56-194.56 94.293-94.294 194.56a44.245 44.245 0 01-67.84 14.934l-3.84-3.584-149.76-155.947-214.186-29.483a44.245 44.245 0 01-35.158-59.946l2.176-4.779 102.059-190.592-38.144-212.779z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-特效v2高亮",use:"icon-特效v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-特效v2高亮"><defs><style></style></defs><path d="M616.15 619.264a59.733 59.733 0 0180.213-3.84l4.266 3.84 223.659 211.712a59.733 59.733 0 01-80.213 88.32l-4.267-3.84-223.659-211.712a59.733 59.733 0 010-84.48z" fill="#9EC2FF" /><path d="M172.288 225.365a44.245 44.245 0 0146.165-52.01l5.206.64 212.778 38.144L627.03 110.08a44.245 44.245 0 0163.702 27.861l1.024 5.12 29.482 214.187 155.947 149.76a44.245 44.245 0 01-6.827 69.12l-4.522 2.56-194.56 94.293-94.294 194.56a44.245 44.245 0 01-67.84 14.934l-3.84-3.584-149.76-155.947-214.186-29.483a44.245 44.245 0 01-35.158-59.946l2.176-4.779 102.059-190.592-38.144-212.779z" fill="#4388FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-登出",use:"icon-登出-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-登出"><defs><style></style></defs><path d="M627.753 643.891a30.72 30.72 0 01-2.99-40.018l2.99-3.44 110.06-110.1-110.06-110.101a30.72 30.72 0 01-2.99-39.977l2.99-3.482a30.72 30.72 0 0139.977-2.949l3.44 2.95 131.81 131.808a30.72 30.72 0 012.99 40.018l-2.99 3.441-131.81 131.81a30.72 30.72 0 01-43.417 0z" /><path d="M200.704 326.328a165.642 165.642 0 01157.41-165.437l8.273-.205h317.194a98.181 98.181 0 0198.182 98.181 30.72 30.72 0 01-61.154 4.178l-.286-4.178a36.741 36.741 0 00-32.154-36.454l-4.588-.287H366.387a104.202 104.202 0 00-104.038 97.362l-.205 6.84v329.524a104.202 104.202 0 0097.362 104.038l6.881.205h317.194a36.741 36.741 0 0036.455-32.154l.287-4.587a30.72 30.72 0 1161.44 0 98.181 98.181 0 01-91.464 97.935l-6.718.246H366.387a165.642 165.642 0 01-165.478-157.41l-.205-8.273V326.328z" /><path d="M407.02 490.291a30.72 30.72 0 0126.542-30.392l4.178-.287h338.739a30.72 30.72 0 014.178 61.153l-4.178.287h-338.74a30.72 30.72 0 01-30.72-30.72z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-稿件管理",use:"icon-稿件管理-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-稿件管理"><defs><style></style></defs><path d="M553.78 92.119a29.737 29.737 0 0115.933 4.137c.327.287.737.492 1.106.737a29.491 29.491 0 015.16 4.178l225.28 225.28c6.104 6.103 8.889 13.599 9.012 20.972V601.62l-.082.82a87.455 87.455 0 0133.3 32.727l44.933 77.824a86.883 86.883 0 010 86.999l-44.933 77.824a87.04 87.04 0 01-75.366 43.5h-89.866c-31.089 0-59.802-16.59-75.367-43.5l-12.288-21.3a30.556 30.556 0 01-4.014.82l-4.178.246H244.49a87.04 87.04 0 01-86.835-80.815l-.205-6.185V179.16c0-45.998 35.635-83.64 80.814-86.835l6.226-.205zm214.343 560.947h-89.866c-9.134 0-17.613 4.915-22.119 12.82l-44.974 77.825a25.6 25.6 0 000 25.559l44.933 77.824a25.6 25.6 0 0022.16 12.78h89.866c9.134 0 17.613-4.875 22.16-12.78l44.932-77.824a25.6 25.6 0 000-25.6l-44.933-77.824a25.6 25.6 0 00-22.16-12.78zM723.19 714.22a42.23 42.23 0 110 84.5 42.23 42.23 0 010-84.5zM523.51 153.6l-279.02.041a25.6 25.6 0 00-25.313 21.832l-.287 3.768v591.38c0 12.82 9.462 23.47 21.791 25.314l3.81.245 311.418.082a87.04 87.04 0 012.048-83.271l44.933-77.824a87.04 87.04 0 0175.367-43.5h70.533V378.798l-138.24.041a87.04 87.04 0 01-86.835-80.814l-.205-6.226v-138.24zm-66.97 241.172l112.64 70.37c17.613 11.018 17.613 36.7 0 47.718l-112.64 70.37a28.18 28.18 0 01-43.09-23.88V418.61c0-22.118 24.33-35.635 43.09-23.88zM584.91 197.018v94.781c0 12.861 9.503 23.511 21.831 25.313l3.769.287h94.781L584.91 197.018z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-粒子",use:"icon-粒子-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-粒子"><defs><style></style></defs><path d="M743.907 721.712a53.893 53.893 0 01-9.97 75.612 849.738 849.738 0 01-314.36 151.063c-113.07 28.24-236.7 35.3-370.734 21.45A53.893 53.893 0 0159.945 862.59c122.015 12.665 233.143 6.306 333.493-18.809a741.951 741.951 0 00274.857-132.039 53.893 53.893 0 0175.612 9.97zm53.894-485.042a849.738 849.738 0 01151.063 314.361c28.24 113.068 35.3 236.7 21.45 370.733a53.893 53.893 0 11-107.248-11.102c12.664-122.015 6.305-233.09-18.81-333.493a741.951 741.951 0 00-132.038-274.856A53.893 53.893 0 01797.8 236.67zM66.574.294a53.893 53.893 0 0148.02 59.175c-12.612 122.015-6.253 233.143 18.862 333.492A741.951 741.951 0 00265.44 667.818a53.893 53.893 0 01-85.529 65.642A849.738 849.738 0 0128.849 419.1C.5 306.03-6.505 182.4 7.399 48.367A53.893 53.893 0 0166.574.294zm418.968 269.198a215.574 215.574 0 110 431.147 215.574 215.574 0 010-431.147zm0 107.786a107.787 107.787 0 100 215.574 107.787 107.787 0 000-215.574zM922.24 6.923a53.893 53.893 0 11-11.103 107.248c-122.014-12.665-233.143-6.306-333.492 18.755a741.951 741.951 0 00-274.857 132.039 53.893 53.893 0 01-65.696-85.53A849.738 849.738 0 01551.507 28.373C664.576.024 788.207-6.982 922.241 6.922z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-粒子v2",use:"icon-粒子v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-粒子v2"><defs><style></style></defs><path d="M829.44 120.363a53.333 53.333 0 11-11.008 106.112 867.328 867.328 0 00-126.08-4.267 341.973 341.973 0 0194.037 86.656 683.392 683.392 0 01121.472 252.757c22.699 90.795 28.374 189.91 17.238 297.216a53.333 53.333 0 11-106.112-11.008c6.826-65.834 6.57-127.573-.64-185.173a342.443 342.443 0 01-181.12 166.955 690.048 690.048 0 01-156.16 59.52c-90.752 22.698-189.867 28.373-297.174 17.237a53.333 53.333 0 1111.008-106.07c48.896 5.035 95.531 6.23 139.904 3.5A342.613 342.613 0 01190.38 626.56a693.717 693.717 0 01-51.968-141.44c-22.699-90.795-28.331-189.867-17.238-297.216a53.333 53.333 0 11106.112 11.008 862.677 862.677 0 00-4.01 130.987 343.333 343.333 0 0141.258-52.992 52.59 52.59 0 0114.934-17.792 645.299 645.299 0 0127.52-20.054c14.933-11.221 30.762-21.248 47.445-29.909A685.013 685.013 0 01532.224 137.6c90.752-22.699 189.867-28.33 297.173-17.237zM512 341.333a170.667 170.667 0 100 341.334 170.667 170.667 0 000-341.334z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-粒子v2高亮",use:"icon-粒子v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-粒子v2高亮"><defs><style></style></defs><path d="M829.44 120.363a53.333 53.333 0 11-11.008 106.112 867.328 867.328 0 00-126.08-4.267 341.973 341.973 0 0194.037 86.656 683.392 683.392 0 01121.472 252.757c22.699 90.795 28.374 189.91 17.238 297.216a53.333 53.333 0 11-106.112-11.008c6.826-65.834 6.57-127.573-.64-185.173a342.443 342.443 0 01-181.12 166.955 690.048 690.048 0 01-156.16 59.52c-90.752 22.698-189.867 28.373-297.174 17.237a53.333 53.333 0 1111.008-106.07c48.896 5.035 95.531 6.23 139.904 3.5A342.613 342.613 0 01190.38 626.56a693.717 693.717 0 01-51.968-141.44c-22.699-90.795-28.331-189.867-17.238-297.216a53.333 53.333 0 11106.112 11.008 862.677 862.677 0 00-4.01 130.987 343.333 343.333 0 0141.258-52.992 52.59 52.59 0 0114.934-17.792 645.299 645.299 0 0127.52-20.054c14.933-11.221 30.762-21.248 47.445-29.909A685.013 685.013 0 01532.224 137.6c90.752-22.699 189.867-28.33 297.173-17.237zM512 341.333a170.667 170.667 0 100 341.334 170.667 170.667 0 000-341.334z" fill="#4388FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-编辑",use:"icon-编辑-usage",viewBox:"0 0 28 28",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 28 28" id="icon-编辑"><g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round" stroke="#D3D6E0"><path d="M22 13v5a4 4 0 01-4 4h-8a4 4 0 01-4-4v-8a4 4 0 014-4h5M21 7l-8 8" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-缩小",use:"icon-缩小-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-缩小"><defs><style></style></defs><path d="M526.933 93.099A387.84 387.84 0 11281.6 781.355L159.36 903.637a38.827 38.827 0 11-54.87-54.869l122.283-122.197a387.84 387.84 0 01300.16-633.472zm0 77.568a310.315 310.315 0 100 620.586 310.315 310.315 0 000-620.586zm155.179 271.53a38.827 38.827 0 110 77.568H371.797a38.827 38.827 0 010-77.568h310.315z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-联系客服",use:"icon-联系客服-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-联系客服"><defs><style></style></defs><path d="M512 170.667a298.667 298.667 0 01298.496 288.426l.17 10.24a128 128 0 01128 128V640a128 128 0 01-128 128h-43.349a214.357 214.357 0 01-171.349 85.333 42.667 42.667 0 01-4.95-85.034l4.95-.299A129.365 129.365 0 00725.12 646.272l.213-7.637V469.333a213.333 213.333 0 00-426.453-9.258l-.213 9.258v256A42.667 42.667 0 01256 768h-42.667a128 128 0 01-128-128v-42.667a128 128 0 01128-128A298.667 298.667 0 01512 170.667zm-298.667 384l-4.992.298a42.667 42.667 0 00-37.674 42.368V640a42.667 42.667 0 0042.666 42.667v-128zm597.334 0v128A42.667 42.667 0 00853.333 640v-42.667a42.667 42.667 0 00-37.674-42.368l-4.992-.298z" /><path d="M554.667 725.333h42.666q85.334 0 85.334 85.334 0 85.333-85.334 85.333h-42.666q-85.334 0-85.334-85.333 0-85.334 85.334-85.334z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-草稿",use:"icon-草稿-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-草稿"><defs><style></style></defs><path d="M725.333 138.667c38.4 0 71.04 27.562 74.368 64.213l.299 6.187v313.6h10.667a74.667 74.667 0 0174.41 68.522l.256 6.144V768A117.333 117.333 0 01768 885.333H256A117.333 117.333 0 01138.667 768V597.333c0-41.216 33.45-74.666 74.666-74.666H224v-313.6c0-37.59 30.635-67.158 68.31-70.144l6.357-.256h426.666zm-426.666 448h-85.334a10.667 10.667 0 00-10.666 10.666V768c0 29.44 23.893 53.333 53.333 53.333h512c29.44 0 53.333-23.893 53.333-53.333V597.333a10.667 10.667 0 00-10.666-10.666h-85.334a10.667 10.667 0 00-10.666 10.666V640A74.667 74.667 0 01640 714.667H384A74.667 74.667 0 01309.333 640v-42.667a10.667 10.667 0 00-10.666-10.666zm426.666-384H298.667c-5.504 0-9.259 2.56-10.326 4.992l-.341 1.408v313.6h10.667a74.667 74.667 0 0174.41 68.522l.256 6.144V640c0 5.888 4.779 10.667 10.667 10.667h256A10.667 10.667 0 00650.667 640v-42.667c0-41.216 33.45-74.666 74.666-74.666H736v-313.6c0-2.262-2.816-5.206-7.595-6.102l-3.072-.298zM640 437.333a32 32 0 014.352 63.702l-4.352.298H384a32 32 0 01-4.352-63.701l4.352-.299h256zm0-128a32 32 0 014.352 63.702l-4.352.298H384a32 32 0 01-4.352-63.701l4.352-.299h256z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-账号下拉",use:"icon-账号下拉-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-账号下拉"><defs><style></style></defs><path d="M244.779 400.81a36.565 36.565 0 0148.256-3.029l3.456 2.987L512 616.32l215.552-215.467a36.565 36.565 0 0148.256-3.029l3.413 2.987a36.565 36.565 0 013.072 48.298l-3.029 3.456-241.365 241.366a36.565 36.565 0 01-48.256 3.029l-3.456-3.03L244.82 452.566a36.565 36.565 0 010-51.712z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-账号展开",use:"icon-账号展开-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-账号展开"><defs><style></style></defs><path d="M1024 308.992V896a128 128 0 01-128 128H308.992a128 128 0 01-90.496-218.496l587.008-587.008A128 128 0 011024 308.992z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-贴纸",use:"icon-贴纸-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-贴纸"><defs><style></style></defs><path d="M170.963 170.963c188.327-188.326 493.747-188.326 682.074 0s188.326 493.747 0 682.074-493.747 188.326-682.074 0-188.326-493.747 0-682.074zm613.866 68.208c-150.439-150.484-395.22-150.484-545.658 0-150.484 150.439-150.484 395.22 0 545.658 150.439 150.484 395.22 150.484 545.658 0 150.484-150.439 150.484-395.22 0-545.658zM525.713 608.479c53.648.178 106.852 8.548 106.852 24.798 0 66.16-48.573 119.897-108.544 119.897-60.015 0-108.589-53.737-108.5-119.897 0-16.874 55.34-25.11 110.192-24.798zM331.598 351.855a72.348 72.348 0 110 144.696 72.348 72.348 0 010-144.696zm337.653 0a72.348 72.348 0 110 144.696 72.348 72.348 0 010-144.696z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-贴纸v2",use:"icon-贴纸v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-贴纸v2"><defs><style></style></defs><path d="M512 73.941c241.92 0 438.059 196.139 438.059 438.059a31.147 31.147 0 01-9.131 21.59L533.547 940.927a31.061 31.061 0 01-16.768 8.661l-4.779.427c-237.653 0-431.147-189.27-437.845-425.344L73.94 512C73.941 270.08 270.08 73.941 512 73.941zm2.39 477.867l-17.835.128c-74.24 1.237-143.83 12.544-143.83 34.005-.17 91.094 71.168 164.992 159.19 164.992 88.064 0 159.36-73.898 159.36-164.992 0-22.357-78.123-33.834-156.886-34.133zM352.682 312.875a79.659 79.659 0 100 159.317 79.659 79.659 0 000-159.317zm318.592 0a79.659 79.659 0 100 159.317 79.659 79.659 0 000-159.317z" fill="#767676" /><path d="M808.405 492.075c49.835 0 96.982 11.434 138.966 31.829a29.312 29.312 0 01-6.4 9.685L533.504 940.928a31.061 31.061 0 01-12.373 7.595 318.592 318.592 0 01287.274-456.448z" fill="#4E4E4E" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-贴纸v2高亮",use:"icon-贴纸v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-贴纸v2高亮"><defs><style></style></defs><path d="M512 73.941c241.92 0 438.059 196.139 438.059 438.059a31.147 31.147 0 01-9.131 21.59L533.547 940.927a31.061 31.061 0 01-16.768 8.661l-4.779.427c-237.653 0-431.147-189.27-437.845-425.344L73.94 512C73.941 270.08 270.08 73.941 512 73.941zm2.39 477.867l-17.835.128c-74.24 1.237-143.83 12.544-143.83 34.005-.17 91.094 71.168 164.992 159.19 164.992 88.064 0 159.36-73.898 159.36-164.992 0-22.357-78.123-33.834-156.886-34.133zM352.682 312.875a79.659 79.659 0 100 159.317 79.659 79.659 0 000-159.317zm318.592 0a79.659 79.659 0 100 159.317 79.659 79.659 0 000-159.317z" fill="#4388FF" /><path d="M808.405 492.075c49.835 0 96.982 11.434 138.966 31.829a29.312 29.312 0 01-6.4 9.685L533.504 940.928a31.061 31.061 0 01-12.373 7.595 318.592 318.592 0 01287.274-456.448z" fill="#9EC2FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源库",use:"icon-资源库-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-资源库"><defs><style></style></defs><path d="M66.834 243.712a44.077 44.077 0 0124.844-42.296L492.373 4.541a44.522 44.522 0 0139.268 0l400.696 196.875a44.077 44.077 0 0124.843 42.029 17.809 17.809 0 01.045 1.425v508.839a44.522 44.522 0 01-24.354 39.668L532.176 996.931l-.713.356a45.145 45.145 0 01-3.25 1.425l3.963-1.781a45.902 45.902 0 01-20.124 4.897 43.765 43.765 0 01-20.213-4.897l3.962 1.78c-1.113-.445-2.226-.89-3.25-1.424l-.712-.356L91.143 793.377a44.522 44.522 0 01-24.353-39.624V244.87zm89 73.728v408.932l311.652 158.32V475.758L155.833 317.395zm712.347 0L556.53 475.76V884.69l311.652-158.319V317.395zM512.007 94.119L210.862 242.02l301.635 153.2 300.7-153.155-301.19-147.99z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源库v2",use:"icon-资源库v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-资源库v2"><defs><style></style></defs><path d="M128 768V298.667a85.333 85.333 0 0185.333-85.334H314.07a64 64 0 0146.166 19.627L463.36 340.395a64 64 0 0046.165 19.626h301.142A85.333 85.333 0 01896 445.355V768a85.333 85.333 0 01-85.333 85.333H213.333A85.333 85.333 0 01128 768z" fill="#767676" /><path d="M554.667 213.333h256q42.666 0 42.666 42.667t-42.666 42.667h-256Q512 298.667 512 256t42.667-42.667z" fill="#4E4E4E" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源库v2高亮",use:"icon-资源库v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-资源库v2高亮"><defs><style></style></defs><path d="M128 768V298.667a85.333 85.333 0 0185.333-85.334H314.07a64 64 0 0146.166 19.627L463.36 340.395a64 64 0 0046.165 19.626h301.142A85.333 85.333 0 01896 445.355V768a85.333 85.333 0 01-85.333 85.333H213.333A85.333 85.333 0 01128 768z" fill="#4388FF" /><path d="M554.667 213.333h256q42.666 0 42.666 42.667t-42.666 42.667h-256Q512 298.667 512 256t42.667-42.667z" fill="#9EC2FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源未选中",use:"icon-资源未选中-usage",viewBox:"0 0 17 17",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" id="icon-资源未选中"><circle cx="7.5" cy="7.5" r="7.5" transform="translate(1 1)" fill="#000" stroke="silver" fill-rule="evenodd" fill-opacity=".396" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源管理删除",use:"icon-资源管理删除-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="icon-资源管理删除"><g fill="none" fill-rule="evenodd"><path stroke="#FFF" stroke-width="2" stroke-linecap="round" d="M6.667 2.917h6.666M15.417 6.667l-.903 9.47c0 .522-.404.946-.903.946H6.39c-.499 0-.903-.424-.903-.947l-.903-9.47" /><path d="M11.667 10v3.333m-3.334 0V10" stroke="#FFF" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path stroke="#FFF" stroke-width="2" stroke-linecap="round" d="M2.917 6.25h14.166" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源管理取消",use:"icon-资源管理取消-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="icon-资源管理取消"><g stroke-width="2" stroke="#FFF" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><g fill-rule="nonzero"><path d="M4.167 4.167l5.837 5.837M15.833 4.167L4.167 15.833" /></g><path d="M15.833 15.833L12.5 12.5" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-资源选中",use:"icon-资源选中-usage",viewBox:"0 0 17 17",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 17 17" id="icon-资源选中"><g transform="translate(1 1)" stroke="#FFF" fill="none" fill-rule="evenodd"><circle fill="#4388FF" cx="7.5" cy="7.5" r="7.5" /><path stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round" d="M10.875 5.25l-4.422 5.038-2.198-2.154" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道不可见",use:"icon-轨道不可见-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道不可见"><defs><style></style></defs><path d="M700.032 154.453a32 32 0 0111.776 40.107l-2.261 4.139-2.048 3.114a32.256 32.256 0 00-2.987 3.968L279.851 864.043a32 32 0 01-52.992-34.56l2.261-4.182 86.315-133.76c-56.235-37.376-112.683-90.538-169.43-159.146a32 32 0 010-40.79C269.1 342.741 390.827 266.667 512 266.667c23.893 0 47.83 2.986 71.808 8.874l71.979-111.573a32 32 0 0144.245-9.515zm177.963 337.152a32 32 0 010 40.79C754.9 681.259 633.173 757.333 512 757.333c-26.667 0-53.333-3.669-80.043-11.008l68.864-106.794a128 128 0 00122.752-190.294l78.166-121.216c58.496 37.547 117.205 92.16 176.256 163.584zM513.749 384H512a128 128 0 00-115.883 182.443L513.75 384z" fill="#8E8F92" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道主题",use:"icon-轨道主题-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道主题"><defs><style></style></defs><path d="M564.907 762.965l287.658.214c35.755 0 64.768 25.856 64.768 57.77 0 30.038-25.685 54.699-58.538 57.515l-6.23.256-333.696-.256c-35.797 0 30.678-115.499 45.995-115.499z" /><path d="M492.715 106.667a386.048 386.048 0 110 772.053 386.048 386.048 0 010-772.053zm0 456.234a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56zM317.227 387.413a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56zm350.933 0a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56zM492.715 211.968a105.301 105.301 0 100 210.56 105.301 105.301 0 000-210.56z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道可见",use:"icon-轨道可见-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道可见"><defs><style></style></defs><path d="M512 266.667c121.173 0 242.901 76.074 365.995 224.938a32 32 0 010 40.79C754.9 681.259 633.173 757.333 512 757.333S269.099 681.26 146.005 532.395a32 32 0 010-40.79C269.1 342.741 390.827 266.667 512 266.667zM512 384a128 128 0 100 256 128 128 0 000-256z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道字幕",use:"icon-轨道字幕-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道字幕"><defs><style></style></defs><path d="M745.472 138.667A140.032 140.032 0 01885.12 270.592l.213 7.936v466.944A139.99 139.99 0 01753.408 885.12l-7.936.213H278.528A139.99 139.99 0 01138.88 753.408l-.213-7.936V278.528A140.032 140.032 0 01270.592 138.88l7.936-.213h466.944zM679.979 288H344.064a56.021 56.021 0 00-5.76 111.701l5.76.299h111.957v298.667a56.021 56.021 0 00111.744 5.717l.299-5.717V400h111.957a56.021 56.021 0 005.76-111.701l-5.717-.299z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道效果",use:"icon-轨道效果-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道效果"><defs><style></style></defs><path d="M738.816 149.333a135.979 135.979 0 01135.85 135.851v453.632a135.979 135.979 0 01-135.85 135.85H285.184a135.979 135.979 0 01-135.85-135.85V285.184a135.979 135.979 0 01135.85-135.85zm-25.173 382.294l-3.371.128a19.2 19.2 0 00-16.47 14.421l-25.13 100.267-64.043 22.144-3.242 1.45a19.2 19.2 0 00-8.747 10.624l-.768 3.371-.213 3.37a19.2 19.2 0 0013.141 17.494l63.616 21.205 25.088 100.352 1.195 3.328a19.2 19.2 0 0012.928 10.667l3.413.555 3.413-.128a19.2 19.2 0 0016.342-14.507l24.106-99.883 64.086-21.29 3.285-1.451a19.2 19.2 0 008.917-10.88l.768-3.37.128-3.371a19.2 19.2 0 00-13.269-17.408l-61.227-19.798-26.581-102.869-1.152-3.285a19.2 19.2 0 00-12.8-10.539l-3.413-.555zm-236.544-47.488l-2.902.426a14.933 14.933 0 00-11.264 12.032l-13.141 79.019-43.947 11.392-2.986 1.11a14.933 14.933 0 00-7.766 9.727l-.426 2.987.17 2.901a14.933 14.933 0 0011.136 12.203l43.691 10.88 13.141 78.805.854 3.03a14.933 14.933 0 0011.52 9.258l2.986.171 2.944-.427a14.933 14.933 0 0011.179-12.117l12.672-78.55 43.776-10.922 3.072-1.152a14.933 14.933 0 007.808-9.813l.427-2.987-.214-2.944a14.933 14.933 0 00-11.221-12.117l-42.41-10.24-13.782-80.299-.853-2.987a14.933 14.933 0 00-11.435-9.216l-2.987-.17zM605.61 352l-2.944.299a14.933 14.933 0 00-11.648 11.69l-12.416 62.038-44.758 11.648-2.986 1.109a14.933 14.933 0 00-7.766 9.728l-.426 2.987.17 2.901a14.933 14.933 0 0011.136 12.203l44.502 11.136 12.416 61.952.853 2.858a14.933 14.933 0 0010.965 8.875l2.987.299 2.944-.342a14.933 14.933 0 0011.563-11.776l11.946-61.781 44.544-11.093 3.115-1.152a14.933 14.933 0 007.808-9.814l.427-2.986-.214-2.944a14.933 14.933 0 00-11.221-12.118l-43.221-10.453-13.099-63.36-.853-2.816a14.933 14.933 0 00-10.838-8.79l-2.986-.298z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道视频",use:"icon-轨道视频-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道视频"><defs><style></style></defs><path d="M149.333 362.667h725.334v298.666H149.333V362.667zm554.667 512v-128h170.453a136.021 136.021 0 01-127.957 127.786l-7.68.214H704zm0-725.334h34.816a136.021 136.021 0 01135.637 128H704v-128zm-85.333 0v128h-192v-128h192zm-192 725.334v-128h192v128h-192zm-277.12-597.334a136.021 136.021 0 01127.957-127.786l7.68-.214h56.15v128H149.546zm0 469.334h191.786v128h-56.149c-48.213 0-93.397-42.667-135.637-128z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道贴纸",use:"icon-轨道贴纸-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道贴纸"><defs><style></style></defs><path d="M512 128a384 384 0 110 768 384 384 0 010-768zm2.048 418.133c-68.95-.341-138.581 9.387-138.581 29.27C375.339 653.44 436.48 716.8 511.915 716.8c75.52 0 136.618-63.36 136.618-141.397 0-19.2-66.986-29.014-134.485-29.27zm-138.581-204.8a68.267 68.267 0 100 136.534 68.267 68.267 0 000-136.534zm273.066 0a68.267 68.267 0 100 136.534 68.267 68.267 0 000-136.534z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道音乐",use:"icon-轨道音乐-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道音乐"><defs><style></style></defs><path d="M794.539 111.744a54.784 54.784 0 0166.218 48.768l.171 4.693v474.582a54.741 54.741 0 01-109.227 5.29l-.256-5.29-.042-406.614-328.534 71.552V735.19c0 28.459-21.674 51.84-49.493 54.486l-5.248.256a54.741 54.741 0 01-54.485-49.494l-.256-5.248V260.651c0-24.022 15.616-45.056 38.186-52.182l4.907-1.322 438.059-95.403z" /><path d="M124.194 843.52a127.744 164.267 60 10284.518-164.267A127.744 164.267 60 10124.194 843.52zM562.637 759.381a127.744 164.267 60 10284.518-164.266A127.744 164.267 60 10562.637 759.38z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-轨道音量",use:"icon-轨道音量-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-轨道音量"><defs><style></style></defs><path d="M504.704 287.744a19.285 19.285 0 00-14.123 4.395L348.928 410.112h-67.2a36.352 36.352 0 00-36.437 36.437v103.979a36.352 36.352 0 0036.437 36.437h67.115L490.496 704.94a19.328 19.328 0 0031.744-14.848V306.987c0-4.523-1.579-8.875-17.579-19.243zM618.155 356.736a32 32 0 0145.184-2.56 192.64 192.64 0 0165.152 144.17 192.853 192.853 0 01-68.992 147.5 32 32 0 11-41.387-48.854 128.853 128.853 0 0046.379-98.645c0-37.12-16-71.68-43.776-96.427a32 32 0 01-2.56-45.184z" /><path d="M700.075 290.56a32 32 0 0145.184-2.56 281.173 281.173 0 0195.146 210.432c0 83.712-37.248 161.536-100.778 215.296a32 32 0 11-41.344-48.81c49.365-41.814 78.08-101.889 78.08-166.486a217.216 217.216 0 00-73.728-162.688 32 32 0 01-2.56-45.184z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-转场",use:"icon-转场-usage",viewBox:"0 0 28 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 28 30" id="icon-转场"><defs><filter x="-30%" y="-27.3%" width="160%" height="154.5%" filterUnits="objectBoundingBox" id="icon-转场_a"><feOffset in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.456157124 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon-转场_b" x="0" y="0" width="20" height="22" rx="6" /></defs><g fill="none" fill-rule="evenodd"><g transform="translate(4 4)"><use fill="#000" filter="url(#icon-转场_a)" xlink:href="#icon-转场_b" /><use fill="#FFF" xlink:href="#icon-转场_b" /></g><path d="M9.683 10.683l4.034 4.034a.4.4 0 010 .566l-4.034 4.034A.4.4 0 019 19.034v-8.068a.4.4 0 01.683-.283zM18.317 10.683l-4.034 4.034a.4.4 0 000 .566l4.034 4.034a.4.4 0 00.683-.283v-8.068a.4.4 0 00-.683-.283z" fill="#555966" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-转场v2",use:"icon-转场v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-转场v2"><defs><style></style></defs><path d="M778.837 85.333a160 160 0 01159.83 159.83v533.674a160 160 0 01-159.83 159.83H245.163a160 160 0 01-159.83-159.83V245.163a160 160 0 01159.83-159.83zm-480.17 213.334A42.667 42.667 0 00256 341.333v341.334a42.667 42.667 0 0073.77 29.226l176.897-188.202a17.067 17.067 0 000-23.382L329.77 312.15a42.667 42.667 0 00-31.104-13.482z" fill="#767676" /><path d="M694.23 312.107L517.332 500.309a17.067 17.067 0 000 23.382L694.23 711.85A42.667 42.667 0 00768 682.667V341.333a42.667 42.667 0 00-73.77-29.226z" fill="#4E4E4E" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-转场v2高亮",use:"icon-转场v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-转场v2高亮"><defs><style></style></defs><path d="M778.837 85.333c85.334 0 155.179 67.158 159.574 151.339l.256 8.49v533.675c0 85.334-67.115 155.179-151.339 159.574l-8.49.256H245.162A160 160 0 0185.589 787.328l-.256-8.49V245.162A160 160 0 01236.672 85.589l8.49-.256h533.675zm-480.17 213.334a42.667 42.667 0 00-42.368 37.674l-.299 4.992v341.334a42.667 42.667 0 0069.845 32.853l3.926-3.627 176.896-188.202a17.067 17.067 0 002.261-20.352l-2.261-3.03L329.77 312.15a42.667 42.667 0 00-31.104-13.482zm426.666 0a42.667 42.667 0 00-31.104 13.44L517.333 500.309a17.067 17.067 0 000 23.382L694.23 711.85A42.667 42.667 0 00768 682.667V341.333a42.667 42.667 0 00-42.667-42.666z" fill="#4388FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-转场选中",use:"icon-转场选中-usage",viewBox:"0 0 28 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 28 30" id="icon-转场选中"><defs><filter x="-30%" y="-27.3%" width="160%" height="154.5%" filterUnits="objectBoundingBox" id="icon-转场选中_a"><feOffset in="SourceAlpha" result="shadowOffsetOuter1"></feOffset><feGaussianBlur stdDeviation="2" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.456157124 0" in="shadowBlurOuter1"></feColorMatrix></filter><rect id="icon-转场选中_b" x="0" y="0" width="20" height="22" rx="6" /></defs><g fill="none" fill-rule="evenodd"><g transform="translate(4 4)"><use fill="#000" filter="url(#icon-转场选中_a)" xlink:href="#icon-转场选中_b" /><use fill="#4388FF" xlink:href="#icon-转场选中_b" /></g><path d="M9.683 10.683l4.034 4.034a.4.4 0 010 .566l-4.034 4.034A.4.4 0 019 19.034v-8.068a.4.4 0 01.683-.283zM18.317 10.683l-4.034 4.034a.4.4 0 000 .566l4.034 4.034a.4.4 0 00.683-.283v-8.068a.4.4 0 00-.683-.283z" fill="#FFF" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-重命名",use:"icon-重命名-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-重命名"><defs><style></style></defs><path d="M215.45 618.394l114.995 113.459a23.296 23.296 0 01-32.717 33.126L166.042 634.982a23.296 23.296 0 01-.052-33.075l491.367-486.86c41.42-40.91 107.98-41.677 148.838-1.332l114.79 113.306c41.063 40.448 40.295 106.7-1.28 147.763L396.955 892.211c-11.879 11.776-24.27 14.848-44.698 15.463H136.192a23.296 23.296 0 01-23.296-23.552l2.1-165.684a23.296 23.296 0 0146.591.615l-1.843 142.08h191.795c8.807-.256 11.623-.973 12.698-2.048l522.752-517.376c23.296-23.04 23.705-59.443 1.331-81.562L773.478 146.842c-22.528-22.272-59.955-21.812-83.456 1.33L215.45 618.395zM537.6510000000001 864.051h332.8q25.6 0 25.6 25.6v12.8q0 25.6-25.6 25.6h-332.8q-25.6 0-25.6-25.6v-12.8q0-25.6 25.6-25.6z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-静音",use:"icon-静音-usage",viewBox:"0 0 833 833",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 833 833" id="icon-静音"><path d="M550.3 122.1c-5.5 1-9.1 3-13 7.1-1.7 1.8-18.1 26.5-36.3 54.8-18.3 28.3-42.8 66.2-54.4 84.2L425.5 301l-.5-27.3c-.3-18.5-.9-27.9-1.7-29.3-2-3.4-11.7-10.4-14.6-10.4-1.4 0-3.8.5-5.2 1-1.5.6-28.7 22.7-60.6 49.3l-58 48.2-31.2.5c-30 .5-31.4.6-36.4 2.9-6.5 2.9-13.4 10.1-15.9 16.6-1.8 4.7-1.9 8.1-1.9 53s.1 48.3 1.9 53c2.5 6.5 9.4 13.7 15.9 16.6 5 2.3 6.1 2.4 36.1 2.7l30.8.3 8.8 7.3 8.9 7.3-23.8 36.9c-13.1 20.3-39 60.5-57.6 89.4-18.6 28.9-34.8 54-35.9 55.9-1.5 2.6-2 5.3-2.1 10.5 0 6.1.4 7.8 3.1 12.6 8.4 14.8 29.6 18.1 40.6 6.2 1.4-1.5 78.2-120.2 170.8-263.7 92.6-143.6 171-265.1 174.3-270 8.1-12.2 9.7-15.8 9.7-23 0-16.4-14.6-28.6-30.7-25.4zM580.8 247.9c-7.1 10.9-12.8 20.2-12.8 20.7s3.9 4.8 8.6 9.4c25.3 25 41.3 52.7 49.4 85.5 3.8 15.5 5 25.7 5 43 0 28.6-5.2 49.9-18.6 77-9.9 20.2-17.8 30.9-36 49.2-13.1 13.1-15.4 15.9-16.9 20.4-5.6 16.7 6.8 34 24.4 34.2 9.1.1 14.8-3.2 28.5-16.3 38-36.6 61.3-81.7 69.3-134 2.4-15.7 2.4-47.2-.1-63-6-39.6-20.6-74.9-44-106-10.1-13.6-30.6-34.3-36.9-37.5-2.8-1.4-5.6-2.5-6.1-2.5-.6 0-6.8 9-13.8 19.9z" /><path d="M546.7 300.7c-1.3 2.1-7.9 12.2-14.6 22.6-6.6 10.3-12.1 19-12.1 19.3 0 .4 2.1 3.9 4.6 7.9 6.1 9.9 11.2 22.7 13.6 34.4 1.6 7.8 1.9 12.2 1.5 23.6-.5 16.7-2.8 26.6-9.2 40.2-6.3 13.3-10.6 19.4-23.1 32.3-11.9 12.4-13.8 15.6-13.8 24.5 0 7.4 2.7 13.6 8.3 18.8 8.7 8.2 19.9 9.6 30.4 3.9 6.8-3.6 26.1-23.9 33.6-35.3 11.8-17.8 20.6-39.5 24.7-60.9 2.7-14.3 2.5-40-.4-54.8-5.7-28.5-18.7-55.2-36.9-75.6l-4.2-4.7-2.4 3.8zM403.2 523.2c-11.8 18.2-21.6 33.6-21.8 34.2-.5 1.2 11.7 12 19.3 17.2 3.3 2.2 4.6 2.5 9.6 2.2 4.9-.4 6.2-.9 9.2-3.8 2-1.9 4-5 4.6-7 .6-2.2.9-17.1.7-39.7l-.3-36.2-21.3 33.1z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐",use:"icon-音乐-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-音乐"><defs><style></style></defs><path d="M812.276 36.913l-442.124 74.752c-55.589 11.313-95.866 59.636-95.866 114.932v486.205a161.402 161.402 0 00-52.81-8.973C133.95 703.83 63 772.974 63 858.26c0 85.284 70.949 154.38 158.477 154.38 87.137 0 157.793-68.56 158.427-153.308v-619.91c0-6.827 5.022-12.776 10.094-13.848l442.075-74.655a19.115 19.115 0 0123.308 18.432v414.671a161.402 161.402 0 00-52.858-8.972c-87.478 0-158.476 69.145-158.476 154.43 0 85.284 70.998 154.38 158.476 154.38 87.187 0 157.843-68.56 158.477-153.308V156.477c0-36.864-16.823-71.29-46.08-94.5a126.293 126.293 0 00-102.644-25.064z" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐v2",use:"icon-音乐v2-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-音乐v2"><defs><style></style></defs><path d="M820.224 75.35a59.733 59.733 0 0172.235 53.247l.213 5.12v517.675a59.733 59.733 0 01-119.21 5.76l-.257-5.76-.042-443.563-358.4 78.08V755.5a59.733 59.733 0 01-53.888 59.434l-5.76.299a59.733 59.733 0 01-59.478-54.016l-.256-5.717V237.78c0-26.197 17.067-49.109 41.643-56.917l5.376-1.45L820.267 75.348z" fill="#767676" /><path d="M88.947 873.643a139.392 179.2 60 10310.383-179.2 139.392 179.2 60 10-310.383 179.2zM567.24 781.91a139.392 179.2 60 10310.384-179.2 139.392 179.2 60 10-310.384 179.2z" fill="#767676" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐v2高亮",use:"icon-音乐v2高亮-usage",viewBox:"0 0 1024 1024",content:'<symbol class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" id="icon-音乐v2高亮"><defs><style></style></defs><path d="M820.224 75.35a59.733 59.733 0 0172.235 53.247l.213 5.12v517.675a59.733 59.733 0 01-119.21 5.76l-.257-5.76-.042-443.563-358.4 78.08V755.5a59.733 59.733 0 01-53.888 59.434l-5.76.299a59.733 59.733 0 01-59.478-54.016l-.256-5.717V237.78c0-26.197 17.067-49.109 41.643-56.917l5.376-1.45L820.267 75.348z" fill="#4388FF" /><path d="M88.947 873.643a139.392 179.2 60 10310.383-179.2 139.392 179.2 60 10-310.383 179.2zM567.24 781.91a139.392 179.2 60 10310.384-179.2 139.392 179.2 60 10-310.384 179.2z" fill="#4388FF" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-取消",use:"icon-音乐踩点-取消-usage",viewBox:"0 0 22 22",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="icon-音乐踩点-取消"><g fill-rule="nonzero" stroke="#FFF" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"><path d="M4.583 4.583l6.422 6.422M17.417 4.583L4.583 17.417M17.417 17.417L13.75 13.75" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-右箭头",use:"icon-音乐踩点-右箭头-usage",viewBox:"0 0 22 9",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 9" id="icon-音乐踩点-右箭头"><path d="M17.22.22a.75.75 0 00-.073.976l.073.084 2.219 2.22H4.105a2 2 0 100 1.501L19.438 5l-2.22 2.22a.75.75 0 00-.072.976l.073.084a.75.75 0 00.976.073l.084-.073 3.5-3.5a.75.75 0 00.073-.976l-.073-.084-3.5-3.5a.75.75 0 00-1.06 0z" fill="#FFF" fill-rule="nonzero" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-完成",use:"icon-音乐踩点-完成-usage",viewBox:"0 0 22 22",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 22" id="icon-音乐踩点-完成"><path d="M19.25 5.5L8.44 17.815 3.069 12.55" fill-rule="nonzero" stroke="#FFF" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-左箭头",use:"icon-音乐踩点-左箭头-usage",viewBox:"0 0 22 9",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 22 9" id="icon-音乐踩点-左箭头"><path d="M5.03.22a.75.75 0 01.073.976l-.073.084L2.811 3.5h15.334a2 2 0 110 1.501L2.812 5l2.22 2.22a.75.75 0 01.072.976l-.073.084a.75.75 0 01-.976.073L3.97 8.28l-3.5-3.5a.75.75 0 01-.073-.976L.47 3.72l3.5-3.5a.75.75 0 011.06 0z" fill="#FFF" fill-rule="nonzero" /></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-播放",use:"icon-音乐踩点-播放-usage",viewBox:"0 0 23 23",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 23 23" id="icon-音乐踩点-播放"><g fill="none" fill-rule="evenodd"><path fill="none" d="M0 0h23v23H0z" /><path d="M17.768 12.779L7.405 19.216a2 2 0 01-3.055-1.699V4.642a2 2 0 013.055-1.698L17.768 9.38a2 2 0 010 3.398z" fill="#FFF" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-暂停",use:"icon-音乐踩点-暂停-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="icon-音乐踩点-暂停"><g fill="none" fill-rule="evenodd"><path fill="none" d="M0 0h20v20H0z" /><g transform="translate(4 2)" fill="#FFF"><rect width="3" height="16" rx="1.5" /><rect x="9" width="3" height="16" rx="1.5" /></g></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-白色",use:"icon-音乐踩点-白色-usage",viewBox:"0 0 30 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" id="icon-音乐踩点-白色"><g fill="none" fill-rule="evenodd"><path fill="none" d="M0 0h30v30H0z" /><path d="M19.124 3.191c.26.113.497.274.697.475l5.893 5.898a2.25 2.25 0 01-.68 3.648l-2.089.924-3.917 3.922-.31 4.314a2.25 2.25 0 01-3.836 1.429l-3.804-3.808-6.482 6.512L3 24.918l6.486-6.516-3.935-3.939a2.25 2.25 0 011.424-3.834l4.437-.331 3.848-3.852.903-2.085a2.25 2.25 0 012.96-1.17zm-.895 2.065l-1.074 2.477-4.74 4.747-5.272.393 9.33 9.337.371-5.15 4.806-4.811 2.473-1.095-5.894-5.898z" fill="#FFF" fill-rule="nonzero" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点-白色删除",use:"icon-音乐踩点-白色删除-usage",viewBox:"0 0 30 30",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 30 30" id="icon-音乐踩点-白色删除"><g fill="none" fill-rule="evenodd" stroke-linecap="round" stroke="#FFF" stroke-width="2"><path d="M10.429 5.286h9.142M23 10.429l-1.333 13.506c0 .746-.597 1.35-1.334 1.35H9.667a1.342 1.342 0 01-1.334-1.35L7 10.43" /><path d="M16.829 15v4.571m-3.658 0V15" stroke-linejoin="round" /><path d="M4.714 9.857h20.572" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);var n=i(1),a=i.n(n),r=i(2),s=i.n(r),o=new a.a({id:"icon-音乐踩点",use:"icon-音乐踩点-usage",viewBox:"0 0 20 20",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="icon-音乐踩点"><g fill="none" fill-rule="evenodd"><path fill="none" d="M0 0h20v20H0z" /><path d="M13.038 2.126c.178.077.34.187.477.324l4.035 4.016a1.527 1.527 0 01-.467 2.483l-1.43.63-2.68 2.67-.214 2.937a1.533 1.533 0 01-.998 1.325c-.565.21-1.201.072-1.627-.352l-2.605-2.593L3.092 18 2 16.919l4.44-4.436L3.746 9.8a1.526 1.526 0 01-.354-1.616 1.54 1.54 0 011.33-.994l3.037-.226 2.634-2.622.619-1.42c.162-.373.467-.666.847-.816.38-.15.804-.142 1.179.02zm-.613 1.406L11.69 5.22 8.445 8.45l-3.61.267 6.388 6.358.254-3.506 3.29-3.277 1.693-.745-4.035-4.016z" fill="#8F9196" fill-rule="nonzero" /></g></symbol>'});s.a.add(o);e.default=o},function(t,e,i){"use strict";i.r(e);i(1273);var n=i(0),a=Object(n.a)({},function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"transition-drag-body"})},[],!1,null,"eb401f56",null);e.default=a.exports}],[[895,1,2]]]);
//# sourceMappingURL=0.bs-editor.a517da3bd258db9b95dd6b0151d20b339684b52f.js.map